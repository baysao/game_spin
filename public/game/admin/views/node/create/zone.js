define([], function () {
  var scope;
  var _svg = `
<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect width="64" height="64" rx="12" fill="#EB5757"/>
<path d="M16.6581 24.0977L16.3994 24.8605C16.2602 25.2703 16.0451 25.6503 15.7653 25.9805L15.5906 26.1861C15.4386 26.3651 15.3287 26.576 15.2692 26.8032C15.2097 27.0304 15.2021 27.2681 15.2469 27.4986L15.5078 28.8352C15.5338 28.9679 15.6047 29.0876 15.7085 29.1742L16.306 29.6724C16.3807 29.7342 16.4389 29.8135 16.4755 29.9033C16.5121 29.9931 16.5259 30.0906 16.5156 30.187L16.375 31.4683C16.3514 31.6837 16.3728 31.9017 16.4378 32.1084C16.5028 32.3152 16.6101 32.5061 16.7528 32.6692L17.0053 32.958C17.1387 33.1106 17.3179 33.216 17.5162 33.2582C17.7145 33.3004 17.9211 33.2772 18.105 33.192L19.71 32.4514C19.7889 32.4151 19.8748 32.3966 19.9616 32.3974C20.0484 32.3981 20.134 32.4181 20.2122 32.4559C20.2904 32.4936 20.3592 32.5482 20.4138 32.6158C20.4684 32.6833 20.5073 32.7621 20.5278 32.8464L20.6691 33.427C20.691 33.517 20.7338 33.6004 20.7941 33.6707C20.8543 33.741 20.9303 33.796 21.0158 33.8314C21.1014 33.8668 21.194 33.8815 21.2863 33.8743C21.3786 33.8671 21.4679 33.8383 21.5469 33.7902L23.2656 32.7417C23.3868 32.6682 23.4897 32.5681 23.5666 32.4491C23.6435 32.33 23.6924 32.1951 23.7096 32.0544C23.7269 31.9137 23.712 31.7709 23.6661 31.6368C23.6202 31.5027 23.5445 31.3808 23.4447 31.2802L22.3885 30.212C22.2638 30.0857 22.1058 29.9973 21.9329 29.9572C21.7599 29.9171 21.5792 29.9269 21.4116 29.9855L21.1616 30.0727C21.0484 30.1122 20.9258 30.1161 20.8103 30.084C20.6948 30.0519 20.5919 29.9852 20.5153 29.893L19.8869 29.1364C19.8264 29.0637 19.7843 28.9774 19.7643 28.8849C19.7442 28.7924 19.7467 28.6965 19.7716 28.6052L19.9553 27.9277C20.0077 27.7337 20.121 27.5617 20.2786 27.4371C20.4361 27.3124 20.6295 27.2416 20.8303 27.2352L21.6741 27.2064C21.742 27.2042 21.8097 27.2137 21.8744 27.2345L23.9881 27.9155C24.0779 27.9444 24.1593 27.9945 24.2257 28.0615C24.292 28.1285 24.3413 28.2105 24.3694 28.3005L24.565 28.9286C24.87 29.9074 25.4106 30.7963 26.1394 31.5174L26.605 31.9777C26.6607 32.0328 26.7268 32.0761 26.7994 32.1053C26.8721 32.1344 26.9499 32.1487 27.0281 32.1474L27.3331 32.1424C27.4701 32.1399 27.6059 32.1674 27.731 32.223C27.8561 32.2786 27.9676 32.361 28.0575 32.4643C28.1474 32.5676 28.2136 32.6893 28.2514 32.8209C28.2892 32.9525 28.2977 33.0909 28.2763 33.2261L28.1691 33.9099C28.1149 34.2558 28.1095 34.6077 28.1528 34.9552L28.4297 37.1774C28.4422 37.2788 28.481 37.3752 28.5422 37.457L29.3506 38.5377C29.41 38.617 29.4884 38.6801 29.5786 38.721C29.6689 38.7619 29.768 38.7794 29.8668 38.7718C29.9656 38.7642 30.0608 38.7318 30.1437 38.6775C30.2266 38.6232 30.2945 38.5489 30.341 38.4614L31.25 36.7533C31.2903 36.6774 31.3136 36.5937 31.3181 36.5079C31.3225 36.4221 31.3082 36.3364 31.276 36.2567L30.8522 35.2102C30.7958 35.0704 30.7951 34.9144 30.8503 34.7742C30.9054 34.634 31.0123 34.5202 31.1488 34.4564L32.4081 33.8686C32.5268 33.8135 32.6236 33.7203 32.6831 33.6039L33.1541 32.6842C33.2519 32.4928 33.4126 32.3407 33.6091 32.2536C33.8057 32.1665 34.0262 32.1496 34.2338 32.2058L35.3163 32.4974C35.4409 32.5312 35.5509 32.6052 35.6293 32.7078C35.7077 32.8104 35.7501 32.936 35.75 33.0652V34.2864C35.7501 34.4246 35.7987 34.5583 35.8875 34.6641C35.9762 34.77 36.0993 34.8413 36.2353 34.8655L37.1681 35.0314C37.3129 35.0571 37.4427 35.1361 37.5322 35.2527C37.6216 35.3694 37.6641 35.5153 37.6513 35.6617L37.5678 36.6105C37.5406 36.9227 37.6313 37.2338 37.8222 37.4824L38.6253 38.5286C38.6594 38.5727 38.6995 38.6118 38.7444 38.6449L39.6416 39.3011C39.7293 39.3653 39.833 39.404 39.9413 39.4128C40.0496 39.4216 40.1583 39.4003 40.2552 39.3511C40.3521 39.3019 40.4335 39.2269 40.4903 39.1343C40.5472 39.0416 40.5772 38.9351 40.5772 38.8264V38.337C40.5773 38.0866 40.5022 37.8418 40.3616 37.6345L39.7991 36.8033C39.7186 36.6845 39.6844 36.5405 39.7027 36.3982C39.7211 36.2559 39.7908 36.1252 39.8988 36.0308L40.0756 35.8745C40.1614 35.7994 40.2672 35.7508 40.3801 35.7347C40.4931 35.7186 40.6082 35.7357 40.7116 35.7839C40.8386 35.8433 40.9826 35.8553 41.1176 35.8178C41.2527 35.7803 41.3699 35.6958 41.4481 35.5795L42.0147 34.7383C42.0739 34.65 42.1081 34.5472 42.1136 34.441C42.1191 34.3349 42.0957 34.2291 42.046 34.1352L41.7681 33.6089C41.6887 33.4582 41.5792 33.3253 41.4464 33.2184C41.3137 33.1115 41.1605 33.0329 40.9963 32.9874L40.6394 32.888C40.5141 32.8532 40.4038 32.7778 40.3259 32.6736C40.248 32.5695 40.2068 32.4424 40.2088 32.3124L40.2288 31.0311C40.23 30.952 40.2471 30.874 40.2792 30.8016C40.3113 30.7293 40.3576 30.6642 40.4154 30.6102C40.4733 30.5563 40.5414 30.5145 40.6158 30.4875C40.6901 30.4605 40.7691 30.4487 40.8481 30.453L42.5003 30.5411C42.7038 30.5524 42.9069 30.5139 43.0921 30.4287C43.2772 30.3436 43.4387 30.2145 43.5625 30.0527L44.3791 28.9861C44.5919 28.7081 44.735 28.383 44.7963 28.0383L44.9797 27.0052C45.0328 26.7073 44.9983 26.4004 44.8803 26.1217L44.3988 24.9839C44.3099 24.7732 44.1471 24.6021 43.9409 24.5031C43.7347 24.404 43.4995 24.3838 43.2794 24.4461L42.9266 24.5455C42.8498 24.5672 42.7694 24.573 42.6903 24.5627C42.6112 24.5523 42.535 24.5259 42.4664 24.4852C42.3979 24.4444 42.3383 24.3901 42.2913 24.3256C42.2444 24.2611 42.2111 24.1877 42.1935 24.1099L41.9547 23.062C41.9325 22.9652 41.9352 22.8643 41.9625 22.7688C41.9898 22.6733 42.0409 22.5862 42.111 22.5158L42.6825 21.9442C42.7739 21.8532 42.8927 21.7947 43.0206 21.7777C43.1485 21.7608 43.2784 21.7864 43.3903 21.8505L44.4672 22.4658C44.5329 22.5033 44.6053 22.5279 44.6803 22.538L45.4656 22.6442C45.5549 22.6563 45.6458 22.6476 45.7312 22.619C45.8167 22.5904 45.8944 22.5425 45.9584 22.4791C46.0224 22.4157 46.071 22.3385 46.1004 22.2533C46.1299 22.1682 46.1393 22.0774 46.1281 21.988L45.9013 20.1733C45.89 20.0827 45.8577 19.996 45.807 19.9201C45.7564 19.8441 45.6887 19.781 45.6094 19.7358L44.4935 19.098C44.3678 19.0262 44.273 18.9106 44.2272 18.7733L43.9116 17.8267C43.8251 17.5668 43.6719 17.3341 43.4671 17.152C43.2624 16.97 43.0133 16.845 42.745 16.7895L40.6366 16.352C40.5529 16.3347 40.4665 16.3359 40.3834 16.3553C40.3002 16.3748 40.2223 16.4121 40.155 16.4647C40.0877 16.5173 40.0326 16.5839 39.9937 16.6599C39.9547 16.7359 39.9328 16.8195 39.9294 16.9049L39.8756 18.2752C39.8705 18.416 39.8151 18.5502 39.7194 18.6536L38.25 20.2258C38.1721 20.3094 38.0714 20.3685 37.9604 20.3958C37.8494 20.4231 37.7329 20.4174 37.625 20.3795L36.5156 19.9908C36.135 19.8575 35.7301 19.8075 35.3285 19.8442C34.9268 19.8809 34.5377 20.0035 34.1875 20.2036L33.1078 20.8208C33.014 20.8743 32.9072 20.901 32.7991 20.898C32.6911 20.8949 32.586 20.8621 32.4953 20.8033L31.4541 20.1264C31.3124 20.0342 31.1535 19.9717 30.987 19.9426C30.8205 19.9136 30.6499 19.9186 30.4853 19.9574L30.0166 20.068C29.872 20.102 29.72 20.08 29.5909 20.0065C29.4619 19.933 29.3655 19.8134 29.321 19.6717L29.0985 18.9639C29.0664 18.862 29.0072 18.7708 28.9272 18.7C28.8472 18.6292 28.7494 18.5815 28.6444 18.562L26.0244 18.0767C25.8324 18.041 25.634 18.0661 25.457 18.1486C25.2799 18.2311 25.1331 18.3668 25.0369 18.5367L24.5938 19.3199C24.5357 19.422 24.5097 19.5393 24.5191 19.6564L24.5503 20.0724C24.5573 20.1608 24.5442 20.2496 24.512 20.3322C24.4798 20.4148 24.4293 20.4891 24.3644 20.5494C24.2994 20.6098 24.2217 20.6547 24.1369 20.6808C24.0522 20.7069 23.9627 20.7135 23.875 20.7002L23.3697 20.6224C23.2927 20.6105 23.2141 20.6141 23.1385 20.6329C23.0628 20.6517 22.9917 20.6853 22.9292 20.7318C22.8667 20.7784 22.814 20.8368 22.7743 20.9039C22.7346 20.9709 22.7086 21.0452 22.6978 21.1224L22.5313 22.2999C22.5101 22.4514 22.5487 22.6052 22.6388 22.7289L22.9513 23.1564C23.0158 23.2448 23.0544 23.3494 23.0628 23.4584C23.0712 23.5675 23.049 23.6767 22.9988 23.7739L22.4675 24.7992C22.4258 24.88 22.3659 24.95 22.2925 25.0037C22.2192 25.0574 22.1344 25.0934 22.0448 25.1088C21.9551 25.1242 21.8632 25.1187 21.7761 25.0925C21.689 25.0664 21.6092 25.0205 21.5428 24.9583L20.6606 24.1314C20.5877 24.063 20.5334 23.9771 20.5029 23.8818C20.4724 23.7866 20.4667 23.6851 20.4863 23.587L20.62 22.9183C20.6353 22.8418 20.6352 22.7631 20.6198 22.6866C20.6044 22.6102 20.574 22.5376 20.5303 22.473L19.4303 20.848C19.3608 20.7455 19.2607 20.6675 19.1443 20.6252C19.0278 20.5829 18.901 20.5784 18.7819 20.6124L17.9247 20.8574C17.7891 20.8963 17.644 20.8852 17.516 20.8261L16.2716 20.2495C16.0233 20.1348 15.7493 20.0871 15.4768 20.1112C15.2044 20.1354 14.943 20.2305 14.7188 20.387L14.5891 20.4777C14.3983 20.6111 14.2639 20.8106 14.2119 21.0376C14.16 21.2645 14.1941 21.5026 14.3078 21.7058L14.7722 22.5358C14.8334 22.646 14.9283 22.7337 15.0431 22.7858L16.3438 23.3727C16.4768 23.4329 16.5828 23.5405 16.6409 23.6745C16.699 23.8085 16.7051 23.9594 16.6581 24.0977Z" fill="white"/>
</svg>`;
  var _zone = function (_prop, _data) {
    var _cu_val = (_data.cu_available * 100) / _data.cu_max;
    console.log(_cu_val);
    var _ui = {
      rows: [
        {
          template:
            `
  <div class="flex_tmp">
  <div class="flex_tmp1">
  <div class="flag">` +
            _svg +
            `
  </div>
  <div class="apr">
  <span class="zone_name">` +
            _data.name +
            `</span>
  <span class="zone_apr"><span class="zone_apr_val">` +
            _data.apr +
            `</span> % APR</span>
  </div>
  </div>

  <div class="select webix_primary">
  <a href="/gateway/#!/app/node.create/$zone:z=` +
            _data.id +
            `" view_id="zone_` +
            _data.id +
            `" role="button" class="webix_button webix_img_btn" style="line-height:32px;"></span>Select</a>
  </div>
  </div>
  `,
        },
        {
          view: "slider",
          label: "Inventory",
          value: _cu_val,
          name: "s3",
          title: webix.template(
            _data.cu_available + "/" + _data.cu_max + " CU Available"
          ),
          moveTitle: false,
        },
      ],
    };
    return Object.assign(_ui, _prop);
  };
    var _country = function (_zone_name, _prop, _data) {
    var _cu_val = (_data.cu_available * 100) / _data.cu_max;
    console.log(_cu_val);
    var _ui = {
      rows: [
        {
          template:
            `
  <div class="flex_tmp">
  <div class="flex_tmp1">
  <div class="flag">` +
            _svg +
            `
  </div>
  <div class="apr">
  <span class="zone_name">` +
            _data.name +
            `</span>
  <span class="zone_apr"><span class="zone_apr_val">` +
            _data.apr +
            `</span> % APR</span>
  </div>
  </div>

  <div class="select webix_primary">
  <a href="/gateway/#!/app/node.create/$new:z=` + _zone_name + ":c=" + 
            _data.id +
            `" view_id="zone_` +
            _data.id +
            `" role="button" class="webix_button webix_img_btn" style="line-height:32px;"></span>Select</a>
  </div>
  </div>
  `,
        },
        {
          view: "slider",
          label: "Inventory",
          value: _cu_val,
          name: "s3",
          title: webix.template(
            _data.cu_available + "/" + _data.cu_max + " CU Available"
          ),
          moveTitle: false,
        },
      ],
    };
    return Object.assign(_ui, _prop);
  };
  var _zone_data = [
    { id: "AS", name: "Asia", cu_available: 20, cu_max: 100, apr: 14 },
    {
      id: "OC",
      name: "Oceania",
      cu_available: 20,
      cu_max: 100,
      apr: 14,
    },
    { id: "AF", name: "Africa", cu_available: 20, cu_max: 100, apr: 14 },
    { id: "EU", name: "Europe", cu_available: 20, cu_max: 100, apr: 14 },
    {
      id: "NA",
      name: "North America",
      cu_available: 20,
      cu_max: 100,
      apr: 14,
    },
    {
      id: "SA",
      name: "South America",
      cu_available: 20,
      cu_max: 100,
      apr: 14,
    },
  ];
  var _country_data = {
    AS: [
      {
        id: "AF",
        name: "Afghanistan",
        cu_available: 20,
        cu_max: 100,
        apr: 14,
      },
      {
        id: "AM",
        name: "Armenia",
        cu_available: 20,
        cu_max: 100,
        apr: 14,
      },
      {
        id: "HK",
        name: "Hong Kong",
        cu_available: 20,
        cu_max: 100,
        apr: 14,
      },
      {
        id: "IN",
        name: "India",
        cu_available: 20,
        cu_max: 100,
        apr: 14,
      },

      {
        id: "ID",
        name: "Indonesia",
        cu_available: 20,
        cu_max: 100,
        apr: 14,
      },
      {
        id: "IR",
        name: "Iran",
        cu_available: 20,
        cu_max: 100,
        apr: 14,
      },
    ],
  };
  var _select_country = function (_zone_name) {
      var _zone_data = _country_data[_zone_name];
    return {
      view: "gridlayout",
      gridColumns: 3,
      //    gridRows: 2,
      cells: [
          _country(_zone_name, { x: 0, y: 0, dx: 1, dy: 1 }, _zone_data[0]),
        _country(_zone_name, { x: 1, y: 0, dx: 1, dy: 1 }, _zone_data[1]),
        _country(_zone_name, { x: 2, y: 0, dx: 1, dy: 1 }, _zone_data[2]),
        _country(_zone_name, { x: 0, y: 1, dx: 1, dy: 1 }, _zone_data[3]),
        _country(_zone_name, { x: 1, y: 1, dx: 1, dy: 1 }, _zone_data[4]),
        _country(_zone_name, { x: 2, y: 1, dx: 1, dy: 1 }, _zone_data[5]),
      ],
    };
  };
  var _select_zone = {
    view: "gridlayout",
    gridColumns: 3,
    //    gridRows: 2,
    cells: [
      _zone({ x: 0, y: 0, dx: 1, dy: 1 }, _zone_data[0]),
      _zone({ x: 1, y: 0, dx: 1, dy: 1 }, _zone_data[1]),
      _zone({ x: 2, y: 0, dx: 1, dy: 1 }, _zone_data[2]),
      _zone({ x: 0, y: 1, dx: 1, dy: 1 }, _zone_data[3]),
      _zone({ x: 1, y: 1, dx: 1, dy: 1 }, _zone_data[4]),
      _zone({ x: 2, y: 1, dx: 1, dy: 1 }, _zone_data[5]),
    ],
  };
  var _layout_zone = {
    id: "layout_sub",
    rows: [
      {
        height: 49,
        id: "sub_title",
        css: "title",
        template:
          "<div class='header'>1. Select Zone</div><div class='details'>( Select zone to deploy your node )</div>",
      },
      _select_zone,
    ],
  };
  var _layout_country = function (_name) {
    return {
      id: "layout_sub",
      rows: [
        {
          cols: [
            {
              view: "button",
              autowidth: true,
              css: "webix_primary",
              label: "Back",
              type: "icon",
              icon: "mdi mdi-arrow-left",
              click: function () {
                scope.show("/$zone");
              },
            },
            {
              height: 49,
              id: "sub_title",
              css: "title",
              template:
                "<div class='header'>2. Select Country for Zone </div><div class='details'>( Select zone to deploy your node )</div>",
            },
          ],
        },

        _select_country(_name),
      ],
    };
  };
  var _layout = {
    id: "node_create",
    rows: [_layout_zone],
  };
  return {
    $ui: _layout,
    $onurlchange: function (_params) {
      console.log(_params);
      if (_params && _params.z) {
        webix.ui(
          _layout_country(_params.z),
          $$("node_create"),
          $$("layout_sub")
        );
      } else {
        webix.ui(_layout_zone, $$("node_create"), $$("layout_sub"));
      }
    },
    $oninit: function (_view, _scope) {
      scope = _scope;
    },
  };
});
