{"version":3,"file":"spreadsheet.js","sources":["../sources/locale.js","../sources/locales/en.js","../sources/views/align.js","../sources/views/border.js","../sources/views/color.js","../node_modules/@xbs/muon/dist/muon.js","../sources/mathematics/methods.js","../sources/views/date.js","../sources/views/dialog.js","../sources/views/form.js","../sources/views/formlate.js","../sources/views/icons.js","../sources/views/list_suggest.js","../sources/operations/undo_group.js","../sources/operations/save.js","../sources/helpers/column_names.js","../sources/toolbar/defaults.js","../sources/operations/styles.js","../sources/helpers/array.js","../sources/operations/formats.js","../sources/mathematics/parser.js","../sources/operations/types.js","../sources/views/suggest_formula.js","../sources/views/button.js","../sources/views/live_editor.js","../sources/views/separator.js","../sources/views/sheets.js","../sources/views/toggle.js","../sources/views/toolbar_title.js","../sources/views/multicheckbox.js","../sources/views/formlist.js","../sources/views/ui.js","../sources/views/series.js","../sources/views/bar.js","../sources/editors/date.js","../sources/editors/richselect.js","../sources/toolbar/actions.js","../sources/toolbar/buttons.js","../sources/toolbar/all_elements.js","../sources/toolbar.js","../sources/toolbar/helpers.js","../sources/operations/column_operations.js","../sources/operations/lock_cell.js","../sources/operations/spans.js","../sources/helpers/conditional.js","../sources/operations/conditional_formats.js","../sources/operations/data.js","../sources/sheets.js","../sources/operations/show_cells.js","../sources/table.js","../sources/hotkeys.js","../sources/editor.js","../sources/dialogs/common.js","../sources/mathematics/writer.js","../sources/dialogs/imagecell.js","../sources/dialogs/imagetop.js","../sources/operations/undo.js","../sources/operations/views.js","../sources/chart.js","../sources/dialogs/sparkline.js","../sources/dialogs/ranges.js","../sources/dialogs/dropdown.js","../sources/mathematics/ranges.js","../sources/operations/filter.js","../sources/dialogs/filter.js","../sources/dialogs/format.js","../sources/dialogs/conditional.js","../sources/dialogs/export.js","../sources/dialogs/link.js","../sources/operations/print.js","../sources/dialogs/print.js","../sources/dialogs/comments.js","../sources/dialogs/sizing.js","../sources/dialogs/index.js","../sources/operations/add_row_col.js","../sources/operations/dropdown.js","../sources/operations/clipboard.js","../sources/operations/hide_row_col.js","../sources/operations/resize.js","../sources/operations/selection.js","../sources/helpers/expand_selection.js","../sources/operations/sorting.js","../sources/mathematics/sheets.js","../sources/operations/hide_gridlines.js","../sources/operations/hide_headers.js","../sources/operations/comments.js","../sources/operations/show_formulas.js","../sources/operations/states.js","../sources/operations/import.js","../sources/operations/export.js","../sources/operations/load.js","../sources/operations/clear_styles.js","../sources/api/row_col_operations.js","../sources/api/lock_cell.js","../sources/api/freeze.js","../sources/api/hide_gridlines.js","../sources/api/hide_headers.js","../sources/api/hide_rows.js","../sources/api/math.js","../sources/api/operations.js","../sources/api/core.js","../sources/api/save.js","../sources/api/dropdown.js","../sources/api/filter.js","../sources/api/confirm.js","../sources/api/undo.js","../sources/api/number_formats.js","../sources/api/show_formulas.js","../sources/api/print.js","../sources/menu.js","../sources/spreadsheet.js","../sources/context.js","../sources/operations/index.js","../sources/api/index.js"],"sourcesContent":["import en from \"./locales/en\";\nwebix.i18n.spreadsheet = en;","export default {\n\tlabels:{\n\t\t// formats\n\t\t\"common\": \"Common\",\n\t\t\"currency\": \"Currency\",\n\t\t\"number\": \"Number\",\n\t\t\"percent\": \"Percent\",\n\t\t\"date\": \"Date\",\n\t\t\"string\": \"Text\",\n\t\t\"custom-format\": \"Custom\",\n\t\t\"decimal-places\":\"Decimal places\",\n\t\t\"separator\":\"Group separator\",\n\t\t\"negative\":\"Negative number\",\n\t\t\"currency-symbol\":\"Ð¡urrency\",\n\t\t\"date-format\":\"Date format\",\n\t\t\"format-docs\":\"How to create a format\",\n\t\t// titles\n\t\t\"undo-redo\": \"Undo/Redo\",\n\t\t\"font\": \"Font\",\n\t\t\"text\": \"Text\",\n\t\t\"cell\": \"Cell\",\n\t\t\"align\": \"Align\",\n\t\t\"format\": \"Number\",\n\t\t\"column\": \"Column\",\n\t\t\"borders\": \"Borders\",\n\t\t\"px\": \"px\",\n\t\t\"apply\": \"Apply\",\n\t\t// popups and dialogs\n\t\t\"cancel\": \"Cancel\",\n\t\t\"save\": \"Save\",\n\t\t// multisheets\n\t\t\"sheet\": \"Sheet\",\n\t\t// conditions\n\t\t\"conditional-format\": \"Conditional Format\",\n\t\t\"condition\": \"Condition\",\n\t\t\"conditional-style\": \"Style\",\n\t\t\"conditional-operator\": \"Operator\",\n\t\t\"conditional-between\":\"between\",\n\t\t\"conditional-not-equal\":\"not equal\",\n\t\t// ranges\n\t\t\"range\": \"Range\",\n\t\t\"range-title\": \"Named ranges\",\n\t\t\"range-name\": \"Name\",\n\t\t\"range-cells\": \"Range\",\n\t\t\"range-scope\": \"Scope\",\n\t\t\"range-global\": \"Book\",\n\t\t// images\n\t\t\"image-or\": \"or\",\n\t\t\"image-title\": \"Add image\",\n\t\t\"image-upload\": \"Select file for upload\",\n\t\t\"image-url\": \"URL (e.g. http://*)\",\n\t\t// sparklines\n\t\t\"sparkline-title\": \"Add sparkline\",\n\t\t\"sparkline-type\": \"Type\",\n\t\t\"sparkline-range\": \"Range\",\n\t\t\"sparkline-color\": \"Color\",\n\t\t\"sparkline-positive\": \"Positive\",\n\t\t\"sparkline-negative\": \"Negative\",\n\t\t// custom format\n\t\t\"format-title\": \"Set format\",\n\t\t\"format-pattern\": \"Format pattern\",\n\t\t//dropdown\n\t\t\"dropdown-empty\": \"Empty cells\",\n\t\t\"dropdown-title\": \"Add dropdown\",\n\t\t\"dropdown-range\": \"Range\",\n\t\t// confirm\n\t\t\"ok\": \"OK\",\n\t\t// import/export\n\t\t\"import-title\": \"Import\",\n\t\t\"import-not-support\": \"Sorry, your browser does not support import\",\n\t\t\"export-title\": \"Export\",\n\t\t\"export-name\": \"Name of xslx file\",\n\t\t\"export-all-sheets\":\"Export all sheets\",\n\t\t// add link\n\t\t\"link-title\": \"Add Link\",\n\t\t\"link-name\": \"Text\",\n\t\t\"link-url\": \"URL\",\n\t\t//images\n\t\t\"image\": \"Image\",\n\t\t\"add-image-cell\":\"Add to cell\",\n\t\t\"add-image-top\":\"Add above cells\",\n\t\t//charts\n\t\t\"graph\": \"Graph\",\n\t\t\"add-sparkline\":\"Add to cell\",\n\t\t\"add-chart\":\"Add above cells\",\n\t\t//conditional format labels\n\t\t\"display\" : \"Display\",\n\t\t\"value\" : \"Value\",\n\t\t// confirm messages\n\t\t\"range-remove-confirm\": \"Are you sure you want to remove the range permanently?\",\n\t\t\"sheet-remove-confirm\": \"Are you sure you want to remove the sheet permanently?\",\n\t\t\"merge-cell-confirm\":\"Only the left top value will remain after merging. Continue?\",\n\t\t\"error-range\": \"The range is incorrect!\",\n\t\t\"error-link\": \"The link is incorrect!\",\n\t\t//print\n\t\t\"print\":\"Print\",\n\t\t\"print-title\":\"Before you print..\",\n\t\t\"print-settings\":\"General settings\",\n\t\t\"print-paper\":\"Paper size\",\n\t\t\"print-layout\":\"Layout\",\n\t\t\"sheets\":\"Sheets:\",\n\t\t\"selection\":\"Selected cells\",\n\t\t\"borderless\":\"Hide gridlines\",\n\t\t\"sheet-names\":\"Show sheet names\",\n\t\t\"skip-rows\":\"Skip empty rows\",\n\t\t\"margin\":\"Hide margins\",\n\t\t\"page-letter\":\"Letter\",\n\t\t\"page-a4\":\"A4 (210x297mm)\",\n\t\t\"page-a3\":\"A3 (297x420mm)\",\n\t\t\"page-width\":\"Page width\",\n\t\t\"page-actual\":\"Actual Size\",\n\t\t\"page-portrait\":\"Portrait\",\n\t\t\"page-landscape\":\"Landscape\",\n\t\t\"external-ui\":\"External UI\",\n\t\t\"print-borders\": \"Show print borders\",\n\t\t//comment\n\t\t\"comment\":\"Comment\",\n\t\t//resize\n\t\t\"width\":\"Width\",\n\t\t\"height\":\"Height\",\n\t\t\"fit-content\": \"Fit to content\",\n\t\t\"default-size\":\"Reset to default\",\n\t\t//views\n\t\t\"edit-view\":\"Edit\",\n\t\t\"remove-view\":\"Remove\",\n\t\t\"chart-edit\":\"Edit chart\",\n\n\t\t\"chart-common\":\"Common\",\n\t\t\"chart-series\":\"Series\",\n\t\t\"chart-extras\":\"Extras\",\n\n\t\t\"export-view\":\"Download\",\n\t\t\"export-view-pdf\":\"PDF document\",\n\t\t\"export-view-png\":\"PNG image\",\n\t\t\"export-view-excel\":\"Excel file\",\n\n\t\t\"line-chart\":\"Line\",\n\t\t\"area-chart\":\"Area\",\n\t\t\"bar-chart\":\"Bar\",\n\t\t\"donut-chart\":\"Donut\",\n\t\t\"pie-chart\":\"Pie\",\n\t\t\"radar-chart\":\"Radar\",\n\t\t\"spline-chart\":\"Spline\",\n\t\t\"splinearea-chart\":\"Spline Area\",\n\n\t\t\"chart-scale\":\"Scale\",\n\t\t\"chart-x-axis\":\"X axis\",\n\t\t\"chart-y-axis\":\"Y axis\",\n\t\t\"chart-lines\":\"Lines\",\n\t\t\"chart-scale-color\":\"Scale color\",\n\t\t\"chart-xAxis-title\":\"Title\",\n\t\t\"chart-yAxis-title\":\"Title\",\n\t\t\"chart-col-xAxis\":\"Use left column as xAxis\",\n\t\t\"chart-col-yAxis\":\"Use left column as yAxis\",\n\t\t\"chart-row-xAxis\":\"Use top row as xAxis\",\n\t\t\"chart-row-yAxis\":\"Use top row as yAxis\",\n\t\t\"chart-xAxis-range\":\"Range\",\n\t\t\"chart-yAxis-origin\":\"Origin\",\n\t\t\"chart-yAxis-start\":\"Start\",\n\t\t\"chart-yAxis-end\":\"End\",\n\t\t\"chart-yAxis-step\":\"Step\",\n\t\t\"chart-yAxis-note\":\"* Set all the following parameters to see the effect\",\n\n\t\t\"chart-legend\":\"Legend\",\n\t\t\"chart-row-legend\":\"Use top row as legend\",\n\t\t\"chart-col-legend\":\"Use left column as legend\",\n\t\t\"chart-legend-range\":\"Legend range\",\n\t\t\"chart-legend-align\":\"Align\",\n\t\t\"chart-legend-left\":\"Left\",\n\t\t\"chart-legend-right\":\"Right\",\n\t\t\"chart-legend-center\":\"Center\",\n\t\t\"chart-legend-valign\":\"Vertical align\",\n\t\t\"chart-legend-top\":\"Top\",\n\t\t\"chart-legend-middle\":\"Middle\",\n\t\t\"chart-legend-bottom\":\"Bottom\",\n\n\t\t\"chart-item\":\"Data\",\n\t\t\"stacked-chart\":\"Stacked\",\n\t\t\"horizontal-chart\":\"Horizontal\",\n\t\t\"chart-range\":\"Range\",\n\t\t\"chart-series-color\":\"Color\",\n\t\t\"add-line\":\"Add line\",\n\t\t\"chart-type\":\"Type\",\n\t\t\"chart-tooltip\":\"Tooltips\",\n\t\t\"chart-label\":\"Labels\",\n\n\t\t\"chart-data-from\":\"Data series from\",\n\t\t\"chart-columns\":\"columns\",\n\t\t\"chart-rows\":\"rows\",\n\n\t\t\"chart-markers\":\"Markers\",\n\t\t\"chart-markers-square\":\"Square\",\n\t\t\"chart-markers-triangle\":\"Triangle\",\n\t\t\"chart-markers-diamond\":\"Diamond\",\n\t\t\"chart-markers-round\":\"Round\",\n\n\t\t\"chart-pie-3d\":\"3D\",\n\n\t\t\"chart-radar-circle\":\"Circled lines\"\n\t},\n\ttooltips: {\n\t\t\"color\": \"Font color\",\n\t\t\"background\": \"Background color\",\n\t\t\"font-family\": \"Font family\",\n\t\t\"font-size\": \"Font size\",\n\t\t\"text-align\": \"Horizontal align\",\n\t\t\"vertical-align\": \"Vertical align\",\n\t\t\"borders\": \"Borders\",\n\t\t\"borders-no\": \"Clear borders\",\n\t\t\"borders-left\": \"Left border\",\n\t\t\"borders-top\": \"Top border\",\n\t\t\"borders-right\": \"Right border\",\n\t\t\"borders-bottom\": \"Bottom border\",\n\t\t\"borders-all\": \"All borders\",\n\t\t\"borders-outer\": \"Outer borders\",\n\t\t\"borders-top-bottom\": \"Top and bottom borders\",\n\t\t\"borders-color\": \"Border color\",\n\t\t\"align-left\": \"Left align\",\n\t\t\"align-center\": \"Center align\",\n\t\t\"align-right\": \"Right align\",\n\t\t\"align-top\": \"Top align\",\n\t\t\"align-middle\": \"Middle align\",\n\t\t\"align-bottom\": \"Bottom align\",\n\t\t\"span\": \"Merge\",\n\t\t\"wrap\": \"Text wrap\",\n\t\t\"undo\": \"Undo\",\n\t\t\"redo\": \"Redo\",\n\t\t\"format\": \"Number format\",\n\t\t\"increase-decimals\":\"Increase decimal places\",\n\t\t\"decrease-decimals\":\"Decrease decimal places\",\n\t\t\"font-weight\": \"Bold\",\n\t\t\"font-style\": \"Italic\",\n\t\t\"underline\": \"Underline\",\n\t\t\"strike\": \"Strike\",\n\t\t\"hide-gridlines\": \"Hide/show gridlines\",\n\t\t\"hide-headers\": \"Hide/show headers\",\n\t\t\"show-formulas\": \"Hide/show formulas\",\n\t\t\"print-borders\": \"Hide/show print borders\",\n\t\t\"create-filter\": \"Create/remove filters\",\n\t\t\"freeze-columns\" : \"Freeze/unfreeze columns\",\n\t\t\"add-range\": \"Set name for the selected range\",\n\t\t\"conditional\": \"Conditional formatting\",\n\t\t\"add-sheet\": \"Add Sheet\",\n\t\t\"lock-cell\": \"Lock/unlock cell\",\n\t\t\"clear\": \"Clear\",\n\t\t\"add-link\": \"Add link\",\n\t\t\"row\": \"Rows\",\n\t\t\"column\": \"Columns\",\n\t\t\"sheet\": \"Sheet\",\n\t\t\"add-image\": \"Image\",\n\t\t\"add-sparkline\": \"Graph\",\n\t\t\"add-comment\": \"Comment\",\n\t\t\"increase-indent\" : \"Increase indent\",\n\t\t\"decrease-indent\": \"Decrease indent\",\n\t\t\"show-sheet\": \"Show sheet\"\n\t},\n\tmenus:{\n\t\t\"remove-sheet\": \"Remove sheet\",\n\t\t\"rename-sheet\": \"Rename sheet\",\n\t\t\"hide-sheet\": \"Hide sheet\",\n\t\t\"file\": \"File\",\n\t\t\"new\": \"New\",\n\t\t\"new-sheet\": \"New sheet\",\n\t\t\"excel-import\": \"Import from Excel\",\n\t\t\"excel-export\": \"Export to Excel\",\n\t\t\"sheet\": \"Sheets\",\n\t\t\"copy-sheet\": \"Copy to new sheet\",\n\t\t\"edit\": \"Edit\",\n\t\t\"undo\": \"Undo\",\n\t\t\"redo\": \"Redo\",\n\t\t\"columns\": \"Columns\",\n\t\t\"insert-column\": \"Insert column\",\n\t\t\"delete-column\": \"Delete column\",\n\t\t\"show-column\": \"Show column\",\n\t\t\"hide-column\": \"Hide column\",\n\t\t\"resize-column\": \"Resize column\",\n\t\t\"rows\": \"Rows\",\n\t\t\"insert-row\": \"Insert row\",\n\t\t\"delete-row\": \"Delete row\",\n\t\t\"show-row\": \"Show row\",\n\t\t\"hide-row\": \"Hide row\",\n\t\t\"resize-row\": \"Resize row\",\n\t\t\"insert\": \"Insert\",\n\t\t\"conditional-format\": \"Conditional format\",\n\t\t\"common\": \"common\",\n\t\t\"text\": \"text\",\n\t\t\"clear\": \"Clear\",\n\t\t\"clear-value\":\"Values\",\n\t\t\"clear-style\":\"Styles\",\n\t\t\"clear-conditional-formats\":\"Conditional formats\",\n\t\t\"clear-dropdown-editors\":\"Dropdowns and filters\",\n\t\t\"clear-comments\":\"Comments\",\n\t\t\"clear-all\":\"All\",\n\t\t\"image\": \"Image\",\n\t\t\"add-image-cell\":\"Add to cell\",\n\t\t\"add-image-top\":\"Add above cells\",\n\t\t\"graph\": \"Graph\",\n\t\t\"add-sparkline\":\"Add to cell\",\n\t\t\"add-chart\":\"Add above cells\",\n\t\t\"data\": \"Data\",\n\t\t\"add-link\": \"Add link\",\n\t\t\"add-range\": \"Named ranges\",\n\t\t\"sort\": \"Sort\",\n\t\t\"sort-asc\": \"Sort A to Z\",\n\t\t\"sort-desc\": \"Sort Z to A\",\n\t\t\"view\": \"View\",\n\t\t\"freeze-columns\": \"Freeze/unfreeze columns\",\n\t\t\"freeze-rows\": \"Freeze/unfreeze rows\",\n\t\t\"hide-gridlines\": \"Hide/show gridlines\",\n\t\t\"hide-headers\": \"Hide/show headers\",\n\t\t\"show-formulas\": \"Hide/show formulas\",\n\t\t\"create-filter\": \"Create/remove filters\",\n\t\t\"add-dropdown\": \"Add dropdown\",\n\t\t\"lock-cell\": \"Lock/unlock cell\",\n\t\t\"print\": \"Print\",\n\t\t\"print-borders\": \"Hide/show print borders\",\n\t\t\"add-comment\":\"Comment\",\n\t\t\"cut\": \"Cut\",\n\t\t\"copy\": \"Copy\",\n\t\t\"paste\": \"Paste\",\n\t\t\"special-paste\": \"Special paste\",\n\t\t\"paste-values\": \"Values\",\n\t\t\"paste-formulas\": \"Formulas\",\n\t\t\"paste-styles\": \"Styles\",\n\t\t\"paste-conditions\": \"Conditional formats\"\n\t},\n\ttable:{\n\t\t\"math-error\":\"#ERROR!\",\n\t\t\"math-ref-error\":\"#REF!\",\n\t\t\"format-error\":\"INCORRECT FORMAT\"\n\t},\n\tliveEditor:{\n\t\t\"edit\":\"Edit:\"\n\t},\n\tformats:{\n\t\t\"dateFormat\": \"mm/dd/yyyy\",\n\t\t\"timeFormat\": \"hh:mm AM/PM\",\n\t\t\"longDateFormat\": \"dd mmmm yyyy\",\n\t\t\"fullDateFormat\": \"mm/dd/yyyy hh:mm AM/PM\",\n\t\t\"parseDateTime\": \"%m/%d/%Y %G:%i:%s\",\n\t\t\"parseDate\": \"%m/%d/%Y\",\n\t\t\"currencies\": [\n\t\t\t\"{obj} â¬\",\n\t\t\t\"Â¥{obj}\",\n\t\t\t\"R$ {obj}\",\n\t\t\t\"{obj} rub.\"\n\t\t]\n\t}\n};\n","webix.protoUI({\n\tname: \"ssheet-align\",\n\t$cssName:\"richselect\",\n\t$init: function(config){\n\t\tconfig.options =  {\n\t\t\tview:\"datasuggest\",\n\t\t\tbody:{\n\t\t\t\tview: \"ssheet-icons\",\n\t\t\t\ttooltip: {\n\t\t\t\t\ttemplate:\"#tooltip#\"\n\t\t\t\t},\n\t\t\t\txCount:3, yCount:1\n\t\t\t},\n\t\t\tdata: config.data\n\t\t};\n\t}\n},webix.ui.richselect);","webix.protoUI({\n\tname: \"ssheet-borders-suggest\",\n\tdefaults:{\n\t\twidth: 300\n\t},\n\t$init: function(config){\n\t\tconst skin = webix.skin.$name;\n\t\tconfig.body = {\n\t\t\tmargin: 6,\n\t\t\tcols:[\n\t\t\t\t{ view: \"ssheet-icons\", scroll: false, select: true,\n\t\t\t\t\txCount: 4,\n\t\t\t\t\tyCount: 2,\n\t\t\t\t\ttooltip: {\n\t\t\t\t\t\ttemplate: function(obj){\n\t\t\t\t\t\t\treturn webix.i18n.spreadsheet.tooltips[\"borders-\"+obj.id];\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\ton:{\n\t\t\t\t\t\tonAfterSelect: function(){\n\t\t\t\t\t\t\tvar suggest = this.getParentView().getParentView();\n\t\t\t\t\t\t\tsuggest.updateMasterValue(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\ttemplate: function(obj){\n\t\t\t\t\t\tvar css = \"webix_ssheet_button_icon webix_ssheet_icon ssi-borders-\"+obj.value;\n\t\t\t\t\t\treturn \"<span class='\"+css+\"'></span>\";\n\t\t\t\t\t},\n\t\t\t\t\tdata: config.data\n\t\t\t\t},\n\t\t\t\t{ view: \"ssheet-separator\"},\n\t\t\t\t{\n\t\t\t\t\trows:[\n\t\t\t\t\t\t{ view: \"ssheet-color\", css: config.css, name: config.name, width: 68,\n\t\t\t\t\t\t\tvalue: (skin == \"contrast\" || skin == \"dark\") ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[\"borders-color\"],\n\t\t\t\t\t\t\ttitle: \"<span class='webix_icon wxi-pencil'></span>\",\n\t\t\t\t\t\t\ton:{\n\t\t\t\t\t\t\t\tonChange: function(){\n\t\t\t\t\t\t\t\t\tvar suggest = this.getParentView().getParentView().getParentView();\n\t\t\t\t\t\t\t\t\tsuggest.updateMasterValue(false);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"richselect\", css:\"webix_ssheet_border_type\", value:\"thin\", suggest:{\n\t\t\t\t\t\t\t\tfitMaster:false,\n\t\t\t\t\t\t\t\twidth:130,\n\t\t\t\t\t\t\t\tcss: \"webix_ssheet_suggest\",\n\t\t\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\t\t\ttemplate:\"<div class='webix_ssheet_border webix_ssheet_border_#id#'></div>\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tdata:[\n\t\t\t\t\t\t\t\t\t{ id:\"thin\" },\n\t\t\t\t\t\t\t\t\t{ id:\"medium\" },\n\t\t\t\t\t\t\t\t\t{ id:\"thick\" },\n\t\t\t\t\t\t\t\t\t{ id:\"dashed\" }, \n\t\t\t\t\t\t\t\t\t{ id:\"dotted\" },\n\t\t\t\t\t\t\t\t\t{ id:\"double\" }\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ }\n\t\t\t\t\t]\n\t\t\t\t}\n\n\t\t\t]\n\t\t};\n\t},\n\tupdateMasterValue: function(hide){\n\t\tconst value = this.getValue();\n\t\tconst master = webix.$$(this.config.master);\n\t\tmaster.setValue(value, \"user\");\n\t\tif(hide)\n\t\t\tthis.hide();\n\t},\n\tsetValue: function(value){\n\t\tif(value[0])\n\t\t\tthis.getList().select(value[0]);\n\t\tif(value[1])\n\t\t\tthis.getColorView().setValue(value[1]);\n\t\tif(value[2])\n\t\t\tthis.getTypeView().setValue(value[2]);\n\t},\n\tgetValue: function(){\n\t\treturn [this.getList().getSelectedId(), this.getColorView().getValue()||\"\", this.getTypeView().getValue()||\"\"];\n\t},\n\tgetList: function(){\n\t\treturn this.getBody().getChildViews()[0];\n\t},\n\tgetColorView: function(){\n\t\treturn this.getBody().getChildViews()[2].getChildViews()[0];\n\t},\n\tgetTypeView: function(){\n\t\treturn this.getBody().getChildViews()[2].getChildViews()[1];\n\t},\n\tgetItemText:function(){\n\t\treturn \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-borders-all'>\";\n\t}\n},webix.ui.suggest);\n\nwebix.protoUI({\n\tname: \"ssheet-borders\",\n\t$cssName: \"richselect\",\n\t$init: function(config){\n\t\tconfig.options = {\n\t\t\tview: \"ssheet-borders-suggest\",\n\t\t\tfitMaster: false,\n\t\t\tdata: config.data\n\t\t};\n\n\t\tthis.$ready.push(webix.bind(function(){\n\t\t\tthis.getPopup().config.master = this.config.id;\n\t\t},this));\n\n\t},\n\tsetValue: function(value, config){\n\t\tif(webix.isArray(value)){\n\t\t\tif(!this.config.value || value[0] !=  this.config.value[0] || value[1] !=  this.config.value[1]){\n\t\t\t\tthis.getPopup().setValue(value);\n\t\t\t}\n\t\t\tconst old = this.config.value;\n\t\t\tthis.config.value = value;\n\t\t\tif (value[0])\n\t\t\t\tthis.callEvent(\"onChange\", [this.getValue(), old, config]);\n\t\t}\n\t\treturn value;\n\t},\n\tgetValue: function(){\n\t\treturn  this.getPopup().getValue().join(\",\");\n\t},\n\tgetList: function(){\n\t\treturn this.getPopup().getBody().getChildViews()[0];\n\t},\n\tgetColorView: function(){\n\t\treturn this.getPopup().getBody().getChildViews()[1].getChildViews()[0];\n\t}\n},webix.ui.richselect);","// toolbar: color selector\nwebix.protoUI({\n\t$cssName: \"colorboard\",\n\tname: \"ssheet-colorboard\",\n\tdefaults:{\n\t\theight: 196,\n\t\twidth: 244,\n\t\tcss: \"webix_ssheet_colorboard\",\n\t\tpalette: [\n\t\t\t[\"#000000\", \"#434343\", \"#666666\", \"#999999\", \"#b7b7b7\", \"#cccccc\", \"#d9d9d9\", \"#efefef\", \"#f3f3f3\", \"#ffffff\"],\n\t\t\t[\"#980000\", \"#ff0000\", \"#ff9900\", \"#ffff00\", \"#00ff00\", \"#00ffff\", \"#4a86e8\", \"#0000ff\", \"#9900ff\", \"#ff00ff\"],\n\t\t\t[\"#e6b8af\", \"#f4cccc\", \"#fce5cd\", \"#fff2cc\", \"#d9ead3\", \"#d0e0e3\", \"#c9daf8\", \"#cfe2f3\", \"#d9d2e9\", \"#ead1dc\"],\n\t\t\t[\"#dd7e6b\", \"#ea9999\", \"#f9cb9c\", \"#ffe599\", \"#b6d7a8\", \"#a2c4c9\", \"#a4c2f4\", \"#9fc5e8\", \"#b4a7d6\", \"#d5a6bd\"],\n\t\t\t[\"#cc4125\", \"#e06666\", \"#f6b26b\", \"#ffd966\", \"#93c47d\", \"#76a5af\", \"#6d9eeb\", \"#6fa8dc\", \"#8e7cc3\", \"#c27ba0\"],\n\t\t\t[\"#a61c00\", \"#cc0000\", \"#e69138\", \"#f1c232\", \"#6aa84f\", \"#45818e\", \"#3c78d8\", \"#3d85c6\", \"#674ea7\", \"#a64d79\"],\n\t\t\t[\"#85200c\", \"#990000\", \"#b45f06\", \"#bf9000\", \"#38761d\", \"#134f5c\", \"#1155cc\", \"#0b5394\", \"#351c75\", \"#741b47\"],\n\t\t\t[\"#5b0f00\", \"#660000\", \"#783f04\", \"#7f6000\", \"#274e13\", \"#0c343d\", \"#1c4587\", \"#073763\", \"#20124d\", \"#4c1130\"]\n\t\t]\n\t},\n\t$init:function(){\n\t\tthis.attachEvent(\"onSelect\", function(value){\n\t\t\tthis.getParentView().setMasterValue({ value }, false, \"user\");\n\t\t});\n\t}\n}, webix.ui.colorboard);\n\nwebix.protoUI({\n\t$cssName: \"richselect\",\n\tname: \"ssheet-color\",\n\tdefaults:{\n\t\tcss: \"webix_ssheet_color\",\n\t\ticon: \"wxi-menu-down\",\n\t\tsuggest:{\n\t\t\tborderless: true,\n\t\t\tbody:{\n\t\t\t\tview: \"ssheet-colorboard\"\n\t\t\t}\n\t\t}\n\t},\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_color\";\n\t},\n\t$renderInput: function(config, divStart, id){\n\t\tconst color  = this.renderColor.call(this);\n\t\tdivStart = divStart.replace(/([^>]>)(.*)(<\\/div)/, function(match, p1, p2, p3){\n\t\t\treturn p1+config.title +color+p3;\n\t\t});\n\n\t\treturn webix.ui.colorpicker.prototype.$renderInput.call(this,config, divStart, id);\n\t},\n\t$setValue: function(value){\n\t\tvalue = value || \"\";\n\t\tthis.getColorNode().style.backgroundColor = value;\n\t},\n\trenderColor: function(){\n\t\treturn \"<div class='webix_ssheet_cp_color' style='background-color:\"+this.config.value+\";'> </div>\";\n\t},\n\tgetColorNode: function(){\n\t\treturn this.$view.firstChild.firstChild.childNodes[1];\n\t},\n\t$renderIcon:function(){\n\t\treturn webix.ui.text.prototype.$renderIcon.apply(this,arguments);\n\t}\n},webix.ui.colorpicker);","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var t,r={1:\"#ERROR\",2:\"#ERROR\",3:\"#REF!\"},e=function(){return e=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var o in r=arguments[e])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t},e.apply(this,arguments)};function n(t,r,e){return e+64*r+64*t*4096}function o(t){return[t<2147483648?t>>18:t/262144&16777215,t>>6&4095,63&t]}function i(t){return t<2147483648?t>>18:t/262144&16777215}function a(t){return t>>6&4095}function u(t){return 63&t}function f(t,r,e){for(var n=o(t),i=n[0],a=n[1],u=o(r),f=u[0]-i,s=u[1]-a,h=0;h<=f;h++)for(var c=0;c<=s;c++)e(t+64*c+4096*h*64)}function s(t,r){for(var e,n,i,a,f,s,c,p,v=t.code,g=t.source,l=\"\",d=v.length,b=0;b<d;b+=3){switch(v[b]){case 5:var M=void 0;9===v[b+6]&&(M=r.pageName(u(v[b+7]))),l+=(-1!==(p=M||t.source.substr(v[b+1],v[b+2])).indexOf(\" \")?\"'\"+p+\"'\":p)+\"!\";break;case 7:l+=h(a=(e=o(v[b+4]))[0],s=e[1],v[b+5]);break;case 4:l+=g.substr(v[b+1],v[b+2]).toUpperCase();break;case 8:a=(n=o(v[b+4]))[0],s=n[1],f=(i=o(v[b+7]))[0],c=i[1],l+=h(a,s,v[b+5]),l+=\":\",l+=h(f,c,v[b+8]);break;case 9:break;case 2:l+=\"{{\"+g.substr(v[b+1],v[b+2])+\"}}\";break;case 3:l+=\"#REF!\";break;case 1:l+='\"'+g.substr(v[b+1],v[b+2])+'\"';break;default:l+=g.substr(v[b+1],v[b+2])}}return l}function h(t,r,e){var n=\"\";2&e&&(n+=\"$\");var o=\"\";for(r+=1;r>0;){var i=r%26;0===i&&(i=26),o=String.fromCharCode(64+i)+o,r=(r-i)/26}return n+=o,1&e&&(n+=\"$\"),n+=t+1}function c(t){return t<=122}function p(t){return t<=122?t>=65||35===t||36===t||46===t:t>191}function v(t){return t>=97}function g(t){var r=t.charCodeAt(0);return r>=48&&r<=57}function l(t,r){var e;do{r++,e=t.charCodeAt(r)}while(e>=48&&e<=57);return r}function d(t){return\" \"===t||\"\\t\"===t||\"\\n\"===t||\"\\r\"===t}function b(t,r){var e;do{e=t[++r]}while(d(e));return r}function M(t,r){if(\"<\"===t[r]){var e=t[r+1];\">\"!==e&&\"=\"!==e||r++}else\">\"===t[r]&&\"=\"===t[r+1]&&r++;return r+1}function y(r,e,n){for(var o=r.length,i=!0,a=e,u=!1,f=!1,s=!1,h=0;a<o;a++){var l=r[a];if(\"'\"!==l){if(!u){s=!0;var d=l.charCodeAt(0);if(p(d)){c(d)?v(d)&&(f=!0):i=!1,1==h&&h++;continue}if(g(l)){0==h&&h++;continue}break}}else{if(s)break;if(u){a++;break}u=!0}}var b=r[a],M=e,y=a-e;return u&&((y-=1+(\"'\"===r[a-1]?1:0))<0&&(y=0),M++,n=5),0===n&&(\":\"===b&&i?1!==h?n=3:(n=8,f&&(t=!0)):\"!\"===b?n=\"#\"===r[M]?3:5:\"(\"===b?(function(t,r,e){var n=t.substr(r,e);return n.toUpperCase()!==n}(r,M,y)&&(t=!0),n=4):\"}\"===b&&\"}\"===r[a-1]?n=2:1===h&&i?(n=7,f&&(t=!0)):n=6),[M,y,a,n]}function m(t,r,e){for(var o=0,i=0,a=1,u=1,f=0,s=!1,h=r.length-1;h>=0;h--){var c=r[h].charCodeAt(0);36!==c?c<58?(i+=(c-48)*a,a*=10):(s||(a=1,o=i,i=0,s=!0,u+=1),i+=(c-(c>96?96:64))*a,a*=26):f+=u}i>4095?t.push(3,0,0):t.push(9,n(o-1,i-1,e),f)}function _(r,e){var n,o,a=[];t=!1;for(var u,f,h=-1,c=0;c<r.length;c++){var p=r[c];if('\"'!=p){if(!(h>-1))if(\"{\"!=p||\"{\"!=r[c+1])if(\"'\"==p||((f=p.charCodeAt(0))<=122?f>=65||35===f||36===f:f>191)){var v=y(r,c,0),_=(L=v[0],P=v[1],v[2]),w=v[3],E=a.length;if(7!==w&&8!==w||5!==a[a.length-3])u=e.z,a.push(w,L,P);else{var I=\"'\"===r[L-2]?1:0,C=a[E-2],T=a[E-1];void 0===(u=e.page(r.substr(C,T)))&&(a.push(3,0,0),u=0),a.push(w,L-T-2*I-1,P+T+2*I+1)}if(c=_-1,6===w)e.name(a,r,e);else if(8===w){var D=a.length;if(m(a,r.substr(L,P),u),L=(n=y(r,c+2,0))[0],P=n[1],_=n[2],5===(w=n[3])&&(L=(o=y(r,_+1,0))[0],P=o[1],_=o[2],w=o[3]),7!==w){a[D-3]=7;continue}m(a,r.substr(L,P),u);var N=a[D+1],A=a[D+4];(N>A||i(N)>i(A))&&(a[D+1]=A,a[D+4]=N),a[D-1]+=P+1,c=_-1}else 7===w?m(a,r.substr(L,P),u):3!==w&&5!==w||c++}else if(d(p)){var S=b(r,c);a.push(12,c,S-c),c=S-1}else if(g(p)){var O=l(r,c);a.push(11,c,O-c),c=O-1}else{var x=M(r,c);a.push(10,c,x-c),c=x-1}else{var R=y(r,c+2,2),L=R[0],P=R[1],F=R[2];a.push(2,L,P),c=F+2-1}}else h>-1?(a.push(1,h+1,c-h-1),h=-1):h=c}var U={code:a,source:r,exec:null,broken:0,triggers:null};return t&&(U.source=s(U,e)),U}function w(t){return\"              \".substr(0,10-t.length)}var E=[\">\",\"<\",\"=\",\"+\"];function I(t,r){var e=function(t,r){for(var e=t.code,n=t.source,o=\"\",i=e.length,a=0;a<i;a+=3){switch(e[a]){case 4:o+='ctx.m[\"'+n.substr(e[a+1],e[a+2]).toUpperCase()+'\"]';break;case 1:o+='\"'+n.substr(e[a+1],e[a+2])+'\"';break;case 2:o+='ctx.p(\"'+n.substr(e[a+1],e[a+2])+'\")';break;case 6:case 7:var u=void 0,f=void 0;if(10===e[a-3]?u=a-3:12===e[a-3]&&10===e[a-6]&&(u=a-6),10===e[a+6]?f=a+6:12===e[a+6]&&10===e[a+9]&&(f=a+9),u||f){var s=u?n[e[u+1]]:null,h=f?n[e[f+1]]:null;if(\"&\"==s||\"&\"==h){o+=\"(ctx.v(\"+e[a+4]+') === null ? \"\" : ctx.v('+e[a+4]+\"))\";break}if(-1!=E.indexOf(s)||-1!=E.indexOf(h)){o+=\"(ctx.v(\"+e[a+4]+\") === null ? 0 : ctx.v(\"+e[a+4]+\"))\";break}}o+=\"ctx.v(\"+e[a+4]+\")\";break;case 8:o+=\"ctx.r(\"+e[a+4]+\", \"+e[a+7]+\")\";break;case 10:if(1===e[a+2])o+=\"&\"===(c=n[e[a+1]])?'+\"\"+':r&&\"+\"==c?\"*1+1*\":\"=\"===c?\"==\":\";\"===c?\",\":\"{\"===c?\"[\":\"}\"===c?\"]\":c;else if(2===e[a+2]){var c;o+=\"<>\"===(c=n.substr(e[a+1],e[a+2]))?\"!=\":c}else o+=n.substr(e[a+1],e[a+2]);break;case 11:o+=n.substr(e[a+1],e[a+2]);break;case 3:return\"\"}}return o}(t,r);if(!e)return t.broken=3,void(t.exec=null);try{t.exec=new Function(\"ctx\",\"return \"+e)}catch(r){t.broken=1,t.exec=null}}var C=\"#DIV/0!\",T=\"#VALUE!\",D=\"#NUM!\",N=\"#N/A\";function A(t){var r=new Date(t.getFullYear(),0,0),e=t.valueOf()-r.valueOf()+60*(r.getTimezoneOffset()-t.getTimezoneOffset())*1e3;return Math.floor(e/864e5)}function S(t){var r=new Date(Math.round(86400*(t-25569)*1e3));return new Date(r.getTime()+6e4*r.getTimezoneOffset())}function O(t){return 25569+(t.getTime()-6e4*t.getTimezoneOffset())/864e5}function x(t){return!(!t&&0!==t||(t*=1,isNaN(t)))&&t}function R(t){if(1===t.length){var r=t[0];return\"object\"==typeof r?r:[r]}for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);return e}function L(t){return!t&&0!==t}function P(t){return\"string\"==typeof t?\"TRUE\"===t:!!t}function F(t){var r=\"string\"==typeof t?new Date(t):S(t);if(r.getTime())return r;throw t+\" is invalid date\"}function U(t){var r=x(t);if(\"number\"!=typeof r)throw t+\" is not a number\";return r}function k(t,r,e,n,o){var i=x(t);i<0&&8==o&&(r=null);var a,u=r?x(r):null;if(\"number\"!=typeof i||\"boolean\"==typeof u)throw T;if(i<e&&(i=e),i>n&&(i=n),u<-1)throw D;u&&(u=Math.floor(+u));var f=t<0&&16===o?\"FF\":\"\";if(a=n<2147483648?(i>>>0&n-e).toString(o):(i>>>0).toString(o),u&&a.length>u)throw D;return(f+a).padStart(u,\"0\").toUpperCase()}function V(t,r){var e=+yt(t),n=+mt(t),o=+yt(r),i=+mt(r);return ht(e*o-n*i,e*i+n*o)}function X(t,r){var e=+yt(t),n=+mt(t);return ht(e+ +yt(r),n+ +mt(r))}function H(t){return t>0?Math.floor(t):Math.ceil(t)}function Y(t){return t<0?Math.floor(t):Math.ceil(t)}function B(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0,n=R(t),o=0;o<n.length;o++){var i=x(n[o]);\"number\"==typeof i&&(e+=i)}return e}function j(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0,n=0,o=R(t),i=0;i<o.length;i++){var a=x(o[i]);\"number\"==typeof a&&(e+=a,n++)}return n?e/n:0}function z(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=R(t),n=0,o=0,i=0;i<e.length;i++){var a=e[i],u=x(e[i]);\"number\"==typeof u?(n+=u,o++):(!0===a&&n++,(a||!1===a)&&o++)}return o?n/o:0}function G(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0,n=R(t),o=0;o<n.length;o++){var i=x(n[o]);\"number\"==typeof i&&e++}return e}function q(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0,n=R(t),o=0;o<n.length;o++)n[o]&&1*n[o]!=0&&e++;return e}function $(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=-1/0,n=R(t),o=0;o<n.length;o++){var i=x(n[o]);\"number\"==typeof i&&i>e&&(e=i)}return e===-1/0?0:e}function W(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=1/0,n=R(t),o=0;o<n.length;o++){var i=x(n[o]);\"number\"==typeof i&&i<e&&(e=i)}return e===1/0?0:e}function K(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=!1,n=1,o=R(t),i=0;i<o.length;i++){var a=x(o[i]);\"number\"==typeof a&&(e=!0,n*=a)}return e?n:null}function Q(t,r,e){for(var n=R(t),o=r?0:-1,i=e?z.apply(void 0,t):j.apply(void 0,t),a=0,u=0;u<n.length;u++){var f=n[u],s=x(n[u]);if(\"number\"!=typeof s){if(!e||\"boolean\"!=typeof f&&!f)continue;s=!0===f?1:0}o++,a+=Math.pow(s-i,2)}return o?a/o:0}function J(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Q(t,!1,!1)}function Z(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Q(t,!1,!0)}function tt(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Q(t,!0,!1)}function rt(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Q(t,!0,!0)}function et(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Math.sqrt(J.apply(void 0,t))}function nt(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Math.sqrt(tt.apply(void 0,t))}function ot(t,r){var e=x(t),n=x(r);if(\"number\"==typeof e&&\"number\"==typeof n)return Math.pow(e,n)}var it={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1};var at=[];function ut(t){var r=x(t);if(\"number\"==typeof r&&r>-1){var e=Math.floor(r);return 0===e||1===e?1:(at[e]>0||(at[e]=ut(e-1)*e),at[e])}}function ft(t,r){var e=x(t),n=x(r);if(\"number\"==typeof e&&\"number\"==typeof n)return ut(e)/(ut(n)*ut(e-n))}var st=[\"\",\"C\",\"CC\",\"CCC\",\"CD\",\"D\",\"DC\",\"DCC\",\"DCCC\",\"CM\",\"\",\"X\",\"XX\",\"XXX\",\"XL\",\"L\",\"LX\",\"LXX\",\"LXXX\",\"XC\",\"\",\"I\",\"II\",\"III\",\"IV\",\"V\",\"VI\",\"VII\",\"VIII\",\"IX\"];function ht(t,r,e){void 0===e&&(e=\"i\");var n=x(t),o=x(r);if(\"number\"!=typeof n&&\"number\"!=typeof o)throw D;var i=\"\",a=\"\";return t&&(i=t.toString()),r&&1!==r?a=r+e:1===r&&(a=e),r>0?(i?i+\"+\":\"\")+a:i+a}function ct(t,r){return void 0===r&&(r=null),k(t,r,-512,511,2)}function pt(t,r){return void 0===r&&(r=null),k(t,r,-274877906944,274877906943,16)}function vt(t,r){return void 0===r&&(r=null),k(t,r,-536870912,536870911,8)}var gt=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17];function lt(t){for(var r,e=t<0,n=0,o=0,i=2/(2+(t=Math.abs(t))),a=4*i-2,u=gt.length-1;u>0;u--)r=a*n-o+gt[u],o=n,n=r;var f=i*Math.exp(-t*t+.5*(gt[0]+a*n)-o);return e?f-1:1-f}function dt(t,r){var e=x(t),n=x(r);if(\"number\"==typeof e)return\"number\"==typeof n?lt(n)-lt(e):lt(e);throw T}var bt=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7];var Mt=Math.pow(2,39);function yt(t){if(\"string\"!=typeof t)throw T;if([\"i\",\"+i\",\"1i\",\"+1i\",\"-i\",\"-1i\",\"j\",\"+j\",\"1j\",\"+1j\",\"-j\",\"-1j\"].indexOf(t)>=0)return 0;var r=t.indexOf(\"+\"),e=t.indexOf(\"-\");0===r&&(r=t.indexOf(\"+\",1)),0===e&&(e=t.indexOf(\"-\",1));var n=t.substring(t.length-1,t.length),o=\"i\"===n||\"j\"===n;if(r>=0||e>=0){if(!o)throw D;if(r>=0){if(isNaN(+t.substring(0,r))||isNaN(+t.substring(r+1,t.length-1)))throw D;return Number(t.substring(0,r))}if(isNaN(+t.substring(0,e))||isNaN(+t.substring(e+1,t.length-1)))throw D;return Number(t.substring(0,e))}if(o){if(isNaN(+t.substring(0,t.length-1)))throw D;return 0}if(isNaN(+t))throw D;return+t}function mt(t){if(\"string\"!=typeof t)throw T;if([\"i\",\"j\"].indexOf(t)>=0)return 1;var r=(t=t.replace(\"+i\",\"+1i\").replace(\"-i\",\"-1i\").replace(\"+j\",\"+1j\").replace(\"-j\",\"-1j\")).indexOf(\"+\"),e=t.indexOf(\"-\");0===r&&(r=t.indexOf(\"+\",1)),0===e&&(e=t.indexOf(\"-\",1));var n=t.substring(t.length-1,t.length),o=\"i\"===n||\"j\"===n;if(r>=0||e>=0){if(!o)throw D;if(r>=0){if(isNaN(+t.substring(0,r))||isNaN(+t.substring(r+1,t.length-1)))throw D;return Number(t.substring(r+1,t.length-1))}if(isNaN(+t.substring(0,e))||isNaN(+t.substring(e+1,t.length-1)))throw D;return-Number(t.substring(e+1,t.length-1))}if(o){var i=+t.substring(0,t.length-1);if(isNaN(i))throw D;return i}if(isNaN(+t))throw D;return 0}function _t(t){var r=+yt(t),e=+mt(t);return ht(Math.cos(r)*Math.cosh(e),-Math.sin(r)*Math.sinh(e))}function wt(t){var r=+yt(t),e=+mt(t);return ht(Math.cos(e)*(Math.exp(r)+Math.exp(-r))/2,Math.sin(e)*(Math.exp(r)-Math.exp(-r))/2)}function Et(t,r){var e=+yt(t),n=+mt(t),o=+yt(r),i=+mt(r),a=Math.pow(o,2)+Math.pow(i,2);return ht((e*o+n*i)/a,(n*o-e*i)/a)}function It(t){var r=+yt(t),e=+mt(t);return ht(Math.sin(r)*Math.cosh(e),Math.cos(r)*Math.sinh(e))}function Ct(t){var r=+yt(t),e=+mt(t);return ht(Math.cos(e)*(Math.exp(r)-Math.exp(-r))/2,Math.sin(e)*(Math.exp(r)+Math.exp(-r))/2)}var Tt=Math.pow(2,29);function Dt(t,r,e){var n=x(r);if(\"number\"!=typeof n||r<0||r>1||e&&(0===r||1===r))throw T;var o=R(t).sort((function(t,r){return t-r}));e&&(o=function(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;var n=Array(t),o=0;for(r=0;r<e;r++)for(var i=arguments[r],a=0,u=i.length;a<u;a++,o++)n[o]=i[a];return n}([0],o));var i=(o.length+(e?0:-1))*n,a=Math.floor(i);if(void 0===o[a+1])return o[a];var u=o[a+1]-o[a];return o[a]+u*(i-a)}function Nt(t,r,e){var n=x(r);if(\"number\"!=typeof n)throw T;switch(n){case 0:if(e)throw T;return W.apply(void 0,t);case 1:return Dt(t,.25,e);case 2:return Dt(t,.5,e);case 3:return Dt(t,.75,e);case 4:if(e)throw T;return $.apply(void 0,t);default:throw D}}function At(t,r,e,n){var o=U(t),i=U(r),a=U(e);if(1==r)return 1/a;var u=Math.exp(-Math.pow(o/a,i));return n?1-u:i/Math.pow(a,i)*Math.pow(o,i-1)*u}function St(t,r,e,n){void 0===n&&(n=!1);var o=U(t),i=U(r),a=U(e),u=function(t,r,e){return ft(r,t)*Math.pow(e,t)*Math.pow(1-e,r-t)};if(!n)return u(o,i,a);for(var f=0,s=0;s<o+1;s++)f+=u(s,i,a);return f}function Ot(t,r,e){var n=t.filter((function(t){return\"number\"==typeof t})),o=r.filter((function(t){return\"number\"==typeof t}));if(n.length!==o.length)throw N;var i=n.length;if(0===i)throw C;for(var a=n.reduce((function(t,r){return t+r}),0)/i,u=o.reduce((function(t,r){return t+r}),0)/i,f=0,s=0;s<i;s++)f+=(n[s]-a)*(o[s]-u);return f/(e?i-1:i)}function xt(t,r){return Ot(t,r,!1)}var Rt={ABS:function(t){var r=x(t);if(\"number\"==typeof r)return Math.abs(r)},ACOS:function(t){var r=x(t);if(\"number\"==typeof r)return Math.acos(r)},ACOSH:function(t){var r=x(t);if(\"number\"==typeof r)return Math.acosh(r)},ACOT:function(t){var r=x(t);if(\"number\"==typeof r)return Math.atan(1/r)},ACOTH:function(t){var r=x(t);if(\"number\"==typeof r)return.5*Math.log((r+1)/(r-1))},ADD:function(t,r){var e=x(t),n=x(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e+n},ARABIC:function(t){if(!x(t)&&/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/.test(\"\"+t)){var r=0;return(\"\"+t).replace(/[MDLV]|C[MD]?|X[CL]?|I[XV]?/g,(function(t){return r+=it[t],t})),+r}},ASIN:function(t){var r=x(t);if(\"number\"==typeof r)return Math.asin(r)},ASINH:function(t){var r=x(t);if(\"number\"==typeof r)return Math.asinh(r)},ATAN:function(t){var r=x(t);if(\"number\"==typeof r)return Math.atan(r)},ATAN2:function(t,r){var e=x(t),n=x(r);if(\"number\"==typeof e&&\"number\"==typeof n)return Math.atan2(n,e)},ATANH:function(t){var r=x(t);if(\"number\"==typeof r)return Math.log((1+r)/(1-r))/2},AVEDEV:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=R(t).filter((function(t){return\"number\"==typeof t})),n=e.length;if(0===n)throw C;var o=e.reduce((function(t,r){return t+r}),0)/n,i=e.reduce((function(t,r){return t+Math.abs(r-o)}),0);return i/n},AVERAGE:j,AVERAGEA:z,BASE:function(t,r,e){void 0===e&&(e=0);var n=x(t),o=x(r),i=x(e);if(\"number\"==typeof n&&\"number\"==typeof o&&\"number\"==typeof i){var a=n.toString(o);return new Array(Math.max(i+1-a.length,0)).join(\"0\")+a.toUpperCase()}},BINOMDIST:St,\"BINOM.INV\":function(t,r,e){for(var n=U(t),o=U(r),i=U(e),a=0;a<=n;a++){if(St(a,n,o,!0)>=i)return a}},\"BINOM.DIST.RANGE\":function(t,r,e,n){var o=U(t),i=U(r),a=U(e),u=x(n);\"number\"!=typeof u&&(u=a);for(var f=0,s=a;s<=u;s++){f+=ft(o,s)*Math.pow(i,s)*Math.pow(1-i,o-s)}return f},\"BINOM.DIST\":St,BITAND:function(t,r){var e=x(t),n=x(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e&n;throw T},BITLSHIFT:function(t,r){var e=x(t),n=x(r);if(\"number\"==typeof e&&\"number\"==typeof n)return n>0?e<<n:e>>-n;throw T},BITOR:function(t,r){var e=x(t),n=x(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e|n;throw T},BITRSHIFT:function(t,r){var e=x(t),n=x(r);if(\"number\"==typeof e&&\"number\"==typeof n)return n>0?e>>n:e<<-n;throw T},BITXOR:function(t,r){var e=x(t),n=x(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e^n;throw T},CEILING:function(t,r,e){void 0===r&&(r=1),void 0===e&&(e=0);var n=x(t),o=x(r),i=x(e);if(\"number\"==typeof n&&\"number\"==typeof o&&\"number\"==typeof i)return 0===o?0:(o=Math.abs(o),n>=0?Math.ceil(n/o)*o:0===e?-1*Math.floor(Math.abs(n)/o)*o:-1*Math.ceil(Math.abs(n)/o)*o)},COMBIN:ft,COMBINA:function(t,r){var e=x(t),n=x(r);if(\"number\"==typeof e&&\"number\"==typeof n)return 0===e&&0===n?1:ft(e+n-1,e-1)},COMPLEX:ht,CORREL:function(t,r){if(t.length!==r.length)throw N;for(var e=t.filter((function(t){return\"number\"==typeof t})),n=r.filter((function(t){return\"number\"==typeof t})),o=e.length,i=e.reduce((function(t,r){return t+r}),0)/o,a=n.reduce((function(t,r){return t+r}),0)/o,u=0,f=0,s=0,h=0;h<o;h++)u+=(e[h]-i)*(n[h]-a),f+=Math.pow(e[h]-i,2),s+=Math.pow(n[h]-a,2);var c=Math.sqrt(f*s);if(!c)throw C;return u/c},COS:function(t){var r=x(t);if(\"number\"==typeof r)return Math.cos(r)},COSH:function(t){var r=x(t);if(\"number\"==typeof r)return Math.cosh(r)},COT:function(t){var r=x(t);if(\"number\"==typeof r)return 1/Math.tan(r)},COTH:function(t){var r=x(t);if(\"number\"==typeof r){var e=Math.exp(2*r);return(e+1)/(e-1)}},COUNT:G,COUNTA:q,COUNTBLANK:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0,n=R(t),o=0;o<n.length;o++)0===n[o]||n[o]||e++;return e},COVAR:xt,\"COVARIANCE.P\":xt,\"COVARIANCE.S\":function(t,r){return Ot(t,r,!0)},CSC:function(t){var r=x(t);if(\"number\"==typeof r)return 1/Math.sin(r)},CSCH:function(t){var r=x(t);if(\"number\"==typeof r)return 2/(Math.exp(r)-Math.exp(-r))},DEC2BIN:ct,DEC2HEX:pt,DEC2OCT:vt,DECIMAL:function(t,r){var e=x(t),n=x(r);if(!(\"\"+e).match(\"/[2-9]/\")&&\"number\"==typeof e&&\"number\"==typeof n&&n>1&&n<37)return parseInt(\"\"+e,n)},DEGREES:function(t){var r=x(t);if(\"number\"==typeof r)return 180*r/Math.PI},DELTA:function(t,r){var e=x(t),n=x(r);if(\"number\"==typeof e||\"number\"==typeof e)return+(e===n);throw T},DEVSQ:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=R(t),n=[];e.forEach((function(t){\"number\"==typeof t&&n.push(t)}));var o=n.reduce((function(t,r){return t+r}),0)/n.length;return n.reduce((function(t,r){return t+Math.pow(r-o,2)}),0)},DIVIDE:function(t,r){var e=x(t),n=x(r);if(\"number\"==typeof e&&\"number\"==typeof n&&0!==n)return e/n},EQ:function(t,r){return typeof t==typeof r&&t==r},ERF:dt,ERFC:function(t,r){var e=x(t);if(\"number\"==typeof e)return 1-dt(e,r);throw T},EVEN:function(t){var r=x(t);if(\"number\"==typeof r){var e=Y(r);return e%2?e+Math.sign(r):e}},EXP:function(t){var r=x(t);if(\"number\"==typeof r)return Math.exp(r);throw T},FACT:ut,FACTDOUBLE:function t(r){var e=x(r);if(\"number\"==typeof e){var n=Math.floor(e);return n<=0?1:n*t(n-2)}},FISHER:function(t){var r=x(t);if(\"number\"==typeof r&&r>-1&&r<1)return.5*Math.log((1+r)/(1-r));throw T},FISHERINV:function(t){var r=x(t);if(\"number\"==typeof r){var e=Math.exp(2*r);return(e-1)/(e+1)}throw T},FLOOR:function(t,r){var e=x(t),n=x(r);if(\"number\"==typeof e&&\"number\"==typeof n){var o=Math.abs(n);return e>=0?Math.floor(e/o)*o:-1*Math.ceil(Math.abs(e)/o)*o}},GAMMA:function t(r){var e=x(r);if(\"number\"!=typeof e)throw T;if(!(Number.isInteger(e)&&e<=0)){if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*t(1-e));e-=1;for(var n=bt[0],o=1;o<9;o++)n+=bt[o]/(e+o);var i=e+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(i,e+.5)*Math.exp(-i)*n}throw D},GCD:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=R(t),n=e.length;if(!n)return 1;for(var o=e[0],i=1;\"number\"!=typeof o;){if(o=e[i],i>e.length)throw\"The arguments should contain at least one numeric value\";i++}for(var a=o<0?-o:o;i<n;i++){var u=x(e[i]);if(\"number\"==typeof u){for(var f=u<0?-u:u;a&&f;)a>f?a%=f:f%=a;a+=f}}return a},GEOMEAN:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=R(t);if(e.some((function(t){return!Number.isFinite(t)||t<=0})))throw D;return Math.pow(e.reduce((function(t,r){return r*t}),1),1/e.length)},GESTEP:function(t,r){void 0===r&&(r=0);var e=x(t),n=x(r);if(\"number\"==typeof e&&\"number\"==typeof n)return+(t>=r);throw T},GT:function(t,r){var e=x(t),n=x(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e>n},GTE:function(t,r){var e=x(t),n=x(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e>=n},HARMEAN:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=R(t);if(e.some((function(t){return!Number.isFinite(t)||t<=0})))throw D;var n=e.reduce((function(t,r){return t+1/r}),0);return 1/(1/e.length*n)},HEX2BIN:function(t,r){return ct(parseInt(t.toString(),16),r)},HEX2DEC:function(t,r){var e=parseInt(t.toString(),16);if(!Number.isFinite(e))throw T;var n=e>Mt;n&&(e=-(e-2*Mt));var o=r?x(r):null,i=e.toString();return(n?\"-\":\"\")+(o?i.padStart(o,\"0\"):i)},HEX2OCT:function(t,r){void 0===r&&(r=null);var e=parseInt(t.toString(),16);return e>Mt&&(e^=Mt),vt(e,r)},IMABS:function(t){var r=yt(t),e=mt(t);if(!Number.isFinite(+r)||!Number.isFinite(+e))throw T;return Math.sqrt(Math.pow(+r,2)+Math.pow(+e,2))},IMAGINARY:mt,IMCONJUGATE:function(t){return ht(+yt(t),-+mt(t))},IMCOS:_t,IMCOSH:wt,IMCOT:function(t){return Et(_t(t),It(t))},IMCSC:function(t){return Et(\"1\",It(t))},IMCSCH:function(t){return Et(\"1\",Ct(t))},IMDIV:Et,IMEXP:function(t){var r=+yt(t),e=+mt(t),n=Math.exp(r);return ht(n*Math.cos(e),n*Math.sin(r))},IMLN:function(t){var r=+yt(t),e=+mt(t);return ht(Math.log(Math.sqrt(r*r+e*e)),Math.atan(e/r))},IMPOWER:function(t,r){var e=x(r);if(\"number\"!=typeof e)throw T;var n=+yt(t),o=+mt(t),i=Math.sqrt(n*n+o*o),a=Math.pow(i,e),u=Math.atan(o/n);return ht(a*Math.cos(e*u),a*Math.sin(e*u))},IMPRODUCT:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(0===t.length)throw T;for(var e=t[0],n=0,o=t.slice(1);n<o.length;n++){var i=o[n];e=V(e.toString(),i.toString())}return e.toString()},IMREAL:yt,IMSEC:function(t){return Et(\"1\",_t(t))},IMSECH:function(t){return Et(\"1\",wt(t))},IMSIN:It,IMSINH:Ct,IMSQRT:function(t){var r=+yt(t),e=+mt(t),n=Math.sqrt(Math.sqrt(r*r+e*e)),o=Math.atan(e/r)/2;return ht(n*Math.cos(o),n*Math.sin(o))},IMSUB:function(t,r){var e=+yt(t),n=+mt(t);return ht(e-+yt(r),n-+mt(r))},IMSUM:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(0===t.length)throw T;for(var e=t[0],n=0,o=t.slice(1);n<o.length;n++){var i=o[n];e=X(e.toString(),i.toString())}return e.toString()},IMTAN:function(t){return Et(It(t),_t(t))},INT:function(t){var r=x(t);if(\"number\"==typeof r)return Math.floor(r)},LARGE:function(t,r){var e=x(r),n=t.sort((function(t,r){return t-r}));if(\"number\"==typeof e&&!t.some((function(t){return\"number\"!=typeof x(t)})))return n[n.length-e];throw T},LN:function(t){var r=x(t);if(\"number\"==typeof r)return Math.log(r)},LOG:function(t,r){void 0===r&&(r=10);var e=x(t),n=x(r);if(\"number\"==typeof e&&\"number\"==typeof n)return Math.log(e)/Math.log(n)},LOG10:function(t){var r=x(t);if(\"number\"==typeof r)return Math.log(r)/Math.log(10)},LT:function(t,r){var e=x(t),n=x(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e<n},LTE:function(t,r){var e=x(t),n=x(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e<=n},MAX:$,MEDIAN:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=R(t);e.sort((function(t,r){return t-r}));var n=Math.floor(e.length/2);return e.length%2?e[n]:(e[n-1]+e[n])/2},MIN:W,MINUS:function(t,r){var e=x(t),n=x(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e-n},MOD:function(t,r){var e=x(t),n=x(r);if(\"number\"==typeof e&&\"number\"==typeof n&&0!==n){var o=Math.abs(e%n);return r>0?o:-o}},MROUND:function(t,r){var e=x(t),n=x(r);if(\"number\"==typeof e&&\"number\"==typeof n&&e*n>-1)return Math.round(e/n)*n},MULTINOMIAL:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=R(t),n=0,o=1,i=0;i<e.length;i++){var a=x(e[i]);\"number\"==typeof a&&(n+=a,o*=ut(e[i]))}return ut(n)/o},MULTIPLY:function(t,r){var e=x(t),n=x(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e*n},NE:function(t,r){return typeof t!=typeof r||t!=r},OCT2BIN:function(t,r){void 0===r&&(r=null);var e=parseInt(t.toString(),8);return e&Tt&&(e=-(2*Tt-e)),ct(e,r)},OCT2DEC:function(t,r){void 0===r&&(r=null);var e=r?x(r):null,n=parseInt(t.toString(),8);if(n&Tt&&(n=-(2*Tt-n)),!Number.isFinite(n)||\"boolean\"==typeof e)throw T;return n.toString().padStart(e||0,\"0\")},OCT2HEX:function(t,r){void 0===r&&(r=null);var e=parseInt(t.toString(),8);return e&Tt&&(e=-(2*Tt-e)),pt(e,r)},ODD:function(t){var r=x(t);if(\"number\"==typeof r){var e=Y(r);return e%2?e:e+Math.sign(r)}},PERCENTILE:Dt,\"PERCENTILE.INC\":Dt,\"PERCENTILE.EXC\":function(t,r){return Dt(t,r,!0)},PERMUT:function(t,r){var e=x(t),n=x(r);if(\"number\"==typeof e&&\"number\"==typeof n)return ut(e)/ut(e-n);throw T},PI:function(){return Math.PI},POW:function(t,r){var e=x(t),n=x(r);if(\"number\"==typeof e&&\"number\"==typeof n)return ot(t,r)},POWER:ot,PRODUCT:K,QUARTILE:Nt,\"QUARTILE.INC\":Nt,\"QUARTILE.EXC\":function(t,r){return Nt(t,r,!0)},QUOTIENT:function(t,r){var e=x(t),n=x(r);if(\"number\"==typeof e&&\"number\"==typeof n)return H(e/n)},RADIANS:function(t){var r=x(t);if(\"number\"==typeof r)return r*Math.PI/180},RAND:function(){return Math.random()},RANDBETWEEN:function(t,r){var e=x(t),n=x(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e+Math.ceil((n-e+1)*Math.random())-1},ROMAN:function(t){var r=x(t);if(\"number\"==typeof r){for(var e=String(r).split(\"\"),n=\"\",o=3;o--;)n=(st[+e.pop()+10*o]||\"\")+n;return new Array(+e.join(\"\")+1).join(\"M\")+n}},ROUND:function(t,r){var e=x(t),n=x(r)||0;if(\"number\"==typeof e&&\"number\"==typeof n)return parseFloat(e.toFixed(n))},ROUNDDOWN:function(t,r){var e=x(t),n=x(r)||0;if(\"number\"==typeof e&&\"number\"==typeof n)return Math.floor(e*Math.pow(10,n))/Math.pow(10,n)},ROUNDUP:function(t,r){var e=x(t),n=x(r)||0;if(\"number\"==typeof e&&\"number\"==typeof n)return Math.ceil(e*Math.pow(10,n))/Math.pow(10,n)},SEC:function(t){var r=x(t);if(\"number\"==typeof r)return 1/Math.cos(r)},SECH:function(t){var r=x(t);if(\"number\"==typeof r)return 2/(Math.exp(r)+Math.exp(-r))},SIGN:function(t){var r=x(t);if(\"number\"==typeof r)return 0===r?0:r/Math.abs(r);throw T},SIN:function(t){var r=x(t);if(\"number\"==typeof r)return Math.sin(r)},SINH:function(t){var r=x(t);if(\"number\"==typeof r)return Math.sinh(r)},SMALL:function(t,r){var e=x(r),n=t.sort((function(t,r){return t-r}));if(\"number\"==typeof e&&!t.some((function(t){return\"number\"!=typeof x(t)})))return n[e-1];throw T},SQRT:function(t){var r=x(t);if(\"number\"==typeof r&&r>=0)return Math.sqrt(r)},SQRTPI:function(t){var r=x(t);if(\"number\"==typeof r&&r>-1)return Math.sqrt(r*Math.PI)},STDEV:et,\"STDEV.S\":et,\"STDEV.P\":nt,STDEVA:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Math.sqrt(Z.apply(void 0,t))},STDEVP:nt,STDEVPA:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Math.sqrt(rt.apply(void 0,t))},STEYX:function(t,r){if(t.length!==r.length)throw N;var e=t.filter((function(t){return\"number\"==typeof t})),n=r.filter((function(t){return\"number\"==typeof t})),o=e.length;if(2===o)throw C;for(var i=e.reduce((function(t,r){return t+r}),0)/o,a=n.reduce((function(t,r){return t+r}),0)/o,u=0,f=0,s=0,h=0;h<o;h++)u+=(e[h]-i)*(n[h]-a),f+=Math.pow(e[h]-i,2),s+=Math.pow(n[h]-a,2);if(2===s)throw C;return Math.sqrt((f-Math.pow(u,2)/s)/(o-2))},SUBTOTAL:function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];var n=x(t),o=R(r);if(\"number\"==typeof n)switch(n){case 1:case 101:return j.apply(void 0,o);case 102:case 2:return G.apply(void 0,o);case 103:case 3:return q.apply(void 0,o);case 104:case 4:return $.apply(void 0,o);case 105:case 5:return W.apply(void 0,o);case 106:case 6:return K.apply(void 0,o);case 107:case 7:case 110:case 10:return;case 108:case 8:return nt.apply(void 0,o);case 109:case 9:return B.apply(void 0,o);case 111:case 11:return tt.apply(void 0,o)}},SUM:B,SUMPRODUCT:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=t[0].length;for(var n in t)if(t[n].length!==e)return;var o=0;for(n=0;n<t[0].length;n++){var i=!1,a=1;for(var u in t){var f=x(t[u][n]);\"number\"==typeof f&&(a*=f,i=!0)}i&&(o+=a)}return o},SUMSQ:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0,n=R(t),o=0;o<n.length;o++){var i=x(n[o]);\"number\"==typeof i&&(e+=Math.pow(i,2))}return e},SUMX2MY2:function(t,r){if(!t.find((function(t){return\"number\"!=typeof x(t)}))&&!r.find((function(t){return\"number\"!=typeof x(t)}))){for(var e=0,n=0;n<t.length;n++)e+=t[n]*t[n]-r[n]*r[n];return e}},SUMX2PY2:function(t,r){if(!t.find((function(t){return\"number\"!=typeof x(t)}))&&!r.find((function(t){return\"number\"!=typeof x(t)}))){for(var e=0,n=0;n<t.length;n++)e+=t[n]*t[n]+r[n]*r[n];return e}},SUMXMY2:function(t,r){if(!t.find((function(t){return\"number\"!=typeof x(t)}))&&!r.find((function(t){return\"number\"!=typeof x(t)}))){for(var e=0,n=0;n<t.length;n++)e+=Math.pow(t[n]-r[n],2);return e}},TAN:function(t){var r=x(t);if(\"number\"==typeof r)return Math.tan(r)},TANH:function(t){var r=x(t);if(\"number\"==typeof r)return Math.tanh(r)},TRUNC:function(t){var r=x(t);if(\"number\"==typeof r)return H(r)},VAR:J,\"VAR.S\":J,\"VAR.P\":tt,VARA:Z,VARP:tt,VARPA:rt,WEIBULL:At,\"WEIBULL.DIST\":At};var Lt=/[\\0-\\x1F]/g;var Pt=Object.freeze({__proto__:null,CONCATENATE:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return R(t).join(\"\")},LEFT:function(t,r){return L(t)?\"\":t.toString().substring(0,r)},MID:function(t,r,e){return L(t)?\"\":t.toString().substring(r,r+e)},RIGHT:function(t,r){return L(t)?\"\":t.toString().substring(t.length-r)},LOWER:function(t){return L(t)?\"\":t.toString().toLowerCase()},UPPER:function(t){return L(t)?\"\":t.toString().toUpperCase()},PROPER:function(t){if(L(t))return\"\";var r=t.toString().toLowerCase().split(\" \");for(var e in t=\"\",r)t+=(t?\" \":\"\")+r[e].substring(0,1).toUpperCase()+r[e].substring(1);return t},TRIM:function(t){return L(t)?\"\":t.toString().trim()},LEN:function(t){return L(t)?0:t.toString().length},CHAR:function(t){var r=x(t);if(\"number\"==typeof r)return String.fromCharCode(r)},CLEAN:function(t){return void 0===t&&(t=\"\"),(\"\"+t).replace(Lt,\"\")},CODE:function(t){return void 0===t&&(t=\"\"),(\"\"+t).charCodeAt(0)},EXACT:function(t,r){return t===r},FIND:function(t,r,e){void 0===e&&(e=0);var n=x(e);if(\"number\"==typeof n&&r)return(\"\"+r).indexOf(\"\"+t,n-1)+1;throw\"index cannot be string\"},FIXED:function(t,r,e){void 0===r&&(r=2),void 0===e&&(e=!1);var n=x(t),o=x(r);if(\"number\"==typeof n&&\"number\"==typeof o){var i=n.toFixed(o);if(P(e))return\"\"+i;var a=(\"\"+i).split(\".\"),u=a[0],f=a[1];return u.replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\")+\".\"+f}},NUMBERVALUE:function(t,r,e){if(void 0===r&&(r=\".\"),void 0===e&&(e=\",\"),\"string\"==typeof t&&\"string\"==typeof r&&\"string\"==typeof e)return Number(t.replace(r,\".\").replace(e,\"\"))},REGEXEXTRACT:function(t,r){if(\"string\"==typeof t&&\"string\"==typeof r){var e=t.match(new RegExp(r));return e?e[e.length>1?e.length-1:0]:null}},REGEXMATCH:function(t,r){if(\"string\"==typeof t&&\"string\"==typeof r)return!!t.match(new RegExp(r))},REGEXREPLACE:function(t,r,e){if(\"string\"==typeof t&&\"string\"==typeof r)return t.replace(new RegExp(r),\"\"+e)},REPT:function(t,r){var e=x(r);if(\"number\"==typeof e)return new Array(e+1).join(\"\"+t)},SEARCH:function(t,r,e){void 0===e&&(e=0);var n=x(e);if(\"number\"==typeof n){var o=(\"\"+r).toLowerCase().indexOf((\"\"+t).toLowerCase(),n-1)+1;if(0!==o)return o;throw\"not found\"}},SUBSTITUTE:function(t,r,e,n){if(!t||!r||!e&&\"\"!==e)return\"\"+t;if(void 0===n)return(\"\"+t).replace(new RegExp(\"\"+r,\"g\"),\"\"+e);for(var o=0,i=0;(\"\"+t).indexOf(\"\"+r,o)>0;)if(o=(\"\"+t).indexOf(\"\"+r,o+1),++i===n)return(\"\"+t).substring(0,o)+e+(\"\"+t).substring(o+(\"\"+r).length)},T:function(t){return\"string\"==typeof t&&\"TRUE\"!==t&&\"FALSE\"!==t?\"\"+t:\"\"},JOIN:function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];var n=[];return r.forEach((function(r){\"object\"==typeof r?n.push(r.join(\"\"+t)):n.push(r)})),n.join(\"\"+t)},REPLACE:function(t,r,e,n){var o=x(r),i=x(e);if(\"number\"==typeof o&&\"number\"==typeof i){var a=t.toString(),u=n.toString();return a.replace(a.substr(o-1,i),u)}},ARRAYTOTEXT:function(t,r){return r?\"{\"+t.map((function(t){return\"string\"==typeof t?'\"'+t+'\"':t})).join(\"; \")+\"}\":t.join(\"; \")}});function Ft(t){return void 0===t?null:t}function Ut(t,r,e,n){void 0===e&&(e=0);var o=-1;if(0===e)o=r.indexOf(t);else{var i=\"string\"==typeof t?\"\":-1/0*e;1===e?r.forEach((function(r,e){r<=t&&r>i&&(i=r,o=e)})):-1===e&&r.forEach((function(r,e){r>=t&&r<i&&(i=r,o=e)}))}return o+1}var kt={LOOKUP:function(t,r,e){var n=Ut(t,r,1);if(0===n)throw\"#N/A\";return(e||r)[n-1]},HLOOKUP:function(t,r,e,n){var o=!0;void 0!==n&&(o=P(n));var i=r.$width?r.$width:r.length,a=Ut(t,r.slice(0,i),o?1:0);if(0===a)throw\"#N/A\";return Ft(r[i*((e||1)-1)+a-1])},VLOOKUP:function(t,r,e,n){var o=!0;void 0!==n&&(o=P(n));var i,a=r.$width?r.$width:1,u=r.length/a;if(1===u)i=r;else{i=[];for(var f=0;f<u;f++)i.push(r[a*f])}var s=e,h=Ut(t,i,o?1:0);if(0===h)throw\"#N/A\";return Ft(r[a*(h-1)+(s||1)-1])},XLOOKUP:function(t,r,e,n,o,i){var a=Ut(t,r,o);if(0===a){if(void 0!==n)return n;throw\"#N/A\"}return(e||r)[a-1]},INDEX:function(t,r,e){var n=r,o=e;return Ft(t[(t.$width?t.$width:1)*(n-1)+(o||1)-1])},MATCH:function(t,r,e){var n=e;void 0===e&&(n=1);var o=Ut(t,r,n);if(0===o)throw\"#N/A\";return o},XMATCH:function(t,r,e,n){var o=Ut(t,r,e);if(0===o)throw\"#N/A\";return o}},Vt=[[],[1,2,3,4,5,6,7],[7,1,2,3,4,5,6],[6,0,1,2,3,4,5],[],[],[],[],[],[],[],[7,1,2,3,4,5,6],[6,7,1,2,3,4,5],[5,6,7,1,2,3,4],[4,5,6,7,1,2,3],[3,4,5,6,7,1,2],[2,3,4,5,6,7,1],[1,2,3,4,5,6,7]],Xt=[void 0,0,1,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,1,2,3,4,5,6,0],Ht=[[],[6,0],[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],void 0,void 0,void 0,[0,0],[1,1],[2,2],[3,3],[4,4],[5,5],[6,6]];function Yt(t,r){var e=F(t),n=F(r);if(e&&n)return Math.round((e.getTime()-n.getTime())/864e5)}function Bt(t){var r=F(t);if(r){r.setHours(0,0,0),r.setDate(r.getDate()+4-(r.getDay()||7));var e=new Date(r.getFullYear(),0,1);return Math.ceil(((r.getTime()-e.getTime())/864e5+1)/7)}}function jt(t,r,e,n){var o=F(t),i=F(r);if(o&&i){for(var a=void 0===e?Ht[1]:Ht[e],u=n||[],f=0;f<u.length;f++){if((l=S(u[f]))instanceof Error)throw\"The \"+u[f]+\" is not a  number\";u[f]=l}var s=(i.getTime()-o.getTime())/864e5+1,h=Math.round(s),c=o;for(f=0;f<s;f++){var p=(new Date).getTimezoneOffset()>0?c.getUTCDay():c.getDay(),v=!1;p!==a[0]&&p!==a[1]||(v=!0);for(var g=0;g<u.length;g++){var l;if((l=u[g]).getDate()===c.getDate()&&l.getMonth()===c.getMonth()&&l.getFullYear()===c.getFullYear()){v=!0;break}}v&&h--,c.setDate(c.getDate()+1)}return h}}function zt(t,r,e,n){var o=F(t),i=x(r);if(o&&\"number\"==typeof i){for(var a=void 0===e?Ht[1]:Ht[e],u=n||[],f=0;f<u.length;f++){if((p=S(u[f]))instanceof Error)throw\"The \"+u[f]+\" is not a  number\";u[f]=p}for(var s=0;s<i;){o.setDate(o.getDate()+1);var h=o.getDay();if(h!==a[0]&&h!==a[1]){for(var c=0;c<u.length;c++){var p;if((p=u[c]).getDate()===o.getDate()&&p.getMonth()===o.getMonth()&&p.getFullYear()===o.getFullYear()){s--;break}}s++}}return O(o)}}function Gt(t){return 1===new Date(t,1,29).getMonth()}function qt(t,r,e){void 0===e&&(e=0);var n=F(t),o=F(r);if(n&&o){var i=n.getDate(),a=n.getMonth()+1,u=n.getFullYear(),f=o.getDate(),s=o.getMonth()+1,h=o.getFullYear(),c=365,p=h-u+1,v=(new Date(h+1,0,1).getTime()-new Date(u,0,1).getTime())/1e3/60/60/24/p;switch(e){case 0:return 31===i&&31===f?(i=30,f=30):31===i?i=30:30===i&&31===f&&(f=30),(f+30*s+360*h-(i+30*a+360*u))/360;case 1:return u===h||u+1===h&&(a>s||a===s&&i>=f)?((u===h&&Gt(u)||function(t,r){var e=t.getFullYear(),n=new Date(e,2,1);if(Gt(e)&&t<n&&r>=n)return!0;var o=r.getFullYear(),i=new Date(o,2,1);return Gt(o)&&r>=i&&t<i}(n,o)||1===s&&29===f)&&(c=366),Yt(o.toDateString(),n.toDateString())/c):Yt(o.toDateString(),n.toDateString())/v;case 2:return Yt(o.toDateString(),n.toDateString())/360;case 3:return Yt(o.toDateString(),n.toDateString())/365;case 4:return(f+30*s+360*h-(i+30*a+360*u))/360}}}var $t={DATE:function(t,r,e){return O(new Date(t,r-1,e))},TIME:function(t,r,e){var n=O(new Date(1900,0,1,t,r,e,0));return n-Math.trunc(n)},DAY:function(t){return S(t).getDate()},MONTH:function(t){return S(t).getMonth()+1},YEAR:function(t){return S(t).getFullYear()},HOUR:function(t){return S(t).getHours()},MINUTE:function(t){return S(t).getMinutes()},SECOND:function(t){return S(t).getSeconds()},NOW:function(){return O(new Date)},DATEDIF:function(t,r,e){var n=e.toLowerCase();if(\"d\"===n)return r-t;var o=S(t),i=S(r);switch(n){case\"y\":return i.getFullYear()-o.getFullYear();case\"m\":return(u=12*(i.getFullYear()-o.getFullYear()))+i.getMonth()-o.getMonth();case\"d\":return Math.floor(r-t);case\"md\":if((f=i.getDate()-o.getDate())<0){var a=new Date(o.getFullYear(),o.getMonth()+1,0).getDate();return i.getDate()+a-o.getDate()}return f;case\"ym\":var u;return(u=i.getMonth()-o.getMonth())<0?12+u:u;case\"yd\":var f;return(f=A(i)-A(o))<0?365+f:f}},DATEVALUE:function(t){if(\"string\"==typeof t)return O(new Date(new Date(t).toDateString()))},DAYS:Yt,DAYS360:function(t,r,e){void 0===e&&(e=0);var n=F(t),o=F(r);if(n&&o){var i=n.getMonth(),a=o.getMonth(),u=void 0,f=void 0;if(P(e))u=31===n.getDate()?30:n.getDate(),f=31===o.getDate()?30:o.getDate();else{var s=new Date(n.getFullYear(),i+1,0).getDate(),h=new Date(o.getFullYear(),a+1,0).getDate();u=n.getDate()===s?30:n.getDate(),o.getDate()===h?u<30?(a++,f=1):f=30:f=o.getDate()}return 360*(o.getFullYear()-n.getFullYear())+30*(a-i)+(f-u)}},EDATE:function(t,r){var e=F(t),n=x(r);if(e&&\"number\"==typeof n)return e.setMonth(e.getMonth()+n),O(e)},EOMONTH:function(t,r){var e=F(t),n=x(r);if(e&&\"number\"==typeof n)return O(new Date(e.getFullYear(),e.getMonth()+n+1,0))},ISOWEEKNUM:Bt,NETWORKDAYS:function(t,r,e){return jt(t,r,1,e)},\"NETWORKDAYS.INTL\":jt,TIMEVALUE:function(t){if(\"string\"==typeof t){var r=t.split(\" \"),e=r[1],n=r[0].split(\":\"),o=new Date;return o.setHours(+n[0]),e&&\"PM\"===e.toUpperCase()&&o.setHours(o.getHours()+12),o.setMinutes(+n[1]),n[2]&&o.setSeconds(+n[2]),(3600*o.getHours()+60*o.getMinutes()+o.getSeconds())/86400}},WEEKNUM:function(t,r){void 0===r&&(r=1);var e=F(t);if(21===r)return Bt(r);var n=Xt[r],o=new Date(e.getFullYear(),0,1),i=o.getDay()<n?1:0,a=o.getTime()-24*Math.abs(o.getDay()-n)*60*60*1e3;return Math.floor((e.getTime()-a)/864e5/7+1)+i},WEEKDAY:function(t,r){void 0===r&&(r=1);var e=F(t).getDay();return Vt[r][e]},WORKDAY:function(t,r,e){return zt(t,r,1,e)},\"WORKDAY.INTL\":zt,YEARFRAC:qt};var Wt=Object.freeze({__proto__:null,IF:function(t,r,e){return t?r:e},AND:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0;e<t.length;e++)if(!P(t[e]))return!1;return!0},NOT:function(t){return!P(t)},OR:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0;e<t.length;e++)if(t[e])return!0;return!1},CHOOSE:function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];var n=x(t);if(r.length>1&&\"number\"==typeof n){if(r.length<n)throw\"the index number is greater than the length of the array of values\";if(n<=0)throw\"index cannot be less than or equal to 0\";return r[--n]}},FALSE:function(){return!1},TRUE:function(){return!0}});var Kt=Object.freeze({__proto__:null,ISBLANK:function(t){return L(t)},ISBINARY:function(t){return/^[01]{1,10}$/.test(\"\"+t)},ISEVEN:function(t){var r=x(t);return\"number\"==typeof r&&r%2==0},ISODD:function(t){var r=x(t);return\"number\"==typeof r&&r%2!=0},ISNONTEXT:function(t){return\"string\"!=typeof t},ISNUMBER:function(t){return\"number\"==typeof x(t)},ISTEXT:function(t){return\"string\"==typeof t},N:function(t){var r=x(t);if(\"number\"==typeof r)return r;var e=new Date(t);return e.getTime()?O(e):\"TRUE\"===t||!0===t?1:0}});function Qt(t,r,e,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var i,a=U(t),u=U(r),f=U(e),s=U(n);if(0===a)i=(f+s)/u;else{var h=Math.pow(1+a,u);i=a*(f*h+s)/(h-1),1===o&&(i/=1+a)}return-i}function Jt(t,r,e,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var i,a=U(t),u=U(r),f=U(e),s=U(n);if(0!==a){var h=Math.pow(1+a,u);return i=s*h+f*(h-1)/a,1===o&&(i=s*h+f*(1+a)*(h-1)/a),-i}i=s+f*u}function Zt(t,r,e,n,o,i){void 0===o&&(o=0),void 0===i&&(i=0);var a=U(t),u=U(e),f=U(r),s=U(n),h=Qt(a,u,s,U(o),i);return(1===f?1===i?0:-s:1===i?Jt(a,f-2,h,s,1)-h:Jt(a,f-1,h,s,0))*a}var tr=Object.freeze({__proto__:null,ACCRINT:function(t,r,e,n,o,i,a){void 0===o&&(o=0),void 0===a&&(a=0);var u=F(t),f=F(e),s=U(n),h=U(o),c=U(i),p=U(a);if(1!==c)throw\"This function is only supported with frequency 1\";if(-1===[0,1,2,3,4].indexOf(p))throw\"Basis is \"+a+\". It's should be 0, 1, 2, 3 or 4\";if(f<=u)throw\"Settlement canot be before or equal to issue\";return h*s*qt(t,e,p)},PMT:Qt,FV:Jt,DB:function(t,r,e,n,o){void 0===o&&(o=12);var i=U(t),a=U(r),u=U(e),f=U(n),s=U(o);if(i<0||a<0||u<0||f<0)throw\"Parameters cannot be negative\";if(-1===[1,2,3,4,5,6,7,8,9,10,11,12].indexOf(s))throw\"Month is \"+o+\". It's should be beetwen 1 and 12\";if(f>u)throw\"Period cannot be greater than life\";if(a>=i)return 0;for(var h=+(1-Math.pow(a/i,1/u)).toFixed(3),c=i*h*s/12,p=c,v=0,g=n===u?u-1:n,l=2;l<=g;l++)p+=v=(i-p)*h;return 1===n?c:n===u?(i-p)*h:v},DDB:function(t,r,e,n,o){void 0===o&&(o=2);var i=U(t),a=U(r),u=U(e),f=U(n),s=U(o);if(i<0||a<0||u<0||f<0||s<0)throw\"Parameters cannot be negative\";if(f>u)throw\"Period cannot be greater than life\";if(a>=i)return 0;for(var h=0,c=0,p=1;p<=n;p++)h+=c=Math.min(s/u*(i-h),i-a-h);return c},DOLLAR:function(t,r){void 0===r&&(r=2);var e=x(t),n=x(r);if(\"number\"==typeof e&&\"number\"==typeof n){if(n>=0)return\"$\"+e.toFixed(n);var o=Math.pow(10,-n);return\"$\"+Math.trunc(e/o)*o}},DOLLARDE:function(t,r){var e=U(t),n=U(r);if(n<0)throw\"Fraction cannot be negative\";if(n>=0&&n<1)throw\"Fraction cannot be zero\";n=parseInt(\"\"+n,10);var o=parseInt(\"\"+t,10);o+=e%1*Math.pow(10,Math.ceil(Math.log(n)/Math.LN10))/n;var i=Math.pow(10,Math.ceil(Math.log(n)/Math.LN2)+1);return o=Math.round(o*i)/i},DOLLARFR:function(t,r){var e=U(t),n=U(r);if(n<0)throw\"Fraction cannot be negative\";if(n>=0&&n<1)throw\"Fraction cannot be zero\";n=parseInt(\"\"+n,10);var o=parseInt(\"\"+t,10);return o+=e%1*Math.pow(10,-Math.ceil(Math.log(n)/Math.LN10))*n},EFFECT:function(t,r){var e=U(t),n=U(r);if(e<=0)throw\"Rate cannot be less than or equal to zero\";if(n<1)throw\"Periods cannot be less than 1\";return n=parseInt(\"\"+n,10),Math.pow(1+e/n,n)-1},FVSCHEDULE:function(t,r){for(var e=U(t),n=r.map((function(t){return U(t)})),o=n.length,i=e,a=0;a<o;a++)i*=1+n[a];return i},IRR:function(t,r){void 0===r&&(r=0);for(var e=R(t).map((function(t){return U(t)})),n=U(r),o=function(t,r,e){for(var n=e+1,o=t[0],i=1;i<t.length;i++)o+=t[i]/Math.pow(n,(r[i]-r[0])/365);return o},i=function(t,r,e){for(var n=e+1,o=0,i=1;i<t.length;i++){var a=(r[i]-r[0])/365;o-=a*t[i]/Math.pow(n,a+1)}return o},a=[],u=!1,f=!1,s=0;s<e.length;s++)a[s]=0===s?0:a[s-1]+365,e[s]>0&&(u=!0),e[s]<0&&(f=!0);if(!u||!f)throw\"Values should contain at least one positive value and one negative value\";var h,c,p,v=n=void 0===r?.1:n,g=!0;do{h=v-(p=o(e,a,v))/i(e,a,v),c=Math.abs(h-v),v=h,g=c>1e-10&&Math.abs(p)>1e-10}while(g);return v},IPMT:Zt,ISPMT:function(t,r,e,n){var o=U(t),i=U(r),a=U(e);return U(n)*o*(i/a-1)},NPV:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=R(t).map((function(t){return U(t)})),n=U(e[0]),o=0,i=1;i<e.length;i++)o+=e[i]/Math.pow(1+n,i);return o},NOMINAL:function(t,r){var e=U(t),n=U(r);if(e<=0)throw\"Rate cannot be less then or equal to zero\";if(n<1)throw\"Periods cannot be less then 1\";return n=parseInt(\"\"+n,10),(Math.pow(e+1,1/n)-1)*n},NPER:function(t,r,e,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var i=U(t),a=U(r),u=U(e),f=U(n),s=U(o),h=a*(1+i*s)-f*i,c=u*i+a*(1+i*s);return Math.log(h/c)/Math.log(1+i)},PDURATION:function(t,r,e){var n=U(t),o=U(r),i=U(e);if(n<=0)throw\"Rate cannot be less then or equal to zero\";return(Math.log(i)-Math.log(o))/Math.log(1+n)},PPMT:function(t,r,e,n,o,i){void 0===o&&(o=0),void 0===i&&(i=0);var a=U(t),u=U(r),f=U(e),s=U(n),h=U(o),c=U(i);return Qt(a,f,s,h,c)-Zt(a,u,f,s,h,c)},PV:function(t,r,e,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var i=U(t),a=U(r),u=U(e),f=U(n),s=U(o);return 0===i?-u*a-f:((1-Math.pow(1+i,a))/i*u*(1+i*s)-f)/Math.pow(1+i,a)},SYD:function(t,r,e,n){var o=U(t),i=U(r),a=U(e);return(o-i)*(a-U(n)+1)*2/(a*(a+1))},TBILLPRICE:function(t,r,e){var n=F(t),o=F(r),i=U(e);if(\"number\"==typeof i&&o>n)return 100*(1-i*Math.round((o.getTime()-n.getTime())/864e5)/360)},TBILLYIELD:function(t,r,e){var n=F(t),o=F(r),i=U(e);if(\"number\"==typeof i&&o>n)return(100-i)/i*360/Math.round((o.getTime()-n.getTime())/864e5)}}),rr={number:Rt,string:Pt,date:$t,other:Wt,information:Kt,financial:tr,lookup:kt},er=e(e(e(e(e(e(e({},Rt),Pt),$t),Wt),Kt),tr),kt);var nr=Math.pow(10,8);function or(t,r,e){e.add?t.has(r)||e.add(r):t.add(r)}function ir(t){if(t.keys)return Array.from(t.keys());var r=[];return t.forEach((function(t,e){return r.push(e)})),r}function ar(t){if(t.values)return t.values();var r=[];t.forEach((function(t,e){return r.push(e)}));var e=0;return{add:function(t){r.push(t)},next:function(){var t=r[e];return{done:++e>r.length,value:t}}}}var ur=function(){function t(t){var r=this;(t=t||{get:null,set:null,strict:!1})&&(this._getter=t.get,this._setter=t.set,this._strict=t.strict),this._parser=_,this._printer=I,this._parseContext={name:function(){},pageName:function(){return\"\"},pageObj:function(){return null},page:function(){return 0},z:0},this.$count=0,this._data=new Map,this._triggers=new Map,this._holders={},this._context={v:function(t){if(-1===t)throw new Error;var e=r._getter(t);return void 0===e?null:e},r:function(t,e){var n=o(t),i=n[0],a=n[1],u=o(e),f=u[0]-i,s=u[1]-a+1,h=[];h.$width=s;for(var c=0;c<=f;c++)for(var p=0;p<s;p++)h[c*s+p]=r._getter(t+64*p+4096*c*64);return h},m:er,e:function(t){throw t},p:function(t){return r.getPlaceholder(t)}}}return t.prototype.setValue=function(t,r,e,n){\"\"===r&&(r=null),this._removeTriggers(t,null),this._setter(t,r,e)&&(n||this.trigger(t))},t.prototype.clean=function(t){this._removeTriggers(t,null)},t.prototype.getValue=function(t){return this._getter(t)},t.prototype.setPlaceholder=function(t,r){var e=this;\"*\"===t?Object.entries(r).forEach((function(t){return e.setPlaceholder(t[0],t[1])})):(null===r?delete this._holders[t]:this._holders[t]=r,this.each((function(r,n){(function(t,r,e){for(var n=0;n<t.length;n+=3)if(2===t[n]&&r.substr(t[n+1],t[n+2])==e)return!0;return!1})(n.code,n.source,t)&&e.setMath(r,n.source,e._parseContext)})))},t.prototype.getPlaceholder=function(t){if(\"*\"===t)return this._holders;var r=this._holders[t];return void 0===r?null:r},t.prototype.setMath=function(t,r,e,n){var o=this._generate(r,e),i=this._setMathAt(t,o);n||this._execAndTrigger(i)},t.prototype.refresh=function(t){this._execAndTrigger(t)},t.prototype.getMath=function(t){return this._data.get(t)},t.prototype.trigger=function(t,r){var e=this._triggers.get(t);if(e){var n=!r;r||(r=new Set);for(var o=0;o<e.length;o++)r.add(e[o]);n&&this.triggerSet(r)}return null},t.prototype.triggerSet=function(t){for(var r=this,e=new Map;t.size;){var n=ar(t),o=!1;t:for(var i=n.next();!i.done;i=n.next()){var a=this._data.get(i.value),u=e.get(i.value);if(!u||(1==u&&(u=this._check_for_loops(i.value,a.triggers,e)),2!=u)){var f=a.triggers;if(f)for(var s=0;s<f.length;s++)if(t.has(f[s]))continue t;this._execAndTrigger(i.value,t),u||e.set(i.value,1),t.delete(i.value),o=!0}}if(!o)return void t.forEach((function(e){return r._errorAndTrigger(e,t)}))}},t.prototype.getStats=function(){return{math:this._data.size,trigger:this._triggers.size}},t.prototype._check_for_loops=function(t,r,e){var n=new Set;r.forEach((function(t){return n.add(t)}));for(var o=ar(n),i=o.next();!i.done;i=o.next()){if(i.value==t)return e.set(t,2),2;var a=e.get(i.value);if(a&&a>1)return e.set(t,a),a;var u=this._data.get(i.value);u&&u.triggers&&u.triggers.forEach((function(t){return or(n,t,o)}))}return e.set(t,3),3},t.prototype._setMathAt=function(t,r){if(this._removeTriggers(t,r)){if(r.triggers)if(-1===r.triggers.indexOf(t)&&3!==r.broken)for(var n=0;n<r.triggers.length;n++){var o=r.triggers[n],i=this._triggers.get(o);void 0===i&&(i=[],this._triggers.set(o,i)),i.push(t)}else r=e(e({},r),{broken:3});return this._data.set(t,r),t}},t.prototype._removeTriggers=function(t,r){var e=this._data.get(t);if(!e)return!0;if(e===r)return!1;var n=e.triggers;if(n&&3!==e.broken)for(var o=0;o<n.length;o++){var i=n[o],a=this._triggers.get(i);if(a){var u=a.filter((function(r){return r!==t}));u.length?this._triggers.set(i,u):this._triggers.delete(i)}}return this._data.delete(t),!0},t.prototype.parse=function(t,r){return this._parser(t,r||this._parseContext)},t.prototype.exec=function(t,r){var e=this._generate(t,r);return this._exec(e)},t.prototype.each=function(t){var r=this;ir(this._data).forEach((function(e){return t(e,r._data.get(e))}))},t.prototype.setLogger=function(t){this._err_handler=t},t.prototype._setErr=function(t,e){return t.broken=2,e&&this._err_handler&&this._err_handler(e),r[t.broken]},t.prototype._exec=function(t){if(t.broken>0&&2!==t.broken)return r[t.broken];try{var e=t.exec(this._context);return t.broken=0,\"number\"==typeof e?isFinite(e)?Math.round(e*nr)/nr:this._setErr(t):e}catch(r){return this._setErr(t,r)}},t.prototype.toString=function(t,r){return s(t,r||this._parseContext)},t.prototype.regenerate=function(t,r,n){var o=this;n=e({},n||this._parseContext),ir(this._data).forEach((function(e){var i=!1,a=o._data.get(e),f=u(e);if(r&&f===t)o._removeTriggers(e,null);else{for(var h=0;h<a.code.length;h+=3)if(9===a.code[h]&&u(a.code[h+1])===t){i=!0;break}i&&(n.z=f,r?o.setMath(e,a.source,n):(a.source=s(a,n),a.code=o._parser(a.source,n).code))}}))},t.prototype.recalculate=function(t,r){var n=this;r=e({},r||this._parseContext);var o=new Set;this.each((function(e){if(t){var i=n._data.get(e);if(i.broken&&2!==i.broken)return r.z=u(e),void n.setMath(e,i.source,r)}o.add(e)})),this.triggerSet(o)},t.prototype._generate=function(t,r,e){var n=e||this._parser(t,r||this._parseContext);return this._printer(n,this._strict),n.triggers=function(t){for(var r=[],e=t.code,n=e.length,o=0;o<n;o+=3){switch(e[o]){case 7:case 6:var i=e[o+4];r.push(i);break;case 8:f(e[o+4],e[o+7],(function(t){return r.push(t)}))}}if(r.length>10){var a=new Set;r=r.filter((function(t){return!a.has(t)&&(a.add(t),!0)}))}return r.length?r:null}(n),n},t.prototype._execAndTrigger=function(t,r){this.$count+=1;var e=this._data.get(t);if(e){var n=this._exec(e);this._setter(t,n,2)&&this.trigger(t,r)}},t.prototype._errorAndTrigger=function(t,r){var e=this._data.get(t),n=this._setErr(e);this._setter(t,n,2)&&this.trigger(t,r)},t.prototype.debug=function(t){console.log(function(t){for(var r=t.code,e=t.source,n=\"\",o=r.length,i=0;i<o;i+=3){var a=r[i],u=void 0;switch(a){case 4:u=\"method\";break;case 1:u=\"text\";break;case 5:u=\"page\";break;case 2:u=\"holder\";break;case 6:u=\"name\";break;case 7:u=\"arg\";break;case 8:u=\"range\";break;case 9:u=\"data\";break;case 10:u=\"op\";break;case 11:u=\"number\";break;case 3:u=\"error\";break;case 12:u=\"extra\"}n+=9===a?\"              \"+r[i+1]+\" x \"+r[i+2]+\")\\n\":\"[\"+u+\"]\"+w(u)+e.substr(r[i+1],r[i+2])+\"\\n\"}return n}(this.parse(t)))},t.prototype.transpose=function(t,r,i,a){var u=this;a=a||this._parseContext;var f=o(t),s=f[0],h=f[1],c=f[2],p=new Map,v=new Map,g=new Set;ir(this._data).forEach((function(t){var f=o(t),l=f[0],d=f[1],b=f[2],M=u._data.get(t),y=b===a.z?a:e(e({},a),{z:b}),m=u._transpose(M,s,h,r,i,a,y),_=t;if(b===c&&(d>=h||l>=s)&&(_=n(l>=s?l+r:l,d>=h?d+i:d,b)),M!==m||t!==_){if(v.set(t,m),b===c&&(i<0&&d>=h&&d<h-i||r<0&&l>=s&&l<s-r))return;p.set(_,m),M.broken!==m.broken&&g.add(_)}})),ir(p).forEach((function(t){return u._setMathAt(t,p.get(t))})),Array.from(v.keys()).forEach((function(t){p.has(t)||u._removeTriggers(t,null)})),r>0&&this._triggerRow(s,r,g),i>0&&this._triggerColumn(h,i,g),r<0&&this._triggerColumn(s-1,2,g),i<0&&this._triggerColumn(h-1,2,g),this.triggerSet(g)},t.prototype._triggerColumn=function(t,r,e){var n=this,o=r?t+r:t;ir(this._triggers).forEach((function(r){var i=a(r);i>=t&&i<o&&n.trigger(r,e)}))},t.prototype._triggerRow=function(t,r,e){var n=this,o=r?t+r:t;ir(this._triggers).forEach((function(r){var a=i(r);a>=t&&a<o&&n.trigger(r,e)}))},t.prototype.transposeMath=function(t,r,e,n){return\"string\"==typeof t&&(t=this.parse(t,n)),n=n||this._parseContext,this._transpose(t,-1,-1,r,e,n,n).source},t.prototype._transpose=function(t,r,e,i,a,u,f){for(var h=!0,c=t.code,p=!(r<0||e<0),v=0;v<c.length;v+=3)if(7===c[v]){var g=o(c[v+4]),l=g[0],d=g[1],b=g[2];if(u.z!==b)continue;var M=c[v+5];if(!p&&3==M)continue;(p||0==(1&M))&&0!==i&&l>=r&&(h&&(c=[].concat(c),h=!1),((l+=i)<r||l<0)&&(c[v]=3)),(p||0==(2&M))&&0!==a&&d>=e&&(h&&(c=[].concat(c),h=!1),((d+=a)<e||d<0)&&(c[v]=3)),h||(c[v+4]=n(l,d,b)),v+=3}else if(8===c[v]){var y=c[v+5],m=c[v+8];if(!p&&3===y&&3===m)continue;var _=o(c[v+4]),w=_[0],E=_[1],I=(b=_[2],o(c[v+7])),C=I[0],T=I[1];if(u.z!==b)continue;0!==i&&((p||0==(1&y))&&(i>0?w>=r:w>r)&&(h&&(c=[].concat(c),h=!1),(w+=i)<0&&(c[v]=3)),(p||0==(1&m))&&C>=r&&(h&&(c=[].concat(c),h=!1),(C+=i)<w&&(c[v]=3))),0!==a&&((p||0==(2&y))&&(a>0?E>=e:E>e)&&(h&&(c=[].concat(c),h=!1),(E+=a)<0&&(c[v]=3)),(p||0==(2&m))&&T>=e&&(h&&(c=[].concat(c),h=!1),(T+=a)<E&&(c[v]=3))),h||(c[v+4]=n(w,E,b),c[v+7]=n(C,T,b)),v+=6}if(h)return t;var D={code:c,broken:t.broken,source:t.source,triggers:null,exec:null};return D=this._parser(s(D,f),f),this._generate(D.source,f,D)},t}();var fr=function(){function t(t,r,n){this._data=[],this._id=t,this._store=r,this._meta={},this._parseContext=e(e({},n),{z:t})}return t.prototype.getMeta=function(){return this._meta},t.prototype.setMeta=function(t){this._meta=e(e({},this._meta),t)},t.prototype.getID=function(){return this._id},t.prototype.cellID=function(t,r){return n(t,r,this._id)},t.prototype.getSize=function(){var t=this._data.length,r=0;return this._data.forEach((function(t){t&&t.length>r&&(r=t.length)})),[t,r]},t.prototype.getContext=function(){return this._parseContext},t.prototype.addRow=function(t,r){this._data.splice.apply(this._data,sr(t,r)),this._store.transpose(n(t,0,this._id),r,0,this._parseContext)},t.prototype.removeRow=function(t,r){this._data.splice(t,r),this._store.transpose(n(t,0,this._id),-r,0,this._parseContext)},t.prototype.addColumn=function(t,r){var e=sr(t,r);this._data.forEach((function(t){t&&t.splice.apply(t,e)})),this._store.transpose(n(0,t,this._id),0,r,this._parseContext)},t.prototype.removeColumn=function(t,r){this._data.forEach((function(e){e&&e.splice(t,r)})),this._store.transpose(n(0,t,this._id),0,-r,this._parseContext)},t.prototype.setCell=function(t,r,n){var o=this._data[t];o||(o=this._data[t]=[]);var i=o[r];o[r]=i?e(e(e({},i),n),{value:i.value}):n,void 0!==n.value&&this.setValue(t,r,n.value)},t.prototype.setValue=function(t,r,e,o){\"string\"==typeof e&&e.length>1&&\"=\"===e[0]?this._store.setMath(n(t,r,this._id),e.substr(1),this._parseContext):this._store.setValue(n(t,r,this._id),e,o)},t.prototype.getCell=function(t,r,e){var n=this._data[t],o=n?n[r]:null;return o||!e||(n||(n=this._data[t]=[]),(o=n[r])||(o=n[r]={value:\"\"})),o},t.prototype.getValue=function(t,r,e){if(e){var o=this._store.getMath(n(t,r,this._id));if(o)return\"=\"+o.source}var i=this.getCell(t,r,!1);return i?i.value:null},t.prototype.getRange=function(t,r,e,n){for(var o=[],i=t;i<=e;i++)for(var a=r;a<=n;a++)o.push(this.getValue(i,a,!1));return o},t.prototype.getCellRange=function(t,r,e,n){for(var o=[],i=t;i<=e;i++)for(var a=r;a<=n;a++)o.push(this.getCell(i,a));return o},t.prototype.eachCell=function(t){this._data.forEach((function(r,e){r&&r.forEach((function(r,n){r&&t(e,n,r)}))}))},t.prototype.serialize=function(t){var r=this,o=[];return this.eachCell((function(i,a,u){if(u=e({},u),t){var f=r._store.getMath(n(i,a,r.getID()));f&&(u.value=\"=\"+f.source)}o.push([i,a,u])})),o},t.prototype.parse=function(t,r){var o=this;this._store.each((function(t){u(t)===o._id&&o._store.clean(t)})),this._data=[];var i=new Set;t.forEach((function(t){var a=t[0],u=t[1],f=t[2],s=o._data[a];s||(s=o._data[a]=[]);var h=(f=s[u]=e({},f)).value;if(h)if(\"string\"==typeof h&&h.length>1&&\"=\"===h[0]){var c=n(a,u,o._id),p=h.substr(1);o._store.setMath(c,p,o.getContext(),!0),i.add(c)}else if(r){f.value=null;c=n(a,u,o._id);o._store.setValue(c,h,null,!0),o._store.trigger(c,i)}})),this._store.triggerSet(i)},t}();function sr(t,r){for(var e=[t,0],n=0;n<r;n++)e.push(null);return e}var hr=function(){function t(t,r,e){this._ranges=new Map,this._counter=1,this._rangeOrder=[],this._store=t,this._page=r,this._pageGetter=e}return t.prototype.get=function(t){return this._store.getMath(this._ranges.get(t))},t.prototype.toId=function(t){return this._ranges.get(t)},t.prototype.add=function(t,r){var e=this._ranges.get(t)||this._next_id();this._store.setMath(e,r,this._page.getContext()),this._ranges.set(t,e),this._refresh(t)},t.prototype.remove=function(t){this._ranges.delete(t),this._counter=1,this._refresh(t)},t.prototype.serialize=function(){var t=this;return Array.from(this._ranges.keys()).map((function(r){return[r,t.get(r).source]}))},t.prototype.parse=function(t){var r=this;t.forEach((function(t){return r.add(t[0],t[1])}))},t.prototype._refresh=function(t){var r=this,e=t.indexOf(\"!\"),n=\"\";-1!==e&&(n=t.substr(0,e),t=t.substr(e+1)),this._store.each((function(e,o){if(function(t,r,e,n){for(var o=0;o<t.length;o+=3)if(6===t[o]){if(\"\"!==e){if(5===t[o-3]&&r.substr(t[o-2],t[o-1])!==e)continue;return!0}if(r.substr(t[o+1],t[o+2])===n)return!0}return!1}(o.code,o.source,n,t)){var i=u(e);r._store.setMath(e,o.source,r._pageGetter(i).getContext())}}))},t.prototype._next_id=function(){for(;this._rangeOrder[this._counter];)this._counter++;return this._rangeOrder[this._counter]=!0,n(this._counter,0,this._page.getID())},t.prototype.renamePage=function(t,r){var e=this;t+=\"!\",r&&(r+=\"!\"),this._ranges.forEach((function(n,o,i){0===o.indexOf(t)&&(r?i.set(o.replace(t,r),n):e._store.clean(n),i.delete(o))}))},t}();var cr=function(){function t(t){var r=this;this._cfg=t||{strict:!1},this._pages=[],this._pageNames=[],this._pageName2ID=new Map,this._pCounter=0,this._parseContext={page:function(t){return r._pageName2ID.get(t)},pageName:function(t){return r._pageNames[t]},pageObj:function(t){return r._pages[t]},name:function(t,e,n){var o,i=t.length,a=e.substr(t[i-2],t[i-1]);if(5===t[i-6]){var u=e.substr(t[i-5],t[i-4]);o=r._ranges.toId(u+\"!\"+a)||r._ranges.toId(a)}else o=r._ranges.toId(n.pageName(n.z)+\"!\"+a)||r._ranges.toId(a);t.push(9,o||-1,0)},z:0},this._store=new ur(e(e({},this._cfg),{get:function(t){var e=o(t),n=e[0],i=e[1],a=e[2];return r._pages[a].getValue(n,i)},set:function(t,e,n){var i=o(t),a=i[0],u=i[1],f=i[2],s=r._pages[f].getCell(a,u,!0),h=2===n;if(null!=n&&2!=n||(n=s.$format||0),s.$format=n,\"string\"==typeof e&&1!=n&&e){var c=parseFloat(e);h&&(c=c.toString()),c==e&&(e=parseFloat(e))}return s.value!==e&&(s.value=e,!0)}}));var n=this._pages[63]=new fr(63,this._store,this._parseContext);this._ranges=new hr(this._store,n,this.getPage.bind(this))}return t.prototype.addPage=function(t){for(;this._pages[this._pCounter];)this._pCounter++;var r=this._pCounter,e=new fr(r,this._store,this._parseContext);return this._pageName2ID.set(t,r),this._pages[r]=e,this._pageNames[r]=t,e},t.prototype.renamePage=function(t,r){if(t!==r){var e=this._pageName2ID.get(t);this._pageName2ID.delete(t),this._pageName2ID.set(r,e),this._pageNames[e]=r,this._ranges.renamePage(t,r);var n=this._pages[e].getContext();this._store.regenerate(e,!1,n)}},t.prototype.removePage=function(t){var r=this._pageName2ID.get(t),e=this._pages[r].getContext();this._pageName2ID.delete(t),this._pages[r]=this._pageNames[r]=null,this._pCounter=0,this._ranges.renamePage(t,null),this._store.regenerate(r,!0,e)},t.prototype.getPage=function(t){return\"string\"==typeof t&&(t=this._pageName2ID.get(t)),this._pages[t]},t.prototype.getRanges=function(){return this._ranges},t.prototype.getStore=function(){return this._store},t}();exports.D_COMMON=0,exports.D_STRING=1,exports.DataPage=fr,exports.DataStore=cr,exports.Store=ur,exports.T_ARG=7,exports.T_DATA=9,exports.T_ERROR=3,exports.T_METHOD=4,exports.T_NAME=6,exports.T_NUMBER=11,exports.T_OPERATOR=10,exports.T_PAGE=5,exports.T_PLACEHOLDER=2,exports.T_RANGE=8,exports.T_SPACE=12,exports.T_TEXT=1,exports.addMethod=function(t,r){er[t]=r},exports.column=a,exports.fromId=o,exports.methodGroups=rr,exports.methods=er,exports.page=u,exports.row=i,exports.str2id=function(t){var r=[];return m(r,t,0),r[1]},exports.str2pos=function(t){var r=[];return m(r,t,0),o(r[1]).slice(0,2)},exports.str2range=function(t){var r=[];t.split(\":\").map((function(t){return m(r,t,0)}));var e=o(r[1]),n=e[0],i=e[1],a=o(r[4]);return[n,i,a[0],a[1]]},exports.toId=n;\n//# sourceMappingURL=muon.js.map\n","import {addMethod} from \"@xbs/muon\";\n\nexport function init(view){\n\tconst math = {\n\t\tIMAGE: url => `<img class=\"webix_ssheet_cimage\" src=\"${webix.template.escape(url)}\">`,\n\t\tHYPERLINK: (url, text) => {\n\t\t\tconst escape = webix.template.escape;\n\t\t\tlet attrs;\n\n\t\t\tif(url[0] == \"#\")\n\t\t\t\tattrs = `href=\"javascript:void(0);\" class=\"webix_ssheet_ref\" data-ref=\"${escape(url.substr(1))}\"`;\n\t\t\telse\n\t\t\t\tattrs = `target=\"blank\" href=\"${escape(url)}\"`;\n\n\t\t\treturn `<a ${attrs}>${escape(text || url)}</a>`;\n\t\t},\n\t\tSPARKLINE: (arr, type, color1, color2) => {\n\t\t\tconst config = { type, color: color1, negativeColor:color2, paddingX:2, paddingY:2 };\n\n\t\t\tif(type == \"donut\")\n\t\t\t\twebix.extend(config, {type:\"pie\", donut:1}, true);\n\t\t\telse if(type == \"barH\")\n\t\t\t\twebix.extend(config, {type:\"bar\", horizontal:1}, true);\n\n\t\t\tfor(let i = 0 ; i < arr.length; i++)\n\t\t\t\tarr[i] = arr[i]||0;\n\n\t\t\tconst tableConfig = view.$$(\"cells\").config;\n\n\t\t\t//[FIXME] we do not know from which cell the method was called, so this is not the real width and height\n\t\t\tconst isCircle = config.type == \"pie\" || type == \"radar\";\n\t\t\tconst width = isCircle ? 100 : tableConfig.columnWidth;\n\t\t\tconst height = isCircle ? 100 : tableConfig.rowHeight;\n\t\t\treturn webix.Sparklines.getTemplate(config)(arr, { width, height });\n\t\t}\n\t};\n\n\tconst keys = Object.keys(math);\n\tkeys.forEach((key, i) => addMath(view, key, math[key], i == keys.length - 1));\n}\n\nexport function addMath(view, name, handler, sort){\n\tname = name.toUpperCase();\n\taddMethod(name, handler);\n\tif(view.$$(\"liveEditor\")){\n\t\tconst sid = view.$$(\"liveEditor\").config.suggest;\n\t\tconst list = webix.$$(sid).getList();\n\t\tif(!list.exists(name)){\n\t\t\tlist.add({id:name, value:name});\n\t\t\tif(sort)\n\t\t\t\tlist.sort(\"value\", \"asc\", \"string\");\n\t\t}\n\t}\n}\n\nexport function getJsDateFromExcel(excelDate) {\n\tconst date = new Date(Math.round((excelDate - 25569) * 86400 * 1000));\n\treturn new Date(date.getTime() + date.getTimezoneOffset() * 60000);\n}\n\nexport function getExcelDateFromJs(jsDate) {\n\tconst returnDateTime = 25569 + ((jsDate.getTime() - (jsDate.getTimezoneOffset() * 60000)) / (86400 * 1000));\n\treturn returnDateTime.toString();\n}","import {getJsDateFromExcel, getExcelDateFromJs} from \"../mathematics/methods\";\n\nfunction getJsDate(value){\n\tif ((value || value === 0) && !(value instanceof Date) && !isNaN(value)){\n\t\tvalue = getJsDateFromExcel(value);\n\t}\n\treturn value;\n}\n\nfunction getExcelDate(value){\n\tif (value && value instanceof Date){\n\t\tvalue = getExcelDateFromJs(value);\n\t}\n\treturn value;\n}\n\nwebix.protoUI({\n\t$cssName: \"datepicker\",\n\tname: \"ssheet-datepicker\",\n\tgetValue:function(){\n\t\tconst value = webix.ui.datepicker.prototype.getValue.apply(this);\n\t\treturn getExcelDate(value) || \"\";\n\t},\n\t$prepareValue:function(value){\n\t\tvalue = getJsDate(value);\n\t\treturn webix.ui.datepicker.prototype.$prepareValue.apply(this, [value]);\n\t}\n}, webix.ui.datepicker);\n\nwebix.protoUI({\n\t$cssName: \"daterangepicker\",\n\tname: \"ssheet-daterangepicker\",\n\tgetValue:function(){\n\t\tlet value = webix.ui.datepicker.prototype.getValue.apply(this);\n\t\tif (value){\n\t\t\tvalue = webix.copy(value);\n\t\t\tvalue.start = getExcelDate(value.start);\n\t\t\tvalue.end = getExcelDate(value.end);\n\t\t}\n\t\treturn value || \"\";\n\t},\n\t$prepareValue:function(value){\n\t\tif (!value){\n\t\t\tvalue = { start:null, end:null };\n\t\t}\n\t\telse if (!value.start && !value.end)\n\t\t\tvalue = { start:value };\n\n\t\tvalue.start = getJsDate(value.start);\n\t\tvalue.end = getJsDate(value.end);\n\n\t\treturn webix.ui.daterangepicker.prototype.$prepareValue.apply(this, [value]);\n\t}\n}, webix.ui.daterangepicker);","webix.protoUI({\n\t$cssName: \"window\",\n\tname: \"ssheet-dialog\",\n\t$init: function(config){\n\t\tthis.$view.className += \" webix_ssheet_dialog\";\n\t\tthis.config.buttons = config.buttons;\n\t\tthis.config.close = true;\n\t},\n\tgetBodyConfig: function(content){\n\t\tcontent.borderless = true;\n\t\tvar elements = this.getFormElements(content);\n\t\tvar config = {\n\t\t\tview: \"form\",\n\t\t\tcss: \"webix_ssheet_form\",\n\t\t\tpadding: webix.skin.$active.layoutPadding.form,\n\t\t\telements: elements\n\t\t};\n\t\treturn config;\n\t},\n\tgetFormElements: function(content){\n\t\tvar elements;\n\t\tif(webix.isArray(content))\n\t\t\telements= content;\n\t\telse{\n\t\t\telements = [];\n\t\t\telements.push(content);\n\t\t}\n\t\tif(this.config.buttons){\n\t\t\telements.push({height:1});\n\t\t\telements.push( {\n\t\t\t\tmargin: 10,\n\t\t\t\tcols:[\n\t\t\t\t\t{},\n\t\t\t\t\t{view: \"button\", css: \"ssheet_cancel_button\", label: webix.i18n.spreadsheet.labels.cancel, autowidth:true, click: function(){\n\t\t\t\t\t\tvar parentView = this.getTopParentView();\n\t\t\t\t\t\tparentView.callEvent(\"onCancelClick\",[]);\n\t\t\t\t\t}},\n\t\t\t\t\t{view: \"button\", label: webix.i18n.spreadsheet.labels.save, hotkey: \"enter\", autowidth:true, click: function(){\n\t\t\t\t\t\tvar parentView = this.getTopParentView();\n\t\t\t\t\t\tparentView.callEvent(\"onSaveClick\",[]);\n\t\t\t\t\t}}\n\t\t\t\t]\n\t\t\t});\n\t\t}\n\t\treturn elements;\n\t},\n\tbody_setter: function(value){\n\t\tif(typeof value == \"object\"){\n\t\t\tif(webix.isUndefined(value.padding))\n\t\t\t\tvalue.padding = webix.skin.$active.layoutPadding.form;\n\t\t\tif(value.view == \"form\" && value.elements){\n\t\t\t\tvalue.elements = this.getFormElements(value.elements);\n\t\t\t\tif(!value.css)\n\t\t\t\t\tvalue.css = \"webix_ssheet_form\";\n\t\t\t}\n\t\t\telse\n\t\t\t\tvalue = this.getBodyConfig(value);\n\t\t}\n\n\t\treturn webix.ui.window.prototype.body_setter.call(this,value);\n\t},\n\tdefaults:{\n\t\tmove:true,\n\t\thead: \"Dialog\",\n\t\tbuttons: true,\n\t\tclose:true,\n\t\t//we need to retain focus in table area, so disabling the autofocusing feature\n\t\tautofocus:false,\n\t\twidth: 350\n\t}\n}, webix.ui.window, webix.IdSpace);\n\n\n\nwebix.protoUI({\n\t$cssName: \"datatable\",\n\tname: \"ssheet-dialog-table\",\n\t$init: function(config){\n\t\tif(!config.headerRowHeight)\n\t\t\tconfig.headerRowHeight = 34;\n\t\tthis.$view.className += \" webix_ssheet_dialog_table\";\n\t}\n},webix.ui.datatable);","webix.protoUI({\n\tname: \"ssheet-suggest-labels\",\n\tdefaults:{\n\t\tfitMaster:false,\n\t\tpadding:0,\n\t\tborderless: true\n\t},\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_suggest\";\n\t},\n\tgetItemText: function(id){\n\t\treturn this.getList().getItem(id).value;\n\t}\n}, webix.ui.suggest);\n\nwebix.protoUI({\n\tname: \"ssheet-form-suggest\",\n\tdefaults:{\n\t\tpadding:0,\n\t\tborderless: true\n\t},\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_suggest\";\n\t}\n}, webix.ui.suggest);\n\nwebix.protoUI({\n\t$cssName: \"colorpicker\",\n\tname: \"ssheet-colorpicker\",\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_colorpicker\";\n\t},\n\tdefaults:{\n\t\tsuggest:{\n\t\t\tborderless: true,\n\t\t\tbody:{\n\t\t\t\tview: \"ssheet-colorboard\",\n\t\t\t}\n\t\t}\n\t}\n}, webix.ui.colorpicker);","webix.protoUI({\n\tname:\"formlate\",\n\tsetValue:function(a){ return this.setHTML(a); },\n\tgetValue:function(){ return \"\"; }\n}, webix.ui.template);","webix.protoUI({\n\tname:\"ssheet-icons\",\n\t$cssName: \"dataview\",\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_dataview\";\n\t},\n\tdefaults:{\n\t\tborderless: true,\n\t\ttemplate: \"<span class='webix_ssheet_button_icon #css#' ></span>\",\n\t\ttype:{\n\t\t\twidth: 36,\n\t\t\theight: 36\n\t\t}\n\t}\n},webix.ui.dataview);","webix.protoUI({\n\tname: \"ssheet-suggest\",\n\tdefaults:{\n\t\tpadding:0,\n\t\tcss: \"webix_ssheet_suggest\"\n\t}\n},webix.ui.contextmenu);","const group = {\n\tvalue: null,\n\tset: function(method, master){\n\t\tif(!this.value){\n\t\t\tthis.start();\n\t\t\tmethod.call(master);\n\t\t\tthis.end();\n\t\t}\n\t\telse\n\t\t\tmethod.call(master);\n\t},\n\tstart(){\n\t\tthis.value = webix.uid();\n\t},\n\tend(){\n\t\tthis.value = null;\n\t}\n};\n\nexport default group;","export function init(view){\n\tconst events = [\n\t\t{name:\"onSheetAdd\", type:\"insert\"},\n\t\t{name:\"onSheetRemove\", type:\"remove\"},\n\t\t{name:\"onSheetRename\", type:\"rename\"},\n\t\t{name:\"onSheetStateChange\", type:\"state\"},\n\t\t{name:\"onCellChange\"},\n\t\t{name:\"onStyleChange\"},\n\t\t{name:\"onAction\"},\n\t\t{name:\"onRowOperation\"},\n\t\t{name:\"onColumnOperation\"},\n\t\t{name:\"onAfterConditionSet\"},\n\t\t{name:\"onAfterRangeSet\"},\n\t\t{name:\"onAfterSpan\"},\n\t\t{name:\"onAfterSplit\"},\n\t\t{name:\"onAfterFilter\", view: \"cells\"},\n\t\t{name:\"onRowResize\", view: \"cells\"},\n\t\t{name:\"onColumnResize\", view: \"cells\"}\n\t];\n\n\tlet thread;\n\tfor (let i = 0; i < events.length; i++){\n\t\tconst handler = events[i];\n\t\t(handler.view ? view.$$(handler.view) : view).attachEvent(handler.name, function(name, newName, _, page){\n\t\t\tif (view._loading_data) return;\n\n\t\t\tlet params;\n\t\t\tif(handler.type)\n\t\t\t\tparams = handler.type == \"rename\" ? [handler.type, newName, name] : [handler.type, name];\n\t\t\telse{\n\t\t\t\tlet activeSheet = view.getActiveSheet();\n\t\t\t\tif(handler.name == \"onCellChange\" && page != activeSheet)\n\t\t\t\t\tactiveSheet = page;\n\t\t\t\tparams = [\"update\", activeSheet];\n\t\t\t}\n\n\t\t\tclearTimeout(thread);\n\t\t\tthread = webix.delay(() => view.callEvent(\"onChange\", params));\n\t\t});\n\t}\n\n\tview.attachEvent(\"onChange\", function(){\n\t\tsave(view, \"all\");\n\t});\n}\n\nexport function save(view, name, data){\n\tvar save = view.config.save;\n\tvar url;\n\tif (!save) return;\n\n\tif(name == \"all\"){\n\t\tif(!save.all)\n\t\t\treturn;\n\t\tdata = { data: view.serialize({ sheets: true }) };\n\t\turl = save.all;\n\t}\n\telse{\n\t\turl = typeof save === \"string\" ? save + \"/\" + name : save[name];\n\t}\n\n\turl = webix.proxy.$parse(url);\n\n\tif(url){\n\t\tif (typeof url === \"function\")\n\t\t\treturn url(name, data);\n\n\t\tif (url.$proxy && url.save)\n\t\t\treturn url.save(view, data, null, null);\n\n\t\tvar ajax = webix.ajax();\n\t\tif (name === \"all\")\n\t\t\tajax.headers({ \"Content-type\" : \"application/json\" });\n\t\tajax.post(url, data);\n\t}\n}","export const decode = {};\nexport const encode = {};\n\nconst alpha = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n\nfunction indexToHeader(index){\n\tconst chars = alpha.length;\n\tconst quotient = Math.floor(--index / chars);\n\tif (quotient > 0)\n\t\treturn indexToHeader(quotient) + alpha[index % chars];\n\n\treturn alpha[index % chars];\n}\n\nexport function updateMaxColumn(maxColumn){\n\tconst lastColumn = Object.keys(encode).length;\n\n\tfor(let i = lastColumn + 1; i <= maxColumn; i++){\n\t\tlet str = indexToHeader(i);\n\n\t\tdecode[str] = i;\n\t\tencode[i] = str;\n\t}\n}\n\nexport function adress(text){\n\tlet size;\n\tfor(let i = 0; i < text.length; i++)\n\t\tif(text.charCodeAt(i) < 59){\n\t\t\tsize = i;\n\t\t\tbreak;\n\t\t}\n\n\tconst col = text.substr(0, size);\n\tconst row = text.substr(size);\n\n\treturn [row*1, decode[col]];\n}\n\nexport function range(text, view, page){\n\tconst nind = text.indexOf(\"!\");\n\tlet sheet = page || \"\";\n\n\t//parse sheet names\n\tif (nind !== -1){\n\t\tsheet = text.substr(0, nind);\n\t\tif (sheet[0] === \"'\")\n\t\t\tsheet = sheet.substr(1, sheet.length-2);\n\t\ttext = text.substr(nind+1);\n\t}\n\n\tlet parts = text.split(\":\");\n\tif (parts.length != 2){\n\t\tif(view){\n\t\t\tlet code = view.ranges.getCode(text, sheet);\n\t\t\tif(!code){\n\t\t\t\t// global named range\n\t\t\t\tcode = view.ranges.getCode(text, true);\n\t\t\t\tif(!code)\n\t\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst rangeParts = code.split(\"!\");\n\t\t\tif(rangeParts[0] != page || view.getActiveSheet())\n\t\t\t\tsheet = rangeParts[0].replace(/'/g,\"\");\n\t\t\tcode = rangeParts[1];\n\t\t\tparts = code.split(\":\");\n\t\t}\n\t\telse\n\t\t\treturn null;\n\t} \n\n\tconst d1 = adress(parts[0]);\n\tconst d2 = adress(parts[1]);\n\n\tif(d1[0] && d1[1] && d2[0] && d2[1])\n\t\treturn [d1[0], d1[1], d2[0], d2[1], sheet];\n}\n\n\nexport function escapeSheet(sheet){\n\treturn sheet.indexOf(\" \") == -1 ? sheet : `'${sheet}'`;\n}\n\nexport function toRange(x,y,x2,y2,sheet){\n\treturn (sheet?(escapeSheet(sheet)+\"!\"):\"\")+encode[y]+x+\":\"+encode[y2]+x2;\n}\nexport function toSheetRange(x,y,sheet){\n\treturn (sheet?(escapeSheet(sheet)+\"!\"):\"\")+x+\":\"+y;\n}\n\nexport function rangeObj(text, view){\n\tif (typeof text === \"object\") return text;\n\tconst a = range(text, view);\n\treturn { start:{ row:a[0], column:a[1]}, end:{ row:a[2], column:a[3] }, sheet: a[4] };\n}\n\nexport function eachRange(text, view, callback, data){\n\tconst range = rangeObj(text);\n\tfor (let row = range.start.row; row <= range.end.row; row++) {\n\t\tfor (let column = range.start.column; column <=  range.end.column; column++) {\n\t\t\tcallback(view, {row: row, column: column}, data);\n\t\t}\n\t}\n}\n\nexport function isRange(text){\n\tif(typeof text == \"string\"){\n\t\tconst cells = text.split(\":\");\n\t\tif(cells.length == 2){\n\t\t\tfor(let i = 0; i < cells.length; i++){\n\t\t\t\tconst parts = cells[i].split(\"!\");\n\t\t\t\tif(!isCell(parts.pop()))\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t}\n}\n\nconst cellTest = /^[A-Z]+[0-9]+$/;\nexport function isCell(text){\n\treturn cellTest.test(text);\n}\n\nexport function changeRange(text,name,inc,start){\n\tlet updated = false;\n\n\tif(isRange(text)){\n\t\tlet [r1,c1,r2,c2,sheet] = range(text);\n\n\t\t//ranges like B2:A1\n\t\tif(r1 > r2)\n\t\t\t[r1, r2] = [r2, r1];\n\t\tif(c1 > c2)\n\t\t\t[c1, c2] = [c2, c1];\n\n\t\tif (name === \"row\" && start.row <= r2){\n\t\t\tif((inc < 0 && start.row < r1) || (inc > 0 && start.row <= r1))\n\t\t\t\tr1 += inc;\n\t\t\tr2 += inc;\n\n\t\t\tif(r2<r1)\n\t\t\t\treturn \"\";\n\n\t\t\tupdated = true;\n\t\t}\n\t\telse if (name === \"column\" && start.column <= c2){\n\t\t\tif((inc < 0 && start.column < c1) || (inc > 0 && start.column <= c1))\n\t\t\t\tc1 += inc;\n\t\t\tc2 += inc;\n\n\t\t\tif(c2<c1)\n\t\t\t\treturn \"\";\n\n\t\t\tupdated = true;\n\t\t}\n\t\tif(updated)\n\t\t\ttext = toRange(r1,c1,r2,c2,sheet);\n\t}\n\n\treturn text;\n}","export const toolbarSizes = {\n\twidth:38,\n\tmargin: 7,\n\tpaddingY: 1,\n\tsectorPadding: 5,\n\tsectorMargin: 0\n};\n\n// default styles for toolbar elements\nexport const defaultStyles = {\n\t\"color\"         : \"#666666\",\n\t\"background\"    : \"#ffffff\",\n\t\"font-family\"   : \"'PT Sans', Tahoma\",\n\t\"font-size\" : \"15\",\n\t\"text-align\": \"left\",\n\t\"vertical-align\": \"middle\",\n\t\"white-space\": \"nowrap\",\n};\n\nconst fonts = {\n\tmaterial: \"'Roboto', sans-serif\",\n\tmini: \"'Roboto', sans-serif\",\n\tflat: \"'PT Sans', Tahoma\",\n\tcompact: \"'PT Sans', Tahoma\",\n\tcontrast: \"'PT Sans', Tahoma\",\n\twillow: \"'Open Sans', sans-serif\",\n\tdark: \"'Open Sans', sans-serif\",\n};\n\nexport function setSkinDefaults(){\n\tconst skin = webix.skin.$name;\n\ttoolbarSizes.width = webix.skin.$active.inputHeight + 2;\n\ttoolbarSizes.titleHeight = (skin == \"mini\" || skin == \"compact\") ? 18 : 20;\n\n\tdefaultStyles[\"font-family\"] = fonts[skin];\n\n\tif (skin == \"contrast\"){\n\t\tdefaultStyles.background = \"#393939\";\n\t\tdefaultStyles.color = \"#ffffff\";\n\t} else if (skin == \"material\" || skin == \"mini\"){\n\t\tdefaultStyles.color = \"#475466\";\n\t} else if (skin == \"willow\"){\n\t\tdefaultStyles.color = \"#2C2F3C\";\n\t} else if (skin == \"dark\"){\n\t\tdefaultStyles.background = \"#2A2B2D\";\n\t\tdefaultStyles.color = \"#ffffff\";\n\t}\n}","import group from \"./undo_group\";\nimport {save} from \"./save\";\nimport {eachRange} from \"../helpers/column_names\";\nimport {defaultStyles} from \"../toolbar/defaults\";\n\n//do not change order, it will break server side compatibility\n//add new options to the end of this list\nexport const style_names = [\n\t\"color\",\"background\",\"text-align\",\n\t\"font-family\",\"font-size\",\n\t\"font-style\",\"underline\",\"font-weight\",\n\t\"vertical-align\", \"wrap\", \"borders\", \"format\",\n\t\"border-right\", \"border-bottom\",\"border-left\", \"border-top\",\n\t\"strike\", \"indent\"\n];\n\nconst _style_map = {\n\tformat: ()=> \"\",\n\t\"text-align\": {\n\t\tleft: () => \"justify-content:flex-start;\",\n\t\tcenter: () => \"justify-content:center;text-align:center;\",\n\t\tright: () => \"justify-content:flex-end;text-align:right;\"\n\t},\n\t\"vertical-align\": {\n\t\ttop: () => \"align-items:flex-start;\",\n\t\tmiddle: () => \"align-items:center;\",\n\t\tbottom: () => \"align-items:flex-end;\"\n\t},\n\twrap: {\n\t\twrap: ()=> {\n\t\t\treturn \"white-space: normal !important;\";\n\t\t}\n\t},\n\t\"border-left\": obj => {\n\t\treturn getBorderCss(\"border-left\", obj);\n\t},\n\t\"border-top\": obj => {\n\t\treturn getBorderCss(\"border-top\", obj);\n\t},\n\t\"border-right\": obj => {\n\t\treturn getBorderCss(\"border-right\", obj);\n\t},\n\t\"border-bottom\": obj => {\n\t\treturn getBorderCss(\"border-bottom\", obj);\n\t},\n\t\"font-weight\": obj => {\n\t\t//Roboto bold - font-weight:500 (looks better, than 700). Roboto is default font for material skins.\n\t\tif(obj[\"font-weight\"] == \"bold\"){\n\t\t\tconst family = obj[\"font-family\"] || defaultStyles[\"font-family\"];\n\t\t\treturn \"font-weight:\" + (family == \"'Roboto', sans-serif\" ? 500 : 700) + \";\";\n\t\t}\n\t\treturn \"\";\n\t},\n\tunderline: obj => {\n\t\tconst underline = obj.underline == \"underline\" ? \"underline\" : \"\";\n\t\tif(underline){\n\t\t\tconst strike = obj.strike == \"strike\" ? \"line-through\" : \"\";\n\t\t\treturn `text-decoration: ${underline} ${strike};`;\n\t\t}\n\t\treturn \"\";\n\t},\n\tstrike: obj => {\n\t\tif(obj.underline != \"underline\" && obj.strike == \"strike\")\n\t\t\treturn \"text-decoration: line-through;\";\n\t\treturn \"\";\n\t},\n\tindent: obj => {\n\t\tconst count = obj.indent * 1;\n\t\tif(count > 0){\n\t\t\tconst pos = obj[\"text-align\"] == \"right\" ? \"right\" : \"left\";\n\t\t\treturn { innerCss: `margin-${pos}:${count * 8 + 12}px;` }; // 12 - default cell margin\n\t\t}\n\t}\n};\n\nfunction getBorderCss(pos, obj){\n\tlet border = obj[pos];\n\tif(border){\n\t\tlet [color, type] = border.split(\",\");\n\n\t\ttype = type || \"thin\";\n\t\tlet size = \"1px\";\n\t\tif(type == \"medium\")\n\t\t\tsize = \"2px\";\n\t\telse if(type == \"thick\" || type == \"double\")\n\t\t\tsize = \"3px\";\n\n\t\tif([\"thin\", \"medium\", \"thick\"].indexOf(type) != -1)\n\t\t\ttype = \"solid\";\n\n\t\treturn `${pos}: ${size} ${type} ${color} !important;`;\n\t}\n\treturn \"\";\n}\n\nconst border_checks = {\n\t\"border-left\":\t\tfunction(cell, area, mode){ return cell.column == area.start.column || mode ==\"no\"; },\n\t\"border-right\":\t\tfunction(cell, area, mode){ return cell.column == area.end.column || mode == \"all\" || mode ==\"no\"; },\n\t\"border-top\":\t\tfunction(cell, area , mode){ return cell.row == area.start.row || mode ==\"no\"; },\n\t\"border-bottom\":\tfunction(cell, area, mode){ return cell.row == area.end.row || mode == \"all\"|| mode ==\"no\"; }\n};\n\nconst _style_handlers = {\n\t\"borders\": function(view, style, value, cell){\n\t\tconst area = view.$$(\"cells\").getSelectArea();\n\t\tvalue = value.split(\",\");\n\t\tconst type = value[0];\n\t\tlet color = value[1];\n\t\tlet lineStyle = value[2];\n\n\t\tvar modes = [\"border-left\", \"border-right\", \"border-bottom\", \"border-top\"];\n\n\t\tif(type == \"top-bottom\"){\n\t\t\tmodes = [\"border-top\",\"border-bottom\"];\n\t\t}\n\t\telse if (type != \"no\" && type != \"all\" && type != \"outer\")\n\t\t\tmodes = [\"border-\"+type];\n\n\t\tfor (var i = 0; i < modes.length; i++){\n\t\t\tvar mode = modes[i];\n\t\t\tlet result = view.callEvent(\"onAction\", [\"check-borders\", {row:cell.row, column:cell.column, area, type, mode}]);\n\t\t\tif (result === true || border_checks[mode](cell, area, type)){\n\t\t\t\tconst border = type == \"no\" ? \"\" : `${color},${lineStyle}`;\n\t\t\t\tstyle = _updateStyle(view, style, mode, border, cell);\n\t\t\t}\n\t\t}\n\t\treturn style;\n\t}\n};\n\nvar sizeEl;\nexport function init(view){\n\tview.attachEvent(\"onStyleSet\", (name, value) => _applyStyles(view, name, value));\n\tview.attachEvent(\"onDataParse\", (data) => _parse(view, data));\n\tview.attachEvent(\"onDataSerialize\", (data) => _serialize(view, data));\n\tview.attachEvent(\"onReset\", () => reset(view));\n\tview.attachEvent(\"onUndo\", (type, row, column, style) => {\n\t\tif(type == \"style\")\n\t\t\t_undoStyle(view, row, column, style);\n\t});\n\n\treset(view);\n\n\tif (!sizeEl)\n\t\tsizeEl = webix.html.create(\"DIV\", { style:\"visibility:hidden; position:absolute; top:0px; left:0px; height:auto;\"}, \"\");\n}\n\nfunction reset(view){\n\tview._styles = {};\n\tview._styles_cache = {};\n\tview._styles_max = 1;\n\n\tlet prefix = \".wss_\"+view.$index;\n\twebix.html.removeStyle(prefix);\n}\n\nexport function getStyle(view, cell){\n\tconst obj = view._mPage.getCell(cell.row-1, cell.column-1);\n\tconst span = view.$$(\"cells\").getSpan(cell.row, cell.column);\n\n\tif(span && span[0] == cell.row && span[1] == cell.column){\n\t\tconst spanStyles = span[5].split(\" \");\n\t\tfor (let i = 0; i < spanStyles.length; i++){\n\t\t\tconst spanStyle = view._styles[spanStyles[i]];\n\t\t\tif(spanStyle)\n\t\t\t\treturn spanStyle;\n\t\t}\n\t}\n\n\tif (obj && obj.style)\n\t\treturn view._styles[obj.style];\n\n\treturn null;\n}\n\nexport function getFormat(view, row, column){\n\tvar obj = view._mPage.getCell(row-1, column-1);\n\treturn (obj && obj.format) || \"\";\n}\n\n// undo\nfunction _undoStyle(view, row, column, style){\n\tvar cell = {row: row, column: column};\n\tsetStyle(view, cell, style);\n}\n\nfunction _serialize(view, obj){\n\tvar styles = [];\n\n\tfor (var key in view._styles_cache)\n\t\tstyles.push([view._styles_cache[key].id, key]);\n\n\tobj.styles = styles;\n}\n\nexport function addStyle(view, props, origin){\n\tvar style = {\n\t\tprops: styleFromText( style_names.map(()=>\"\").join(\";\") )\n\t};\n\n\tif (origin)\n\t\tfor (var key in origin.props)\n\t\t\tstyle.props[key] = origin.props[key];\n\n\tfor (let  key in props)\n\t\tstyle.props[key] = props[key];\n\n\n\tstyle.text = styleToText(style);\n\tvar cache = view._styles_cache[style.text];\n\tif (cache)\n\t\treturn cache;\n\n\t_addStyle(view, style);\n\n\treturn style;\n}\n\nfunction _parse(view, obj){\n\tif (obj.styles)\n\t\tfor (let i=0; i < obj.styles.length; i++){\n\t\t\tvar styleObj = obj.styles[i];\n\t\t\tvar style = {\n\t\t\t\tid: styleObj[0],\n\t\t\t\ttext:styleObj[1],\n\t\t\t\tprops: styleFromText(styleObj[1])\n\t\t\t};\n\n\t\t\t_addStyle(view, style, true);\n\t\t}\n\n\tfor (let i = 0; i < obj.data.length; i++){\n\t\tvar [row, column, , css] = obj.data[i];\n\n\t\tif (css)\n\t\t\tupdate_style_data(view, row, column, view._styles[css]);\n\t}\n}\n\nfunction _applyStyles(view, name, value){\n\tgroup.set(function(){\n\t\tview.eachSelectedCell(function(cell){\n\t\t\tconst span = view.$$(\"cells\").getSpan(cell.row, cell.column);\n\t\t\tif(!span || (span && span[0] == cell.row && span[1] == cell.column))\n\t\t\t\t_applyCellStyles(view, cell, name, value);\n\t\t});\n\t});\n\tview.refresh();\n}\n\nfunction _applyCellStyles(view, cell, name, value){\n\tconst ostyle = getStyle(view, cell);\n\n\tif(name == \"indent\"){\n\t\tconst oldVal = ((ostyle && ostyle.props[name]) || 0) * 1;\n\n\t\tif(!oldVal && value == -1)\n\t\t\treturn;\n\n\t\tvalue += oldVal;\n\t}\n\n\tconst nstyle = _updateStyle(view, ostyle, name, value, cell);\n\n\tif (nstyle && nstyle != ostyle)\n\t\t_setStyle(view, cell, nstyle, ostyle, true);\n}\n\nfunction _updateStyle(view, style, name, value, cell){\n\n\tif(_style_handlers[name]){\n\t\treturn _style_handlers[name](view, style, value, cell);\n\t}\n\n\tif (style && style.props[name] == value) return style;\n\n\tvar nstyle = { text:\"\", id:0, props: (style?webix.copy(style.props):{}) };\n\tnstyle.props[name] = value;\n\tnstyle.text = styleToText(nstyle);\n\n\tvar cache = view._styles_cache[nstyle.text];\n\tif (cache)\n\t\treturn cache;\n\n\t_addStyle(view,nstyle);\n\n\treturn nstyle;\n}\n\nfunction update_style_data(view, row, column, style){\n\tconst obj = view._mPage.getCell(row-1, column-1, true);\n\tobj.style = style && style.id;\n\tobj.format = style && style.props.format;\n}\n\nexport function setStyle(view, cell, style){\n\tconst old = getStyle(view, cell);\n\treturn _setStyle(view, cell, style, old);\n}\n\nexport function setRangeStyle(view, range, style) {\n\teachRange(range, view, _setStyle, style);\n}\n\nexport function getTextSize(view, text, css, baseWidth){\n\tsizeEl.innerHTML = text;\n\tsizeEl.style.width = baseWidth ? baseWidth+\"px\" : \"auto\";\n\n\tsizeEl.className = \"webix_table_cell webix_cell \"+css;\n\tview._table.$view.appendChild(sizeEl);\n\n\tconst width = Math.max(0, sizeEl.offsetWidth+1);\n\tconst height = Math.max(0, sizeEl.offsetHeight+1);\n\n\tview._table.$view.removeChild(sizeEl);\n\tsizeEl.innerHTML = \"\";\n\n\treturn { width, height };\n}\n\nfunction _setStyle(view, cell, style, old, toolbar){\n\tif(view.callEvent(\"onBeforeStyleChange\", [cell.row, cell.column, style, old])){\n\t\tgroup.set(()=>{\n\t\t\tconst format = style && style.props.format || null;\n\t\t\tconst oldFormat = old && old.props.format || null;\n\t\t\tconst formatChanged = format != oldFormat;\n\t\t\tif(!formatChanged || formatChanged && view.callEvent(\"onBeforeFormatChange\", [cell.row, cell.column, format, oldFormat])){\n\t\t\t\tupdate_style_data(view, cell.row, cell.column, style);\n\t\t\t\tview.callEvent(\"onStyleChange\", [cell.row, cell.column, style, old]);\n\n\t\t\t\tif(formatChanged)\n\t\t\t\t\tview.callEvent(\"onFormatChange\", [cell.row, cell.column, format, oldFormat]);\n\n\t\t\t\tview.saveCell(cell.row,cell.column);\n\n\t\t\t\tconst sel = view.getSelectedId();\n\t\t\t\tif(!toolbar && sel && sel.row == cell.row && sel.column == cell.column)\n\t\t\t\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\"}]);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction _buildCssString(style) {\n\tlet css = \"\";\n\tlet innerCss = \"\";\n\n\tfor (var key in style){\n\t\tif (style[key]){\n\t\t\tif( _style_map[key]){\n\t\t\t\tif(_style_map[key][style[key]])\n\t\t\t\t\tcss += _style_map[key][style[key]](style);\n\t\t\t\telse if(typeof  _style_map[key] == \"function\"){\n\t\t\t\t\tconst outCss = _style_map[key](style);\n\n\t\t\t\t\tif(typeof outCss == \"object\"){\n\t\t\t\t\t\tcss += outCss.css || \"\";\n\t\t\t\t\t\tinnerCss += outCss.innerCss || \"\";\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tcss += _style_map[key](style);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t\tcss+= key+\":\"+style[key]+\";\";\n\t\t}\n\t}\n\n\treturn {css, innerCss};\n}\n\nfunction _addStyle(view, style, silent){\n\tview._styles_cache[style.text] = style;\n\n\twhile (!style.id || view._styles[style.id])\n\t\tstyle.id = \"wss\"+(view._styles_max++);\n\tview._styles[style.id] = style;\n\n\tconst {css, innerCss} = _buildCssString(style.props);\n\tconst prefix = \".wss_\"+view.$index;\n\twebix.html.addStyle(prefix+\" .\"+style.id+\"{\"+css+\"}\", prefix);\n\twebix.html.addStyle(prefix+\" .\"+style.id+\" div:first-child{\"+innerCss+\"}\", prefix);\n\n\tif (!silent)\n\t\tsave(view, \"styles\", { name:style.id, text: style.text } );\n}\n\nexport function styleToText(style){\n\tvar id = [];\n\tfor (var i=0; i<style_names.length; i++)\n\t\tid.push(style.props[style_names[i]]);\n\treturn id.join(\";\");\n}\n\nexport function styleFromText(text){\n\tvar parts = text.split(\";\");\n\tvar props = {};\n\tfor (var i=0; i<style_names.length; i++)\n\t\tprops[style_names[i]] = parts[i];\n\treturn props;\n}\n\n\n\nexport function clearRangeStyle(view, range){\n\tgroup.set(function(){\n\t\teachRange(range, view, function(view, cell){\n\t\t\tlet style = getStyle(view,cell);\n\t\t\tif (style)\n\t\t\t\tsetStyle(view, cell, null);\n\t\t});\n\t});\n}\n\nexport function compactStyles(view){\n\tconst serialized = view.serialize();\n\tserialized.styles = removeUnusedStyles(serialized);\n\n\treset(view);\n\t_parse(view, serialized);\n}\n\nexport function removeUnusedStyles(serialized){\n\tconst data = serialized.data;\n\tconst styles = serialized.styles;\n\n\tconst used = {};\n\tfor (let i=0; i<data.length; i++){\n\t\tconst name = data[i][3];\n\t\tif (name)\n\t\t\tused[name] = 1;\n\t}\n\n\tconst newStyles = [];\n\tfor(let i = 0; i<styles.length; i++){\n\t\tconst name = styles[i][0];\n\t\tif (used[name])\n\t\t\tnewStyles.push(styles[i]);\n\t}\n\n\treturn newStyles;\n}","export function find(arr, func){\n\tvar result = findIndex(arr, func);\n\treturn arr[result];\n}\n\nexport function findIndex(arr, func){\n\tvar result = -1;\n\tfor(var i =0; result<0 && i < arr.length; i++){\n\t\tif(func(arr[i]))\n\t\t\tresult = i;\n\t}\n\treturn result;\n}\n\nexport function getDimension(data, spans, rows, cols){\n\tfor(let i=0; i<data.length; i++){\n\t\t// data[i] - [ row, column, value, style]\n\t\tlet line = data[i];\n\t\tif (line[0]>rows) rows=line[0];\n\t\tif (line[1]>cols) cols=line[1];\n\t}\n\n\tif(spans)\n\t\tfor(let i = 0; i < spans.length; i++){\n\t\t\t// spans[i] - [ row, column, colCount, rowCount ]\n\t\t\tconst spanEndRow = spans[i][0] + spans[i][3] - 1;\n\t\t\tconst spanEndCol = spans[i][1] + spans[i][2] - 1;\n\n\t\t\tif(spanEndRow > rows) rows = spanEndRow;\n\t\t\tif(spanEndCol > cols) cols = spanEndCol;\n\t\t}\n\n\treturn [rows*1, cols*1];\n}","import {addStyle, styleFromText} from \"./styles\";\nimport {getJsDateFromExcel} from \"../mathematics/methods\";\nimport group from \"./undo_group\";\nimport * as arr from \"../helpers/array\";\n\nexport function init(view){\n\tview.attachEvent(\"onDataParse\", (data) => load(view, data));\n\tview.attachEvent(\"onDataSerialize\", (data, config) => serialize(view, data, config));\n}\n\nexport let formatHelpers = {};\nexport let currencies = [];\nconst defaultFormats = {common:1};\n\n\nexport let formatsCount;\nexport let formatCache;\n\nlet formats;\nlet formatSources;\n\nfunction getCurrencySymbol(format){\n\treturn webix.template(format)(\"\");\n}\n\nexport function setDefaultFormats(){\n\tconst formatsLocale = webix.i18n.spreadsheet.formats;\n\n\tcurrencies = [ webix.i18n.price ];\n\tcurrencies = currencies.concat(webix.copy(formatsLocale.currencies));\n\n\tcurrencies = currencies.map(format => {\n\t\tconst id = getCurrencySymbol(format);\n\t\treturn {\n\t\t\tformat,\n\t\t\tid,\n\t\t\tvalue: id.trim()\n\t\t};\n\t});\n\n\tformats = {};\n\tformatsCount = 0;\n\tformatSources = {};\n\tformatCache = {};\n\tformatHelpers = {\n\t\tprice : {\n\t\t\tgetFormat : function(value, extra){\n\t\t\t\textra.css = \"webix_ssheet_format_price\";\n\t\t\t\tconst minusSign = value < 0 ? \"-\" : \"\";\n\t\t\t\tif(minusSign) value = Math.abs(value);\n\t\t\t\treturn minusSign+webix.i18n.priceFormat(value);\n\t\t\t},\n\t\t\tvalues:webix.extend({\n\t\t\t\tzeros: webix.i18n.priceSettings.decimalSize, \n\t\t\t\tsymbol: webix.i18n.priceFormat(\"\"),\n\t\t\t\tseparator: 1, negative:1, type: \"price\"\n\t\t\t}, getDelimiters(\"price\"))\n\t\t},\n\t\t\"int\" : {\n\t\t\tgetFormat : function(value, extra){\n\t\t\t\textra.css = \"webix_ssheet_format_int\";\n\t\t\t\treturn webix.i18n.numberFormat(value);\n\t\t\t},\n\t\t\tvalues:webix.extend({\n\t\t\t\tzeros: webix.i18n.decimalSize,\n\t\t\t\tseparator: 1, negative:1, type: \"int\",\n\t\t\t}, getDelimiters(\"int\"))\n\t\t},\n\t\tpercent : {\n\t\t\tgetFormat : function(value, extra){\n\t\t\t\textra.css = \"webix_ssheet_format_percent\";\n\t\t\t\treturn Math.round(value*100)+\"%\";\n\t\t\t},\n\t\t\tvalues:webix.extend({\n\t\t\t\tzeros: 0, separator: 0, negative:1, type: \"percent\",\n\t\t\t}, getDelimiters(\"percent\"))\n\t\t},\n\t\tdate : {\n\t\t\tgetFormat : function(value, extra){\n\t\t\t\textra.css = \"webix_ssheet_format_date\";\n\t\t\t\treturn format2code(formatsLocale.dateFormat, getDelimiters(\"date\"))(value);\n\t\t\t},\n\t\t\tvalues: { type:\"date\", date:formatsLocale.dateFormat }\n\t\t},\n\t\tstring : {\n\t\t\tgetFormat : function(value, extra){\n\t\t\t\textra.css = \"webix_ssheet_format_text\";\n\t\t\t\treturn value;\n\t\t\t},\n\t\t\tvalues: { type:\"string\" }\n\t\t}\n\t};\n\n\tfor(let i in formatHelpers){\n\t\tdefaultFormats[i] = 1;\n\t\tformatSources[i] = serializeFormat(formToValues(i, formatHelpers[i].values));\n\t\tformatCache[formatSources[i]] = i;\n\t}\n}\n\nexport function getDelimiters(type){\n\tif(type == \"price\")\n\t\treturn { groupSign:webix.i18n.priceSettings.groupDelimiter, decimalSign:webix.i18n.priceSettings.decimalDelimiter };\n\telse \n\t\treturn { groupSign:webix.i18n.groupDelimiter, decimalSign:webix.i18n.decimalDelimiter };\n}\n\nfunction serialize(view, data){\n\tconst formats = [];\n\n\tfor(let i in formatSources){\n\t\tif(!defaultFormats[i]) //exclude default formats\n\t\t\tformats.push([i,formatSources[i]]);\n\t}\n\tdata.formats = formats;\n}\n\nfunction load(view,data){\n\tvar i,\n\t\tformats = data.formats;\n\n\tif(formats)\n\t\tfor(i = 0; i < formats.length; i++)\n\t\t\tcreateFormatName(formats[i][1],formats[i][0]);\n}\n\nexport function getFormat(name){\n\treturn formatHelpers[name] ? formatHelpers[name].getFormat : formatHelpers[name];\n}\n\nexport function getFormatSource(name, toexcel){\n\tif(toexcel){\n\t\tlet parsed = parseFormat({values: formatHelpers[name].values, format: formatSources[name]});\n\t\treturn serializeFormat(parsed, true);\n\t}\n\telse\n\t\treturn formatSources[name];\n}\n\nfunction createFormatName(str, values){\n\tif (formatCache[str]) return formatCache[str];\n\n\tlet name = typeof(values) == \"object\" ? \"fmt\"+(formatsCount) : values;\n\tformatsCount++;\n\n\tformats[name] = str;\n\n\tif(typeof(values) == \"string\")\n\t\tvalues = formatToForm(str);\n\n\twebix.extend(\n\t\tvalues,\n\t\tgetDelimiters(\"custom\")\n\t);\n\n\tformatHelpers[name] = {\n\t\tgetFormat:format2code(str, {decimalSign: values.decimalSign, groupSign: values.groupSign}),\n\t\tvalues: values\n\t};\n\n\tformatSources[name] = str;\n\tformatCache[str] = name;\n\n\treturn name;\n}\n\nexport function addFormat(view, row, column, format, type){\n\tif(!type)\n\t\ttype = {format:format, type: \"custom\"};\n\tconst old = view.getStyle(row, column);\n\tconst nev = addStyle(view, { format:createFormatName(format, type) }, old);\n\tview.setStyle(row, column, nev);\n}\n\nexport function removeFormat(view, row, column){\n\tconst old = view.getStyle(row, column);\n\tconst nev = addStyle(view, { format:\"\" }, old);\n\tview.setStyle(row, column, nev);\n}\n\nfunction splitFormat(str){\n\tvar conditional = str.match(/.*\\[[><=].*/g);\n\tvar parts = str.split(\";\");\n\tif (!conditional){\n\t\tif (parts.length > 1){\n\t\t\tparts[0] = (parts.length > 2 ? \"[>0]\" : \"[>=0]\")+parts[0];\n\t\t\tparts[1] = \"[<0]\"+parts[1];\n\t\t\tif (parts[2])\n\t\t\t\tparts[2] = \"[=0]\"+parts[2];\n\t\t}\n\t}\n\treturn parts;\n}\n\nexport function format2code(str, delimiters){\n\tconst errorMessage = webix.i18n.spreadsheet.table[\"format-error\"];\n\tlet parts = splitFormat(str);\n\tlet code = [\"var spaces = \\\"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\\\";\"];\n\tfor (var i=0; i<parts.length; i++){\n\t\tvar separated = separateFmt(parts[i]);\n\t\tcode.push(genCode(separated.condition, separated.color.toLowerCase(), separated.symbol, separated.fmt, i, parts.length > 0, delimiters));\n\t}\n\n\tlet method;\n\ttry {\n\t\tmethod = new Function(\"val\",\"extra\", `try{ ${code.join(\"\\n\")} return val; } catch(err) { return \"${errorMessage}\"; }`);\n\t}\n\tcatch(err){\n\t\tmethod = function(){return errorMessage;};\n\t}\n\treturn method;\n}\n\nfunction genCode(check, color, symbol, line, ind, isAbs, delimiters){\n\tvar str = \"\";\n\tif (check){\n\t\tif (!ind) str+=\"if\"; else str+=\"else if\";\n\t\tif (check[0] === \"=\") check = \"=\"+check;\n\t\tstr+=\"(val\"+check+\"){\";\n\t\tif (isAbs) str+=\"val = Math.abs(val);\";\n\t}\n\tif (color)\n\t\tstr+=\"extra.css = \\\"webix_ssheet_format_\"+color+\"\\\";\";\n\n\tstr += genFormatCode(line, delimiters, symbol);\n\n\treturn str+(check?\"}\":\"\");\n}\n\nconst dateTypes = {\n\t\"yy\": \"%y\",\n\t\"yyyy\": \"%Y\",\n\t\"m\": \"%n\",\n\t\"mm\": \"%m\",\n\t\"mmm\": \"%M\",\n\t\"mmmm\": \"%F\",\n\t\"mmmmm\":\"%F\", //not supported by webix\n\t\"d\": \"%j\",\n\t\"dd\": \"%d\",\n\t\"ddd\": \"%D\",\n\t\"dddd\": \"%l\"\n};\n\nconst timeTypes = {\n\t\"h\": \"%G\",\n\t\"hh\": \"%H\",\n\t\"m\": \"%i\", //not supported by webix\n\t\"mm\": \"%i\",\n\t\"s\": \"%s\", //not supported by webix\n\t\"ss\": \"%s\",\n\t\"AM/PM\": \"%A\"\n};\n\nconst dateOrder = Object.keys(dateTypes).sort((a, b) => b.length - a.length);\nconst timeOrder = Object.keys(timeTypes).sort((a, b) => b.length - a.length);\n\nfunction excelDateToWebix(text, lastDateType){\n\tconst typesOrder = [\n\t\t{name:\"date\", order:dateOrder, types:dateTypes}, \n\t\t{name:\"time\", order:timeOrder, types:timeTypes}\n\t];\n\n\t// \"m\"/\"mm\" format can be either date (%n/%m) or time (%i), so check last date type\n\tconst basedOnLast = /^m{1,2}(?!m)/.test(text);\n\tif(basedOnLast && lastDateType != \"date\")\n\t\ttypesOrder.reverse();\n\n\tfor(let i = 0; i < typesOrder.length; i++){\n\t\tconst type = typesOrder[i];\n\t\tfor(let j = 0; j < type.order.length; j++)\n\t\t\tif(text.indexOf(type.order[j]) == 0)\n\t\t\t\treturn {\n\t\t\t\t\tformat: type.types[type.order[j]],\n\t\t\t\t\tlength: type.order[j].length,\n\t\t\t\t\ttype: type.name\n\t\t\t\t};\n\t}\n}\n\nfunction genFormatCode(line, delimiters, symbol){\n\tif (!line)\n\t\treturn \"return val;\";\n\n\tlet str = \"return \\\"\\\"\";\n\n\tlet isQuote;\n\tlet fmt = \"\";\n\tlet multiply = 1;\n\tlet comma, numberPlaceholder, textPlaceholder;\n\tlet date = [];\n\tlet lastDateType = \"date\";\n\n\tlet symbolPos;\n\tif(symbol){\n\t\tconst currency = arr.find(currencies, val => val.id == symbol);\n\t\tsymbolPos = \"left\";\n\n\t\tif(currency)\n\t\t\tsymbolPos = arr.findIndex(currency.format.split(\"{obj}\"), val => val) ? \"right\" : \"left\";\n\t}\n\n\tfor (var i=0; i<line.length; i++){\n\t\tvar betweenPlaceholders = placeholder(line[i-1])&&placeholder(line[i+1]);\n\t\tif (line[i] == \"\\\"\"){\n\t\t\tif(webix.isUndefined(isQuote))\n\t\t\t\tisQuote = i;\n\t\t\telse {\n\t\t\t\tstr += `+\"${line.substr(isQuote+1, i-isQuote-1)}\"`;\n\t\t\t\tisQuote = undefined;\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\tif (!webix.isUndefined(isQuote))\n\t\t\tcontinue;\n\t\tif(line[i] == \"%\")\n\t\t\tmultiply = multiply*100;\n\n\t\tif(/[a-zA-Z]/.test(line[i])){\n\t\t\tconst datePart = excelDateToWebix(line.substr(i), lastDateType);\n\t\t\tif(datePart){\n\t\t\t\tif(numberPlaceholder || textPlaceholder)\n\t\t\t\t\treturn \"throw \\\"unexpected number placeholder\\\";\";\n\t\t\t\tdate.push(datePart.format);\n\t\t\t\tstr += \"/*date*/\"; //update this value after date format is ready\n\t\t\t\tlastDateType = datePart.type;\n\t\t\t\ti += datePart.length-1;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\telse\n\t\t\t\tstr += `+\"${line[i]}\"`;\n\t\t}\n\t\telse if (line[i] === delimiters.decimalSign && betweenPlaceholders){\n\t\t\tfmt+= delimiters.decimalSign;\n\t\t}\n\t\telse if(line[i]==\"@\"){\n\t\t\tif(numberPlaceholder || date.length)\n\t\t\t\treturn \"throw \\\"unexpected number placeholder\\\";\";\n\t\t\tif(!textPlaceholder){\n\t\t\t\tstr+=\"+fmt\";\n\t\t\t\ttextPlaceholder = true;\n\t\t\t}\n\t\t\tfmt+=line[i];\t\t\n\t\t}\n\t\telse if (placeholder(line[i])){\n\t\t\tif(textPlaceholder || date.length)\n\t\t\t\treturn \"throw \\\"unexpected text placeholder\\\";\";\n\t\t\tif (!numberPlaceholder) {\n\t\t\t\tif(symbolPos == \"left\")\n\t\t\t\t\tstr += `+\"${symbol}\"`;\n\t\t\t\tstr+=\"+fmt\";\n\t\t\t\tif(symbolPos == \"right\")\n\t\t\t\t\tstr += `+\"${symbol}\"`;\n\t\t\t\tnumberPlaceholder=true;\n\t\t\t}\n\t\t\tfmt+=line[i];\n\t\t}\n\t\telse if (line[i] === delimiters.groupSign && betweenPlaceholders)\n\t\t\tcomma = true;\n\t\telse\n\t\t\tstr += `+\"${line[i]}\"`;\n\t}\n\n\tif(date.length){\n\t\t// 12-hour or 24-hour clock depends on AM/PM in format\n\t\tif(date.indexOf(\"%A\") != -1)\n\t\t\tdate = date.map(datePart => {\n\t\t\t\tswitch(datePart){\n\t\t\t\t\tcase \"%G\": return \"%g\";\n\t\t\t\t\tcase \"%H\": return \"%h\";\n\t\t\t\t\tdefault: return datePart;\n\t\t\t\t}\n\t\t\t});\n\n\t\tfor(let i = 0; i < date.length; i++)\n\t\t\tstr = str.replace(\"/*date*/\", `+dateParts[${i}]`);\n\t}\n\n\treturn `\n\t\t${date.length ? `val = (${getJsDateFromExcel})(val); var dateParts = webix.Date.dateToStr(\"${date.join(\";\")}\")(val).split(\";\");` : \"\"}\n\t\t${fmt ? `${numberFormat(fmt, comma, delimiters, multiply)};` : \"\"}\n\t\t${str};`;\n}\n\nfunction numberFormat(fmt, comma, delimiters, multiply){\n\tvar str = `if(/^@+$/.test(\"${fmt}\") || isNaN(val)){ var fmt = val; }else {`;\n\tvar decimal = delimiters.decimalSign;\n\tvar [left, right] = getParts(fmt, decimal);\n\tright = (right || \"\").split(\"\").reverse().join(\"\");\n\n\t//calculate indexes in mask\n\tvar lzeros = left.indexOf(\"0\"); if (lzeros>=0) lzeros = left.length - lzeros;\n\tvar lfills = left.indexOf(\"?\"); if (lfills>=0) lfills = left.length - lfills;\n\tvar rzeros = right.indexOf(\"0\"); if (rzeros>=0) rzeros = right.length - rzeros;\n\tvar rfills = right.indexOf(\"?\"); if (rfills>=0) rfills = right.length - rfills;\n\tvar rmax = right.length;\n\n\tstr += `\n\tval = val*${multiply};\n\tvar parts = val.toFixed(${rmax}).split(\".\");\n\tvar left = parts[0];\n\tvar lsize = left.length; \n\tvar right = parts[1] || \"\";\n\tif (left.length < ${lzeros}) left = \"0000000000\".substr(0, ${lzeros} - left.length)+left;\n\tif (left.length < ${lfills}) left = spaces.substr(0, 6*(${lfills} - left.length))+left;\n\tif (${comma}) {\n\t\tvar buf = [];\n\t\tvar start = 3;\n\t\twhile (lsize > start) { buf.push(left.substr(left.length-start,3)); start+=3; }\n\t\tvar last = left.substr(0,left.length-start+3);\n\t\tif (last !== \"-\")\n\t\t\tbuf.push(last);\n\t\telse\n\t\t\tbuf.push(\"-\"+buf.pop());\n\n\t\tleft = buf.reverse().join(\"${delimiters.groupSign}\");\n\t}\n\tif (right){\n\t\tvar zpoint = right.length-1;\n\t\twhile (zpoint >= ${rzeros}){\n\t\t\tif (right[zpoint] !== \"0\"){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tzpoint--;\n\t\t}\n\n\t\tif (zpoint <= right.length)\n\t\t\tright = right.substr(0, zpoint+1);\n\n\t\tif (right.length < ${rfills}){\n\t\t\tright += spaces.substr(0, 6*(${rfills} - right.length));\n\t\t}\n\t}\n\tvar fmt = left+(right?\"${decimal}\":\"\")+right;\n\t`;\n\n\treturn str+\"}\\n\";\n}\n\nfunction updateDecimals(fmt, inc, val){\n\tlet parsed = parseFormat(fmt);\n\tfor(let i = 0; i < parsed.length; i++){\n\t\tif(parsed[i].decimals){\n\t\t\tif(inc>0)\n\t\t\t\tparsed[i].right.placeholders += Array(inc+1).join(\"0\");\n\t\t\telse\n\t\t\t\tparsed[i].right.placeholders = parsed[i].right.placeholders.slice(0, inc);\n\t\t}\n\t\telse{\n\t\t\tconst withoutText = !parsed[i].left.text && !parsed[i].right.text;\n\t\t\tconst withoutPlaceholders = !parsed[i].left.placeholders && !parsed[i].right.placeholders;\n\t\t\t//check if cell value have decimals (not cell format)\n\t\t\tif(inc < 0 && withoutText && withoutPlaceholders && webix.rules.isNumber(val) && val.indexOf(\".\") > -1){\n\t\t\t\tparsed[i].left.placeholders = \"0\";\n\t\t\t\tparsed[i].right.placeholders = Array(val.split(\".\")[1].length).join(Array(inc+1).join(\"0\"));\n\t\t\t}\n\t\t\t//ignore text\n\t\t\telse if(inc > 0 && (parsed[i].left.placeholders || withoutText)){\n\t\t\t\tparsed[i].left.placeholders = parsed[i].left.placeholders || \"0\";\n\t\t\t\tparsed[i].right.placeholders = Array(inc+1).join(\"0\");\n\t\t\t\tparsed[i].decimals = true;\n\t\t\t}\n\t\t}\n\t\tparsed[i].decimals = parsed[i].right.placeholders.length > 0;\n\t}\n\n\treturn serializeFormat(parsed);\n}\n\nexport function changeAreaDecimals(view, inc, row, column){\n\tlet cells = getCells(view, row, column);\n\tif(cells.length == 0)\n\t\treturn;\n\n\tconst obj = view._mPage.getCell(cells[0].row-1, cells[0].column-1);\n\tconst oldFormat = obj && obj.format;\n\tconst value = (obj && obj.value) ? obj.value.toString() : \"\";\n\t\n\tif(webix.rules.isNumber(value) || oldFormat){\n\t\tgroup.set(function(){\n\t\t\tfor(let i = 0; i < cells.length; i++)\n\t\t\t\tchangeCellDecimals(view, inc, cells[i]);\n\t\t});\n\t\tview.refresh();\n\n\t\tlet format = getFormatName(view, cells[0].row, cells[0].column) || \"common\";\n\t\tformat = isCustom(format) ? \"custom\" : format;\n\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"format\", value:format}]);\n\t}\n}\n\nexport function changeCellDecimals(view, inc, cell){\n\tlet format;\n\tconst obj = view._mPage.getCell(cell.row-1, cell.column-1);\n\tconst oldFormat = obj && obj.format;\n\tconst value = (obj && obj.value) ? obj.value.toString() : \"\";\n\n\tif(oldFormat){\n\t\tformat = webix.copy({values:formatHelpers[oldFormat].values, format:getFormatSource(oldFormat)});\n\t\tformat.format = updateDecimals(format, inc, value);\n\n\t\tif(format.values && format.values.hasOwnProperty(\"zeros\"))\n\t\t\tformat.values.zeros = Math.max(format.values.zeros+inc, 0);\n\t}\n\t//add format for cell without format\n\telse{\n\t\tconst zeros = webix.rules.isNumber(value) && value.split(\".\")[1] ? Math.max(value.split(\".\")[1].length+inc, 0) : Math.max(inc, 0);\n\n\t\tformat = {values:{negative:1, zeros:zeros, separator:0, type:\"int\"}};\n\t\tformat.format = serializeFormat(formToValues(format.values.type, format.values));\n\t}\n\taddFormat(view, cell.row, cell.column, format.format, format.values);\n}\n\nexport function isCustom(name){\n\treturn !defaultFormats[name];\n}\n\nexport function formToValues(type, formValues){\n\tif(type == \"string\")\n\t\treturn [{left:{text:\"@\"}}];\n\tif(formValues.date)\n\t\treturn [{left:{text:formValues.date}}];\n\n\tlet values = [{condition:\">=0\", left:{text:\"\"},right:{text:\"\"}}, {condition:\"<0\", left:{text:\"\"}, right:{text:\"\"}}];\n\twebix.extend(values, getDelimiters(type));\n\tvalues[0].right.placeholders = values[1].right.placeholders = formValues.zeros ? Array(formValues.zeros + 1).join(\"0\") : \"\";\n\tvalues[0].separator = values[1].separator = formValues.separator && type != \"percent\";\n\tvalues[0].left.placeholders = values[1].left.placeholders = values[0].separator ? \"#\"+values.groupSign +\"0\" : \"0\";\n\tvalues[0].decimals = values[1].decimals = formValues.zeros ? true : false;\n\tvalues[1].color = formValues.negative != 1 ? \"red\" : \"\";\n\tvalues[1].left.text += formValues.negative < 3 ? \"-\" : \"\";\n\tif(formValues.negative == 4)\n\t\tvalues[1].left.text += \"(\";\n\n\tif(type === \"percent\")\n\t\tvalues[0].right.text = values[1].right.text += \"%\";\n\telse if(type === \"price\"){\n\t\tconst symbolId = formValues.symbol;\n\t\tconst currency = arr.find(currencies, val => val.id == symbolId);\n\t\tconst pos = arr.findIndex(currency.format.split(\"{obj}\"), val => val) ? \"right\" : \"left\";\n\n\t\tvalues[0][pos].symbol = values[1][pos].symbol = symbolId;\n\t}\n\n\tif(formValues.negative == 4)\n\t\tvalues[1].right.text += \")\";\n\n\treturn values;\n}\n\nfunction formatToForm(format){\n\tconst formatsLocale = webix.i18n.spreadsheet.formats;\n\tconst dates = [\n\t\tformatsLocale.dateFormat,\n\t\tformatsLocale.timeFormat,\n\t\tformatsLocale.fullDateFormat,\n\t\tformatsLocale.longDateFormat\n\t];\n\tconst form = {format, type:\"custom\"};\n\n\tif(arr.find(dates, date => date == format)){\n\t\twebix.extend(form, {\n\t\t\ttype:\"date\", date:format\n\t\t}, true);\n\t}\n\telse{\n\t\tlet [first, second] = format.split(\";\");\n\t\tif(first && second){\n\t\t\tif(first.indexOf(\"[>=0]\") == 0 && second.indexOf(\"[<0]\") == 0){\n\t\t\t\tfirst = first.replace(\"[>=0]\", \"\");\n\t\t\t\tsecond = second.replace(\"[<0]\", \"\");\n\n\t\t\t\tlet red;\n\t\t\t\tif(second.indexOf(\"[red]\") == 0){\n\t\t\t\t\tsecond = second.replace(\"[red]\", \"\");\n\t\t\t\t\tred = true;\n\t\t\t\t}\n\n\t\t\t\tif(second[0] == \"-\"){\n\t\t\t\t\tsecond = second.substring(1);\n\t\t\t\t\tform.negative = red ? 2 : 1;\n\t\t\t\t}\n\t\t\t\telse if(red){\n\t\t\t\t\tif(second[0] == \"(\" && second[second.length-1] == \")\"){\n\t\t\t\t\t\tform.negative = 4;\n\t\t\t\t\t\tsecond = second.substring(1, second.length-1);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tform.negative = 3;\n\t\t\t\t}\n\n\t\t\t\tif(form.negative && first == second){\n\t\t\t\t\tlet type = \"int\";\n\t\t\t\t\tlet priceBrackets = first.indexOf(\"[$\") != -1;\n\n\t\t\t\t\tif(first[first.length-1] == \"%\"){\n\t\t\t\t\t\tfirst = first.substring(0, first.length-1);\n\t\t\t\t\t\ttype = \"percent\";\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tfor(let i = 0; i < currencies.length; i++){\n\t\t\t\t\t\t\tconst currency = currencies[i].id;\n\t\t\t\t\t\t\tlet isPrice;\n\n\t\t\t\t\t\t\tif(priceBrackets){\n\t\t\t\t\t\t\t\tif(first.indexOf(`[$${currency}]`) != -1){\n\t\t\t\t\t\t\t\t\tfirst = first.replace(`[$${currency}]`, \"\");\n\t\t\t\t\t\t\t\t\tisPrice = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(first.indexOf(currency) != -1){\n\t\t\t\t\t\t\t\tfirst = first.replace(currency, \"\");\n\t\t\t\t\t\t\t\tisPrice = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif(isPrice){\n\t\t\t\t\t\t\t\ttype = \"price\";\n\t\t\t\t\t\t\t\tform.symbol = currency;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst delimiters = getDelimiters(type);\n\n\t\t\t\t\tif(first.indexOf(\"#\"+delimiters.groupSign) == 0){\n\t\t\t\t\t\tfirst = first.replace(\"#\"+delimiters.groupSign, \"\");\n\t\t\t\t\t\tform.separator = 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst [integer, decimal] = first.split(delimiters.decimalSign);\n\t\t\t\t\tif((!integer || integer == \"0\") && (!decimal || /^[0]+$/.test(decimal))){\n\t\t\t\t\t\tform.type = type;\n\t\t\t\t\t\tform.delimiters = delimiters;\n\t\t\t\t\t\tform.zeros = decimal ? decimal.length : 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn form;\n}\n\nexport function serializeFormat(values, toExcel){\n\tlet fmt = \"\";\n\tfor(let i = 0; i < values.length; i++){\n\t\tif(values[i].condition)\n\t\t\tfmt += \"[\"+values[i].condition+\"]\";\n\t\tif(values[i].color)\n\t\t\tfmt += \"[\"+values[i].color+\"]\";\n\n\t\tif(values[i].left){\n\t\t\tif(values[i].left.text){\n\t\t\t\tlet leftText = values[i].left.text;\n\t\t\t\tfmt += leftText;\n\t\t\t}\n\t\t\tif(values[i].left.symbol)\n\t\t\t\tfmt += \"[$\"+values[i].left.symbol+\"]\";\n\t\t\tif(values[i].left.placeholders){\n\t\t\t\tlet leftPlaceholders = values[i].left.placeholders;\n\t\t\t\tfmt += toExcel ? leftPlaceholders.replace(values.groupSign, \",\") : leftPlaceholders;\n\t\t\t}\n\t\t}\n\n\t\tif(values[i].decimals)\n\t\t\tfmt += toExcel ? \".\" : values.decimalSign;\n\n\t\tif(values[i].right){\n\t\t\tif(values[i].right.placeholders)\n\t\t\t\tfmt += values[i].right.placeholders;\n\t\t\tif(values[i].right.symbol)\n\t\t\t\tfmt += \"[$\"+values[i].right.symbol+\"]\";\n\t\t\tif(values[i].right.text){\n\t\t\t\tlet rightText = values[i].right.text;\n\n\t\t\t\tfmt += rightText;\n\t\t\t}\n\t\t}\n\t\tif(i != values.length - 1)\n\t\t\tfmt += \";\";\n\t}\n\treturn fmt;\n}\n\nfunction parseFormat(fmt){\n\tconst fmtParts = fmt.format.split(\";\");\n\tlet values = [];\n\n\tfor(let i = 0; i < fmtParts.length; i++){\n\t\tlet separated = separateFmt(fmtParts[i]);\n\t\tvalues[i] = {color:separated.color, condition:separated.condition ,left:{}, right:{}};\n\n\t\tconst format = separated.fmt;\n\n\t\tvalues.groupSign = fmt.values.groupSign;\n\t\tvalues.decimalSign = fmt.values.decimalSign;\n\n\t\tif(format.indexOf(values.groupSign) > -1)\n\t\t\tvalues[i].separator = true;\n\n\t\tconst sepFmtParts = getParts(format, values.decimalSign);\n\n\t\tlet left = sepFmtParts[0];\n\t\tlet right = sepFmtParts[1] || \"\";\n\n\t\tif(sepFmtParts[1])\n\t\t\tvalues[i].decimals = true;\n\n\t\tleft = getFmtPartValues(left, \"left\", values.groupSign);\n\t\tright = getFmtPartValues(right, \"right\", values.groupSign);\n\n\t\tvalues[i].left = {\n\t\t\ttext: left.leftText,\n\t\t\tplaceholders: left.placeholders\n\t\t};\n\n\t\tvalues[i].right = {\n\t\t\ttext: left.rightText + right.rightText,\n\t\t\tplaceholders: right.placeholders\n\t\t};\n\n\t\tconst symbol = separated.symbol;\n\t\tif(symbol){\n\t\t\tconst currency = arr.find(currencies, val => val.id == symbol);\n\t\t\tlet pos = \"left\";\n\n\t\t\tif(currency)\n\t\t\t\tpos = arr.findIndex(currency.format.split(\"{obj}\"), val => val) ? \"right\" : \"left\";\n\n\t\t\tvalues[i][pos].symbol = symbol;\n\t\t}\n\t}\n\treturn values;\n}\n\nfunction getFmtPartValues(fmtPart, type, groupSign){\n\tlet firstPlaceholder;\n\tif(type == \"left\"){\n\t\tfirstPlaceholder = fmtPart.match(/[#?0]/);\n\t\tfirstPlaceholder = firstPlaceholder ? firstPlaceholder.index : Infinity;\n\t}\n\n\tlet leftText = \"\";\n\tlet rightText = \"\";\n\tlet placeholders = \"\";\n\tfor(let k = 0; k < fmtPart.length; k++){\n\t\tif(!placeholder(fmtPart[k])){\n\t\t\tif(fmtPart[k] == groupSign && placeholder(fmtPart[k+1]) && placeholder(fmtPart[k-1])){\n\t\t\t\tplaceholders += fmtPart[k];\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(type == \"left\")\n\t\t\t\tif(k < firstPlaceholder){\n\t\t\t\t\tleftText += fmtPart[k];\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\trightText += fmtPart[k];\n\t\t}\n\t\telse\n\t\t\tplaceholders += fmtPart[k];\n\t}\n\treturn {leftText: leftText, rightText: rightText, placeholders: placeholders};\n}\n\nfunction separateFmt(line){\n\tlet color = \"\";\n\tlet check = \"\";\n\tlet symbol = \"\";\n\n\tlet start = line.indexOf(\"[\");\n\tif (start != -1){\n\t\tif (line[1].match(/[><=]/)){\n\t\t\tlet end = line.indexOf(\"]\");\n\t\t\tcheck = line.substr(start+1, end-start-1);\n\t\t\tline = line.substr(end+1);\n\t\t}\n\t}\n\n\tstart = line.indexOf(\"[$\");\n\tif(start != -1){\n\t\tlet end = start + line.substr(start).indexOf(\"]\");\n\t\tsymbol = line.substr(start+2, end-start-2);\n\t\tline = line.substr(0, start)+line.substr(end+1);\n\t}\n\n\tstart = line.indexOf(\"[\");\n\tif (start != -1){\n\t\tlet end = line.indexOf(\"]\");\n\t\tcolor = line.substr(start+1, end-start-1);\n\t\tline = line.substr(end+1);\n\t}\n\treturn {condition:check, color, symbol, fmt:line};\n}\n\nfunction getCells(view, row, column){\n\tif(row && column){\n\t\tif (typeof row === \"object\" && typeof column === \"object\"){\n\t\t\tlet cells = [];\n\t\t\tfor (let r = row.row; r<=column.row; r++)\n\t\t\t\tfor (let c = row.column; c<=column.column; c++)\n\t\t\t\t\tcells.push({row: r, column: c});\n\t\t\treturn cells;\n\t\t}\n\t\telse\n\t\t\treturn [{row: row, column: column}];\n\t}\n\telse\n\t\treturn view.getSelectedId(true);\n}\n\nfunction placeholder(val){\n\treturn val === \"0\" || val === \"#\" || val === \"?\";\n}\n\nfunction getParts(str, decimal){\n\t// it is nessesary to use \"/\" before decimal to escape regex special characters\n\tconst match = str.match(\"[#?0][/\"+decimal+\"][#?0]\");\n\tif(match)\n\t\treturn [str.substring(0, match.index+1), str.substring(match.index+2)];\n\telse\n\t\treturn [str];\n}\n\n//simple check: take into account only first condition\nexport function checkFormat(format, type, checkTime){\n\tformat = format && format.fmt ? format.fmt : getFormatSource(format);\n\tif(!format) return;\n\tconst parts = splitFormat(format);\n\tconst separated = separateFmt(parts[0]).fmt;\n\n\tlet quot;\n\tif(separated)\n\t\tfor(let i = 0; i < separated.length; i++){\n\t\t\tif(separated[i] == \"\\\"\")\n\t\t\t\tquot = !quot;\n\t\t\tif(quot) continue;\n\n\t\t\tif(type == \"date\" && /[a-zA-Z]/.test(separated)){\n\t\t\t\tconst datePart = excelDateToWebix(separated.substr(i), \"date\");\n\t\t\t\tif(datePart){\n\t\t\t\t\tif(checkTime){\n\t\t\t\t\t\tif(datePart.type == \"time\")\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(type == \"string\" && separated[i] == \"@\")\n\t\t\t\treturn true;\n\t\t}\n}\n\nexport function getFormatName(view, row, col){\n\tconst item = view._mPage.getCell(row-1, col-1);\n\treturn (item && item.format) || null;\n}\n\nexport function isDateInvalid(value){\n\treturn value < -99974430.925 || value > 100025569.125;\n}\n\nexport function getDateEditFormat(view, row, col){\n\tconst formatName = getFormatName(view, row, col);\n\tconst locale = webix.i18n.spreadsheet.formats;\n\tconst isTime = checkFormat(formatName, \"date\", true);\n\n\treturn webix.Date.dateToStr( locale[isTime ? \"parseDateTime\" : \"parseDate\"] );\n}\n\nexport function getFormatFromData(data, array){\n\tconst styleName = array[3];\n\tlet fmt;\n\tif(styleName){\n\t\tlet style = arr.find(data.styles, arr => arr[0] == styleName);\n\t\tif(style){\n\t\t\tstyle = style[1];\n\t\t\tconst fmtName = styleFromText(style).format;\n\t\t\tif(fmtName){\n\t\t\t\tif(data.formats)\n\t\t\t\t\tfmt = arr.find(data.formats, arr => arr[0] == fmtName);\n\n\t\t\t\tif(fmt)\n\t\t\t\t\tfmt = fmt[1];\n\t\t\t\telse\n\t\t\t\t\tfmt = getFormatSource(fmtName); //default formats (int, percent, etc.)\n\t\t\t}\n\t\t}\n\t}\n\treturn fmt;\n}","import {getFormatName, getFormatSource} from \"../operations/formats\";\n\nexport function isChar(char) {\n\tconst code = char.charCodeAt(0);\n\treturn code <= 122 ? code >= 65 || code === 35 || code === 36 : code > 191;\n}\n\nexport function getLastCharIndex(str, includeNumbers){\n\tlet lastChar = str.length;\n\tfor(let i = lastChar - 1; i >= 0; i--){\n\t\tif(!isChar(str[i])){\n\t\t\tif(includeNumbers && isNumber(str[i]))\n\t\t\t\tcontinue;\n\t\t\treturn lastChar;\n\t\t}\n\t\telse\n\t\t\tlastChar = i;\n\t}\n}\n\nfunction isNumber(char){\n\tvar code = char.charCodeAt(0);\n\treturn code>=48 && code<=57;\n}\n\nfunction getWord(formula, i){\n\tlet sheet = \"\";\n\tlet quotes = false;\n\n\tlet j;\n\tfor(j=i; j<formula.length; j++){\n\t\tconst key =  formula[j];\n\t\tif (key === \"'\"){\n\t\t\tquotes = !quotes;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (!quotes){\n\t\t\tif (key == \"!\"){\n\t\t\t\tif(formula[i] == \"#\") //error\n\t\t\t\t\tcontinue;\n\t\t\t\telse{\n\t\t\t\t\t//multi-sheet math\n\t\t\t\t\tsheet = formula.substr(i, j-i);\n\t\t\t\t\tif (sheet[0] === \"'\")\n\t\t\t\t\t\tsheet = sheet.substr(1, sheet.length-2);\n\t\t\t\t\ti=j+1;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (!isChar(key) && !isNumber(key)){\n\t\t\t\treturn [formula.substr(i, j-i), j, i, sheet];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn [formula.substr(i), j, i, sheet];\n}\n\nvar operand = /^[A-Z$]+[0-9]+$/;\nfunction isPosition(text){\n\treturn operand.test(text);\n}\n\nexport function position(word){\n\tvar row = 0, sum = 0, x = 1, mode = 1, flags = 0;  \n\tvar chars = false;\n\n\tfor (var j =word.length-1; j>=0; j--){\n\t\tvar key = word[j].charCodeAt(0);\n\t\tif (key === 36) {\n\t\t\tflags = flags+mode;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (key < 58){\n\t\t\t//numeric\n\t\t\tsum += (key - 48)*x;\n\t\t\tx *= 10;\n\t\t} else {\n\t\t\tif (!chars){\n\t\t\t\tx = 1; row = sum; sum = 0; chars = true; mode += 1;\n\t\t\t}\n\t\t\t//alpha\n\t\t\tsum += (key - 64)*x;\n\t\t\tx*=26;\n\t\t}\n\t}\n\n\t/*\n\t\t$X$Y => flags = 3\n\t\t$XY  => flags = 2\n\t\tX$Y  => flags = 1\n\t\tXY   => flags = 0\n\t*/\n\treturn [row, sum, flags];\n}\n\nexport function split(formula, view, crosssheet, fromSheet){\n\tconst activeSheet = view.getActiveSheet();\n\tvar lines = [];\n\tvar index = 0;\n\tvar quotes = false, ph = false;\n\tfor (var i = formula[i] === \"=\" ? 1 : 0; i < formula.length; i++){\n\t\tvar key = formula[i];\n\t\tif (key == \"\\\"\"){\n\t\t\tquotes = !quotes;\n\t\t} else if (!quotes){\n\t\t\tif (key == \"{\" && formula[i+1] == \"{\"){\n\t\t\t\tph = true;\n\t\t\t} else if (key == \"}\" && formula[i+1] == \"}\"){\n\t\t\t\tph = false;\n\t\t\t} else if (!ph){\n\t\t\t\tconst escaped = key === \"'\";\n\t\t\t\tif (escaped || isChar(key)){\n\t\t\t\t\tlet [word, end, ,sheet] = getWord(formula, i);\n\t\t\t\t\tlet next = end - 1;\n\t\t\t\t\tlet value;\n\n\t\t\t\t\tif(formula[next+1] !== \"(\"){\n\t\t\t\t\t\tif(isPosition(word)){\n\t\t\t\t\t\t\tif(!sheet || sheet == activeSheet || crosssheet){\n\t\t\t\t\t\t\t\tvalue = sheet ? [sheet, word, escaped] : word;\n\t\t\t\t\t\t\t\tpushLine(lines, formula, i, index, value);\n\t\t\t\t\t\t\t\tindex = next+1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif(crosssheet){\n\t\t\t\t\t\t\t\tvalue = sheet ? [sheet, word, escaped] : word;\n\t\t\t\t\t\t\t\tpushLine(lines, formula, i, index, value);\n\t\t\t\t\t\t\t\tindex = next+1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t//specified sheet or active sheet (if not specified) range\n\t\t\t\t\t\t\t\tlet range = view.ranges.getCode(word, sheet || fromSheet);\n\n\t\t\t\t\t\t\t\t//global range\n\t\t\t\t\t\t\t\tif(!range)\n\t\t\t\t\t\t\t\t\trange = view.ranges.getCode(word, true);\n\n\t\t\t\t\t\t\t\tif(range){\n\t\t\t\t\t\t\t\t\tconst parts = range.split(\"!\");\n\t\t\t\t\t\t\t\t\tif(parts[0] == activeSheet){\n\t\t\t\t\t\t\t\t\t\tvalue = [sheet, word, escaped, parts[1]];\n\t\t\t\t\t\t\t\t\t\tpushLine(lines, formula, i, index, value);\n\t\t\t\t\t\t\t\t\t\tindex = next+1;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ti = next;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (index!=formula.length)\n\t\tlines.push(formula.substr(index));\n\treturn lines;\n}\n\nfunction pushLine(lines, formula, i, index, value){\n\tif (i!==0)\n\t\tlines.push(formula.substr(index, i-index));\n\tlines.push(value);\n}\n\nexport function getMathFormat(view, value){\n\tlet level = 0;\n\tlet blockLevel;\n\n\tconst parts = split(value, view);\n\n\tfor(let i = 0; i < parts.length; i++){\n\t\t// parts[i] can contain numbers, math operators, formulas, etc.\n\t\tif(i%2 === 0){\n\t\t\t// check formulas and round brackets which are not in quotes\n\t\t\tconst methods = parts[i].match(/(([a-zA-Z]*\\()|\\))(?=(?:[^\"]|\"[^\"]*\")*$)/g);\n\t\t\tif(methods)\n\t\t\t\tmethods.forEach(part => {\n\t\t\t\t\tif(part.indexOf(\"(\") > -1){\n\t\t\t\t\t\tlevel++;\n\t\t\t\t\t\t// some methods block format addition (like count,odd,etc.)\n\t\t\t\t\t\tconst safeMethods = /^(SUM|AVERAGE|MAX|MIN|INT|ROUND|ROUNDDOWN|ROUNDUP|TRUNC)?\\($/gi;\n\t\t\t\t\t\tif(!blockLevel && !safeMethods.test(part))\n\t\t\t\t\t\t\tblockLevel = level;\n\t\t\t\t\t}\n\t\t\t\t\telse if(--level < blockLevel)\n\t\t\t\t\t\tblockLevel = null;\n\t\t\t\t});\n\t\t}\n\t\t// parts[i] can be named range, cell from the active / non-active sheet\n\t\telse if(!blockLevel){\n\t\t\tif(webix.isArray(parts[i])){\n\t\t\t\tif(/^[A-Za-z]+$/.test(parts[i][1]))\n\t\t\t\t\tparts[i] = parts[i][3].split(\":\")[0];\n\t\t\t\telse if(parts[i][0] == view.getActiveSheet())\n\t\t\t\t\tparts[i] = parts[i][1];\n\t\t\t\telse\n\t\t\t\t\tcontinue; // ignore non-active sheets\n\t\t\t}\n\n\t\t\t// if range - check first cell position\n\t\t\tconst cell = position(parts[i]);\n\t\t\tconst name = getFormatName(view, cell[0], cell[1]);\n\n\t\t\t// first cell with number format\n\t\t\tif(name)\n\t\t\t\treturn {fmt: getFormatSource(name)};\n\t\t}\n\t}\n}","import {getFormatName, checkFormat, isDateInvalid, getFormatFromData, getFormatSource} from \"./formats\";\nimport {getExcelDateFromJs} from \"../mathematics/methods\";\nimport {getMathFormat} from \"../mathematics/parser\";\n\nexport function init(view){\n\tview.attachEvent(\"onCellChange\", function(row, col, value, page){\n\t\tif(page == this.getActiveSheet() && !this._setType){\n\t\t\tconst formatName = getFormatName(this, row, col);\n\t\t\tconst cell = {\n\t\t\t\trow,\n\t\t\t\tcol,\n\t\t\t\tvalue,\n\t\t\t\tfmt: formatName ? {fmt: getFormatSource(formatName)} : null\n\t\t\t};\n\t\t\tsetType(this, cell);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onBeforeFormatChange\", function(row, col, formatName){\n\t\tif(!this._setType){\n\t\t\tconst cell = {\n\t\t\t\trow,\n\t\t\t\tcol,\n\t\t\t\tvalue: view.getCellValue(row, col),\n\t\t\t\tfmt: {fmt:getFormatSource(formatName)}\n\t\t\t};\n\t\t\tsetType(this, cell, true);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAction\", function(action, values){\n\t\tif(action == \"dropdown\" && values.newValue && values.newValue.editor == \"excel_date\"){\n\t\t\tconst format = getFormatName(this, values.row, values.column);\n\t\t\tif(getFormatType(format) != \"date\")\n\t\t\t\tthis.setFormat(values.row, values.column, webix.i18n.spreadsheet.formats.dateFormat);\n\t\t}\n\t});\n}\n\nexport function loadCell(view, data, item){\n\tconst fmt = getFormatFromData(data, item);\n\tconst cell = {\n\t\tvalue: item[2],\n\t\tfmt: fmt ? {fmt} : null,\n\t\ttype: item[4]\n\t};\n\tsetType(view, cell);\n\treturn cell;\n}\n\nfunction getExpectType(view, cell, parseDate, isFormula, formatType, style){\n\t//date based math\n\tlet type = \"string\";\n\tif(!webix.isUndefined(cell.value)){\n\t\tif(isFormula){\n\t\t\ttype = \"number\";\n\n\t\t\tif(/^=(now|date|time)\\(/i.test(cell.value))\n\t\t\t\ttype = \"date\";\n\t\t\telse if(/^=(sparkline|image)\\(/i.test(cell.value))\n\t\t\t\ttype = \"string\";\n\t\t}\n\t\telse if(!isNaN(cell.value))\n\t\t\ttype = \"number\";\n\t\telse if(formatType != \"string\" && parseDate){\n\t\t\t//if user types a date string, or it comes from Excel import\n\t\t\t//set date type and convert string to Excel date\n\t\t\tconst parser = webix.Date.strToDate( webix.i18n.spreadsheet.formats.parseDateTime );\n\t\t\tconst value  = parser(cell.value);\n\t\t\tif(value != \"\" && !isNaN(value)){\n\t\t\t\t//change cell style - value changes once (some value -> 35767.5)\n\t\t\t\t//change cell value - value changes twice (some value -> \"12/03/97\" -> 35767.5)\n\t\t\t\t//so ignore undo for cell value change\n\t\t\t\tif(style)\n\t\t\t\t\tdateToExcel(view, cell, value);\n\t\t\t\telse\n\t\t\t\t\tview.ignoreUndo(() => dateToExcel(view, cell, value));\n\n\t\t\t\ttype = \"date\";\n\t\t\t}\n\t\t}\n\t}\n\treturn type;\n}\n\nfunction dateToExcel(view, cell, date){\n\tdate = getExcelDateFromJs(date);\n\tcell.value = date;\n\n\tif(!(view._loading_data || view._page_value_set))\n\t\tview.setCellValue(cell.row, cell.col, date);\n}\n\nfunction checkType(type, expectType, formatType, isFormula, value){\n\ttype = type || expectType;\n\n\t//strings will always have string type regardless of format\n\tif(expectType == \"string\")\n\t\ttype = \"string\";\n\telse if(formatType)\n\t\ttype = formatType;\n\n\tif(type == \"date\" && !isFormula && isDateInvalid(value))\n\t\ttype = \"number\";\n\n\treturn type;\n}\n\nfunction getFormatType(format){\n\tlet formatType = format ? \"number\" : null;\n\tif(checkFormat(format, \"string\"))\n\t\tformatType = \"string\";\n\telse if(checkFormat(format, \"date\"))\n\t\tformatType = \"date\";\n\treturn formatType;\n}\n\nexport function getType(view, row, column, page){\n\tpage = page ? view._mData.getPage(page) : view._mPage;\n\tconst item = page.getCell(row-1, column-1);\n\treturn (item && item.type) || null;\n}\n\nfunction setType(view, cell, style){\n\tconst parseToStore = !(cell.row && cell.col);\n\n\t//prevent type change during value or format change\n\tview._setType = true;\n\n\tconst isFormula = typeof cell.value == \"string\" && cell.value[0] == \"=\";\n\tconst parseDate = (!style || cell.fmt == getFormatSource(\"date\")) && (!view._loading_data || view._page_value_set || cell.type == \"date\");\n\n\tlet mathFormat;\n\tif(!parseToStore)\n\t\tmathFormat = isFormula && !cell.fmt ? getMathFormat(view, cell.value) : null;\n\n\tconst formatType = getFormatType(cell.fmt || mathFormat);\n\tconst expectType = getExpectType(view, cell, parseDate, isFormula, formatType, style);\n\n\tcell.type = checkType(cell.type, expectType, formatType, isFormula, cell.value);\n\n\tif(!parseToStore){\n\t\tconst item = view._mPage.getCell(cell.row-1, cell.col-1, true);\n\t\titem.$format = formatType == \"string\" ? 1 : 0;\n\t\tupdateCell(view, cell, expectType, formatType, mathFormat);\n\t\titem.type = cell.type;\n\t}\n\n\tdelete view._setType;\n}\n\nfunction updateCell(view, cell, expectType, formatType, mathFormat){\n\tconst row = cell.row;\n\tconst col = cell.col;\n\tconst isString = typeof cell.value == \"string\";\n\n\tconst isFormula = isString && cell.value[0] == \"=\";\n\tconst cellEditor = view.getCellEditor(row, col);\n\n\t//update cell value if set number format (5e5 -> 500000, 005 -> 5)\n\tif(!(view._loading_data || view._page_value_set) && cell.type === \"number\" && isString && !isFormula && cell.value !== \"\")\n\t\tview.setCellValue(row, col, cell.value*1);\n\n\tif(mathFormat)\n\t\tview.setFormat(row, col, mathFormat.fmt);\n\telse if(cell.type == \"date\"){\n\t\t// add default date format\n\t\tif(formatType != \"date\"){\n\t\t\tconst isTime = isFormula && cell.value.toUpperCase().indexOf(\"=TIME(\") == 0;\n\t\t\tconst locale = webix.i18n.spreadsheet.formats;\n\t\t\tconst format = isTime ? locale.timeFormat : locale.dateFormat;\n\t\t\tview.setFormat(row, col, format);\n\t\t}\n\n\t\t//set date editor for cells with date type\n\t\tif(!isFormula && !cellEditor)\n\t\t\tview.setCellEditor(row, col, {editor: \"excel_date\"});\n\t}\n\telse if(formatType != \"string\" && cell.type == \"string\" && expectType != \"string\"){\n\t\t//force text format for numbers typed as strings\n\t\tview.setFormat(row, col, \"@\");\n\t}\n\n\t//remove date editor\n\tif((cell.type != \"date\" || isFormula) && cellEditor && cellEditor.editor == \"excel_date\")\n\t\tview.setCellEditor(row, col, null);\n}\n","import {isChar, getLastCharIndex} from \"../mathematics/parser\";\n\nwebix.protoUI({\n\tname: \"suggest-formula\",\n\tdefaults: {\n\t\tfitMaster: false,\n\t\twidth: 200,\n\t\tfilter(item, value) {\n\t\t\tconst editor = webix.$$(this.config.master);\n\t\t\tconst cursor = editor.getInputNode().selectionStart;\n\t\t\tconst val = editor.getValue();\n\n\t\t\tif(val.charAt(0) !== \"=\") return;\n\n\t\t\tconst str = val.substring(0, cursor);\n\t\t\tconst search = str.substring( getLastCharIndex(str, true) );\n\t\t\tconst nextSymbol = val.charAt(cursor);\n\n\t\t\tif(search && (cursor === val.length || !(isChar(nextSymbol) || /^[0-9]/.test(nextSymbol))))\n\t\t\t\tvalue = search;\n\n\t\t\treturn item.value.toString().toLowerCase().indexOf(value.toLowerCase()) === 0;\n\t\t}\n\t},\n\t$init() {\n\t\tthis.attachEvent(\"onBeforeShow\", (node) => {\n\t\t\tif(node.tagName){\n\t\t\t\tconst editor = webix.$$(this.config.master);\n\t\t\t\tconst text = editor.getValue();\n\n\t\t\t\t//only for formulas\n\t\t\t\tif(!text || text.charAt(0) !== \"=\") return false;\n\n\t\t\t\tconst sizes = webix.html.offset(node);\n\n\t\t\t\tconst selectionStart = editor.getInputNode().selectionStart;\n\t\t\t\tconst textWidth = webix.html.getTextSize(text.substring(0, selectionStart), \"webix_ssheet_formula\").width;\n\n\t\t\t\tconst y = sizes.y + sizes.height;\n\t\t\t\tconst x = sizes.x + textWidth;\n\n\t\t\t\twebix.ui.popup.prototype.show.apply(this, [{x, y}]);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t},\n\tsetMasterValue(data, refresh) {\n\t\tconst text = data.id ? this.getItemText(data.id) : (data.text||data.value);\n\t\twebix.$$(this.config.master).setValueHere(text);\n\n\t\tif (!refresh)\n\t\t\tthis.hide(true);\n\n\t\tthis.callEvent(\"onValueSuggest\", [data, text]);\n\t},\n\t$enterKey: function() {\n\t\tif (this.isVisible())\n\t\t\treturn webix.ui.suggest.prototype.$enterKey.apply(this, arguments);\n\t}\n}, webix.ui.suggest);","webix.protoUI({\n\tname: \"ssheet-button\",\n\t$cssName: \"button\",\n\tdefaults:{\n\t\ttype:\"htmlbutton\",\n\t\twidth: 40\n\t},\n\t$init: function(config){\n\t\tconst arrowCss = config.arrow ? \" webix_ssheet_button_menu\" : \"\";\n\t\tconst iconCss = config.label ? \"\" : \" webix_ssheet_icon_only\";\n\t\tthis.$view.className += \" webix_ssheet_button\"+arrowCss+iconCss;\n\t\tif(config.label || config.icon){\n\t\t\tlet icon = (config.icon||config.name),\n\t\t\t\ttext = config.label||\"\";\n\t\t\tif(config.arrow){\n\t\t\t\tconst right = webix.skin.$active.inputSpacing/2;\n\t\t\t\ttext += \"<span class='webix_ssheet_button_icon webix_ssheet_icon_arrow webix_icon wxi-menu-down' style='right:\"+right+\"px;'></span>\";\n\t\t\t}\n\t\t\tconfig.label = \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\"+icon+\"'></span> \"+text;\n\t\t\tconfig.tooltip = webix.i18n.spreadsheet.tooltips[config.name]||\"\";\n\t\t}\n\t\tif(config.options && !config.popup)\n\t\t\tconfig.popup = getPopupConfig(config.options);\n\t}\n},webix.ui.button);\n\n\nwebix.protoUI({\n\tname: \"ssheet-button-icon-top\",\n\t$cssName: \"button\",\n\tdefaults:{\n\t\ttype:\"htmlbutton\",\n\t\twidth: 70,\n\t\theight: 70\n\t},\n\t$init: function(config){\n\t\tthis.$view.className += \" ssheet_button_icon_top\";\n\t\tif(config.label) {\n\t\t\tlet icon = (config.icon || config.name||\"\"),\n\t\t\t\ttext = config.label;\n\t\t\tconfig.label = \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\" + icon + \"'></span><br/>\";\n\t\t\tconfig.label += \"<span class='ssheet_button_icon_top_text'>\"+text+\"</span>\";\n\t\t\tif (config.arrow)\n\t\t\t\tconfig.label += \"<br/><span class='ssheet_button_icon_top_arrow webix_icon wxi-menu-down'></span>\";\n\t\t\tconfig.tooltip = webix.i18n.spreadsheet.tooltips[config.name]||\"\";\n\t\t}\n\t\tif(config.options && !config.popup)\n\t\t\tconfig.popup = getPopupConfig(config.options);\n\t}\n},webix.ui.button);\n\n\nfunction getPopupConfig(options){\n\treturn {\n\t\tview: \"ssheet-suggest\",\n\t\tcss: \"webix_ssheet_suggest\",\n\t\tautowidth:true,\n\t\ttemplate: function(obj){\n\t\t\tvar text = \"\";\n\t\t\tif(obj.icon)\n\t\t\t\ttext += \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\" + obj.icon + \"'></span> \";\n\t\t\ttext += obj.value || webix.i18n.spreadsheet.menus[obj.id] || obj.id;\n\t\t\treturn text;\n\t\t},\n\t\tdata: options,\n\t\ton:{\n\t\t\tonItemClick: function(id){\n\t\t\t\tvar button = this.config.master;\n\t\t\t\tif(button){\n\t\t\t\t\tlet view = webix.$$(button).getTopParentView();\n\t\t\t\t\tvar params = [this.getItem(id)];\n\t\t\t\t\tif(webix.$$(button).config.area){\n\t\t\t\t\t\tlet area = view.$$(\"cells\").getSelectArea();\n\t\t\t\t\t\tif(area)\n\t\t\t\t\t\t\tparams = params.concat([area.start,area.end]);\n\t\t\t\t\t}\n\t\t\t\t\tview.callEvent(\"onCommand\",params);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}","import \"./suggest_formula\";\nimport {getJsDateFromExcel} from \"../mathematics/methods\";\nimport {getType} from \"../operations/types\";\nimport {getDateEditFormat} from \"../operations/formats\";\nimport {split, position, getLastCharIndex} from \"../mathematics/parser\";\n\nwebix.protoUI({\n\tname: \"live-editor\",\n\t$cssName:\"texthighlight\",\n\t$init(config){\n\t\tconfig.suggest = {\n\t\t\tview: \"suggest-formula\",\n\t\t\tdata: config.suggestData\n\t\t};\n\t\tconfig.highlight = this.highlight;\n\n\t\tthis._highlightedCells = {};\n\t\tthis.$view.className += \" webix_ssheet_formula\";\n\n\t\tthis.attachEvent(\"onKeyPress\", (code, e) => {\n\t\t\tdelete this._update_range;\n\t\t\tif(code == 13) {\n\t\t\t\t//ignore Enter key if it was pressed to select some value from suggest\n\t\t\t\tif ((new Date() - (this._last_value_set || 0)) > 300){\n\t\t\t\t\tconst cell = this.config.activeCell;\n\t\t\t\t\tthis.showActiveSheet(true);\n\t\t\t\t\tthis.updateCellValue(cell);\n\t\t\t\t\t//blur to avoid calling highlight function after selection move\n\t\t\t\t\tthis.getInputNode().blur();\n\t\t\t\t\t//we have 'enter' hot key to activate editor\n\t\t\t\t}\n\t\t\t\twebix.html.preventEvent(e);\n\t\t\t}\n\t\t\t//esc - cancel editing\n\t\t\telse if(code == 27){\n\t\t\t\tthis.showActiveSheet();\n\n\t\t\t\twebix.delay(()=>{\n\t\t\t\t\tconst master = this.getTopParentView();\n\t\t\t\t\tconst cell = master.getSelectedId();\n\t\t\t\t\tconst oldVal = this.getCellValue(cell.row, cell.column);\n\n\t\t\t\t\tif(this.getValue() == oldVal)\n\t\t\t\t\t\tmaster.$$(\"cells\").refresh(cell.row);\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.setValue(oldVal);\n\n\t\t\t\t\tdelete master.$handleSelection;\n\n\t\t\t\t\twebix.UIManager.setFocus(master.$$(\"cells\"));\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tthis.attachEvent(\"onAfterRender\", function(){\n\t\t\twebix.eventRemove(this.keydownEv);\n\n\t\t\tthis.keydownEv = webix.event(this.getInputNode(), \"keydown\", e => {\n\t\t\t\tthis.endEdit(e);\n\t\t\t});\n\t\t});\n\t},\n\thighlight(value){\n\t\tlet html = \"\";\n\t\tconst master = this.getTopParentView();\n\t\tconst escapeText = webix.template.escape;\n\n\t\tfor(let area in this._highlightedCells){\n\t\t\tconst cells = this._highlightedCells[area];\n\t\t\tthis.changeCellCss(cells[0], cells[1], cells[2], true);\n\t\t}\n\t\tthis._highlightedCells = {};\n\n\t\t//value can be null\n\t\tif(value && value[0]==\"=\"){\n\t\t\tconst parts = split(value, master, null, this._activeMath);\n\t\t\tconst sheet = master.getActiveSheet();\n\n\t\t\tlet colorIndex = 1;\n\n\t\t\tfor(let i = 0; i < parts.length; i++){\n\t\t\t\tif(i%2 === 0)\n\t\t\t\t\thtml += escapeText(parts[i]);\n\t\t\t\telse{\n\t\t\t\t\tconst crossheet = webix.isArray(parts[i]);\n\t\t\t\t\tconst cellSheet = crossheet ? this.prepareSheet(parts[i][0], parts[i][2]) : \"\";\n\t\t\t\t\tconst activeMath = this._activeMath;\n\n\t\t\t\t\tconst activeSheet = !crossheet && (!activeMath || activeMath == sheet);\n\t\t\t\t\tlet cell = position(crossheet ? parts[i][1] : parts[i]);\n\t\t\t\t\tconst cellText = crossheet ? cellSheet+parts[i][1] : parts[i];\n\n\t\t\t\t\tconst rangeName = crossheet && !getLastCharIndex(parts[i][1]);\n\n\t\t\t\t\tif(rangeName || activeSheet || (crossheet && parts[i][0] == sheet)){\n\t\t\t\t\t\tlet repeatedColor;\n\t\t\t\t\t\t//range\n\t\t\t\t\t\tif((parts[i+1] == \":\" && parts[i+2]) || rangeName){\n\t\t\t\t\t\t\tlet nextCell, nextCellText;\n\n\t\t\t\t\t\t\tif(rangeName){\n\t\t\t\t\t\t\t\tconst cells = parts[i][3].split(\":\");\n\n\t\t\t\t\t\t\t\tcell = position(cells[0]);\n\t\t\t\t\t\t\t\tnextCell = position(cells[1]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tnextCell = position(webix.isArray(parts[i+2]) ? parts[i+2][1] : parts[i+2]);\n\t\t\t\t\t\t\t\tnextCellText = webix.isArray(parts[i+2]) ? cellSheet+parts[i+2][1] : parts[i+2];\n\t\t\t\t\t\t\t\ti+=2;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\trepeatedColor = this.setColor(cell[0], cell[1], nextCell[0], nextCell[1], colorIndex);\n\t\t\t\t\t\t\thtml += `<span class=\"webix_ssheet_highlight_color_${repeatedColor||colorIndex}\">${rangeName ? cellText : cellText+\":\"+nextCellText}</span>`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//OtherSheet!A1:A3 - do not highlight A3\n\t\t\t\t\t\telse if(parts[i-1] && parts[i-1][ parts[i-1].length-1 ] == \":\"){\n\t\t\t\t\t\t\thtml += cellText;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//cell\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\trepeatedColor = this.setColor(cell[0], cell[1], cell[0], cell[1], colorIndex);\n\t\t\t\t\t\t\thtml += `<span class=\"webix_ssheet_highlight_color_${repeatedColor||colorIndex}\">${cellText}</span>`;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst colors = 7;\n\t\t\t\t\t\tif(!repeatedColor)\n\t\t\t\t\t\t\tcolorIndex += colorIndex == colors ? -1*(colors-1) : 1;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\thtml += cellText;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\thtml = escapeText(value);\n\n\t\tmaster.$$(\"cells\").refresh();\n\n\t\tif(document.activeElement == this.getInputNode())\n\t\t\tthis.paintValue();\n\t\treturn html;\n\t},\n\tshowActiveSheet(enter){\n\t\tconst master = this.getTopParentView();\n\t\tconst grid = master._table;\n\n\t\tif(this._activeMath){\n\t\t\tif(this._activeMath != master.getActiveSheet()){\n\t\t\t\tconst cell = this.config.activeCell;\n\n\t\t\t\tthis.define({activeCell:null});\n\n\t\t\t\tmaster.showSheet(this._activeMath);\n\n\t\t\t\twebix.delay(()=>{\n\t\t\t\t\tgrid.select(cell.row + (enter ? 1 : 0), cell.column);\n\t\t\t\t});\n\t\t\t}\n\t\t\tdelete this._activeMath;\n\t\t}\n\t\telse if(enter){\n\t\t\twebix.delay(()=>{\n\t\t\t\tgrid.moveSelection(\"down\");\n\t\t\t});\n\t\t}\n\t},\n\tchangeCellCss(row, col, index, remove){\n\t\tconst css = `webix_ssheet_highlight_background_${index}`;\n\t\tfor (let r = row.start; r <= row.end; r++)\n\t\t\tfor (let c = col.start; c <=  col.end; c++)\n\t\t\t\tthis.getTopParentView().$$(\"cells\")[remove?\"removeCellCss\":\"addCellCss\"](r, c, css, true);\n\t},\n\tendEdit(e){\n\t\tconst code = e.which || e.keyCode;\n\n\t\t//if it is a formula - force user to finish it by click outside or 'enter'\n\t\tif(code == 9){\n\t\t\twebix.html.preventEvent(e);\n\n\t\t\tthis.getInputNode().blur();\n\t\t\tthis.updateCellValue();\n\t\t\tthis.getTopParentView()._table.moveSelection(e.shiftKey ? \"left\" : \"right\");\n\t\t}\n\t},\n\tpaintValue(){\n\t\tconst master = this.getTopParentView();\n\t\tif(!this._activeMath || this._activeMath == master.getActiveSheet()){\n\t\t\tconst cell = this.config.activeCell;\n\t\t\tconst node = master._table.getItemNode(cell);\n\t\t\tif(cell && node) \n\t\t\t\tnode.innerHTML = `<div>${webix.template.escape(this.getValue())}</div>`;\n\t\t}\n\t},\n\tupdateCellValue(cell) {\n\t\tconst newv = this.getValue();\n\t\tconst master = this.getTopParentView();\n\t\tcell = cell || this.config.activeCell;\n\n\t\tif (!cell)\n\t\t\tthis.setValue(\"\");\n\t\telse{\n\t\t\tconst val = master.getCellValue(cell.row, cell.column);\n\n\t\t\tif(newv !== val){\n\t\t\t\tthis.config.value = newv;\n\t\t\t\tmaster.setCellValue(cell.row, cell.column, newv);\n\t\t\t\tmaster.refresh();\n\t\t\t}\n\t\t}\n\n\t\tdelete master.$handleSelection;\n\t},\n\t$setValueHere(value){\n\t\tthis.setValueHere(value);\n\t},\n\tsetValueHere(value) {\n\t\tthis._last_value_set = new Date();\n\n\t\tconst formula = this.getValue();\n\t\tif(formula && formula.charAt(0)===\"=\"){\n\t\t\tconst cursor = this.getInputNode().selectionStart;\n\t\t\tlet str1 = formula.substring(0, cursor);\n\t\t\tconst str2 = formula.substring(cursor);\n\n\t\t\tif(str1[str1.length-1] == \"(\")\n\t\t\t\tstr1 = str1.substring(0, str1.length-1);\n\n\t\t\tstr1 = str1.substring(0, getLastCharIndex(str1, true));\n\n\t\t\t//suggest called via up/down key\n\t\t\tstr1 += value + (str2[0] == \"(\" ? \"\" : \"(\");\n\n\t\t\tthis.setValue(str1 + str2);\n\t\t\tthis.getInputNode().setSelectionRange(str1.length, str1.length);\n\t\t}\n\t},\n\texpectOperator(){\n\t\tconst text = this.getValue();\n\n\t\tif(text[0] == \"=\"){\n\t\t\tlet cursor = this.getInputNode().selectionStart;\n\t\t\twhile(text[cursor-1] == \" \")\n\t\t\t\tcursor--;\n\t\t\treturn text[cursor-1] && text[cursor-1].match(/[+&\\-/*%=(:,]/);\n\t\t}\n\t},\n\tsetRange(range, replace){\n\t\tconst cursor = this.getInputNode().selectionStart;\n\t\tconst formula = this.getValue();\n\n\t\tlet str1, str2;\n\n\t\t//check if range was added by click\n\t\tif(replace)\n\t\t\treplace = this._update_range && cursor == this._update_range.pos + this._update_range.len;\n\n\t\tconst lastPos = replace ? this._update_range.pos : cursor;\n\n\t\tstr1 = formula.substring(0, lastPos) + range;\n\t\tstr2 = formula.substring(cursor);\n\n\t\tthis._update_range = {pos: lastPos, len: range.length};\n\n\t\tthis.setValue(str1 + str2);\n\t},\n\tprepareSheet(sheet, escaped){\n\t\tif(!sheet)\n\t\t\treturn \"\";\n\t\tconst condition = webix.isUndefined(escaped) ? sheet.indexOf(\" \") != -1 : escaped;\n\t\treturn (condition ? `'${sheet}'` : sheet) + \"!\";\n\t},\n\tprepareArea(first, second){\n\t\treturn {\n\t\t\tstart: Math.min(first, second),\n\t\t\tend: Math.max(first, second)\n\t\t};\n\t},\n\tsetColor(row1, col1, row2, col2, color){\n\t\tconst row = this.prepareArea(row1, row2);\n\t\tconst col = this.prepareArea(col1, col2);\n\t\tconst index = [row.start, row.end, col.start, col.end].join(\",\");\n\t\tconst coloredArea = this._highlightedCells[index];\n\n\t\tif(!coloredArea){\n\t\t\tthis._highlightedCells[index] = [row, col, color];\n\t\t\tthis.changeCellCss(row, col, color);\n\t\t}\n\t\telse\n\t\t\treturn coloredArea[2];\n\t},\n\tgetCellValue(row, column){\n\t\tconst master = this.getTopParentView();\n\t\tlet value = master.getCellValue(row, column);\n\t\tif(getType(master, row, column) == \"date\" && value[0] != \"=\"){\n\t\t\tconst format = getDateEditFormat(master, row, column);\n\t\t\tvalue = format(getJsDateFromExcel(value));\n\t\t}\n\t\treturn value;\n\t}\n}, webix.ui.texthighlight);","webix.protoUI({\n\tname: \"ssheet-separator\",\n\tdefaults:{\n\t\tcss: \"webix_ssheet_toolbar_spacer\",\n\t\ttemplate: \" \",\n\t\twidth: 1,\n\t\tborderless: true\n\t}\n},webix.ui.view);","webix.protoUI({\n\tname: \"sheets\",\n\tdefaults:{\n\t\tlayout: \"x\",\n\t\tborderless: true,\n\t\tcss:\"ssheet_list_sheets\",\n\t\tselect: true,\n\t\tdrag: \"order\",\n\t\tdragscroll:\"x\",\n\t\tscroll:false\n\t}\n},webix.EditAbility,webix.ui.list);","// toolbar: toogle button\nwebix.protoUI({\n\t$cssName: \"toggle\",\n\tname:\"ssheet-toggle\",\n\ttoggle:function(){\n\t\tconst old = this.getValue();\n\n\t\tif(!old || old == this.config.offValue)\n\t\t\tthis.config.value = this.config.onValue || true;\n\t\telse\n\t\t\tthis.config.value = this.config.offValue || false;\n\n\t\tconst val = this.getValue();\n\t\tthis.$setValue(val);\n\t\tthis.callEvent(\"onChange\", [val, old, \"user\"]);\n\t},\n\t$setValue:function(value){\n\t\tif(value == this.config.offValue)\n\t\t\tvalue = false;\n\t\telse if(value == this.config.onValue)\n\t\t\tvalue = true;\n\t\twebix.ui.toggle.prototype.$setValue.call(this,value);\n\t},\n\tgetValue:function(){\n\t\tvar config = this.config;\n\t\tvar value = config.value;\n\t\treturn  !value || value==config.offValue?(config.offValue||false):(config.onValue||true);\n\t},\n\tdefaults:{\n\t\ttemplate:function(obj, common){\n\t\t\tvar css = (obj.value === true || obj.value == obj.onValue) ? \" webix_pressed\" : \"\";\n\t\t\tvar inp = common.$renderInput(obj, common);\n\t\t\treturn \"<div class='webix_el_box\"+css+\"' style='width:\"+obj.awidth+\"px; height:\"+obj.aheight+\"px'>\"+inp+\"</div>\";\n\t\t}\n\t}\n}, webix.ui.toggle);\n\n\n// toolbar: silent toggle button\nwebix.protoUI({\n\tname:\"ssheet-toggle-silent\",\n\t$cssName:\"toggle\",\n\t$allowsClear:false,\n\tsetValue:function(){\n\t\tthis.blockEvent();\n\t\twebix.ui.toggle.prototype.setValue.apply(this, arguments);\n\t\tthis.unblockEvent();\n\t}\n}, webix.ui.toggle);","webix.protoUI({\n\tname: \"ssheet-bar-title\",\n\tdefaults:{\n\t\tborderless: true\n\t},\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_subbar_title\";\n\t}\n},webix.ui.template);","import * as arr from \"../helpers/array\";\n\nwebix.protoUI({\n\tname:\"multicheckbox\",\n\tdefaults:{\n\t\tpadding:0,\n\t\ttype:\"clean\",\n\t\tborderless:true,\n\t\telementsConfig:{\n\t\t\tlabelWidth:0\n\t\t}\n\t},\n\t$init:function(config){\n\t\tconfig.rows = [{height:0.000001}];\n\t\tthis.$ready.push(function(){\n\t\t\tthis._initOnChange();\n\t\t});\n\t},\n\t_initOnChange(){\n\t\tthis.attachEvent(\"onChange\", function(newv){\n\t\t\tconst name = this.$eventSource.config.name;\n\n\t\t\tthis.blockEvent();\n\t\t\tif(name == \"$all\"){\n\t\t\t\tfor(let i in this.elements)\n\t\t\t\t\tthis.elements[i].setValue(newv);\n\t\t\t\tif(!newv)\n\t\t\t\t\tthis._getCheckboxes()[0].setValue(1);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tconst value = this.getValue(true);\n\n\t\t\t\tif(webix.isArray(value) && (!value.length || !arr.find(value, config => !config.$hiddenSheet))){\n\t\t\t\t\tconst checkboxes = this._getCheckboxes();\n\t\t\t\t\tarr.find(checkboxes, c => !c.config.$hiddenSheet).setValue(1);\n\t\t\t\t}\n\n\t\t\t\tthis.elements.$all.setValue(this.getValue(true) === true ? 1 : 0);\n\t\t\t}\n\t\t\tthis.unblockEvent();\n\t\t});\n\t},\n\tsetValue:function(value){\n\t\tthis.elements = {};\n\t\tthis._count = value.length;\n\n\t\tif(value.length > 1){\n\t\t\tlet elements = [];\n\t\t\tlet base = [];\n\t\t\tconst maxHeight = 400;\n\n\t\t\tvalue.forEach(sheet => {\n\t\t\t\tconst icon = `<span class=\"webix_icon wxi-eye${sheet.hidden ? \"-slash\" : \"\"}\"></span>`;\n\t\t\t\tbase.push({ view: \"checkbox\", labelRight: icon + sheet.name, name: sheet.name, value: sheet.active, $hiddenSheet: sheet.hidden });\n\t\t\t});\n\n\t\t\tconst baseHeight = base.length * webix.skin.$active.inputHeight;\n\t\t\tconst scroll = baseHeight > maxHeight;\n\n\t\t\telements.push({\n\t\t\t\tview:\"scrollview\", body:{rows:base},\n\t\t\t\tscroll: scroll,\n\t\t\t\theight: scroll ? maxHeight : baseHeight\n\t\t\t});\n\n\t\t\telements.push({ template:\"<div class='ss_sep_line'></div>\", height:10 });\n\t\t\telements.push({ view:\"checkbox\", labelRight:webix.i18n.spreadsheet.labels[\"export-all-sheets\"], name:\"$all\", value:0 });\n\n\t\t\twebix.ui(elements, this);\n\t\t}\n\t\telse if(this.getChildViews().length > 1){\n\t\t\twebix.ui([{height:0.000001}], this);\n\t\t}\n\t},\n\tgetValue:function(config){\n\t\tconst checkboxes = this._getCheckboxes();\n\t\tlet output = [];\n\n\t\t//save order\n\t\tfor(let i = 0; i < checkboxes.length; i++)\n\t\t\tif(checkboxes[i].getValue()){\n\t\t\t\tconst cfg = checkboxes[i].config;\n\t\t\t\toutput.push(config ? cfg : cfg.name);\n\t\t\t}\n\n\t\tif(output.length == this._count)\n\t\t\treturn true;\n\n\t\treturn output;\n\t},\n\t_getCheckboxes(){\n\t\tconst scrollview = this.queryView(\"scrollview\");\n\t\treturn scrollview ? scrollview.getBody().getChildViews() : [];\n\t}\n}, webix.ui.form);","webix.protoUI({\n\tname:\"formlist\",\n\tdefaults:{\n\t\tpaddingY: 5,\n\t\theight: 120,\n\t},\n\t$init:function(config){\n\n\t\tconfig.cols = [\n\t\t\t{\n\t\t\t\tcss:\"webix_inp_label\",\n\t\t\t\ttemplate:config.label,\n\t\t\t\twidth:config.labelWidth,\n\t\t\t\tborderless:true\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"list\",\n\t\t\t\tdata:config.data,\n\t\t\t\tcss:config.css,\n\t\t\t\ttemplate:config.template,\n\t\t\t\tselect: true,\n\t\t\t\tscroll:false,\n\t\t\t\tborderless:true,\n\t\t\t\ton:{\n\t\t\t\t\tonSelectChange:()=>{\n\t\t\t\t\t\tthis.getParentView().callEvent(\"onChange\", []);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t},\n\tsetValue:function(value){this.getChildViews()[1].select(value);},\n\tgetValue:function(){return this.getChildViews()[1].getSelectedId();},\n\trefresh: function(){this.getChildViews()[1].refresh();},\n\tfocus:function(){}\n}, webix.ui.layout);","webix.protoUI({\n\tname: \"ssheet-ui\",\n\tdefaults:{\n\t\tmove:true,\n\t\tcss:\"webix_shadow_none webix_ssheet_ui\",\n\t\thead:false,\n\t\tresize:true,\n\t\ttoFront:true,\n\t\tminWidth:50,\n\t\tminHeight:200,\n\t\tescHide:false,\n\t\tautofit:false\n\t},\n\t$init:function(){\n\t\t// prevent block selection\n\t\tthis.$view.setAttribute(\"webixignore\", \"1\");\n\n\t\tthis.$ready.push(function(){\n\t\t\twebix.UIManager.addHotKey(\"delete\", webix.bind(this._removeView, this));\n\t\t\twebix.UIManager.addHotKey(\"backspace\", webix.bind(this._removeView, this));\n\t\t\tthis.getMenu();\n\t\t});\n\t\tthis.attachEvent(\"onDestruct\", function(){\n\t\t\twebix.eventRemove(this._clickEv);\n\t\t\tthis._menu.destructor();\n\t\t});\n\t},\n\tmove_setter:function(value){\n\t\tif (value){\n\t\t\twebix.DragControl.addDrag(this.$view, this);\n\t\t}\n\t\treturn value;\n\t},\n\t$dragPos:function(pos, e){\n\t\tthis.callEvent(\"onViewMove\", [pos, e]);\n\t\treturn pos;\n\t},\n\t$dragCreate:function(object, e){\n\t\tconst trg = e.target;\n\t\tif (!trg.getAttribute || trg.getAttribute(\"webix_disable_drag\") || trg.getAttribute(\"webixignore\"))\n\t\t\treturn;\n\n\t\tthis.getMenu().hide();\n\t\tconst elOffset = webix.html.offset(object);\n\t\tconst elPos = webix.html.pos(e);\n\t\tconst pOffset = webix.html.offset(object.parentNode);\n\t\tconst state = webix.$$(this.config.master).getScrollState();\n\n\t\twebix.DragControl.top = elOffset.y - elPos.y - pOffset.y;\n\t\twebix.DragControl.left = elOffset.x - elPos.x - pOffset.x + state.x;\n\n\t\treturn webix.toNode(this.$view);\n\t},\n\t$dragDestroy:function(node, drag){\n\t\tconst x = this.config.left = parseInt(drag.style.left,10);\n\t\tconst y = this.config.top = parseInt(drag.style.top,10);\n\n\t\twebix.DragControl.top = webix.DragControl.left = 0;\n\n\t\tthis.callEvent(\"onViewMoveEnd\", [x, y]);\n\t\treturn;\n\t},\n\tgetMenu:function(){\n\t\tconst labels = webix.i18n.spreadsheet.labels;\n\t\tif(!this._menu){\n\t\t\tlet data = [\n\t\t\t\t{ value:labels[\"export-view\"], submenu:[\n\t\t\t\t\t{ id:\"pdf\", value:labels[\"export-view-pdf\"] },\n\t\t\t\t\t{ id:\"png\", value:labels[\"export-view-png\"] },\n\t\t\t\t\t{ id:\"excel\", value:labels[\"export-view-excel\"] }\n\t\t\t\t] }\n\t\t\t];\n\n\t\t\tif(!webix.$$(this.config.master).getTopParentView().config.readonly)\n\t\t\t\tdata = [\n\t\t\t\t\t{ id:\"edit\", value:labels[\"edit-view\"] },\n\t\t\t\t\t...data,\n\t\t\t\t\t{ id:\"del\", value:labels[\"remove-view\"] }\n\t\t\t\t];\n\n\t\t\tthis._menu = webix.ui({\n\t\t\t\tview:\"contextmenu\",\n\t\t\t\tsubmenuConfig:{\n\t\t\t\t\texternalUI: this.config.id\n\t\t\t\t},\n\t\t\t\tdata:data,\n\t\t\t\ton:{\n\t\t\t\t\tonMenuItemClick: id => this._menuActions(id),\n\t\t\t\t\tonBeforeShow: () => this._toggleExcel()\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst dots = webix.html.create(\"span\", {\"class\":\"webix_ssheet_view_menu webix_icon wxi-dots\"});\n\t\t\tthis._clickEv = webix.event(dots, \"click\", ()=> {\n\t\t\t\tif(this._menu.isVisible())\n\t\t\t\t\tthis._menu.hide();\n\t\t\t\telse\n\t\t\t\t\tthis._menu.show(dots);\n\t\t\t});\n\t\t\tthis.$view.firstChild.appendChild(dots);\n\t\t}\n\t\treturn this._menu;\n\t},\n\t_menuActions:function(id){\n\t\tswitch(id){\n\t\t\tcase \"del\":\n\t\t\t\tthis.callEvent(\"onViewRemove\", []);\n\t\t\t\tbreak;\n\t\t\tcase \"edit\":\n\t\t\t\tthis.callEvent(\"onViewEdit\", []);\n\t\t\t\tbreak;\n\t\t\tcase \"pdf\":\n\t\t\t\twebix.toPDF(this.getBody(), {display:\"image\"});\n\t\t\t\tbreak;\n\t\t\tcase \"png\":\n\t\t\t\twebix.toPNG(this.getBody());\n\t\t\t\tbreak;\n\t\t\tcase \"excel\":\n\t\t\t\twebix.toExcel(this.getBody(), {header: false});\n\t\t\t\tbreak;\n\t\t}\n\t},\n\t_toggleExcel:function(){\n\t\tconst view = this.getBody();\n\t\tif(view.data && view.data.pull)\n\t\t\tthis._menu.showMenuItem(\"excel\");\n\t\telse\n\t\t\tthis._menu.hideMenuItem(\"excel\");\n\t},\n\t_removeView:function(view){\n\t\tif(view && view.getTopParentView() == this)\n\t\t\tthis.callEvent(\"onViewRemove\", []);\n\t}\n}, webix.ui.window);","webix.protoUI({\n\tname: \"ssheet-series\",\n\t$init: function(config){\n\t\tthis.hidden = {};\n\t\tconfig.rows = [\n\t\t\t{\n\t\t\t\tview: \"scrollview\",\n\t\t\t\tborderless: true,\n\t\t\t\tbody: {\n\t\t\t\t\tview: \"accordion\",\n\t\t\t\t\tcss: \"webix_ssheet_accordion\",\n\t\t\t\t\tmargin: webix.skin.$active.layoutMargin.form,\n\t\t\t\t\tmulti: true,\n\t\t\t\t\ttype: \"clean\",\n\t\t\t\t\trows: [\n\t\t\t\t\t\tthis.getSectionConfig()\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\ton:{\n\t\t\t\t\tonAfterScroll:function(){\n\t\t\t\t\t\t//close possibly open selector popups\n\t\t\t\t\t\twebix.callEvent(\"onClick\", []);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{ view:\"button\", label:webix.i18n.spreadsheet.labels[\"add-line\"], click:()=>{\n\t\t\t\tthis.addSection();\n\t\t\t}}\n\t\t];\n\t},\n\tgetSectionConfig: function(i){\n\t\tconst view = this;\n\t\tconst labels = webix.i18n.spreadsheet.labels;\n\t\tconst trashIcon = \"<span class='webix_icon webix_ssheet_series_icon wxi-trash'></span>\";\n\t\tconst padding = webix.skin.$active.dataPadding-2;\n\n\t\treturn {\n\t\t\tview:\"accordionitem\",\n\t\t\theader:`${labels[\"chart-item\"]} ${i ? i+1 : 1} ${trashIcon}`,\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\tpadding,\n\t\t\t\telementsConfig:{\n\t\t\t\t\tlabelWidth:180\n\t\t\t\t},\n\t\t\t\ton:{\n\t\t\t\t\tonChange: () => {\n\t\t\t\t\t\tthis.callEvent(\"onChange\", []);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\telements:[\n\t\t\t\t\t{ view:\"text\", label:labels[\"chart-range\"], name:\"range\", range:true, on:{\n\t\t\t\t\t\tonChange: function(val, oldVal) {\n\t\t\t\t\t\t\tconst upper = val.toUpperCase();\n\t\t\t\t\t\t\tif(val != upper){\n\t\t\t\t\t\t\t\tthis.blockEvent();\n\t\t\t\t\t\t\t\tthis.setValue(upper);\n\t\t\t\t\t\t\t\tthis.unblockEvent();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tview.callEvent(\"onRangeChange\", [upper, oldVal]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}},\n\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"chart-series-color\"], name:\"color\", hidden: this.hidden.color},\n\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-tooltip\"], name:\"tooltip\" },\n\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-label\"], name:\"label\", hidden: this.hidden.label },\n\t\t\t\t\t{ view:\"richselect\", label:labels[\"chart-markers\"], value:\"square\", name:\"marker\", hidden: this.hidden.marker,\n\t\t\t\t\t\tsuggest:{\n\t\t\t\t\t\t\tview: \"ssheet-form-suggest\",\n\t\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t\t{id:\"square\", value:labels[\"chart-markers-square\"]},\n\t\t\t\t\t\t\t\t{id:\"triangle\", value:labels[\"chart-markers-triangle\"]},\n\t\t\t\t\t\t\t\t{id:\"diamond\", value:labels[\"chart-markers-diamond\"]},\n\t\t\t\t\t\t\t\t{id:\"round\", value:labels[\"chart-markers-round\"]}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\tonClick:{\n\t\t\t\t\"wxi-trash\": function(){\n\t\t\t\t\tconst layout = this.getParentView();\n\t\t\t\t\tlayout.removeView(this);\n\n\t\t\t\t\tconst childs = layout.getChildViews();\n\n\t\t\t\t\tfor (let i = 0; i < childs.length; i++) {\n\t\t\t\t\t\tchilds[i].define({header:`${labels[\"chart-item\"]} ${i+1} ${trashIcon}`});\n\t\t\t\t\t\tchilds[i].refresh();\n\t\t\t\t\t}\n\n\t\t\t\t\tview.callEvent(\"onChange\", []);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t},\n\taddSection: function(){\n\t\tconst layout = this.getLayout();\n\t\tconst lastIndex = layout.getChildViews().length;\n\t\tconst layoutId = layout.addView(this.getSectionConfig(lastIndex));\n\n\t\twebix.$$(layoutId).queryView({name: \"range\"}).focus();\n\t},\n\tsetValue: function(value){\n\t\tvalue = value || [];\n\n\t\tconst layout = this.getLayout();\n\t\tconst childs = layout.getChildViews();\n\t\tconst count = childs.length;\n\n\t\tif(count > value.length)\n\t\t\tfor(let i = count; i > value.length; i--)\n\t\t\t\tthis.getLayout().removeView(childs[i-1]);\n\t\telse if(value.length > count)\n\t\t\tfor(let i = value.length; i > count; i--)\n\t\t\t\tthis.addSection();\n\n\t\tfor(let i = 0; i < childs.length; i++){\n\t\t\tconst form = childs[i].getChildViews()[0];\n\t\t\tconst range = form.queryView({name: \"range\"});\n\n\t\t\t//block range events to ignore onRangeChange\n\t\t\trange.blockEvent();\n\t\t\tform.setValues(value[i]);\n\t\t\trange.unblockEvent();\n\t\t}\n\t},\n\tsetSubValue: function(sub, value){\n\t\tsub.blockEvent();\n\t\tsub.setValue(value);\n\t\tsub.unblockEvent();\n\t},\n\tgetLayout(){\n\t\treturn this.queryView(\"scrollview\").getBody();\n\t},\n\thideSubviews(name, show){\n\t\tthis.hidden[name] = !show;\n\n\t\tthis.queryView({ name }, \"all\").forEach(view => {\n\t\t\tif(show)\n\t\t\t\tview.show();\n\t\t\telse\n\t\t\t\tview.hide();\n\t\t});\n\t},\n\tgetValue: function(){\n\t\tconst value = [];\n\n\t\tconst layout = this.getLayout();\n\t\tlayout.getChildViews().forEach(child => {\n\t\t\tvalue.push(child.getChildViews()[0].getValues());\n\t\t});\n\t\treturn value;\n\t}\n}, webix.ui.layout);","webix.protoUI({\n\tname: \"ssheet-toolbar-scrollview\",\n\t$getSize: function(){\n\t\tconst size = webix.ui.scrollview.prototype.$getSize.apply(this, arguments);\n\t\tconst bodySize = this.getBody().$getSize(0, 0);\n\n\t\tlet scroll = 0;\n\t\tif(this.config.scroll)\n\t\t\tscroll = webix.env.scrollSize;\n\t\telse\n\t\t\tthis.$view.style[\"overflow-x\"] = \"hidden\";\n\n\t\tsize[2] = size[3] = bodySize[2] + scroll;\n\n\t\treturn size;\n\t},\n\t$setSize: function(x,y){\n\t\tconst bodySize = this.getBody().$getSize(0, 0);\n\t\tconst oldScroll = this.config.scroll;\n\t\tconst scroll = x < bodySize[0] ? \"x\" : false;\n\n\t\tif(scroll != oldScroll){\n\t\t\tthis.define({scroll});\n\t\t\treturn webix.delay(()=>{\n\t\t\t\tthis.resize();\n\t\t\t});\n\t\t}\n\n\t\twebix.ui.scrollview.prototype.$setSize.apply(this, [x, y]);\n\t}\n},webix.ui.scrollview);","import {getJsDateFromExcel, getExcelDateFromJs} from \"../mathematics/methods\";\nimport {getDateEditFormat} from \"../operations/formats\";\n\nwebix.editors.excel_date = webix.extend({\n\tcreatePopup:function(){\n\t\tconst editor = webix.editors.excel_date;\n\n\t\tif(!editor.popup){\n\t\t\tconst popup = webix.ui({\n\t\t\t\tview:\"popup\",\n\t\t\t\tbody:{ \n\t\t\t\t\tview:\"calendar\",\n\t\t\t\t\ticons:true,\n\t\t\t\t\ttimepicker:true,\n\t\t\t\t\ton:{\n\t\t\t\t\t\tonChange: function(val){\n\t\t\t\t\t\t\tval = val[0];\n\t\t\t\t\t\t\tthis.getParentView()._last_input_target.value = val ? getExcelDateFromJs(val) : \"\";\n\t\t\t\t\t\t\twebix.callEvent(\"onEditEnd\", []);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ton:{\n\t\t\t\t\tonEnter: function(){\n\t\t\t\t\t\twebix.callEvent(\"onEditEnd\", []);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\teditor.popup = popup.config.id;\n\t\t}\n\n\t\treturn editor.popup;\n\t},\n\trender:function(){\n\t\tconst node = webix.html.create(\"div\", {\n\t\t\t\"class\":\"webix_dt_editor\"\n\t\t}, \"<input type='text'>\");\n\n\t\tthis.popup = this.createPopup();\n\n\t\twebix.event(node.firstChild, \"click\", ()=> this.getPopup().show(node));\n\n\t\treturn node;\n\t},\n\tgetPopup(){\n\t\treturn webix.$$(this.popup);\n\t},\n\tshowPopup:function(){\n\t\tconst input = this.getInputNode();\n\t\tconst popup = this.getPopup();\n\n\t\tpopup._last_input_target = input;\n\t\tpopup.show(input);\n\n\t\tinput.setAttribute(\"aria-expanded\", \"true\");\n\t},\n\tupdateCalendar(value){\n\t\tconst calendar = this.getPopup().getBody();\n\n\t\tcalendar.blockEvent();\n\t\tcalendar.setValue(value);\n\t\tcalendar.unblockEvent();\n\t},\n\tafterRender:function(){\n\t\tthis.showPopup();\n\t},\n\tsetValue:function(value){\n\t\tconst noDate = (value === \"\" || isNaN(value*1));\n\t\tvalue = noDate ? new Date() : getJsDateFromExcel(value);\n\t\tthis.updateCalendar(value);\n\n\t\tconst view = webix.$$(this.config.node).queryView(a => a.name === \"spreadsheet\", \"parent\");\n\t\tconst format = getDateEditFormat(view, this.config.row.id, this.config.id);\n\t\tthis.getInputNode().value = format(value);\n\t},\n\tgetValue:function(){\n\t\tconst value = this.getInputNode().value;\n\t\tthis.getPopup().hide();\n\t\treturn value;\n\t}\n}, webix.editors.text);","webix.editors.ss_richselect = webix.extend({\n\tgetFormat:function(value){\n\t\tconst list = this.getInputNode();\n\t\tlet item;\n\n\t\tif (value && list.exists(value))\n\t\t\titem = list.getItem(value);\n\t\treturn item && item.format;\n\t},\n\tpopupInit:function(popup){\n\t\twebix.editors.richselect.popupInit.apply(this, arguments);\n\n\t\tpopup.getList().define(\"template\", function(obj){\n\t\t\treturn obj.$value || obj.value;\n\t\t});\n\t}\n}, webix.editors.richselect);","import {changeAreaDecimals} from \"../operations/formats\";\n\nexport const actions = {\n\tspan: view => {\n\t\tconst range = view.$$(\"cells\").getSelectArea();\n\t\tif(range){\n\t\t\tif(isMerged(view,range))\n\t\t\t\tview.splitCell();\n\t\t\telse {\n\t\t\t\tconst values = [];\n\t\t\t\tfor(let r = range.start.row; r<=range.end.row; r++){\n\t\t\t\t\tfor(let c = range.start.column; c<=range.end.column; c++){\n\t\t\t\t\t\tlet value = view.getCellValue(r,c);\n\t\t\t\t\t\tif(value) values.push(value);\n\t\t\t\t\t\tif(values.length >1) break;\n\t\t\t\t\t}\n\t\t\t\t\tif(values.length >1) break;\n\t\t\t\t}\n\t\t\t\tif(values.length>1){\n\t\t\t\t\tview.confirm({\n\t\t\t\t\t\ttext:webix.i18n.spreadsheet.labels[\"merge-cell-confirm\"]\n\t\t\t\t\t}).then(()=> view.combineCells() );\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tview.combineCells();\n\t\t\t}\n\t\t}\n\t},\n\tundo: view => view.undo(),\n\tredo: view => view.redo(),\n\t\"hide-gridlines\": view => view.hideGridlines(\"toggle\"),\n\t\"hide-headers\": view => view.hideHeaders(\"toggle\"),\n\t\"freeze-columns\": view => view.freezeColumns(),\n\t\"freeze-rows\": view => view.freezeRows(),\n\t\"increase-decimals\": view => changeAreaDecimals(view, 1),\n\t\"decrease-decimals\": view => changeAreaDecimals(view, -1),\n\t\"increase-indent\": view => view.callEvent(\"onStyleSet\", [\"indent\", 1]),\n\t\"decrease-indent\": view => view.callEvent(\"onStyleSet\", [\"indent\", -1]),\n\t\"show-formulas\": view => view.showFormulas(\"toggle\"),\n\t\"print-borders\": view => view.showPrintBorders(\"toggle\"),\n};\n\nfunction isMerged(view,range){\n\tvar i, j,\n\t\tc0 = range.start,\n\t\tc1 = range.end;\n\n\tfor( i = c0.row*1; i <= c1.row*1; i++ ){\n\t\tfor( j = c0.column*1; j <= c1.column*1; j++ ){\n\t\t\tif(view.$$(\"cells\").getSpan(i, j))\n\t\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n","import {toolbarSizes, defaultStyles} from \"./defaults\";\nimport {formatHelpers} from \"../operations/formats\";\n\n// options for 'font-family' select\nexport const fontFamily = [\n\t{id: \"Arial\", value: \"Arial\"},\n\t{id: \"'Roboto', sans-serif\", value: \"Roboto\"},\n\t{id: \"'PT Sans', Tahoma\", value: \"PT Sans\"},\n\t{id: \"'Open Sans', sans-serif\", value:\"Open Sans\"},\n\t{id: \"Tahoma\", value: \"Tahoma\"},\n\t{id: \"Verdana\", value: \"Verdana\"},\n\t{id: \"Calibri, Tahoma\", value:\"Calibri\"}\n];\n\n// options for 'format' select\nfunction getCellFormats(){\n\tconst locale = webix.i18n.spreadsheet.labels;\n\treturn [\n\t\t{id: \"common\", value: locale.common },\n\t\t{id: \"price\", value: locale.currency, example: \"98.20\"},\n\t\t{id: \"int\", value: locale.number, example: \"2120.02\"},\n\t\t{id: \"percent\", value: locale.percent, example:\"0.5\"},\n\t\t{id: \"date\", value: locale.date, example:\"45000\"},\n\t\t{id: \"string\", value: locale.string, example:\"012345\"},\n\t\t{id: \"custom\", value: locale[\"custom-format\"]},\n\t];\n}\n\nexport function getColumnOperation(view){\n\tconst locale = webix.i18n.spreadsheet.menus;\n\tlet colOperations = [\n\t\t{ id:\"add\",    group:\"column\", value:locale[\"insert-column\"]},\n\t\t{ id:\"del\",    group:\"column\", value:locale[\"delete-column\"]},\n\t\t{ id:\"show\",   group:\"column\", value:locale[\"show-column\"], neighbors:true},\n\t\t{ id:\"hide\",   group:\"column\", value:locale[\"hide-column\"]}\n\t];\n\tif(view.config.resizeCell != false)\n\t\tcolOperations.push({ id:\"resize\", group:\"column\", value:locale[\"resize-column\"]});\n\treturn colOperations;\n}\n\nexport function getRowOperation(view){\n\tconst locale = webix.i18n.spreadsheet.menus;\n\tlet rowOperations = [\n\t\t{ id:\"add\",    group:\"row\", value:locale[\"insert-row\"]},\n\t\t{ id:\"del\",    group:\"row\", value:locale[\"delete-row\"]},\n\t\t{ id:\"show\",   group:\"row\", value:locale[\"show-row\"], neighbors:true},\n\t\t{ id:\"hide\",   group:\"row\", value:locale[\"hide-row\"]}\n\t];\n\tif(view.config.resizeCell != false)\n\t\trowOperations.push({ id:\"resize\", group:\"row\", value:locale[\"resize-row\"]});\n\treturn rowOperations;\n}\n\n// options for 'clear' select\nexport function getClearOperation(){\n\treturn [\n\t\t{id: \"clear-value\",               value: getLocaleClear(\"value\")},\n\t\t{id: \"clear-style\",               value: getLocaleClear(\"style\")},\n\t\t{id: \"clear-conditional-formats\", value: getLocaleClear(\"conditional-formats\")},\n\t\t{id: \"clear-dropdown-editors\",    value: getLocaleClear(\"dropdown-editors\")},\n\t\t{id: \"clear-comments\",            value: getLocaleClear(\"comments\")},\n\t\t{ $template: \"Separator\" },\n\t\t{id: \"clear-all\",                 value: getLocaleClear(\"all\")}\n\t];\n}\n\n// options for 'borders' select\nconst borders = [\n\t{id: \"no\", value: \"no\"},\n\t{id: \"left\", value: \"left\"},\n\t{id: \"top\", value: \"top\"},\n\t{id: \"right\", value: \"right\"},\n\t{id: \"bottom\", value: \"bottom\"},\n\t{id: \"all\", value: \"all\"},\n\t{id: \"outer\", value: \"outer\"},\n\t{id: \"top-bottom\", value: \"top-bottom\"}\n];\n\nfunction getLocaleClear(value){\n\tvar locale = webix.i18n.spreadsheet.menus;\n\treturn locale[\"clear\"] + \" \" + locale[\"clear-\"+value].toLowerCase();\n}\n\n// options for 'font-size' select\nfunction getFontSize(){\n\treturn [\n\t\t\"8\",\"9\",\"10\",\"11\",\"12\",\"14\",\"15\",\n\t\t\"16\",\"18\",\"20\",\"22\",\"24\",\"28\",\"36\"\n\t];\n}\n\nexport const styleFormats = {\n\t\"font-weight\": \"bold\",\n\t\"font-style\": \"italic\",\n\t\"underline\": \"underline\",\n\t\"strike\": \"strike\"\n};\n\nexport const ui = {\n\tbutton: function(config){\n\t\treturn {\n\t\t\tview: \"ssheet-toggle\", width: config.width||toolbarSizes.width, id: config.name, name: config.name,  label: config.label,\n\t\t\tcss: config.css||\"\", onValue: styleFormats[config.name], offValue: \"normal\",\n\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[config.name]||\"\"\n\t\t};\n\t},\n\tcolorButton: function(config){\n\t\treturn {\n\t\t\tview: \"ssheet-color\",  css: config.css,  name: config.name, width: config.width||toolbarSizes.width+24,\n\t\t\ttitle: \"<span class='webix_ssheet_button_icon webix_ssheet_color_button_icon webix_ssheet_icon ssi-\"+config.name+\"' ></span>\",\n\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[config.name]||\"\"\n\t\t};\n\t},\n\ttoggleButton: function(config){\n\t\treturn {\n\t\t\tview: \"ssheet-toggle-silent\", width: toolbarSizes.width, id: config.name, name: config.name,\n\t\t\tlabel: \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\"+(config.icon||config.name)+\"'></span>\",\n\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[config.name]||\"\"\n\t\t};\n\t},\n\ticonButton: function(config){\n\t\tvar btn = webix.copy(config);\n\t\twebix.extend(btn, {view: \"button\", width: toolbarSizes.width, id: config.name,\n\t\t\tlabel: \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\"+config.name+\"'></span>\",\n\t\t\tcss: \"\",\n\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[config.name]||webix.i18n.spreadsheet.menus[config.name]||\"\"\n\t\t});\n\t\tif(config.onValue){\n\t\t\twebix.extend(btn,{view: \"ssheet-toggle\", onValue: config.onValue, offValue: config.offValue},true);\n\t\t}\n\n\t\treturn btn;\n\t},\n\tsegmented: function(config){\n\t\treturn  {\n\t\t\tview: \"segmented\", name: config.name, css:config.css||\"\", width: config.width||toolbarSizes.width+76,  options:config.options\n\t\t};\n\t},\n\tselect: function(config){\n\t\twebix.extend(config,{\n\t\t\tview: \"richselect\",\n\t\t\tid: config.name,\n\t\t\tvalue: defaultStyles[config.name],\n\t\t\tsuggest: {\n\t\t\t\tcss: \"webix_ssheet_suggest\",\n\t\t\t\tpadding: 0,\n\t\t\t\tdata: config.options\n\t\t\t}\n\t\t});\n\n\t\tconfig.tooltip = webix.i18n.spreadsheet.tooltips[config.name]||\"\";\n\t\tif(config.popupWidth){\n\t\t\tconfig.suggest.fitMaster = false;\n\t\t\tconfig.suggest.width = config.popupWidth;\n\t\t}\n\t\tif(config.popupTemplate)\n\t\t\tconfig.suggest.body = {\n\t\t\t\ttemplate: config.popupTemplate\n\t\t\t};\n\t\tif(config.popupEvents){\n\t\t\tconfig.suggest.body = config.suggest.body || {};\n\t\t\tconfig.suggest.body.on = config.popupEvents;\n\t\t}\n\t\treturn config;\n\t},\n\tseparator: function(){\n\t\treturn {\n\t\t\tview: \"ssheet-separator\"\n\t\t};\n\t},\n\ttitle: function(config){\n\t\tvar title = config.title;\n\t\tif(title.indexOf(\"$\") === 0)\n\t\t\ttitle = \"\";\n\t\ttitle = webix.i18n.spreadsheet.labels[config.title]||title;\n\n\t\treturn {\n\t\t\ttemplate: title, view: \"ssheet-bar-title\", height: toolbarSizes.titleHeight\n\t\t};\n\t},\n\tborders: function(config){\n\t\treturn {view: \"ssheet-borders\", width:config.width||toolbarSizes.width+24, data: borders, id: config.name, name: config.name,\n\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[config.name] };\n\t},\n\talign: function(config){\n\t\treturn {view: \"ssheet-align\", value: defaultStyles[config.name], width:config.width||toolbarSizes.width+24, data: config.options,\n\t\t\tname: config.name, tooltip: webix.i18n.spreadsheet.tooltips[config.name] };\n\t},\n\tcondFormat: function(config){\n\t\treturn {\n\t\t\tview: \"ssheet-cond-format\",\n\t\t\twidth: 40,\n\t\t\tid: config.name,\n\t\t\tname: config.name\n\t\t};\n\t}\n};\n\nexport const buttonsMap = {\n\t\"font-family\": function(){\n\t\treturn  ui.select({name: \"font-family\", options:fontFamily, width: 100, view:\"combo\"});\n\t},\n\t\"font-size\": function(){\n\t\treturn  ui.select({name: \"font-size\", options:getFontSize(), width: 70, view:\"text\", icon: \"wxi-menu-down\", css: \"webix_ssheet_text\",\n\t\t\ton: {\n\t\t\t\tonItemClick: function(){\n\t\t\t\t\tconst suggest = webix.$$(this.config.suggest);\n\t\t\t\t\tif(!suggest.isVisible())\n\t\t\t\t\t\tsuggest.show(this.getInputNode());\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\t\"font-weight\": function(){\n\t\treturn ui.button({name:\"font-weight\",label: \"B\", css: \"webix_ssheet_bold\"});\n\t},\n\t\"font-style\": function(){\n\t\treturn ui.button({name: \"font-style\",label: \"I\",css:\"webix_ssheet_italic\"});\n\t},\n\t\"underline\": function(){\n\t\treturn ui.button({name: \"underline\",label: \"U\",css: \"webix_ssheet_underline\"});\n\t},\n\t\"strike\": function(){\n\t\treturn ui.button({name: \"strike\",label: \"S\",css: \"webix_ssheet_strike\"});\n\t},\n\t\"color\": function(){\n\t\treturn ui.colorButton({name: \"color\",icon:\"font\",css:\"webix_ssheet_color\"});\n\t},\n\t\"background\": function(){\n\t\treturn  ui.colorButton({name: \"background\",icon:\"paint-brush\",css:\"webix_ssheet_background\", width: 70});\n\t},\n\t\"borders\": function(){\n\t\treturn ui.borders({ name: \"borders\" });\n\t},\n\t\"text-align\": function(){\n\t\tvar locale = webix.i18n.spreadsheet.tooltips;\n\t\treturn ui.align({name: \"text-align\", css: \"webix_ssheet_align\", options:[\n\t\t\t{id: \"left\", css: \"webix_ssheet_icon ssi-left\", tooltip: locale[\"align-left\"]},\n\t\t\t{id: \"center\", css: \"webix_ssheet_icon ssi-center\", tooltip: locale[\"align-center\"]},\n\t\t\t{id: \"right\", css: \"webix_ssheet_icon ssi-right\", tooltip: locale[\"align-right\"]}\n\t\t]});\n\t},\n\t\"vertical-align\": function(){\n\t\tvar locale = webix.i18n.spreadsheet.tooltips;\n\t\treturn  ui.align({name: \"vertical-align\", css: \"webix_ssheet_align\", options:[\n\t\t\t{id: \"top\", css: \"webix_ssheet_icon ssi-top\", tooltip: locale[\"align-top\"]},\n\t\t\t{id: \"middle\", css: \"webix_ssheet_icon ssi-middle\", tooltip: locale[\"align-middle\"]},\n\t\t\t{id: \"bottom\", css: \"webix_ssheet_icon ssi-bottom\", tooltip: locale[\"align-bottom\"]}\n\t\t]});\n\t},\n\t\"wrap\": function(){\n\t\treturn ui.iconButton({name: \"wrap\", onValue:\"wrap\", offValue:\"nowrap\"});\n\t},\n\t\"format\": function(){\n\t\treturn ui.select({\n\t\t\tname: \"format\", width: 106, options:getCellFormats(), popupWidth: 180,\n\t\t\tpopupTemplate: function(obj){\n\t\t\t\t//make it look like an actual cell\n\t\t\t\tvar format =  formatHelpers[obj.id] ? formatHelpers[obj.id].getFormat : \"\";\n\t\t\t\tvar cell = {css:\"\"};\n\t\t\t\tvar example = format && obj.example?format(obj.example, cell):\"\";\n\t\t\t\treturn obj.value + (format?\"<span class='webix_ssheet_right\"+(cell.css?\" \"+cell.css:\"\")+\"'>\"+example+\"</span>\":\"\");\n\t\t\t},\n\t\t\tpopupEvents:{\n\t\t\t\tonItemClick: function(id){\n\t\t\t\t\tif(id == \"custom\")\n\t\t\t\t\t\tthis.getTopParentView().callEvent(\"onCommand\", [{id:id}]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\t\"column\": function(view){\n\t\treturn {\n\t\t\tname: \"column\",\n\t\t\tview: \"ssheet-button\", icon: \"column\",\n\t\t\tarrow: true, area: true, width: 58,\n\t\t\toptions:getColumnOperation(view)\n\t\t};\n\t},\n\t\"row\": function(view){\n\t\treturn {\n\t\t\tname: \"row\", view: \"ssheet-button\", icon: \"row\",\n\t\t\tarrow: true, area: true, width: 58,\n\t\t\toptions:getRowOperation(view)\n\t\t};\n\t},\n\t\"clear\": function(){\n\t\treturn {\n\t\t\tname: \"clear\", view: \"ssheet-button\", icon: \"clear-styles\",\n\t\t\tarrow: true, area: true, width: 58,\n\t\t\toptions:getClearOperation()\n\t\t};\n\t},\n\t\"image\":function(){\n\t\treturn {\n\t\t\tname:\"image\", view:\"ssheet-button\", icon:\"add-image\",\n\t\t\tarrow:true, options:[\n\t\t\t\t{id:\"add-image-cell\", value: webix.i18n.spreadsheet.labels[\"add-image-cell\"]},\n\t\t\t\t{id:\"add-image-top\", value: webix.i18n.spreadsheet.labels[\"add-image-top\"]}\n\t\t\t]\n\t\t};\n\t},\n\t\"graph\":function(){\n\t\treturn {\n\t\t\tname:\"graph\", view:\"ssheet-button\", icon:\"add-sparkline\",\n\t\t\tarrow:true, options:[\n\t\t\t\t{id:\"add-sparkline\", value:webix.i18n.spreadsheet.labels[\"add-sparkline\"]},\n\t\t\t\t{id:\"add-chart\", value: webix.i18n.spreadsheet.labels[\"add-chart\"]}\n\t\t\t]\n\t\t};\n\t},\n\t\"comment\": function(){\n\t\treturn {\n\t\t\tname: \"comment\",\n\t\t\tview: \"ssheet-button\", icon: \"comments\",\n\t\t\tarrow: true, area: true, width: 55\n\t\t};\n\t},\n\t\"create-filter\": function(){\n\t\treturn ui.toggleButton({name: \"create-filter\"});\n\t},\n\t\"hide-gridlines\": function(){\n\t\treturn ui.toggleButton({name: \"hide-gridlines\"});\n\t},\n\t\"hide-headers\": function(){\n\t\treturn ui.toggleButton({name: \"hide-headers\"});\n\t},\n\t\"show-formulas\": function(){\n\t\treturn ui.toggleButton({name: \"show-formulas\"});\n\t},\n\t\"print-borders\": function(){\n\t\treturn ui.toggleButton({name: \"print-borders\", icon:\"borders-no\"});\n\t}\n};","import {toolbarSizes} from \"./defaults\";\n\nfunction getText(text){\n\tvar locale = webix.i18n.spreadsheet;\n\treturn locale.menus[text] || locale.labels[text] || locale.tooltips[text] || text;\n}\nfunction calcButtons(){\n\tvar i, name, width,\n\t\tgroups = {\n\t\t\t\"undo\":[\"undo\",\"redo\"],\n\t\t\t\"insert\":[\"add-sparkline\",\"add-image\",\"add-comment\"]\n\t\t},\n\t\tresult = {};\n\n\tfor( name in groups){\n\t\tresult[name] = 0;\n\t\tfor(i=0; i < groups[name].length; i++){\n\t\t\twidth = webix.html.getTextSize(getText(groups[name][i]), \"webix_ssheet_button_measure\").width + 7;\n\t\t\tresult[name] = Math.max(width,result[name]);\n\t\t}\n\t}\n\treturn result;\n}\nexport function getAllElements(readonly){\n\tconst sizes = calcButtons();\n\tconst titleHeight = toolbarSizes.titleHeight;\n\n\tif(readonly)\n\t\treturn [\n\t\t\t{\n\t\t\t\tpadding: 3,\n\t\t\t\tmargin: 0,\n\t\t\t\trows: [\n\t\t\t\t\t{\n\t\t\t\t\t\tmargin: 2,\n\t\t\t\t\t\tcols:[\n\t\t\t\t\t\t\t{$button: \"excel-export\"},\n\t\t\t\t\t\t\t{$button: \"print\"},\n\t\t\t\t\t\t\t{$button: \"print-borders\"}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{template: getText(\"file\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{view: \"ssheet-separator\"},\n\t\t\t{}\n\t\t];\n\n\treturn [\n\t\t{\n\t\t\tpadding: 3,\n\t\t\tmargin: 0,\n\t\t\trows:[\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"sheet\", view: \"ssheet-button-icon-top\", label: getText(\"sheet\"), arrow: true,\n\t\t\t\t\t\t\toptions:[\n\t\t\t\t\t\t\t\t{id: \"new-sheet\"},\n\t\t\t\t\t\t\t\t{id: \"copy-sheet\"},\n\t\t\t\t\t\t\t\t{id: \"remove-sheet\"},\n\t\t\t\t\t\t\t\t{id: \"hide-sheet\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t{$button: \"excel-import\"},\n\t\t\t\t\t\t\t\t{$button: \"excel-export\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t{$button: \"print\"},\n\t\t\t\t\t\t\t\t{$button: \"print-borders\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{template: getText(\"file\"), view: \"ssheet-bar-title\", height: titleHeight, width: 85}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{$button: \"undo\", view: \"ssheet-button\", label: getText(\"undo\"), width: sizes.undo },\n\t\t\t\t{$button: \"redo\", view: \"ssheet-button\", label: getText(\"redo\"), width: sizes.undo},\n\t\t\t\t{template: getText(\"undo-redo\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmargin: 2,\n\t\t\t\t\t\t\tcols:[\n\t\t\t\t\t\t\t\t{$button: \"font-family\", width: (webix.skin.$active.inputHeight+2)*4+6},\n\t\t\t\t\t\t\t\t{$button: \"font-size\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{$button: \"borders\"}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmargin: 2,\n\t\t\t\t\t\t\tcols:[\n\t\t\t\t\t\t\t\t{$button: \"font-weight\"},\n\t\t\t\t\t\t\t\t{$button: \"font-style\"},\n\t\t\t\t\t\t\t\t{$button: \"underline\"},\n\t\t\t\t\t\t\t\t{$button: \"strike\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\t{$button: \"background\"},\n\t\t\t\t\t\t{$button: \"color\"}\n\t\t\t\t\t]\n\n\t\t\t\t},\n\t\t\t\t{template: getText(\"font\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{$button: \"text-align\"},\n\t\t\t\t\t\t{$button: \"span\"},\n\t\t\t\t\t\t{$button: \"increase-indent\"}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{$button: \"vertical-align\"},\n\t\t\t\t\t\t{$button: \"wrap\"},\n\t\t\t\t\t\t{$button: \"decrease-indent\"}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{template: getText(\"align\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{$button: \"format\"},\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{$button: \"increase-decimals\"},\n\t\t\t\t\t\t{$button: \"decrease-decimals\"}\n\t\t\t\t\t]\n\t\t\t\t},\n\n\t\t\t\t{template: getText(\"number\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{cols:[\n\t\t\t\t\t{ $button: \"sort-asc\"},\n\t\t\t\t\t{ $button: \"create-filter\"},\n\t\t\t\t\t{ $button: \"conditional-format\"},\n\t\t\t\t\t{ $button: \"add-link\"},\n\t\t\t\t\t{ $button: \"clear\"}\n\t\t\t\t]},\n\t\t\t\t{cols:[\n\t\t\t\t\t{ $button: \"sort-desc\"},\n\t\t\t\t\t{ $button: \"add-range\"},\n\t\t\t\t\t{ $button: \"lock-cell\"},\n\t\t\t\t\t{ $button: \"add-dropdown\"}\n\t\t\t\t]},\n\t\t\t\t{template: getText(\"edit\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{$button: \"image\", view: \"ssheet-button\", label: getText(\"image\"), width:sizes.insert},\n\t\t\t\t\t\t{$button: \"add-comment\", view: \"ssheet-button\", label: getText(\"comment\"), width:sizes.insert},\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{$button: \"graph\", view: \"ssheet-button\", label: getText(\"graph\"), width:sizes.insert},\n\t\t\t\t{template: getText(\"insert\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{rows:[\n\t\t\t\t\t\t\t{$button:\"row\"},\n\t\t\t\t\t\t\t{$button:\"column\"}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t{$button:\"hide-gridlines\"},\n\t\t\t\t\t\t\t\t{$button:\"hide-headers\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t{$button:\"freeze-rows\"},\n\t\t\t\t\t\t\t\t{$button:\"freeze-columns\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t{$button:\"show-formulas\"},\n\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{template: getText(\"view\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{}\n\t];\n}","import {actions} from \"./toolbar/actions\";\nimport {defaultStyles} from \"./toolbar/defaults\";\nimport {toolbarButtons, getButtons} from \"./toolbar/helpers\";\nimport * as elm from \"./toolbar/all_elements\";\nimport {isCustom} from \"./operations/formats\";\nimport {getStyle, getFormat} from \"./operations/styles\";\n\nconst buttons = {\n\t\"undo-redo\": [\"undo\",\"redo\"],\n\t\"font\": [\"font-family\",\"font-size\",\"font-weight\",\"font-style\",\"underline\",\"strike\",\"color\",\"background\",\"borders\"],\n\t\"align\": [\"text-align\",\"vertical-align\",\"wrap\",\"span\",\"increase-indent\",\"decrease-indent\"],\n\t\"format\": [\"format\"]\n};\n\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\tview.attachEvent(\"onCommand\", (action) => {\n\t\tif (action.id == \"toolbar-update\"){\n\t\t\tif(action.name)\n\t\t\t\tupdateValue(view, action.name, action.value);\n\t\t\telse\n\t\t\t\tsetValues(view, view.getSelectedId(true));\n\t\t}\n\t});\n\n\tlet elements = [];\n\n\tif(view.config.toolbar){\n\t\tlet allElements =  view.config.toolbar;\n\t\tif(allElements == \"full\"){\n\t\t\tallElements = elm.getAllElements(view.config.readonly);\n\t\t\tif(webix.isUndefined(view.config.bottombar))\n\t\t\t\tview.config.bottombar = true;\n\t\t}\n\t\telements =   toolbarButtons(view, allElements);\n\t}\n\telse\n\t\telements =   getButtons(view, view.config.buttons || buttons);\n\n\tconst bar = {\n\t\tview: webix.env.$customScroll ? \"scrollview\" : \"ssheet-toolbar-scrollview\",\n\t\tscroll: \"x\",\n\t\tbody: {\n\t\t\tview:\"toolbar\",\n\t\t\tcss: \"webix_ssheet_toolbar webix_layout_toolbar\",\n\t\t\tid:\"bar\",\n\t\t\tpadding:0,\n\t\t\telements,\n\t\t\ton: {\n\t\t\t\tonChange: function (value, old, config){\n\t\t\t\t\tif(config == \"user\"){\n\t\t\t\t\t\tconst source = this.$eventSource;\n\t\t\t\t\t\tconst name = source.config.name;\n\t\t\t\t\t\tif(name == \"format\" && value == \"common\")\n\t\t\t\t\t\t\tvalue = \"\";\n\n\t\t\t\t\t\tconst size = name == \"font-size\";\n\t\t\t\t\t\tif((size || name == \"font-family\") && (!value || (size && isNaN(value))))\n\t\t\t\t\t\t\treturn source.setValue(old);\n\t\t\t\t\t\telse if(size){\n\t\t\t\t\t\t\tconst maxSize = Math.floor(400 / 0.75); // 400 pt - max excel font size; divide 0.75 - pt to px conversion\n\t\t\t\t\t\t\tconst limited = Math.max(1, Math.min(maxSize, value));\n\t\t\t\t\t\t\tif (limited != value){\n\t\t\t\t\t\t\t\tvalue = limited;\n\t\t\t\t\t\t\t\tsource.setValue(value);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tvalue += \"px\";\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\tif(!(name == \"format\" && value == \"custom\"))\n\t\t\t\t\t\t\tview.callEvent(\"onStyleSet\", [name, value]);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonItemClick: function (id){\n\t\t\t\t\tvar viewId = view.innerId(id);\n\t\t\t\t\tif (actions[viewId])\n\t\t\t\t\t\tactions[viewId].call(this, view);\n\t\t\t\t\telse\n\t\t\t\t\t\tview.callEvent(\"onCommand\", [{ id: viewId }]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tview.callEvent(\"onViewInit\", [\"toolbar\", bar]);\n\treturn bar;\n\n}\n\nfunction ready(view){\n\tview.attachEvent(\"onAfterSelect\", (selected) => setValues(view, selected));\n}\n\nfunction setValues(view, selected) {\n\tconst barStyles = getBarStyles(view, selected);\n\tview.$$(\"bar\").setValues(barStyles);\n}\n\nfunction updateValue(view, name, value){\n\tconst element = view.$$(\"bar\").elements[name];\n\n\tif (element)\n\t\telement.setValue(value);\n}\n\nfunction getBarStyles(view, selected){\n\tconst dropdowns = [\n\t\t\"font-family\",\n\t\t\"font-size\",\n\t\t\"text-align\",\n\t\t\"vertical-align\",\n\t\t\"format\",\n\t\t\"background\",\n\t\t\"color\"\n\t];\n\n\tconst cell = selected[0];\n\tconst barStyles = getCellStyles(view, cell);\n\n\tfor(let i = 1; i < selected.length; i++){\n\t\tconst cellStyle = getCellStyles(view, selected[i]);\n\n\t\tfor(let k = dropdowns.length-1; k >= 0; k--){\n\t\t\tconst property = dropdowns[k];\n\t\t\tif(barStyles[property] != cellStyle[property]){\n\t\t\t\tdelete barStyles[property];\n\t\t\t\tdropdowns.splice(k, 1);\n\t\t\t}\n\t\t}\n\n\t\tif(!dropdowns.length)\n\t\t\tbreak;\n\t}\n\n\treturn barStyles;\n}\n\nfunction getCellStyles(view, cell){\n\tconst span = view.$$(\"cells\").getSpan(cell.row, cell.column);\n\tif(span)\n\t\t[cell.row, cell.column] = span;\n\n\tconst obj = getStyle(view, cell);\n\tconst styles = obj ? webix.copy(obj.props) : {};\n\n\tfor (let i in defaultStyles)\n\t\tif(!styles[i])\n\t\t\tstyles[i] = defaultStyles[i];\n\n\tstyles[\"font-size\"] = styles[\"font-size\"].replace(\"px\", \"\");\n\n\tconst format = getFormat(view, cell.row, cell.column) || \"common\";\n\tstyles.format = isCustom(format) ? \"custom\" : format;\n\n\treturn styles;\n}\n","import {ui, buttonsMap} from \"./buttons\";\n\nexport function toolbarButtons(view,structure){\n\tvar checkButtons = function(cells){\n\t\tfor(var i =0; i < cells.length; i++){\n\t\t\tvar name = cells[i].$button;\n\t\t\tif (name){\n\t\t\t\tvar base = buttonsMap[name] ? buttonsMap[name](view) : ui.iconButton({name:name});\n\t\t\t\twebix.extend(cells[i], base);\n\t\t\t}\n\t\t\t\n\t\t\tif(cells[i].rows)\n\t\t\t\tcheckButtons(cells[i].rows);\n\t\t\tif(cells[i].cols)\n\t\t\t\tcheckButtons(cells[i].cols);\n\t\t}\n\t};\n\tcheckButtons(structure);\n\treturn structure;\n}\n\nexport function getButtons(view,structure){\n\tvar config = [];\n\tfor(var block in structure){\n\t\tconfig.push(elementsBlock(view, block, structure[block]));\n\t\tconfig.push(ui.separator());\n\t}\n\treturn config;\n}\n\nfunction blockColumns(view, buttons){\n\tvar cols = [];\n\tfor(var i =0; i < buttons.length; i++){\n\t\tlet name = buttons[i];\n\t\tif(typeof name == \"object\"){\n\t\t\tcols.push(name);\n\t\t}\n\t\telse {\n\t\t\tvar base = buttonsMap[name] ? buttonsMap[name](view) : ui.iconButton({name:name});\n\t\t\tcols.push(base);\n\t\t}\n\t}\n\treturn cols;\n}\n\n\nfunction elementsBlock(view, name, columns){\n\tvar block = {\n\t\trows:[\n\t\t\t{\n\t\t\t\tpadding:2,\n\t\t\t\tcols:[{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols: blockColumns(view, columns)\n\t\t\t\t}]\n\t\t\t},\n\t\t\tui.title({title:name})\n\t\t]\n\t};\n\treturn block;\n}","import {getTextSize} from \"./styles\";\n\nexport function selectRow(row, view, endRow){\n\tvar columns = view.$$(\"cells\").config.columns;\n\tvar firstColumn = columns[0].id == \"rowId\" ? 1 : 0;\n\n\tvar start = {\n\t\trow:row,\n\t\tcolumn:columns[firstColumn].id\n\t};\n\tvar last = {\n\t\trow: (endRow || row),\n\t\tcolumn: columns[columns.length-1].id\n\t};\n\n\tif(start.column && last.column)\n\t\t_selectRange(start, last, view);\n}\n\nexport function selectAll(view){\n\tvar order = view.$$(\"cells\").data.order;\n\tvar columns = view.$$(\"cells\").config.columns;\n\tvar firstColumn = columns[0].id == \"rowId\" ? 1 : 0;\n\n\tvar start = {\n\t\trow: order[0],\n\t\tcolumn: columns[firstColumn].id\n\t};\n\tvar last = {\n\t\trow: order[order.length-1],\n\t\tcolumn: columns[columns.length-1].id\n\t};\n\n\tif(start.column && last.column)\n\t\t_selectRange(start, last, view);\n}\n\nexport function selectColumn(column, view, endColumn){\n\tvar order = view.$$(\"cells\").data.order;\n\tvar startRow = order[0];\n\tvar lastRow = order[order.length-1];\n\n\tvar start = {row: startRow, column: column};\n\tvar last = {row: lastRow, column: (endColumn || column) };\n\n\t_selectRange(start, last, view);\n}\n\nexport function isColSelected(column, view){\n\tconst selectedArea = view.$$(\"cells\").getSelectArea();\n\tif (selectedArea){\n\t\tif (column >= selectedArea.start.column && column <= selectedArea.end.column)\n\t\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport function isCellSelected(row, column, view){\n\treturn isRowSelected(row, view) && isColSelected(column, view);\n}\n\nexport function isRowSelected(row, view){\n\tconst selectedArea = view.$$(\"cells\").getSelectArea();\n\tif (selectedArea){\n\t\tif (row >= selectedArea.start.row && row <= selectedArea.end.row)\n\t\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport function selectColumns(column, view) {\n\tconst selectedArea = view.$$(\"cells\").getSelectArea();\n\n\tif (!selectedArea)\n\t\tselectColumn(column, view);\n\telse {\n\t\tlet col1 = Math.min(selectedArea.start.column, selectedArea.end.column, column);\n\t\tlet col2 = Math.max(selectedArea.start.column, selectedArea.end.column, column);\n\t\tselectColumn(col1, view, col2);\n\t}\n}\n\nfunction _selectRange(a, b, view){\n\tview.$$(\"cells\").addSelectArea(a, b);\n}\n\n\nexport function adjustColumn(column, view) {\n\tlet width = 25;\n\tconst columnWidth = view._table.getColumnConfig(column).width;\n\n\tview._table.eachRow(function(row) {\n\t\tconst span = view._table.getSpan(row, column);\n\t\tif(span && span[2] > 1)\n\t\t\treturn;\n\n\t\tconst text = this.getText(row, column);\n\t\tconst style = view.getStyle(row, column);\n\t\tconst css = style ? style.id : \"\";\n\n\t\tif (text.replace(/<\\/?[^>]+(>|$)/g, \"\")) {\n\t\t\tconst size = getTextSize(view, text, css);\n\n\t\t\tif(view.getCellEditor(row, column))\n\t\t\t\tsize.width += 20;\n\t\t\tif(view.getCellFilter(row, column))\n\t\t\t\tsize.width += 20;\n\n\t\t\tif(style && style.props.wrap == \"wrap\" && size.width > columnWidth)\n\t\t\t\tsize.width = columnWidth;\n\t\t\tif (size.width > width)\n\t\t\t\twidth = size.width;\n\t\t}\n\t});\n\tview._table.setColumnWidth(column, width);\n}\n\nexport function adjustRow(row, view) {\n\tlet height = 25;\n\n\tview._table.eachColumn(function(column) {\n\t\tif(column != \"rowId\"){\n\t\t\tconst text = this.getText(row, column);\n\n\t\t\t// if there is text wrap in cell we need to know width to get correct height\n\t\t\tlet width = this.getColumnConfig(column).width;\n\t\t\tconst span = view._table.getSpan(row, column);\n\t\t\tif(span)\n\t\t\t\twidth = view._table.getSpanNode({row:span[0], column:span[1]}).offsetWidth;\n\n\t\t\tlet style = view.getStyle(row, column);\n\t\t\tlet css = style ? style.id : \"\";\n\n\t\t\tif (text.replace(/<\\/?[^>]+(>|$)/g, \"\")) {\n\t\t\t\tlet size = getTextSize(view, text, css, width);\n\t\t\t\tif (size.height > height) height = size.height;\n\t\t\t}\n\t\t}\n\t});\n\tview._table.setRowHeight(row, height);\n}\n\nexport function highlightColRow(start, end, view){\n\tif(!view._table.config.header) return;\n\n\tconst grid = view._table;\n\n\tconst css = \"webix_highlight\";\n\n\tlet sr = start.row, er = end.row, sc = start.column, ec = end.column;\n\n\tconst columns = grid.config.columns;\n\tconst firstColumn = columns[1].id;\n\n\tif(sc == \"rowId\"){\n\t\tif(sc == ec){\n\t\t\tstart.column = sc = firstColumn;\n\t\t\tend.column = ec = columns[ columns.length-1 ].id;\n\t\t}\n\t\telse\n\t\t\tstart.column = sc = firstColumn;\n\t}\n\telse if(ec == \"rowId\")\n\t\tend.column = ec = firstColumn;\n\n\tif(er<sr) [sr, er] = [er, sr];\n\tif(ec<sc) [sc, ec] = [ec, sc];\n\n\tgrid.eachRow(function(row){\n\t\tif(row < sr || row > er)\n\t\t\tgrid.removeCellCss(row, \"rowId\", css, true);\n\t\telse\n\t\t\tgrid.addCellCss(row, \"rowId\", css, true);\n\t});\n\twebix.delay(() => grid.refresh());\n\n\tgrid.eachColumn(function(col){\n\t\tconst node = grid.getHeaderNode(col);\n\t\tif(col == \"rowId\" || !node) return;\n\n\t\tif(col < sc || col > ec)\n\t\t\twebix.html.removeCss(node, css);\n\t\telse\n\t\t\twebix.html.addCss(node, css, true);\n\t});\n}","import group from \"./undo_group\";\n\nexport const lockCss = \"webix_lock\";\n\nexport function init(view){\n\tview._locks = {};\n\tview.attachEvent(\"onReset\", () => reset(view));\n\tview.attachEvent(\"onUndo\", (type, row, column, mode) => {\n\t\tif (type === \"lock\") lockCell(view, row, column, !!mode, true);\n\t});\n\n\tview.attachEvent(\"onCommand\", (cm) => {\n\t\tif (cm.id === \"lock-cell\")\n\t\t\tlock(view);\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n}\n\nfunction reset(view){\n\tview._locks = {};\n}\n\nexport function lockCell(view, row, column, mode, silent){\n\tvar table = view.$$(\"cells\");\n\tif (typeof row === \"object\" && typeof column === \"object\"){\n\t\tgroup.set(function() {\n\t\t\t_mapCellsCalls(row, column, function(row, column){\n\t\t\t\tlockCell(view, row, column, mode, true);\n\t\t\t});\n\t\t});\n\t} else {\n\t\tmode = ((mode === false) ? false : true);\n\t\tvar objrow = view._locks[row] = view._locks[row] || {};\n\t\tobjrow[column] = mode;\n\t\tif (mode)\n\t\t\ttable.addCellCss(row, column, lockCss, true);\n\t\telse\n\t\t\ttable.removeCellCss(row, column, lockCss, true);\n\n\t\tview.callEvent(\"onAction\", [\"lock\", { row, column, value: !mode, newValue: mode }]);\n\t}\n\n\tif (!silent)\n\t\ttable.refresh();\n}\n\nfunction _mapCellsCalls(start, end, handler,master){\n\tfor (let x = start.row; x<=end.row; x++)\n\t\tfor (let y = start.column; y<=end.column; y++)\n\t\t\thandler.call(master||this, x, y);\n}\n\nexport function isCellLocked(view, row, column){\n\treturn view._locks[row]?view._locks[row][column]:false;\n}\n\nexport function serialize(view,data){\n\tvar row, column,\n\t\tlocked = [];\n\tfor(row in view._locks){\n\t\tfor(column in view._locks[row])\n\t\t\tif(view._locks[row][column])\n\t\t\t\tlocked.push([row,column]);\n\t}\n\tdata.locked = locked;\n}\n\nexport function load(view,data){\n\tvar i,\n\t\tlocked = data.locked;\n\n\tif(locked)\n\t\tfor(i = 0; i < locked.length; i++)\n\t\t\tlockCell(view, locked[i][0],locked[i][1],true, true);\n}\n\nfunction lock(view){\n\tvar block = view.$$(\"cells\").getSelectArea();\n\tif (block){\n\t\tvar mode = view.isCellLocked(block.start.row, block.start.column);\n\t\tview.lockCell(block.start, block.end, !mode);\n\t}\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet locked = data.locked,\n\t\ti = locked.length;\n\n\tif(inc){\n\t\twhile(i--){\n\t\t\tlet [row,column] = locked[i];\n\t\t\tif(row && name == \"row\" && row>= start.row || column && name == \"column\" && column >= start.column){\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc)\t//delete lock mark if row was deleted\n\t\t\t\t\t\tlocked.splice(i,1);\n\t\t\t\t\telse\t\t\t\t\t\t//update mark position if upper row was deleted\n\t\t\t\t\t\tlocked[i][0] = row*1 + inc;\n\t\t\t\t} else if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\tlocked.splice(i, 1);\n\t\t\t\t\t} else \n\t\t\t\t\t\tlocked[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}","import {lockCss} from \"./lock_cell\";\nimport {save} from \"./save\";\nimport * as arr from \"../helpers/array\";\n\nexport function init(view){\n\tview.attachEvent(\"onStyleChange\", (row, column, style) => {\n\t\tvar span = getSpan(view, row, column);\n\t\tif (span){\n\t\t\tvar extraCss = getExtraCss(view, row, column);\n\t\t\tspan[3] = (style ? style.id : \"\") + (extraCss ? (\" \" + extraCss) : \"\");\n\t\t}\n\t});\n\n\tview.attachEvent(\"onDataParse\", (data) => {\n\t\tparse(view, data);\n\t});\n\n\tview.attachEvent(\"onDataSerialize\", (data) => {\n\t\tserialize(view, data);\n\t});\n\t\n\tview.attachEvent(\"onUndo\", (type, row, column, value, isUndo) => {\n\t\tif(type == \"span\" || type == \"split\"){\n\t\t\tif (type == \"span\") \n\t\t\t\tisUndo = !isUndo;\n\t\t\tundoSpan(view, row, column, value, isUndo);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAction\", (name, options) => {\n\t\tif(name == \"lock\")\n\t\t\tsetSpanCss(view, options.row, options.column, lockCss, options.newValue);\n\t\telse if(name == \"before-grid-change\")\n\t\t\tupdatePosition(view, options.name, options.inc, options.data, options.start);\n\t\telse if(name == \"check-borders\")\n\t\t\treturn checkSpanBorders(view, options.row, options.column, options.area, options.mode);\n\t});\n}\n\nfunction getSpan(view, row, column){\n\tvar item = view.$$(\"cells\").getSpan()[row];\n\tif (item)\n\t\treturn item[column];\n}\n\nfunction parse(view, data){\n\tif (data.spans)\n\t\tfor (var i = 0; i < data.spans.length; i++) {\n\t\t\tvar span = data.spans[i];\n\t\t\taddSpan( view,\n\t\t\t\t{ row: span[0], column: span[1] },\n\t\t\t\tspan[2]*1,\n\t\t\t\tspan[3]*1,\n\t\t\t\ttrue \n\t\t\t);\n\t\t}\n}\n\nexport function serialize(view, data){\n\tvar spans = [];\n\tvar pull = view.$$(\"cells\").getSpan();\n\tif (pull){\n\t\tfor (var rid in pull){\n\t\t\tvar row = pull[rid];\n\t\t\tfor (var cid in row){\n\t\t\t\tvar span = row[cid];\n\t\t\t\tspans.push([rid*1, cid*1, span[0], span[1]]);\n\t\t\t}\n\t\t}\n\n\t\tdata.spans = spans;\n\t}\n\treturn data;\n}\n\nexport function addSpan(view, cell, x, y, silent){\n\tif (x<2 && y<2) return;\n\n\tif(silent || view.callEvent(\"onBeforeSpan\", [cell.row, cell.column, [x, y]])){\n\t\tconst obj = view._mPage.getCell(cell.row-1, cell.column-1);\n\t\tlet css = ( obj && obj.style ) || \"\";\n\t\tvar extraCss = getExtraCss(view, cell.row, cell.column);\n\t\tif (extraCss)\n\t\t\tcss += \" \" + extraCss;\n\n\t\tsetSpanValue(view, cell, x, y);\n\t\tview.$$(\"cells\").addSpan(cell.row, cell.column, x, y, null, css);\n\t\tif (!silent){\n\t\t\tview.callEvent(\"onAfterSpan\", [cell.row, cell.column, [x, y]]);\n\t\t\tsave(view, \"spans\", {\n\t\t\t\trow:cell.row, column: cell.column,\n\t\t\t\tx:x, y:y\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport function removeSpan(view, cell){\n\tvar span = view.$$(\"cells\").getSpan(cell.row, cell.column);\n\tif(span && view.callEvent(\"onBeforeSplit\", [ cell.row, cell.column, [span[2], span[3]] ])){\n\t\tview.$$(\"cells\").removeSpan(cell.row, cell.column);\n\t\tview.callEvent(\"onAfterSplit\", [ cell.row, cell.column, [span[2], span[3]] ]);\n\t\tsave(view, \"spans\", {\n\t\t\trow:cell.row, column: cell.column,\n\t\t\tx:0, y:0\n\t\t});\n\t}\n}\n\nexport function getRange(sel){\n\tvar lx, ly, rx, ry;\n\trx = ry = 0;\n\tlx = ly = Infinity;\n\n\tfor (var i=0; i<sel.length; i++){\n\t\tvar cx = sel[i].column*1;\n\t\tvar cy = sel[i].row*1;\n\n\t\tlx = Math.min(cx, lx);\n\t\trx = Math.max(cx, rx);\n\t\tly = Math.min(cy, ly);\n\t\try = Math.max(cy, ry);\n\t}\n\n\treturn {\n\t\tcell:{ row:ly, column:lx },\n\t\tx: rx-lx+1,\n\t\ty: ry-ly+1\n\t};\n}\n\nexport function setSpanCss(view, row, column, css, add){\n\tconst span = getSpan(view, row, column);\n\tif (span){\n\t\tif (add){\n\t\t\tif (span[3].indexOf(css) == -1)\n\t\t\t\tspan[3] += \" \" + css;\n\t\t} else {\n\t\t\tspan[3] = span[3].replace(\" \" + css, \"\");\n\t\t}\n\t}\n}\n\nfunction getExtraCss(view, row, column){\n\tlet extraCss = [];\n\tif(view.getCellEditor(row, column))\n\t\textraCss.push(\"ss_editor\");\n\tif(view.getCellFilter(row, column))\n\t\textraCss.push(\"ss_filter\");\n\treturn extraCss.join(\" \");\n}\n\nfunction undoSpan(view,row, column,value,isUndo){\n\tif(isUndo){\n\t\tremoveSpan(view,{row: row, column: column});\n\t}\n\telse{\n\t\taddSpan(view, {row: row, column: column}, value[0], value[1]);\n\t}\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet spans = data.spans;\n\tif(inc){\n\t\tfor(let i = spans.length-1;i >=0;i--){\n\t\t\tlet [row,column] = spans[i];\n\n\t\t\tif(inc < 0){//deleting\n\t\t\t\tif(name == \"row\" && row <= start.row-inc-1)\n\t\t\t\t\tinc = start.row - spans[i][0];\n\t\t\t\telse if (name == \"column\" && column <= start.column-inc-1)\n\t\t\t\t\tinc = start.column - spans[i][1];\n\t\t\t}\n\n\t\t\tif(name == \"row\" && row>= start.row || name == \"column\" && column >= start.column){\n\t\t\t\tspans[i][0] =  name == \"row\"?row*1 + inc:row;\n\t\t\t\tspans[i][1] = name == \"column\"?column*1 + inc:column;\n\t\t\t}\n\t\t}\n\t}\n}\n\nvar borderChecks = {\n\t\"border-right\":\t\tfunction(row, column, span, area){\n\t\treturn area.end.column == column+span[0]-1;\n\t},\n\t\"border-bottom\":\tfunction(row, column, span, area){\n\t\treturn area.end.row == row+span[1]-1;\n\t}\n};\n\nfunction checkSpanBorders(view, row, column, area, mode){\n\tvar span = getSpan(view, row, column);\n\treturn span&&borderChecks[mode]?borderChecks[mode](row, column, span, area):false;\n}\n\n// clear merged cells except the first one\nfunction setSpanValue(view, cell, x, y){\n\tvar i,j,value,\n\t\trow = cell.row*1,\n\t\tcolumn = cell.column*1,\n\t\tisEmpty = !view.getCellValue(row,column);\n\tfor(i = row; i < row+y; i++){\n\t\tfor(j = column; j < column+x; j++) {\n\t\t\tvalue = view.getCellValue(i,j);\n\t\t\tif(value!==\"\" && (j != column || i != row)){\n\t\t\t\tif(isEmpty){\n\t\t\t\t\tisEmpty = false;\n\t\t\t\t\tview.setCellValue(row,column,value);\n\t\t\t\t}\n\t\t\t\tview.setCellValue(i,j,\"\");\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function adjustSpan (span, action, start, end, view, data, spanData){\n\tvar length = action.group == \"row\" ? span[3] : span[2];\n\tvar checkSpan = action.group == \"row\" ? [span[0]*1, span[0]*1+span[3]-1] : [span[1]*1, span[1]*1+span[2]-1];\n\tvar selection = action.group == \"row\" ? [start.row, end.row] : [start.column, end.column];\n\n\t//if we add, the number of selected rows/cols is added to span, so we need original selection length\n\tvar inc = selection[1] - selection[0] + 1;\n\n\tselection[0] = Math.max(selection[0], checkSpan[0]);\n\tselection[1] = Math.min(selection[1], checkSpan[1]);\n\n\tvar isFirstCell = selection[0] == checkSpan[0];\n\n\tif(selection[0] <= selection[1]){ //selection is in span\n\t\tif(action.id == \"del\") //if we delete, only rows/cols included into span\n\t\t\tinc = (selection[1] - selection[0]+ 1) * -1;\n\t\t//delete smth which starts as span and less than it's length\n\t\tif(action.id == \"del\" && isFirstCell && length > -1*inc){\n\t\t\tconst item = arr.find(data, arr => arr[0] == span[0] && arr[1] == span[1]);\n\t\t\tif(item)\n\t\t\t\tspanData.push(item);\n\t\t}\n\n\t\tif(!(isFirstCell && action.id == \"add\")){\n\t\t\tspan[2] = action.group == \"column\" ? span[2]+inc : span[2];\n\t\t\tspan[3] = action.group == \"row\" ? span[3]+inc : span[3];\n\t\t}\n\t}\n\treturn span;\n}\n\nexport function pasteSpan(view, extra, row, col, cutted, translate){\n\t//existing span\n\tvar s = view._table.getSpan(row, col);\n\tif(extra && extra.span){\n\t\tvar span = extra.span;\n\t\t//if we are on start position for the future span\n\t\tif(row == span[0]*1+translate.row && col == span[1]*1+translate.column){\n\t\t\t//delete spans in future paste zone \n\t\t\tview._table.mapCells(row, col, span[3], span[2], (value, rid, cid) => {\n\t\t\t\ts = view._table.getSpan(rid,cid);\n\t\t\t\tif(s) removeSpan(view, {row:s[0], column:s[1]});\n\t\t\t}, true);\n\t\t\taddSpan(view, {row:row, column:col}, span[2], span[3]);\n\t\t\tif(cutted === 1)\n\t\t\t\tremoveSpan(view, {row:extra.row, column:extra.col});\n\t\t}\n\t}\n\telse if(s)\n\t\tremoveSpan(view, {row:s[0], column:s[1]});\n}","import {isDateInvalid} from \"../operations/formats\";\n\nfunction getText(text){\n\tvar locale = webix.i18n.spreadsheet.labels;\n\treturn locale[text] || text;\n}\nexport function getDefaultStyles(){\n\treturn [\n\t\t{name: getText(\"normal\"), css: \"webix_ssheet_condition_regular\"},\n\t\t{name: getText(\"neutral\"), css: \"webix_ssheet_condition_neutral\"},\n\t\t{name: getText(\"bad\"), css: \"webix_ssheet_condition_bad\"},\n\t\t{name: getText(\"good\"), css: \"webix_ssheet_condition_good\"}\n\t];\n}\n\nfunction isDate(value){\n\treturn value && !isNaN(value) && !isDateInvalid(value);\n}\n\nexport const conditions = {\n\tnumber:[\n\t\t{ id:\"greater\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a !== \"\" && (a*1 > b*1);\n\t\t}},\n\t\t{ id:\"less\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a !== \"\" && (a*1 < b*1);\n\t\t}},\n\t\t{ id:\"greaterOrEqual\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a !== \"\" && (a*1 >= b*1);\n\t\t}},\n\t\t{ id:\"lessOrEqual\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a !== \"\" && (a*1 <= b*1);\n\t\t}},\n\t\t{ id:\"equal\", batch:\"text\", handler:function(a,b){ return a == b; }},\n\t\t{ id:\"notEqual\", batch:\"text\", handler:function(a,b){ return a != b; }},\n\t\t{ id:\"contains\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().indexOf(b.toString().toLowerCase()) !== -1;\n\t\t}},\n\t\t{ id:\"notContains\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().indexOf(b.toString().toLowerCase()) === -1;\n\t\t}}\n\t],\n\ttext: [\n\t\t{ id:\"contains\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().indexOf(b.toString().toLowerCase()) !== -1;\n\t\t}},\n\t\t{ id:\"notContains\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().indexOf(b.toString().toLowerCase()) === -1;\n\t\t}},\n\t\t{ id:\"equal\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase() === b.toString().toLowerCase();\n\t\t}},\n\t\t{ id:\"notEqual\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase() !== b.toString().toLowerCase();\n\t\t}},\n\t\t{ id:\"beginsWith\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().lastIndexOf(b.toString().toLowerCase(), 0) === 0;\n\t\t}},\n\t\t{ id:\"notBeginsWith\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().lastIndexOf(b.toString().toLowerCase(), 0) !== 0;\n\t\t}},\n\t\t{ id:\"endsWith\", batch:\"text\", handler:function(a,b){\n\t\t\ta = a.toString();\n\t\t\tb = b.toString();\n\t\t\treturn a.toLowerCase().indexOf(b.toLowerCase(), a.length - b.length) !== -1;\n\t\t}},\n\t\t{ id:\"notEndsWith\", batch:\"text\", handler:function(a,b){\n\t\t\ta = a.toString();\n\t\t\tb = b.toString();\n\t\t\treturn a.toLowerCase().indexOf(b.toLowerCase(), a.length - b.length) === -1;\n\t\t}}\n\t],\n\tdate: [\n\t\t{ id:\"greater\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a > b;\n\t\t}},\n\t\t{ id:\"less\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a < b;\n\t\t}},\n\t\t{ id:\"greaterOrEqual\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a >= b;\n\t\t}},\n\t\t{ id:\"lessOrEqual\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a <= b;\n\t\t}},\n\t\t{ id:\"equal\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a == b;\n\t\t}},\n\t\t{ id:\"notEqual\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn !isDate(a) || a != b;\n\t\t}},\n\t\t{ id:\"between\", batch: \"daterangepicker\", handler: function(a, b){\n\t\t\tif (!isDate(a)) return false;\n\t\t\treturn (!b.start || a > b.start) && (!b.end || a < b.end);\n\t\t}},\n\t\t{ id:\"notBetween\", batch: \"daterangepicker\", handler: function(a, b){\n\t\t\tif (!isDate(a)) return false;\n\t\t\treturn (!b.start || a <= b.start) || (!b.end || a >= b.end);\n\t\t}}\n\t]\n};","import group from \"./undo_group\";\nimport {eachRange} from \"../helpers/column_names\";\nimport {setSpanCss} from \"./spans\";\nimport {conditions} from \"../helpers/conditional\";\nimport {getType} from \"./types\";\nimport * as arr from \"../helpers/array\";\n\nexport function init(view){\n\tview.conditions = {\n\t\t_empty:true,\n\t\t_pull: {},\n\t\thandlers: createRules(),\n\t\tadd: function(rId, cId, cond, val, style){\n\t\t\tadd.apply(this, [view, rId, cId, cond, val, style]);\n\t\t},\n\t\tupdate: function(r, c, data){\n\t\t\tupdate.apply(this, [view, r, c, data]);\n\t\t},\n\t\tremove,\n\t\tget,\n\t\tparse,\n\t\tserialize,\n\t\tclear\n\t};\n\n\tview.attachEvent(\"onConditionSet\", (data) => _setCondition(view, data));\n\n\tview.attachEvent(\"onUndo\", (type_action, row, column, value) => {\n\t\tif(type_action == \"condition\")\n\t\t\t_undoCondition(view, row, column, value);\n\t});\n\n\tview.attachEvent(\"onDataSerialize\", (data) => _serialize(view, data));\n\tview.attachEvent(\"onDataParse\", (data) => _parse(view, data));\n\n\tview.attachEvent(\"onReset\", () => view.conditions.clear() );\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n\n\treset(view);\n}\n\nfunction createRules(){\n\tconst rules = webix.copy(conditions);\n\trules.number = rules.number.concat([\n\t\t{ id:\"between\", handler: function(a, b){\n\t\t\treturn (!b.start || a > b.start) && (!b.end || a < b.end);\n\t\t}},\n\t\t{ id:\"notBetween\", handler: function(a, b){\n\t\t\treturn (!b.start || a <= b.start) || (!b.end || a >= b.end);\n\t\t}}\n\t]);\n\treturn rules;\n}\n\nfunction getCellValue(view, value){\n\tif(isNaN(value*1)){\n\t\tif (value.charAt(0) == \"=\" && value.length > 1){\n\t\t\tvalue = view._mData.getStore().exec(value.substring(1), view._mPage.getContext());\n\t\t\tif(value === null)\n\t\t\t\tvalue = \"\";\n\t\t}\n\t}\n\telse {\n\t\tvalue = value*1;\n\t}\n\treturn value;\n}\n\nfunction reset(view){\n\tview.conditions.clear();\n}\n\nfunction _setCondition(view, data){\n\tgroup.set(function(){\n\t\tview.eachSelectedCell((cell) => {\n\t\t\tconst collection = view.conditions.get(cell.row, cell.column);\n\t\t\tif(collection)\n\t\t\t\tfor (let i = 0; i < collection.length; i++)\n\t\t\t\t\tsetSpanCss(view, cell.row, cell.column, collection[i][2], false);\n\t\t\t_changeCondition(\"update\", cell.row, cell.column, (collection||null), data, view);\n\t\t});\n\t});\n\tview.refresh();\n}\n\nfunction _undoCondition(view, row, column, value){\n\tif(view.conditions.get(row, column))\n\t\tview.conditions.remove(row, column);\n\tif(value)\n\t\tview.conditions.update(row, column, value);\n}\n\nfunction _serialize(view, obj){\n\tobj.conditions = view.conditions.serialize();\n}\n\nfunction _parse(view, obj){\n\tview.conditions.parse(obj.conditions);\n}\n\nexport function getConditionCss(view, row, column, rendered){\n\tlet css = \"\";\n\n\tif (!view.conditions._empty){\n\t\tconst collection = view.conditions.get(row, column);\n\t\tif(collection){\n\t\t\tconst span = view.$$(\"cells\").getSpan(row, column);\n\t\t\tlet value = view.getCellValue(row,column,false);\n\t\t\tif(!value && value !== 0)\n\t\t\t\tvalue = \"\";\n\n\t\t\tlet type = getType(view, row, column);\n\t\t\tif(!type || type == \"string\")\n\t\t\t\ttype = \"text\";\n\n\t\t\tfor (let i = collection.length - 1; i >= 0; i--){\n\t\t\t\tlet currentValue = value;\n\t\t\t\tconst rule = collection[i][0];\n\t\t\t\tconst handlers = view.conditions.handlers;\n\t\t\t\tlet handler;\n\n\t\t\t\tlet checkOrder = [\"text\", type, \"number\", \"date\"];\n\t\t\t\tcheckOrder = checkOrder.filter((v, i) => checkOrder.indexOf(v) == i);\n\n\t\t\t\tfor(let k = 0; k < checkOrder.length; k++){\n\t\t\t\t\tconst checkType = checkOrder[k];\n\n\t\t\t\t\thandler = arr.find(handlers[checkType], obj => obj.id == rule);\n\t\t\t\t\tif(handler){\n\t\t\t\t\t\thandler = handler.handler;\n\t\t\t\t\t\tif(checkType == \"text\" && rule != \"equal\" && rule != \"notEqual\")\n\t\t\t\t\t\t\tcurrentValue = rendered;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet compare = collection[i][1];\n\t\t\t\tif(webix.isArray(compare))\n\t\t\t\t\tcompare = {\n\t\t\t\t\t\tstart: getCellValue(view, compare[0]),\n\t\t\t\t\t\tend: getCellValue(view, compare[1])\n\t\t\t\t\t};\n\t\t\t\telse\n\t\t\t\t\tcompare = getCellValue(view, compare);\n\n\t\t\t\tif(!css && handler && handler(currentValue, compare)){\n\t\t\t\t\tcss = collection[i][2];\n\t\t\t\t\tif(!span)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tsetSpanCss(view, row, column, collection[i][2], true);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tsetSpanCss(view, row, column, collection[i][2], false);\n\t\t\t}\n\t\t}\n\t}\n\treturn css;\n}\n\n\nfunction addEmptyCollection(pull, row, column, state){\n\tstate._empty = false;\n\tif(!pull[row])\n\t\tpull[row] = {};\n\tif(!pull[row][column])\n\t\tpull[row][column] = [];\n\treturn pull[row][column];\n}\n\n\nfunction parse(data){\n\t//backward compatibility\n\tconst oldConditions = {\n\t\t\">\": \"greater\",\n\t\t\"<\": \"less\",\n\t\t\"=\": \"equal\",\n\t\t\"!=\": \"notEqual\",\n\t\t\"<>\": \"between\"\n\t};\n\n\tthis._empty = true;\n\tif (!data) return;\n\n\tlet i = data.length;\n\twhile(i--){\n\t\tconst c = data[i];\n\t\tconst collection = addEmptyCollection(this._pull,c[0],c[1],this);\n\t\tc[2] = oldConditions[ c[2] ] || c[2];\n\t\tcollection.push([c[2],c[3],c[4]]);\n\t}\n}\n\nfunction clear(){\n\tthis._pull = {};\n}\n\nfunction update(view, row, column, newData){\n\tvar collection = this.get(row, column);\n\tif(!collection)\n\t\taddEmptyCollection(this._pull, row, column, this);\n\n\tnewData.map(item => _normalizeValue(view, item) );\n\tthis._pull[row][column] = newData;\n}\n\nfunction get(rowId, columnId){\n\tif(!rowId)\n\t\treturn this._pull;\n\tif(!columnId)\n\t\treturn this._pull[rowId];\n\treturn this._pull[rowId]?this._pull[rowId][columnId]:null;\n}\n\nfunction add(view, rowId, columnId, condition, value, style){\n\tconst collection = addEmptyCollection(this._pull, rowId, columnId, this);\n\tcollection.push( _normalizeValue(view, [condition, value, style]) );\n}\n\nfunction remove(rowId, columnId){\n\tvar collection = this.get(rowId, columnId);\n\tif(collection)\n\t\tdelete this._pull[rowId][columnId];\n}\n\nfunction serialize(){\n\tvar column, condition, i, row,\n\t\tdata = [];\n\n\tfor( row in this._pull)\n\t\tfor( column in this._pull[row])\n\t\t\tfor(i=0; i < this._pull[row][column].length; i++){\n\t\t\t\tcondition = this._pull[row][column][i];\n\t\t\t\tdata.push([row,column, condition[0],condition[1],condition[2]]);\n\t\t\t}\n\n\treturn data;\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet conditions = data.conditions,\n\t\ti = conditions.length;\n\n\tif(inc){\n\t\twhile(i--){\n\t\t\tlet [row,column] = conditions[i];\n\t\t\tif(name == \"row\" && row>= start.row || name == \"column\" && column >= start.column){\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc)\t//delete lock mark if row was deleted\n\t\t\t\t\t\tconditions.splice(i,1);\n\t\t\t\t\telse\t\t\t\t\t\t//update mark position if upper row was deleted\n\t\t\t\t\t\tconditions[i][0] = row*1 + inc;\n\t\t\t\t} else if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\tconditions.splice(i, 1);\n\t\t\t\t\t} else \n\t\t\t\t\t\tconditions[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function clearConditionalFormats(view, range){\n\tgroup.set(function(){\n\t\teachRange(range, view, function(view, cell){\n\t\t\tvar condition = view.conditions.get(cell.row, cell.column);\n\t\t\tif(condition)\n\t\t\t\t_changeCondition(\"remove\", cell.row, cell.column, condition, null, view);\t\t\t\t\n\t\t});\n\t\tview.refresh();\n\t});\n}\n\nexport function pasteCondition(view, extra, row, col, cutted){\n\tvar condition = extra.condition;\n\tvar collection = view.conditions.get(row,col);\n\t_changeCondition(\"update\", row, col, (collection||null), condition, view);\n\tif(cutted === 1)\n\t\t_changeCondition(\"remove\", extra.row, extra.col, condition, null, view);\n}\n\nexport function _changeCondition(name, row, column, oldCondition, newCondition, view){\n\tif (view.callEvent(\"onBeforeConditionSet\", [row, column, oldCondition, newCondition])){\n\t\tview.conditions[name].apply(view.conditions, [row, column, newCondition]);\n\t\tview.callEvent(\"onAfterConditionSet\", [row, column, oldCondition, newCondition]);\n\t}\n}\n\nfunction _normalizeValue(view, condition){\n\tconst val = condition[1];\n\tif(val[0] == \"=\")\n\t\tcondition[1] = view._mData.getStore().parse(val).source; //fixes formula\n\treturn condition;\n}","export function init(view){\n\t//parsing initial data\n\tview.attachEvent(\"onDataParse\", (data) => _parse(view, data));\n\tview.attachEvent(\"onDataSerialize\", (data, config) => _serialize(view, data, config));\n\n\t// undo\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tif(type == \"value\")\n\t\t\t_undoValue(view, row, column, value);\n\t});\n}\n\nfunction _serialize(view, obj, config){\n\tvar math = !config || config.math!==false;\n\n\tvar grid = view.$$(\"cells\");\n\tvar state = grid.getState();\n\tvar columns = state.ids.concat(state.hidden);\n\n\t// remove \"rowId\" column\n\tcolumns.splice(columns.indexOf(\"rowId\"), 1);\n\n\tobj.data = getSheetData(view, math);\n\n\tobj.table = {\n\t\tfrozenColumns : (view._frozenColumns || 0),\n\t\tfrozenRows : (view._frozenRows || 0)\n\t};\n}\n\nfunction _parse(view, obj){\n\tconst tconfig = obj.table || { frozenColumns : 0, frozenRows : 0 };\n\tview._frozenColumns = view._frozenRows = 0;\n\tif (tconfig){\n\t\tif (!webix.isUndefined(tconfig.frozenColumns))\n\t\t\tview.freezeColumns(tconfig.frozenColumns);\n\t\tif (!webix.isUndefined(tconfig.frozenRows))\n\t\t\tview.freezeRows(tconfig.frozenRows);\n\t}\n\n\tif(obj.sizes)\n\t\tview.$$(\"cells\").define(\"fixedRowHeight\", false);\n}\n\nfunction _undoValue(view, row, column, value){\n\tview.setCellValue(row, column, value);\n}\n\nexport function getSheetData(view, math, page){\n\tpage = page ? view._mData.getPage(page) : view._mPage;\n\treturn page.serialize(math)\n\t\t.map(arr =>{\n\t\t\tlet value = arr[2].value;\n\t\t\tif(value === null)\n\t\t\t\tvalue = \"\";\n\t\t\treturn [ ++arr[0], ++arr[1], value, arr[2].style||\"\", arr[2].type];\n\t\t})\n\t\t.filter(arr => {\n\t\t\treturn arr[2] || arr[2] === 0 || arr[3];\n\t\t});\n}","import * as arr from \"./helpers/array\";\nimport {getSheetData} from \"./operations/data\";\nimport {DataStore} from \"@xbs/muon\";\nimport {loadCell} from \"./operations/types\";\nimport {removeUnusedStyles, styleFromText, styleToText} from \"./operations/styles\";\nimport {getFormatFromData, checkFormat} from \"./operations/formats\";\nimport {updateMaxColumn, encode, escapeSheet} from \"./helpers/column_names\";\n\nconst options = [\n\t\"rename-sheet\",\n\t\"remove-sheet\",\n\t\"copy-sheet\",\n\t\"hide-sheet\"\n];\n\nconst actionMap = {\n\t\"remove-sheet\": view => _remove(view),\n\t\"rename-sheet\": view => edit(view),\n\t\"new-sheet\": view => add(view),\n\t\"copy-sheet\": view => copy(view),\n\t\"hide-sheet\": view => setState(view, view._activeSheet, \"hidden\")\n};\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n}\n\nexport function defaultBottom(view){\n\tvar readonly = view.config.readonly;\n\tvar tabWidth = view.config.sheetTabWidth;\n\tvar toolbar =  {\n\t\tview: \"toolbar\",\n\t\tid: \"bottom-toolbar\",\n\t\tcss: \"webix_ssheet_bottom_toolbar webix_layout_toolbar\",\n\t\tpaddingY: 0,\n\t\theight: 34,\n\t\telements:[\n\t\t\t{\n\t\t\t\thidden:readonly,\n\t\t\t\tpadding: {\n\t\t\t\t\ttop: 2,\n\t\t\t\t\tbottom: 2,\n\t\t\t\t\tleft: 4\n\t\t\t\t},\n\t\t\t\tcols:[\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"icon\", icon:\"wxi-plus\", width:30, id: \"add-sheet\", click: ()=> add(view),\n\t\t\t\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[\"add-sheet\"]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"icon\", icon:\"wxi-dots\", width:30, id: \"show-sheet\", popup: getSheetsPopup(view),\n\t\t\t\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[\"show-sheet\"]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid:\"sheets\",\n\t\t\t\tview:\"sheets\",\n\t\t\t\tmaxWidth: 5 * tabWidth,\n\t\t\t\teditable:!readonly,\n\t\t\t\teditaction: \"dblclick\",\n\t\t\t\teditor:\"text\",\n\t\t\t\teditValue:\"value\",\n\t\t\t\ttype:{\n\t\t\t\t\twidth: tabWidth,\n\t\t\t\t\theight: 32,\n\t\t\t\t\ttemplate: function(obj){\n\t\t\t\t\t\treturn \"<div>\"+obj.value+\"</div>\"+\n\t\t\t\t\t\t\t(!readonly?\"<div class='webix_input_icon wxi-menu-down webix_ssheet_sheet_arrow'></div>\":\"\");\n\t\t\t\t\t},\n\t\t\t\t\t//remove skin selection css on dnd\n\t\t\t\t\tcss:\"ssheet_order_sheets\"\n\t\t\t\t},\n\t\t\t\tonClick:{\n\t\t\t\t\twebix_ssheet_sheet_arrow: function(e, id){\n\t\t\t\t\t\tinitSheetMenu(view, e, id);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ton:{\n\t\t\t\t\tonItemClick: function(id){\n\t\t\t\t\t\tif(id != view._activeSheet)\n\t\t\t\t\t\t\tview.showSheet(id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"button\", type:\"htmlbutton\", width: 34, id: \"prev-sheet\", disabled:true, hidden:true,\n\t\t\t\tlabel: \"<span class='webix_icon wxi-menu-left'></span>\", batch:\"pager\",\n\t\t\t\tclick:function(){scrollSheets(view, -1);}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"button\", type:\"htmlbutton\", width: 34, id: \"next-sheet\", hidden:true,\n\t\t\t\tlabel: \"<span class='webix_icon wxi-menu-right'></span>\", batch:\"pager\",\n\t\t\t\tclick:function(){scrollSheets(view, 1);}\n\t\t\t}\n\t\t]\n\t};\n\n\tview.callEvent(\"onViewInit\", [\"bottom-toolbar\", toolbar]);\n\n\treturn toolbar;\n}\n\nfunction scrollSheets(view, direction){\n\tvar sheets = view.$$(\"sheets\");\n\tsheets.scrollTo(sheets.getScrollState().x+(direction*view.config.sheetTabWidth), 0);\n}\n\nfunction menuInit(view){\n\tvar data = [];\n\tfor(var i=0; i < options.length;i++)\n\t\tdata.push({id: options[i], value:webix.i18n.spreadsheet.menus[options[i]]||options[i]});\n\n\tvar menu =  {\n\t\tview: \"ssheet-suggest\",\n\t\tdata: data\n\t};\n\tview.callEvent(\"onViewInit\", [\"sheet-menu\", menu]);\n\treturn menu;\n}\n\nexport function reset(view, obj){\n\tconst tabs = view.$$(\"sheets\");\n\tif (tabs){\n\t\ttabs.clearAll();\n\t\tconst set = [];\n\t\tobj.sheets.forEach(function(sheet){\n\t\t\tset.push({id:sheet.name, value: sheet.name});\n\t\t});\n\t\ttabs.parse(set);\n\t\t_filterTabs(view);\n\t}\n}\n\nfunction ready(view){\n\tprepare(view);\n\n\tview.attachEvent(\"onAfterSheetShow\", (name) => selectSheet(view,name));\n\n\tview.attachEvent(\"onCommand\", function(command){\n\t\tif(actionMap[command.id])\n\t\t\tactionMap[command.id](this);\n\t});\n\n\tif(view.$$(\"sheets\")){\n\t\tview.$$(\"sheets\").data.attachEvent(\"onStoreUpdated\", () => {\n\t\t\tchangePagerVisability(view);\n\t\t\tchangePagerStatus(view);\n\t\t});\n\t\tview.$$(\"sheets\").attachEvent(\"onAfterRender\", webix.once(() => {\n\t\t\twebix.delay(()=> changePagerVisability(view));\n\t\t}));\n\t\tview.$$(\"sheets\").attachEvent(\"onAfterScroll\", () => changePagerStatus(view));\n\t\tview.$$(\"sheets\").attachEvent(\"onAfterDrop\", (context) => dataOrder(view,context.start,context.index));\n\t\tview.$$(\"sheets\").attachEvent(\"onAfterEditStop\", (state) => rename(view,state.old,state.value));\n\t}\n}\n\nfunction getSheetsPopup(view){\n\treturn {\n\t\tview: \"popup\",\n\t\tcss: \"webix_ssheet_suggest\",\n\t\twidth: 125,\n\t\tbody:{\n\t\t\tview: \"list\",\n\t\t\tselect: true,\n\t\t\tcss: \"webix_ssheet_show_list\",\n\t\t\ttemplate: \"<span class='webix_icon wxi-#icon#'></span>#id#\",\n\t\t\ton:{\n\t\t\t\tonAfterSelect: function(id) {\n\t\t\t\t\tsetState(view, id, \"visible\");\n\t\t\t\t\tview.showSheet(id);\n\t\t\t\t\tthis.getParentView().hide();\n\t\t\t\t}\n\t\t\t},\n\t\t\tmaxHeight: 200,\n\t\t\tautoheight: true\n\t\t},\n\t\ton:{\n\t\t\tonShow: function(){\n\t\t\t\tthis.getBody().showItem(view.getActiveSheet());\n\t\t\t},\n\t\t\tonBeforeShow: function(){\n\t\t\t\tconst data = view._sheets\n\t\t\t\t\t.filter(sheet => sheet.state != \"veryHidden\")\n\t\t\t\t\t.map(sheet => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tid: sheet.name,\n\t\t\t\t\t\t\ticon: sheet.state == \"hidden\" ? \"eye-slash\" : \"eye\"\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\n\t\t\t\tconst list = this.getBody();\n\t\t\t\tlist.clearAll();\n\t\t\t\tlist.parse(data);\n\t\t\t\tlist.select(view.getActiveSheet());\n\t\t\t}\n\t\t}\n\t};\n}\n\nfunction initSheetMenu(view, e, id){\n\tif(!view.$sheetMenu){\n\t\tview.$sheetMenu = webix.ui(menuInit(view));\n\t\tview._destroy_with_me.push(view.$sheetMenu);\n\t\tview.$sheetMenu.attachEvent(\"onItemClick\", id => callAction(view,id));\n\t}\n\n\tconst oneSheet = view.$$(\"sheets\").count() == 1;\n\n\tif(view.$sheetMenu.getItem(\"remove-sheet\"))\n\t\tview.$sheetMenu[oneSheet ? \"disableItem\" : \"enableItem\"](\"remove-sheet\");\n\n\tif(view.$sheetMenu.getItem(\"hide-sheet\"))\n\t\tview.$sheetMenu[oneSheet ? \"disableItem\" : \"enableItem\"](\"hide-sheet\");\n\n\tif(view.callEvent(\"onBeforeSheetMenu\", [id]))\n\t\tview.$sheetMenu.show(e);\n}\n\nfunction changePagerStatus(view){\n\tconst sheets = view.$$(\"sheets\");\n\tconst scrollPos = sheets.getScrollState().x;\n\n\tif(scrollPos == 0){\n\t\tview.$$(\"prev-sheet\").disable();\n\t}\n\telse{\n\t\tview.$$(\"prev-sheet\").enable();\n\t\tvar tabWidth = view.config.sheetTabWidth;\n\t\tif(scrollPos == (sheets.count()-(sheets.$width/tabWidth))*tabWidth){\n\t\t\tview.$$(\"next-sheet\").disable();\n\t\t\treturn;\n\t\t}\n\t}\n\tview.$$(\"next-sheet\").enable();\n}\n\nfunction changePagerVisability(view){\n\tvar toolbar = view.$$(\"bottom-toolbar\");\n\tvar sheets = view.$$(\"sheets\");\n\n\tif(sheets.count() <= (sheets.$width/view.config.sheetTabWidth))\n\t\ttoolbar.showBatch(\"pager\", false);\n\telse\n\t\ttoolbar.showBatch(\"pager\");\n}\n\nfunction dataOrder(view, name, num){\n\tfor (let id in view._sheets) {\n\t\tif (view._sheets[id].name == name) {\n\t\t\tconst item = view._sheets.splice(id, 1);\n\t\t\tview._sheets.splice(num, 0, item[0]);\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\nexport function setState(view, sheet, state){\n\tconst tab = getSheet(view, sheet);\n\n\tif(state == tab.state || (state == \"visible\" && !tab.state))\n\t\treturn;\n\n\tif(state != \"visible\"){\n\t\tconst visibleSheets = getVisible(view);\n\n\t\t//don't hide last visible tab\n\t\tif(visibleSheets.length == 1 && visibleSheets[0] === tab)\n\t\t\treturn;\n\n\t\t//select the previous sheet in case we hide the selected sheet\n\t\tif(sheet == view._activeSheet)\n\t\t\tshowPrevious(view, sheet);\n\t}\n\n\ttab.state = state;\n\t_filterTabs(view);\n\n\tview.callEvent(\"onSheetStateChange\", [sheet, state]);\n}\n\nfunction _filterTabs(view){\n\tconst tabs = view.$$(\"sheets\");\n\tif(tabs)\n\t\ttabs.filter(obj => {\n\t\t\tconst state = getSheet(view, obj.id).state;\n\t\t\treturn state != \"hidden\" && state != \"veryHidden\";\n\t\t});\n}\n\nexport function add(view, content){\n\tvar index, name, newIndex;\n\n\tindex = arr.findIndex(view._sheets, x => x.name == view._activeSheet);\n\tnewIndex = index>-1?index+1:view._sheets.length;\n\tname = getNewTitle(view);\n\tcontent = content || {data:[]};\n\tview._sheets.splice(newIndex, 0, {\n\t\tname: name,\n\t\tcontent: content\n\t});\n\n\tif(view.$$(\"sheets\"))\n\t\tview.$$(\"sheets\").add({id: name, value: name},newIndex);\n\n\tview._mData.addPage(name);\n\n\tparseToStore(view, name, content, view.config.prepareData);\n\n\tview.showSheet(name);\n\tview.callEvent(\"onSheetAdd\", [name]);\n\treturn name;\n}\n\nfunction getNewTitle(view){\n\tvar index = view._sheets.length+1;\n\twhile(getSheet(view, (webix.i18n.spreadsheet.labels.sheet+index)))\n\t\tindex++;\n\tvar name = webix.i18n.spreadsheet.labels.sheet+index;\n\treturn name;\n}\n\nfunction selectSheet(view,name){\n\tif(view.$$(\"sheets\")){\n\t\tview.$$(\"sheets\").select(name);\n\t\tview.$$(\"sheets\").showItem(name);\n\t}\n}\n\nexport function edit(view,name){\n\tif(!name)\n\t\tname = view._activeSheet;\n\tview.$$(\"sheets\").edit(name);\n}\n\nfunction _remove(view){\n\tview.confirm({\n\t\ttext: webix.i18n.spreadsheet.labels[\"sheet-remove-confirm\"]\n\t}).then(()=>{\n\t\tremove(view, view._activeSheet);\n\t});\n}\n\nfunction getVisible(view){\n\treturn view._sheets.filter(s => s.state != \"hidden\" && s.state != \"veryHidden\");\n}\n\nfunction showPrevious(view, name){\n\tconst visibleSheets = getVisible(view);\n\n\tlet index = arr.findIndex(visibleSheets, x => x.name == name);\n\t\t\t\n\tlet prevIndex = index - 1;\n\tif(!visibleSheets[prevIndex])\n\t\tprevIndex = 0;\n\tvisibleSheets.splice(index, 1);\n\n\tview.showSheet(visibleSheets[prevIndex].name);\n}\n\nexport function remove(view, name){\n\tif(view._sheets.length > 1){\n\t\tconst visibleSheets = getVisible(view);\n\n\t\t//don't remove last visible tab\n\t\tif(visibleSheets.length == 1 && visibleSheets[0] === getSheet(view, name))\n\t\t\treturn;\n\n\t\t//select the previous sheet in case we remove the selected sheet\n\t\tif(view._activeSheet == name)\n\t\t\tshowPrevious(view, name);\n\n\t\tconst index = arr.findIndex(view._sheets, x => x.name == name);\n\t\tview._sheets.splice(index, 1);\n\t\tview._mData.removePage(name);\n\n\t\tif(view.$$(\"sheets\")){\n\t\t\tview.$$(\"sheets\").remove(name);\n\t\t\tview.$$(\"sheets\").refresh();\n\t\t}\n\n\t\tview.callEvent(\"onSheetRemove\", [name]);\n\t}\n}\n\nexport function rename(view,name,newName){\n\tif (name == newName) return;\n\n\t//correct sheet name\n\tvar i = 1;\n\twhile (!newName || getSheet(view, newName)){\n\t\tnewName = webix.i18n.spreadsheet.labels.sheet + i;\n\t\ti++;\n\t}\n\tnewName = newName.replace(/[*?:[\\]\\\\/]/g,\"\").substring(0, 31);\n\n\tvar sheet = getSheet(view, name);\n\tvar sheets = view.$$(\"sheets\");\n\n\tsheet.name = newName;\n\tif(view._activeSheet == name)\n\t\tview._activeSheet = newName;\n\n\tif(sheets){\n\t\tlet item = sheets.getItem(name);\n\t\titem.value = newName;\n\t\tsheets.data.changeId(name,newName);\n\t\tsheets.refresh(newName);\n\t}\n\n\tview._mData.renamePage(name, newName);\n\tview.callEvent(\"onSheetRename\", [name, newName]);\n}\n\nexport function serialize(view, obj, config){\n\tconst active = getSheet(view, view._activeSheet);\n\tactive.content = obj;\n\tactive.state = active.state || \"visible\";\n\n\tconst sheets = webix.copy(view._sheets);\n\n\tconst math = !config || config.math!==false;\n\tconst compactStyles = config && config.compactStyles;\n\n\tsheets.forEach(sheet => {\n\t\tif(sheet.name != view._activeSheet){\n\t\t\tsheet.content.data = getSheetData(view, math, sheet.name);\n\t\t\tsheet.state = sheet.state || \"visible\";\n\t\t\tif(compactStyles)\n\t\t\t\tsheet.content.styles = removeUnusedStyles(sheet.content);\n\t\t\tsheet.content.ranges = view.ranges.serialize(sheet.name);\n\t\t}\n\t});\n\n\treturn sheets;\n}\n\nfunction parseToStore(view, name, obj, prepareData){\n\tview.ranges.parse(obj.ranges, name);\n\n\twebix.extend(obj, {\n\t\tstyles: [],\n\t\tformats: [],\n\t\teditors: []\n\t});\n\n\tconst page = view._mData.getPage(name);\n\tconst data = obj.data.map(arr => {\n\t\tconst invalidValue = webix.isUndefined(arr[2]) || arr[2] === null;\n\n\t\tif(prepareData){\n\t\t\tif(invalidValue)\n\t\t\t\tarr[2] = \"\";\n\t\t\telse {\n\t\t\t\tconst linkRegex = /^=link\\(/i;\n\t\t\t\tif(typeof arr[2] == \"string\" && linkRegex.test(arr[2])){\n\t\t\t\t\t// LINK is deprecated\n\t\t\t\t\tarr[2] = arr[2].replace(linkRegex, \"=HYPERLINK(\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst cell = loadCell(view, obj, arr);\n\t\t\t//cell value and type can be changed via types module\n\t\t\tarr[2] = cell.value;\n\t\t\tarr[3] = arr[3] || \"\";\n\t\t\tarr[4] = cell.type;\n\n\t\t\tprepareCell(arr, obj);\n\t\t}\n\t\telse if(invalidValue)\n\t\t\tthrow `unsupported value in ${escapeSheet(name)}!${encode[arr[0]]}${arr[1]}`;\n\n\t\treturn [ arr[0]-1, arr[1]-1, {\n\t\t\tvalue: arr[2],\n\t\t\ttype: arr[4],\n\t\t\tstyle: arr[3],\n\t\t\t$format: checkFormat({ fmt: getFormatFromData(obj, arr) }, \"string\") ? 1 : 0\n\t\t}];\n\t});\n\n\tpage.parse(data, true);\n}\n\nexport function prepareCell(cell, data, update){\n\tconst isDate = cell[4] == \"date\";\n\tif(isDate || update){\n\t\tconst isString = typeof cell[2] == \"string\";\n\n\t\tconst link = update && isString && /^=hyperlink\\(/i.test(cell[2]);\n\n\t\tconst styleProperties = cell[3] ? arr.find(data.styles, style => style[0] == cell[3]) : null;\n\t\tconst styleObj = styleProperties ? styleFromText(styleProperties[1]) : {};\n\n\t\tif((isDate && !styleProperties || !styleObj.format) || link){\n\t\t\tlet props = {};\n\n\t\t\tif(link){\n\t\t\t\tcell[3] = \"wss_link\" + (styleProperties ? \"_\"+cell[3] : \"\");\n\t\t\t\tprops = { color: \"#0000ff\", underline: \"underline\" };\n\t\t\t}\n\t\t\telse if(isString && /^=time\\(/i.test(cell[2])){\n\t\t\t\tcell[3] = \"wss_load_time\" + (styleProperties ? \"_\"+cell[3] : \"\");\n\t\t\t\tprops.format = cell[3]+\"_fmt\";\n\t\t\t\tdata.formats.push([props.format, webix.i18n.spreadsheet.formats.timeFormat]);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tcell[3] = \"wss_load_date\" + (styleProperties ? \"_\"+cell[3] : \"\");\n\t\t\t\tprops.format = \"date\";\n\t\t\t}\n\n\t\t\tif(!arr.find(data.styles, style => style[0] == cell[3]))\n\t\t\t\tdata.styles.push([\n\t\t\t\t\tcell[3],\n\t\t\t\t\tstyleToText({props: webix.extend(styleObj, props, true)})\n\t\t\t\t]);\n\t\t}\n\t}\n}\n\nexport function load(view, obj, excel){\n\tview._loading_data = true;\n\tobj = webix.isArray(obj)?{sheets:obj}:obj;\n\tconst prepareData = view.config.prepareData || excel;\n\n\tif(!obj.sheets && view._activeSheet){\n\t\t//loading into active sheet\n\t\tconst name = view._activeSheet;\n\t\tgetSheet(view, name).content = obj;\n\t\tparseToStore(view, name, obj, prepareData);\n\t\trefresh(view, obj);\n\t} else {\n\t\t//creating new set of sheets\n\t\tprepare(view, obj, prepareData);\n\t}\n\tview._loading_data = false;\n}\n\nexport function prepare(view, obj, prepareData){\n\tif(!obj) obj = {data:[]}; \n\tif(!obj.sheets){\n\t\tobj = newSheet(obj);\n\t}\n\n\tview._activeSheet = \"\";\n\tview._sheets = obj.sheets;\n\tview._mData = new DataStore({strict: view.config.strict});\n\n\t// first add all pages then parse data in them\n\tobj.sheets.forEach(sheet => {\n\t\tview._mData.addPage(sheet.name);\n\t});\n\n\tobj.sheets.forEach(sheet => {\n\t\tconst content = sheet.content;\n\t\tconst sheetName = sheet.name;\n\n\t\tparseToStore(view, sheetName, content, prepareData);\n\t});\n\n\treset(view, obj);\n\tshow(view, getVisible(view)[0].name);\n}\n\nexport function newSheet(obj){\n\treturn {\n\t\tsheets:[{\n\t\t\tname: webix.i18n.spreadsheet.labels.sheet + 1,\n\t\t\tcontent: obj\n\t\t}]\n\t};\n}\n\nexport function show(view, name){\n\tif (name == view._activeSheet) return;\n\n\tif(view.callEvent(\"onBeforeSheetShow\", [name])){\n\t\tif (view._activeSheet)\n\t\t\tgetSheet(view, view._activeSheet).content = view.serialize();\n\n\t\tview._activeSheet = name;\n\t\tconst obj = getSheet(view, name).content;\n\n\t\tview._mPage = view._mData.getPage(name);\n\n\t\trefresh(view, obj);\n\n\t\tview.callEvent(\"onAfterSheetShow\", [name]);\n\t}\n}\n\nexport function getSheet(view, name){\n\treturn arr.find(view._sheets, x => x.name == name);\n}\n\nexport function isVisible(view, sheet){\n\tsheet = getSheet(view, sheet);\n\treturn sheet.state != \"hidden\" && sheet.state != \"veryHidden\";\n}\n\nexport function eachSheet(view, callback){\n\tfor (var i=0; i<view._sheets.length; i++)\n\t\tcallback(view._sheets[i].name);\n}\n\nexport function getActive(view){\n\treturn view._activeSheet;\n}\n\nfunction refresh(view, obj){\n\tconst data = getSheetData(view);\n\n\tlet [rows, cols] = arr.getDimension(data, obj.spans, view.config.rowCount, view.config.columnCount);\n\n\tif (rows != view.config.rowCount || cols != view.config.columnCount){\n\t\tview.config.rowCount = rows;\n\t\tview.config.columnCount = cols;\n\t\tview._resetTable();\n\t}\n\n\tupdateMaxColumn(cols);\n\n\tview.callEvent(\"onReset\", []);\n\n\tview._loading_data = true;\n\tview.callEvent(\"onDataParse\", [obj]);\n\tview._loading_data = false;\n\n\tview._table.refresh();\n\tif(view.config.bottombar)\n\t\tview.$$(\"sheets\").refresh();\n}\n\nfunction copy(view){\n\tadd(view, view.serialize());\n}\n\nfunction callAction(view, id){\n\tif(!view.$sheetMenu.data.getMark(id, \"webix_disabled\")){\n\t\tif(actionMap[id])\n\t\t\tactionMap[id](view);\n\t\telse\n\t\t\tview.callEvent(\"onCommand\", [{id}]);\n\t}\n}\n\n","import {getSheet} from \"../sheets\";\nimport {isCell, adress, range as getRange} from \"../helpers/column_names\";\n\nfunction error(view, silent){\n\tif(!silent)\n\t\tview.alert({\n\t\t\ttype: \"alert-error\",\n\t\t\ttext: webix.i18n.spreadsheet.labels[\"error-link\"]\n\t\t});\n\treturn false;\n}\n\nexport function showCells(view, ref, silent) {\n\ttry {\n\t\tlet r1, r2, c1, c2, sheet;\n\n\t\tlet cellRef = ref.split(\"!\");\n\t\tswitch(cellRef.length){\n\t\t\tcase 1:\n\t\t\t\t[cellRef] = cellRef;\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\t[sheet, cellRef] = cellRef;\n\t\t\t\tif(sheet.indexOf(\" \") != -1 && (sheet[0] != \"'\" || sheet[sheet.length - 1] != \"'\"))\n\t\t\t\t\treturn error(view, silent);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn error(view, silent);\n\t\t}\n\n\t\tif(isCell(cellRef))\n\t\t\t[r1, c1] = adress(cellRef);\n\t\telse{\n\t\t\tconst rangePos = getRange(ref, view);\n\t\t\tif(rangePos)\n\t\t\t\t[r1, c1, r2, c2, sheet] = rangePos;\n\t\t\telse\n\t\t\t\treturn error(view, silent);\n\t\t}\n\n\t\tif(sheet){\n\t\t\tsheet = sheet.replaceAll(\"'\", \"\");\n\t\t\tif(!getSheet(view, sheet))\n\t\t\t\treturn error(view, silent);\n\t\t\tif(sheet != view.getActiveSheet())\n\t\t\t\tview.showSheet(sheet);\n\t\t}\n\n\t\tconst grid = view.$$(\"cells\");\n\t\tgrid.showCell(r1, c1);\n\t\tgrid.addSelectArea(\n\t\t\t{ row: r1, column: c1 },\n\t\t\t{ row: r2 || r1, column: c2 || c1 }\n\t\t);\n\n\t\treturn true;\n\t}\n\tcatch(err){\n\t\treturn error(view, silent);\n\t}\n}","import * as cop from \"./operations/column_operations\";\nimport {getConditionCss} from \"./operations/conditional_formats\";\nimport * as nms from \"./helpers/column_names\";\nimport * as fmt from \"./operations/formats\";\nimport {showCells} from \"./operations/show_cells\";\n\nexport function init(view, extra){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\tvar datatable = {\n\t\tview:\"datatable\", id:\"cells\", css:\"webix_ssheet_table webix_data_border wss_\"+view.$index,\n\t\theaderRowHeight: webix.skin.$name == \"contrast\" || webix.skin.$name == \"flat\" ? 24 : 20,\n\t\tspans: true,\n\t\tleftSplit: 1,\n\t\tareaselect:true,\n\t\tminColumnWidth:38,\n\t\teditable:true,\n\t\teditaction:(extra.liveEditor ? \"custom\" : \"dblclick\"),\n\t\tminRowHeight:1,\n\t\tnavigation:true,\n\t\tonClick:{ \n\t\t\t\"webix_ssheet_ref\" : event => {\n\t\t\t\tconst ref = event.target.getAttribute(\"data-ref\").replaceAll(\"&#x27;\", \"'\");\n\t\t\t\tif(showCells(view, ref))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n\n\tif (extra)\n\t\tdatatable = webix.extend(datatable, extra, true);\n\n\treturn datatable;\n}\n\nfunction ready(view){\n\tvar grid = view._table;\n\n\tvar showCommentHandler = webix.event(document.body, \"pointermove\", function(){\n\t\tvar thread;\n\t\treturn function(e) {\n\t\t\tif (e.pointerType !== \"mouse\") return;\n\n\t\t\tclearTimeout(thread);\n\t\t\tthread = webix.delay(function(e){\n\t\t\t\tif(view.comments._activeComment.editStatus)\n\t\t\t\t\treturn;\n\n\t\t\t\tvar cell = grid.locate(e);\n\t\t\t\tvar visible = view.comments.commentsView && view.comments.commentsView.isVisible();\n\n\t\t\t\tif(cell && view.comments.get(cell.row, cell.column)){\n\t\t\t\t\tvar activeCell = view.comments._activeComment.cell;\n\t\t\t\t\tif((activeCell && (activeCell.row != cell.row || activeCell.column != cell.column)) || !visible)\n\t\t\t\t\t\tview.callEvent(\"onCommand\",[{id: \"add-comment\", cell, viewonly: true }]);\n\t\t\t\t}\n\t\t\t\telse if(visible && !view.comments.commentsView.$view.contains(e.target))\n\t\t\t\t\tview.callEvent(\"onCommentHide\", []);\n\t\t\t}, true, [e], 250);\n\t\t};\n\t}());\n\n\t//in grid math\n\tif (view.config.math){\n\t\tgrid.config.editMath = true;\n\t}\n\n\t//saving value after edit\n\tgrid.attachEvent(\"onBeforeEditStop\", (st, ed) => {\n\t\tgrid.$anyKey = false;\n\t\t//ignore empty cells\n\t\tif (st.old === webix.undefined && st.value === \"\") return;\n\n\t\tif (st.value != st.old){\n\t\t\tview.setCellValue(ed.row, ed.column, st.value);\n\t\t\tgrid.refresh();\n\t\t}\n\t\tst.value = st.old;\n\t});\n\n\tgrid.attachEvent(\"onEnter\", function(ev){\n\t\tif (grid.getEditor()){\n\t\t\twebix.delay(function(){\n\t\t\t\tgrid.moveSelection(\"down\");\n\t\t\t});\n\t\t}\n\t\twebix.html.preventEvent(ev);\n\t});\n\n\t//prevent editing of locked cells\n\tview.attachEvent(\"onBeforeEditStart\", (row, column) => !view.isCellLocked(row, column));\n\tgrid.attachEvent(\"onAfterEditStart\", ({row, column}) => {\n\t\tlet v = view.getCellValue(row, column);\n\n\t\tif(grid.$anyKey){\n\t\t\tgrid.$anyKey = false;\n\t\t\tv = \"\";\n\t\t}\n\n\t\tgrid.getEditor().setValue(v);\n\t});\n\tgrid.attachEvent(\"onBeforeEditStart\", (editor) => \n\t\tview.callEvent(\"onBeforeEditStart\", [editor.row, editor.column]) );\n\n\t//column drag event checking\n\tlet dragStartColumn;\n\tlet dragEndColumn;\n\n\t//column and row selection\n\tgrid.attachEvent(\"onBeforeSelect\", (id) => id.column != \"rowId\" );\n\tgrid.attachEvent(\"onBeforeBlockSelect\", (start, end, finalStep) => {\n\t\tcop.highlightColRow(\n\t\t\tfinalStep ? start : webix.copy(start),\n\t\t\tfinalStep ? end : webix.copy(end),\n\t\t\tview\n\t\t);\n\t});\n\n\tfunction highlightHeaders(){\n\t\tlet ids = grid.getSelectedId(true);\n\t\tif(ids.length){\n\t\t\tlet start = ids[0];\n\t\t\tlet end = ids[ids.length-1]?ids[ids.length-1]:ids[0];\n\t\t\tcop.highlightColRow(start, end, view);\n\t\t}\n\t\telse {\n\t\t\tlet data = {row:0, column:0};\n\t\t\tcop.highlightColRow(data, data, view);\n\t\t}\n\t}\n\n\tgrid.attachEvent(\"onSelectChange\", () => highlightHeaders());\n\tgrid.attachEvent(\"onAfterColumnShow\", () => {\n\t\twebix.delay(() => highlightHeaders());\n\t});\n\tgrid.attachEvent(\"onColumnResize\", () => {\n\t\twebix.delay(() => highlightHeaders());\n\t});\n\n\twebix.event(grid.$view.firstChild, \"mousedown\", e => {\n\t\tconst resizeColumn = grid.config.resizeColumn;\n\t\tconst col = grid.locate(e);\n\n\t\tif(col && col.cind){\n\t\t\tif(resizeColumn){\n\t\t\t\tconst dx = grid.getColumnConfig(col.column).width;\n\t\t\t\tconst pos = webix.html.posRelative(e);\n\t\t\t\tif(pos.x < resizeColumn.size || dx-pos.x < resizeColumn.size+1)\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t\tdragStartColumn = col.cind;\n\t\t}\n\t});\n\n\twebix.event(grid.$view.firstChild, \"mousemove\", e => {\n\t\tif(dragStartColumn){\n\t\t\tconst col = grid.locate(e);\n\n\t\t\tif(col){\n\t\t\t\tdragEndColumn = col.cind;\n\t\t\t\tcop.highlightColRow(\n\t\t\t\t\t{column: grid.columnId(dragStartColumn)},\n\t\t\t\t\t{column: grid.columnId(dragEndColumn||1)},\n\t\t\t\t\tview\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t});\n\n\tconst selectColumnHandler = webix.event(document.body, \"mouseup\", () => {\n\t\tif(dragStartColumn){\n\t\t\tif(dragEndColumn != null){\n\t\t\t\tcop.selectColumn(\n\t\t\t\t\tgrid.columnId(dragStartColumn),\n\t\t\t\t\tview,\n\t\t\t\t\tgrid.columnId(dragEndColumn||1)\n\t\t\t\t);\n\t\t\t\tdragEndColumn = null;\n\t\t\t}\n\t\t\tdragStartColumn = null;\n\t\t}\n\t});\n\n\tgrid.attachEvent(\"onItemDblClick\", (id) => {\n\t\tif (id.column === \"rowId\")\n\t\t\tcop.adjustRow(id.row, view);\n\t});\n\n\tlet lastHeaderClick = 0;\n\tgrid.attachEvent(\"onHeaderClick\", (id, e) => {\n\t\tif(id.column == \"rowId\"){\n\t\t\tcop.selectAll(view);\n\t\t\treturn;\n\t\t}\n\t\tlet headerClick = new Date();\n\t\tlet dblClick = (headerClick - lastHeaderClick <= 300);\n\n\t\tif (dblClick) {\n\t\t\tcop.adjustColumn(id.column, view);\n\t\t} else {\n\t\t\tlastHeaderClick = headerClick;\n\t\t\tif (e.shiftKey) {\n\t\t\t\tcop.selectColumns(id.column, view);\n\t\t\t} else {\n\t\t\t\tcop.selectColumn(id.column, view);\n\t\t\t}\n\t\t}\n\t});\n\n\t//select rows by shift click\n\tvar lastClickedRow = null;\n\tgrid.attachEvent(\"onItemClick\", (cell, e) => {\n\t\tif (cell.column === \"rowId\") {\n\t\t\tif (!e.shiftKey)\n\t\t\t\tcop.selectRow(cell.row, view);\n\t\t\telse {\n\t\t\t\tif (!lastClickedRow)\n\t\t\t\t\tcop.selectRow(cell.row, view);\n\t\t\t\telse\n\t\t\t\t\tcop.selectRow(lastClickedRow, view, cell.row);\n\t\t\t}\n\t\t\tlastClickedRow = cell.row;\n\t\t}\n\t});\n\n\t//reset API\n\tview.attachEvent(\"onReset\", () => reset(view));\n\n\tview.attachEvent(\"onBeforeSheetShow\", () => grid.editStop());\n\n\tgrid.attachEvent(\"onBlur\", function(){\n\t\t//after focus moved out, check and if it is somewhere\n\t\t//on the spreadsheet controls them move focus back to datatable\n\t\twebix.delay(function(){\n\t\t\tvar target = document.activeElement;\n\n\t\t\tif (target && target.tagName == \"INPUT\") return;\n\n\t\t\tvar focus = webix.UIManager.getFocus();\n\t\t\tvar need_focus = focus &&\n\t\t\t\tfocus != grid &&\n\t\t\t\tfocus.getTopParentView &&\n\t\t\t\tfocus.getTopParentView() === view;\n\n\t\t\tif (need_focus)\n\t\t\t\twebix.UIManager.setFocus(grid);\n\n\t\t}, this, [], 100);\n\t});\n\n\tsetDefaultCss(view);\n\n\tview.attachEvent(\"onDestruct\", () => {\n\t\twebix.eventRemove(showCommentHandler);\n\t\twebix.eventRemove(selectColumnHandler);\n\t});\n}\n\nexport function cell_template(view, obj, common, _v, column, valueOnly){\n\tconst formulasMode = view.$$(\"cells\").config.showFormulas && !valueOnly;\n\n\tconst col = column.id;\n\tconst row = obj.id;\n\n\tif (!view._mPage) return \"\";\n\tconst cell = view._mPage.getCell(row-1, col-1);\n\n\tlet value = cell ? cell.value : \"\";\n\tconst format = cell ? cell.format : \"\";\n\n\tconst math = view.getCellValue(row, col);\n\n\tif(formulasMode)\n\t\tvalue = math;\n\n\tif(math != value){\n\t\tconst locale = webix.i18n.spreadsheet.table;\n\t\tif(value == \"#REF!\")\n\t\t\tvalue = locale[\"math-ref-error\"];\n\t\telse if(value == \"#ERROR\")\n\t\t\tvalue = locale[\"math-error\"];\n\t}\n\n\tlet css = \"\";\n\tconst text = (typeof value == \"string\" && value.trim()[0] == \"+\") || (!value && value !== 0) || isNaN(value);\n\tconst invalidDate = !formulasMode && fmt.checkFormat(format, \"date\") && fmt.isDateInvalid(value);\n\n\tlet extra = \"\";\n\tif (!valueOnly){\n\t\textra += view.comments.get(row, col) ? \"<div class='ssheet_commented_sign'></div>\" : \"\";\n\t\textra += view.getCellFilter(row, col) ? \"<div class='ssheet_filter_sign'></div>\" : \"\";\n\t}\n\n\t//text can be formatted only in case of string number format\n\tif(!invalidDate && (typeof value == \"boolean\" || !text || fmt.checkFormat(format, \"string\"))){\n\t\tif (format){\n\t\t\tconst cell = { css:\"\" };\n\t\t\tconst helper = fmt.getFormat(format);\n\t\t\tif (helper){\n\t\t\t\tlet newValue = helper(value, cell);\n\n\t\t\t\tif(newValue != webix.i18n.spreadsheet.table[\"format-error\"]){\n\t\t\t\t\tif (cell.css)\n\t\t\t\t\t\tcss = `class=\"${cell.css}\"`;\n\t\t\t\t\tvalue = newValue;\n\t\t\t\t}\n\t\t\t\telse if(!text)\n\t\t\t\t\tvalue *= 1;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tvalue *= 1;\n\t}\n\n\t//print only cell values (td with position:relative ignores borders while printing)\n\tif(view._print && !(value || value === 0))\n\t\treturn \"\";\n\n\tif(webix.isUndefined(value) || value === null)\n\t\tvalue = \"\";\n\n\treturn `<div ${css}>${value}</div>${view._print ? \"\" : extra}`;\n}\n\nexport function reset(view){\n\tconst grid = view.$$(\"cells\");\n\tgrid.clearAll();\n\n\tconst columns = view.config.columnCount;\n\tconst rows = view.config.rowCount;\n\n\tconst cols = [{\n\t\tid:\"rowId\", header:\"\", width:40,\n\t\tcss:\"sheet_column_0\",\n\t\ttemplate:(el) => {\n\t\t\treturn el.id;\n\t\t}\n\t}];\n\n\tfor (let i=1; i<=columns; i++){\n\t\tcols.push({\n\t\t\tid:i,\n\t\t\teditor:\"text\",\n\t\t\theader:{\n\t\t\t\ttext: nms.encode[i]\n\t\t\t},\n\t\t\ttemplate:function(obj, common, value, column){\n\t\t\t\treturn cell_template(view, obj, common, value, column);\n\t\t\t},\n\t\t\tcssFormat:function(value, obj, row, column){\n\t\t\t\tconst rendered = getRenderedValue(view, row, column);\n\t\t\t\tconst cell = view._mPage.getCell(row-1, column-1);\n\n\t\t\t\tlet css = cell ? (cell.style || \"\") : \"\";\n\n\t\t\t\tconst conditional = getConditionCss(view, row, column, rendered);\n\t\t\t\tif(conditional)\n\t\t\t\t\tcss += (css ? \" \" : \"\") + conditional;\n\n\t\t\t\tconst borders = view._printBorders.$render;\n\t\t\t\tif(borders){\n\t\t\t\t\tif(borders.cols[column])\n\t\t\t\t\t\tcss += (css ? \" \" : \"\") + \"webix_ss_print_border_right\";\n\t\t\t\t\tif(borders.rows[row])\n\t\t\t\t\t\tcss += (css ? \" \" : \"\") + \"webix_ss_print_border_bottom\";\n\t\t\t\t}\n\n\t\t\t\treturn css;\n\t\t\t}\n\t\t});\n\t\tview.callEvent(\"onColumnInit\",[cols[i]]);\n\t}\n\tgrid.refreshColumns(cols);\n\n\tconst data = [];\n\tfor (let i=1; i<=rows; i++)\n\t\tdata.push({ id:i });\n\n\tgrid.parse(data);\n}\n\nexport function getRenderedValue(view, row, col){\n\tconst htmlFilter = /<[^>]*>/gi;\n\treturn cell_template(view, {id: row}, null, null, {id: col}, true).replace(htmlFilter, \"\");\n}\n\n// nowrap by default\nfunction setDefaultCss(view){\n\twebix.html.addStyle(\"#\"+view._table.$view.id+\".webix_dtable .webix_cell { white-space:nowrap;}\");\n}\n","import group from \"./operations/undo_group\";\nimport {selectAll} from \"./operations/column_operations\";\nimport {styleFormats} from \"./toolbar/buttons\";\n\nexport function init(view){\n\tconst grid = view.$$(\"cells\");\n\tconst key = webix.env.isMac ? \"command\" : \"ctrl\";\n\n\twebix.UIManager.addHotKey(key+\"-a\", () => { if(!grid.getEditor()) selectAll(view); }, grid);\n\twebix.UIManager.addHotKey(key+\"-p\", (v, e) => dialog(\"print\", view, e), grid);\n\n\tif(!view.config.readonly){\n\t\twebix.UIManager.addHotKey(\"any\", (view, ev) => {\n\t\t\tconst code = ev.which || ev.keyCode;\n\t\t\tconst f2 = code == 113;\n\n\t\t\t//ignore shift key, f1, f3 - f12 (f2 - edit)\n\t\t\tif (code == 16 || (code >= 112 && code <= 123 && !f2)) return;\n\n\t\t\tconst sel = view.getSelectedId(true);\n\t\t\tif (sel.length){\n\t\t\t\tif(!(view.config.liveEditor && f2))\n\t\t\t\t\tgrid.$anyKey = true;\n\t\t\t\tgrid.edit(sel[0]);\n\t\t\t}\n\t\t}, grid);\n\n\t\twebix.UIManager.addHotKey(\"enter\", (view) => {\n\t\t\tconst sel = view.getSelectedId(true);\n\t\t\tif (sel.length){\n\t\t\t\tif(!(view.config.liveEditor && !grid.callEvent(\"onBeforeLiveEditor\", [sel[0]])))\n\t\t\t\t\tgrid.edit(sel[0]);\n\t\t\t}\n\t\t}, grid);\n\n\t\twebix.UIManager.addHotKey(\"backspace\", () => del(view), grid);\n\t\twebix.UIManager.addHotKey(\"delete\", () => del(view), grid);\n\n\t\tconst redo = webix.env.isMac ? \"command-shift-z\" : \"ctrl-y\";\n\t\twebix.UIManager.addHotKey(redo, () => view.redo(), grid);\n\t\twebix.UIManager.addHotKey(key+\"-z\", () => view.undo(), grid);\n\n\t\twebix.UIManager.addHotKey(key+\"-b\", () => styleHotKey(view, \"font-weight\"), grid);\n\t\twebix.UIManager.addHotKey(key+\"-i\", () => styleHotKey(view, \"font-style\"), grid);\n\t\twebix.UIManager.addHotKey(key+\"-u\", (v, e) => ctrlU(view, e), grid);\n\n\t\tconst strike = webix.env.isMac ? \"command-shift-x\" : \"ctrl-alt-s\";\n\t\twebix.UIManager.addHotKey(strike, () => styleHotKey(view, \"strike\"), grid);\n\n\t\twebix.UIManager.addHotKey(key+\"-`\", () => view.showFormulas(\"toggle\"), grid);\n\t}\n}\n\nfunction del(view) {\n\tif(!view.$$(\"cells\").getEditor())\n\t\tgroup.set(function(){\n\t\t\tview.eachSelectedCell((cell) => view.setCellValue(cell.row,cell.column, \"\"));\n\t\t\tview.refresh();\n\t\t});\n}\n\nfunction ctrlU(view, e) {\n\tstyleHotKey(view, \"underline\");\n\treturn webix.html.preventEvent(e);\n}\n\nfunction dialog(id, view, e) {\n\tview.callEvent(\"onCommand\",[{id}]);\n\treturn webix.html.preventEvent(e);\n}\n\nfunction styleHotKey(view, attr) { \n\tvar cell = view.getSelectedId();\n\tif(cell){\n\t\tvar style = view.getStyle(cell.row, cell.column);\n\n\t\tvar elementOn = styleFormats[attr]||attr;\n\t\tvar elementOff = \"normal\";\n\n\t\tvar state = (style && style.props[attr] === elementOn)? elementOff : elementOn;\n\t\tview.callEvent(\"onStyleSet\", [attr, state]);\n\t}\n}","import {methods} from \"@xbs/muon\";\nimport {toRange} from \"./helpers/column_names\";\n\nlet methodsName = [];\nfor(let name in methods)\n\tmethodsName.push(name);\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn {\n\t\tview:\"toolbar\",\n\t\tcss:\"webix_ssheet_toolbar\",\n\t\telements:[\n\t\t\t{\n\t\t\t\tview:\"text\",\n\t\t\t\ticon: \"wxi-menu-down\",\n\t\t\t\ton: {\n\t\t\t\t\tonItemClick: function(){\n\t\t\t\t\t\tconst suggest = webix.$$(this.config.suggest);\n\t\t\t\t\t\tif(!suggest.isVisible())\n\t\t\t\t\t\t\tsuggest.show(this.getInputNode());\n\t\t\t\t\t},\n\t\t\t\t\tonChange: (val, oldVal, config) => {\n\t\t\t\t\t\tif(config == \"user\" && val !== \"\")\n\t\t\t\t\t\t\tview.showCell(val);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tsuggest: {\n\t\t\t\t\tview:\"ssheet-suggest-labels\",\n\t\t\t\t\tcss: \"webix_ssheet_nav_suggest\",\n\t\t\t\t\tbody: {\n\t\t\t\t\t\ttemplate: \"<span class='webix_ssheet_left'>#name#</span><span class='webix_ssheet_right'>#value#</span>\",\n\t\t\t\t\t\twidth: 250\n\t\t\t\t\t},\n\t\t\t\t\ton:{\n\t\t\t\t\t\tonBeforeShow: function(){\n\t\t\t\t\t\t\tconst data = view.ranges.serialize(view.getActiveSheet()).map(r => ({name: r[0], value: r[1]}));\n\n\t\t\t\t\t\t\tif(!data.length)\n\t\t\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t\t\tconst list = this.getList();\n\t\t\t\t\t\t\tlist.clearAll();\n\t\t\t\t\t\t\tlist.parse(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdata: []\n\t\t\t\t},\n\t\t\t\twidth: 150,\n\t\t\t\tid: \"navigation\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"ssheet-separator\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"label\",\n\t\t\t\tlabel:webix.i18n.spreadsheet.liveEditor[\"edit\"],\n\t\t\t\twidth:65\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"live-editor\",\n\t\t\t\tdisabled:true,\n\t\t\t\tid:\"liveEditor\",\n\t\t\t\tsuggestData: methodsName\n\t\t\t}\n\t\t]\n\t};\n}\n\nfunction ready(view){\n\tconst editor = view.$$(\"liveEditor\");\n\tconst nav = view.$$(\"navigation\");\n\tconst grid = view._table;\n\n\t//block native editor, and move focus to the custom input\n\t//edit by key press\n\tgrid.attachEvent(\"onBeforeEditStart\", function(cell){\n\t\tconst mode = grid.$anyKey;\n\t\tgrid.$anyKey = false;\n\n\t\treturn startEdit(this, cell, mode);\n\t});\n\t//edit by enter key\n\tgrid.attachEvent(\"onBeforeLiveEditor\", function(cell){\n\t\treturn startEdit(this, cell, false);\n\t});\n\t//edit by dbl-click\n\tgrid.attachEvent(\"onItemDblClick\", function(cell){\n\t\tif(view.getCellEditor(cell.row, cell.column))\n\t\t\tthis.edit(cell);\n\t\telse\n\t\t\tstartEdit(this, cell, false);\n\t});\n\n\tgrid.attachEvent(\"onAfterScroll\", function(){\n\t\tif(editor.$view.contains(document.activeElement))\n\t\t\teditor.paintValue();\n\t});\n\n\tview.attachEvent(\"onCellChange\", (r,c,v,p) => {\n\t\tif(p == view.getActiveSheet()){\n\t\t\tconst cell = editor.config.activeCell;\n\t\t\tif (cell && cell.row == r && cell.column == c)\n\t\t\t\teditor.setValue(v);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAfterSelect\", (data) => {\n\t\tif (!view.$handleSelection){\n\t\t\tlet cell = data[0];\n\t\t\tfillEditor(cell);\n\t\t\tsetNavRange(view.getSelectedRange());\n\t\t}\n\t});\n\n\tgrid.attachEvent(\"onBeforeBlockSelect\", (start, end) => {\n\t\tlet r1 = start.row, r2 = end.row;\n\t\tif(r1 > r2)\n\t\t\t[r1, r2] = [r2, r1];\n\t\tlet c1 = start.column, c2 = end.column;\n\t\tif(c1 > c2)\n\t\t\t[c1, c2] = [c2, c1];\n\t\tsetNavRange(toRange(r1, c1, r2, c2));\n\t});\n\n\tview.attachEvent(\"onChange\", (mode) => {\n\t\tif (mode == \"update\" && editor.isEnabled()){\n\t\t\tconst cell = editor.config.activeCell;\n\t\t\tif(cell && editor.getValue() != view.getCellValue(cell.row, cell.column)){\n\t\t\t\tdelete editor._update_range;\n\t\t\t\teditor.showActiveSheet();\n\t\t\t\teditor.updateCellValue();\n\t\t\t}\n\t\t}\n\t});\n\n\tview.attachEvent(\"onBeforeSheetShow\", (name)=> {\n\t\tif(view._rangeDialog)\n\t\t\treturn;\n\t\tconst cell = editor.config.activeCell;\n\t\tif(cell){\n\t\t\tconst cursor = editor.getInputNode().selectionStart;\n\t\t\tconst val = editor.getValue();\n\t\t\tif(view.getCellValue(cell.row, cell.column) != val){\n\t\t\t\tif(!editor._activeMath)\n\t\t\t\t\teditor._activeMath = view.getActiveSheet();\n\t\t\t\twebix.delay(()=>{\n\t\t\t\t\tif(name == editor._activeMath){\n\t\t\t\t\t\tview.$handleSelection = null;\n\t\t\t\t\t\tconst cell = editor.config.activeCell;\n\t\t\t\t\t\tgrid.select(cell.row, cell.column);\n\t\t\t\t\t}\n\n\t\t\t\t\teditor.setValue(val);\n\t\t\t\t\t//update highlight\n\t\t\t\t\teditor.refresh();\n\n\t\t\t\t\teditor.getInputNode().setSelectionRange(cursor, cursor);\n\t\t\t\t\teditor.paintValue();\n\n\t\t\t\t\tview.$handleSelection = function(a,b,st,en){ return pasteRange(st, en, a); };\n\t\t\t\t});\n\t\t\t}\n\t\t\telse{\n\t\t\t\tnav.setValue(\"\");\n\t\t\t\tclearEditor();\n\t\t\t}\n\t\t}\n\t});\n\n\tview.attachEvent(\"onReset\", () => {\n\t\tif(!view._rangeDialog)\n\t\t\tview.$handleSelection = null;\n\t});\n\tview.$$(\"cells\").attachEvent(\"onFocus\", ()=>{\n\t\t//ignore table clipboard logic\n\t\tif(editor._activeMath){\n\t\t\twebix.delay(()=>editor.focus());\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAfterLoad\", () => clearEditor());\n\n\tview.attachEvent(\"onAction\", function(name, options){\n\t\tconst cell = editor.config.activeCell;\n\t\tconst isActiveCell = cell && cell.row == options.row && cell.column == options.column;\n\t\tif(isActiveCell && (name == \"lock\" || name == \"dropdown\"))\n\t\t\tdisableEditor(options.row, options.column);\n\t});\n\n\tview.attachEvent(\"onFormatChange\", (r, c) => updateEditor(r, c));\n\tview.attachEvent(\"onCellChange\", (r, c, v , p) => {\n\t\tif(p == view.getActiveSheet())\n\t\t\tupdateEditor(r, c);\n\t});\n\n\tfunction updateEditor(row, column){\n\t\tconst activeCell = editor.config.activeCell;\n\t\tif(activeCell && activeCell.row == row && activeCell.column == column)\n\t\t\tfillEditor({row, column});\n\t}\n\n\tfunction startEdit(table, cell, clear){\n\t\t//do not interfere with custom editors\n\t\tif (!view.getCellEditor(cell.row, cell.column) && fillEditor(cell, clear)){\n\t\t\teditor.focus();\n\n\t\t\tif(!clear){\n\t\t\t\teditor.paintValue();\n\n\t\t\t\tconst input = editor.getInputNode();\n\t\t\t\tconst symbols = input.value.length;\n\t\t\t\tinput.setSelectionRange(symbols, symbols);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tfunction disableEditor(row,column){\n\t\tconst disabled = view.getCellEditor(row, column) || view.isCellLocked(row, column);\n\t\tif(disabled)\n\t\t\teditor.disable();\n\t\telse\n\t\t\teditor.enable();\n\t\treturn disabled;\n\t}\n\n\tfunction fillEditor(cell, clear){\n\t\tconst disabled = disableEditor(cell.row, cell.column);\n\t\teditor.config.activeCell = cell;\n\t\teditor.setValue( clear ? \"\" : editor.getCellValue(cell.row, cell.column) );\n\n\t\tif(!view._rangeDialog)\n\t\t\tview.$handleSelection = disabled ? null : function(a,b,st,en){ return pasteRange(st, en, a); };\n\n\t\treturn !disabled;\n\t}\n\n\tfunction pasteRange(st, en, cell){\n\t\tconst updateRange = editor._update_range;\n\t\tlet cursor = editor.getInputNode().selectionStart;\n\n\t\tlet sheet = \"\";\n\t\tif(editor._activeMath){\n\t\t\tconst activeSheet = view.getActiveSheet();\n\t\t\tif(editor._activeMath != activeSheet)\n\t\t\t\tsheet = editor.prepareSheet(activeSheet);\n\t\t}\n\n\t\tlet range;\n\t\tif(st == en){\n\t\t\tconst colon = editor.getValue()[ (updateRange ? updateRange.pos : cursor)-1 ] == \":\";\n\t\t\trange = colon ? st : sheet+st;\n\t\t}\n\t\telse\n\t\t\trange = `${sheet+st}:${en}`;\n\n\t\tif(updateRange && updateRange.pos == cursor - updateRange.len){\n\t\t\teditor.setRange(range, true);\n\t\t\tcursor = editor._update_range.pos + range.length;\n\t\t}\n\t\telse if(editor.expectOperator()){\n\t\t\teditor.setRange(range);\n\t\t\tcursor += range.length;\n\t\t}\n\t\telse\n\t\t\treturn endEdit(cell);\n\n\t\teditor.focus();\n\t\teditor.getInputNode().setSelectionRange(cursor, cursor);\n\t\teditor.paintValue();\n\n\t\treturn false;\n\t}\n\n\tfunction endEdit(st){\n\t\tif (editor.isEnabled()){\n\t\t\tconst cell = editor.config.activeCell;\n\t\t\teditor.showActiveSheet();\n\t\t\teditor.updateCellValue(cell);\n\t\t\teditor.setValue(st ? view.getCellValue(st.row, st.column) : \"\");\n\t\t}\n\t\treturn true;\n\t}\n\n\tfunction clearEditor(){\n\t\teditor.define({activeCell:null});\n\t\teditor.setValue(\"\");\n\t\teditor.disable();\n\t}\n\n\tfunction setNavRange(ref){\n\t\tconst range = ref.split(\":\");\n\t\tif(range[0] == range[1])\n\t\t\tref = range[0];\n\t\tnav.setValue(ref);\n\t}\n}\n","import \"../views/formlate\";\n\nexport class Dialog{\n\tconstructor(view){\n\t\tthis.view = view;\n\t}\n\t$init(){}\n\t$show(){}\n\t$hide(){}\n\topen(){\n\t\tif(!this.$dialog){\n\t\t\tthis.$dialog = webix.ui(this.$init());\n\t\t\tthis.view._destroy_with_me.push(this.$dialog);\n\t\t\tthis.$dialog.attachEvent(\"onHide\", ()=> {\n\t\t\t\tthis.$hide();\n\t\t\t\twebix.UIManager.setFocus(this.view);\n\t\t\t});\n\t\t\tthis.$dialog.attachEvent(\"onShow\", ()=> {\n\t\t\t\twebix.UIManager.setFocus(this.$dialog);\n\t\t\t});\n\t\t}\n\t\telse if(this.$dialog.isVisible())\n\t\t\treturn;\n\n\t\tconst form = this.$dialog.getBody();\n\t\tthis.$dialog.show();\n\t\tif (this.$show(this.$dialog, form) === false)\n\t\t\tthis.close();\n\t}\n\tclose(){\n\t\tthis.$dialog.hide();\n\t}\n}","export function image(url){\n\treturn `=IMAGE(\"${url}\")`;\n}\n\nexport function chart(config){\n\tconfig = webix.copy(config);\n\n\tconst bar = config.type == \"bar\";\n\tif(bar && config.horizontal)\n\t\tconfig.type = \"barH\";\n\n\tlet result = `=SPARKLINE(${config.range},\"${config.type}\"`;\n\tif (bar)\n\t\tresult += `,\"${config.color}\",\"${config.negativeColor}\"`;\n\telse if(config.color)\n\t\tresult += `,\"${config.color}\"`;\n\treturn result+\")\";\n}\n\nexport function parseImage(value){\n\tif (value && value.indexOf(\"=IMAGE(\") === 0)\n\t\treturn {\n\t\t\turl: unescape(value.substr(7, value.length-8))\n\t\t};\n}\n\nexport function parseChart(value){\n\tif (value && value.indexOf(\"=SPARKLINE(\") === 0){\n\t\tlet text = value.substr(11, value.length-12).split(\",\");\n\t\tconst result = {\n\t\t\trange: text[0],\n\t\t\ttype: unescape(text[1]),\n\t\t\tcolor: unescape(text[2]),\n\t\t\tnegativeColor: unescape(text[3])\n\t\t};\n\n\t\tif(result.type == \"barH\"){\n\t\t\tresult.type = \"bar\";\n\t\t\tresult.horizontal = 1;\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nfunction unescape(text){\n\tif (!text) return \"\";\n\n\ttext = text.trim();\n\tif (text[0] === \"\\\"\") \n\t\ttext = text.substr(1);\n\tif (text[text.length-1] === \"\\\"\")\n\t\ttext = text.substr(0, text.length-1);\n\treturn text;\n}","import {Dialog} from \"./common\";\nimport {parseImage} from \"../mathematics/writer\";\n\nexport const action = \"add-image-cell\";\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tthis.cell = this.view.getSelectedId();\n\t\tif(!this.cell)\n\t\t\treturn false;\n\n\t\tform.elements.preview.setHTML(\"\");\n\t\tform.elements.url.setValue(\"\");\n\n\t\t//sync state of dialog to data with  the selected cell\n\t\tlet value = this.view.getCellValue(this.cell.row, this.cell.column);\n\t\tlet data = parseImage(value);\n\t\tif (data && data.url)\n\t\t\tform.elements.url.setValue(data.url);\n\n\t\tform.elements.url.focus();\n\t}\n\t$init(){\n\t\tconst save = this.view.config.save;\n\t\tconst server = (save && save.images) || null;\n\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: webix.i18n.spreadsheet.labels[\"image-title\"],\n\t\t\tmove: true,\n\t\t\tposition: \"center\",\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\telements:[\n\t\t\t\t\t{ view:\"text\", name:\"url\",  placeholder:webix.i18n.spreadsheet.labels[\"image-url\"], on:{\n\t\t\t\t\t\t\"onChange\":(image) => this.showPreview(image)\n\t\t\t\t\t}},\n\t\t\t\t\t{ view:\"label\", label:webix.i18n.spreadsheet.labels[\"image-or\"], align: \"center\"},\n\t\t\t\t\t{ view:\"uploader\", label:webix.i18n.spreadsheet.labels[\"image-upload\"], upload:server, on:{\n\t\t\t\t\t\tonBeforeFileAdd: function(file){\n\t\t\t\t\t\t\tif (!this.config.upload){\n\t\t\t\t\t\t\t\tconst reader = new FileReader();\n\t\t\t\t\t\t\t\treader.onload = (e) => this.getFormView().elements.url.setValue(e.target.result);\n\t\t\t\t\t\t\t\treader.readAsDataURL(file.file);\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tthis.getFormView().elements.preview.setHTML(\"\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonFileUpload: function(item, response){\n\t\t\t\t\t\t\tthis.getFormView().elements.url.setValue(response.imageURL);\n\t\t\t\t\t\t}\n\t\t\t\t\t}},\n\t\t\t\t\t{ view:\"formlate\", name:\"preview\", borderless: true, css: \"webix_ssheet_preview\", template:\"\", height:50 }\n\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\tokClick(){\n\t\tconst cell = this.cell;\n\t\tconst image = this.fillUrl(this.$dialog.getBody().elements.url.getValue());\n\t\tthis.view.addImage(cell.row, cell.column, image);\n\t\tthis.close();\n\t}\n\tfillUrl(url){\n\t\tif (!/^[/]|((https?:\\/|data:image)\\/)/i.test(url))\n\t\t\turl = \"http://\" + url;\n\t\treturn url;\n\t}\n\tshowPreview(image){\n\t\tif (image){\n\t\t\timage = webix.template.escape(this.fillUrl(image));\n\t\t\tthis.$dialog.queryView(\"form\").elements.preview.setHTML(\"<img class='webix_ssheet_cimage' src='\"+image+\"'></img>\");\n\t\t}\n\t}\n}","import * as box from \"./imagecell\";\n\nexport const action = \"add-image-top\";\n\nexport class DialogBox extends box.DialogBox{\n\topen(action){\n\t\tthis.config = action.config;\n\t\tthis.viewid = action.viewid;\n\n\t\tthis.view.callEvent(\"onUIEditStart\", [this.viewid, \"image\"]);\n\n\t\tbox.DialogBox.prototype.open.apply(this, arguments);\n\t}\n\t$hide(){\n\t\tthis.view.callEvent(\"onUIEditStop\", [this.viewid, \"image\"]);\n\t\tthis.config = this.viewid = null;\n\t}\n\t$init(){\n\t\tthis.view.attachEvent(\"onUIEditStart\", (id, type)=>{\n\t\t\tif(this.$dialog && this.$dialog.isVisible() && type != \"image\")\n\t\t\t\tthis.close();\n\t\t});\n\n\t\tthis.view.attachEvent(\"onCommand\", obj =>{\n\t\t\tif(obj.id == \"close-ui-editor\" && this.$dialog && this.$dialog.isVisible())\n\t\t\t\tthis.close();\n\t\t});\n\n\t\treturn box.DialogBox.prototype.$init.apply(this, arguments);\n\t}\n\t$show(box, form){\n\n\t\tform.elements.preview.setHTML(\"\");\n\t\tform.elements.url.setValue(\"\");\n\n\t\tif(this.config && this.config.data)\n\t\t\tform.elements.url.setValue(this.config.data);\n\n\t\tform.elements.url.focus();\n\t}\n\tokClick(){\n\t\tconst image = this.fillUrl(this.$dialog.getBody().elements.url.getValue());\n\t\tif(this.viewid)\n\t\t\tthis.view.views.update(this.viewid, image);\n\t\telse{\n\t\t\tconst id = this.view.views.add(null, null, \"image\", image);\n\t\t\tthis.view.views.highlight(id);\n\t\t}\n\t\tthis.close();\n\t}\n}","import {isCellLocked} from \"./lock_cell\";\nimport group from \"./undo_group\";\n\n\nvar ignoreUndoReset = false;\n\nexport function init(view){\n\treset(view);\n\tundoHandlers(view);\n\tview.attachEvent(\"onHardReset\", () => reset(view));\n\tview.attachEvent(\"onAfterSheetShow\", () => reset(view));\n\t// styles\n\tview.attachEvent(\"onBeforeStyleChange\", (row, column, nstyle, ostyle) =>{\n\t\tif (isCellLocked(view, row, column)) return false;\n\t\taddToHistory(view, {action: \"style\", row:row, column: column, value: ostyle, newValue: nstyle, group: group.value});\n\t});\n\t// editing\n\tview.attachEvent(\"onBeforeValueChange\", (row, column, nvalue, ovalue) => {\n\t\tif (isCellLocked(view, row, column)) return false;\n\t\taddToHistory(view, {action: \"value\", row:row, column: column, value: ovalue, newValue: nvalue, group: group.value});\n\t});\n\t// merge cells\n\tview.attachEvent(\"onBeforeSpan\", (row, column, value) => {\n\t\tif (isCellLocked(view, row, column)) return false;\n\t\taddToHistory(view, {action: \"span\", row:row, column: column, value: value, newValue:value, group: group.value});\n\t});\n\t// split cells\n\tview.attachEvent(\"onBeforeSplit\", (row, column, value) => {\n\t\tif (isCellLocked(view, row, column)) return false;\n\t\taddToHistory(view, {action: \"split\", row:row, column: column, value: value, newValue:value, group: group.value});\n\t});\n\t// Any abstract undo actions\n\tview.attachEvent(\"onAction\", (action, obj) =>\n\t\taddToHistory(\n\t\t\tview,\n\t\t\t{\n\t\t\t\taction: action,\n\t\t\t\trow: obj.row || null,\n\t\t\t\tcolumn: obj.column || null,\n\t\t\t\tvalue: webix.isUndefined(obj.value) ? null : obj.value,\n\t\t\t\tnewValue: webix.isUndefined(obj.newValue) ? null : obj.newValue,\n\t\t\t\textra: obj.extra || null,\n\t\t\t\tgroup: group.value\n\t\t\t}\n\t\t)\n\t);\n\n\t// column resize\n\tview.$$(\"cells\").attachEvent(\"onColumnResize\", (column, nvalue, ovalue) =>\n\t\taddToHistory(view, {action: \"c-resize\", row:0, column:column, value: ovalue, newValue: nvalue, group: group.value})\n\t);\n\t// column hide\n\tview.attachEvent(\"onColumnOperation\", (action, start, end) => {\n\t\tif (action !== \"add\" && action !== \"del\")\n\t\t\taddToHistory(view, { action:{id: action, group:\"column\"}, group: group.value, column: {\n\t\t\t\tstart: { column:start }, end: { column:end }\n\t\t\t}});\n\t});\n\t// row hide\n\tview.attachEvent(\"onRowOperation\", (action, start, end) => {\n\t\tif (action !== \"add\" && action !== \"del\")\n\t\t\taddToHistory(view, { action: {id: action, group:\"row\"}, group: group.value, row: {\n\t\t\t\tstart: {row: start}, end: {row: end}\n\t\t\t}});\n\t});\n\t// row resize\n\tview.$$(\"cells\").attachEvent(\"onRowResize\", (row,  nvalue, ovalue) =>\n\t\taddToHistory(view, {action: \"r-resize\", row: row, column:0, value: ovalue, newValue: nvalue, group: group.value})\n\t);\n\n\t// condition formats\n\tview.attachEvent(\"onBeforeConditionSet\", (row, column, value, nvalue) => {\n\t\tif (isCellLocked(view, row, column)) return false;\n\n\t\tvalue = value ? webix.copy(value) : null;\n\t\taddToHistory(view, {action: \"condition\", row: row, column: column, value: value, newValue: nvalue, group: group.value});\n\t});\n\tview.$skipHistory = 0;\n}\n\nexport function undo(view){\n\trestoreHistory(view,-1);\n}\n\nexport function redo(view){\n\trestoreHistory(view,1);\n}\n\nexport function reset(view){\n\tif(!ignoreUndoReset){\n\t\tview._ssUndoHistory = [];\n\t\tview._ssUndoCursor = -1;\n\t}\n}\n\nfunction addToHistory(view, data){\n\tif(!view.$skipHistory && !view._loading_data){\n\t\t// remove futher history\n\t\tview._ssUndoHistory.splice(view._ssUndoCursor+1);\n\t\t// add to an array and increase cursor\n\t\tview._ssUndoHistory.push(data);\n\t\tview._ssUndoCursor++;\n\t}\n}\n\nexport function ignoreUndo(func, view){\n\tview.$skipHistory++;\n\ttry{\n\t\tfunc.call(view);\n\t}\n\tfinally {\n\t\tview.$skipHistory--;\n\t}\n}\n\nexport function ignoreReset(func){\n\tignoreUndoReset = true;\n\tfunc();\n\tignoreUndoReset = false;\n}\n\nfunction restoreHistory(view, step){\n\tvar data = view._ssUndoHistory[step>0?(view._ssUndoCursor+step):view._ssUndoCursor];\n\tif(data){\n\t\tvar value = step > 0 ? data.newValue : data.value;\n\t\tvar direction = step>0;\n\t\tvar params = [data.action, data.row, data.column, value, direction, data.extra];\n\n\t\tview._ssUndoCursor += step;\n\n\t\t// group support\n\t\tvar group = data.group;\n\t\tvar prevData = view._ssUndoHistory[step>0?(view._ssUndoCursor+step):view._ssUndoCursor];\n\n\t\tignoreUndo(function(){\n\t\t\tview.callEvent(\"onUndo\", params);\n\t\t\tif (!group || !(prevData && group == prevData.group)){\n\t\t\t\tview.refresh();\n\t\t\t\tview.callEvent(\"onAfterUndo\", []);\n\t\t\t}\n\t\t},view);\n\n\t\tif(prevData && group && group == prevData.group){\n\t\t\trestoreHistory(view, step);\n\t\t}\n\t}\n}\n\nfunction undoHandlers(view){\n\tview.attachEvent(\"onUndo\", function(type, row, column, value) {\n\t\tswitch (type) {\n\t\t\tcase \"freeze-row\":\n\t\t\t\tview.freezeRows(value);\n\t\t\t\tbreak;\n\t\t\tcase \"freeze-column\":\n\t\t\t\tview.freezeColumns(value);\n\t\t\t\tbreak;\n\t\t}\n\t});\n}","import {range, toRange, changeRange, encode, isRange} from \"../helpers/column_names\";\nimport {ignoreUndo} from \"./undo\";\nimport * as arr from \"../helpers/array\";\n\nexport function init(view){\n\tconst grid = view._table.$view.querySelector(\".webix_ss_center\");\n\n\tview.views = {\n\t\tregister:function(type, render, track){\n\t\t\tif(!this._types[type])\n\t\t\t\tthis._types[type] = { render:render, track:track };\n\t\t},\n\t\tmove: function(id, x, y){\n\t\t\tconst win = webix.$$(id);\n\t\t\tconst old = webix.copy(this._pull[id]);\n\t\t\tthis._pull[id].x = _correctPos(view, win, x, \"x\");\n\t\t\tthis._pull[id].y = _correctPos(view, win, y, \"y\");\n\t\t\tview.callEvent(\"onAction\", [\"move-view\", { row:id, newValue:webix.copy(this._pull[id]), value:old} ]);\n\t\t\t_showOne(view, win, this._pull[id]);\n\t\t},\n\t\tadd: function(x, y, type, data, config, id){\n\t\t\tconfig = config || {};\n\t\t\tif(type == \"chart\"){\n\t\t\t\tconfig = webix.extend(config, {\n\t\t\t\t\ttype: \"line\",\n\t\t\t\t\tdataSeries:\"columns\"\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst height =  config.height || 300;\n\t\t\tconst width = config.width || 500;\n\n\t\t\tconst win = webix.ui({ \n\t\t\t\tid:id || \"$ssheet-ui\"+webix.uid(), // fixed id is for undo only\n\t\t\t\tview: \"ssheet-ui\",\n\t\t\t\tcontainer:grid, master:view._table.config.id,\n\t\t\t\twidth:width, height:height\n\t\t\t});\n\n\t\t\twin.attachEvent(\"onViewMoveEnd\", (x, y) => {\n\t\t\t\tconst state = view._table.getScrollState();\n\t\t\t\tthis.move(id, x, y+state.y);\n\t\t\t});\n\t\t\twin.attachEvent(\"onViewResize\", () => {\n\t\t\t\tconst conf =  this._pull[id];\n\t\t\t\tconst old = webix.copy(conf);\n\n\t\t\t\tconf.config.height = win.$height;\n\t\t\t\tconf.config.width = win.$width;\n\t\t\t\tview.callEvent(\"onAction\", [\"resize-view\", { row:id, newValue:webix.copy(conf), value:old } ]);\n\t\t\t});\n\t\t\twin.attachEvent(\"onViewEdit\", () => {\n\t\t\t\tconst config = this._pull[id];\n\t\t\t\tconst command = this._commands[config.type] || config.type;\n\t\t\t\tview.callEvent(\"onCommand\", [{ id:command, viewid:id, config }]);\n\t\t\t});\n\t\t\twin.attachEvent(\"onViewRemove\", () => this.remove(id));\n\n\t\t\tid = win.config.id;\n\n\t\t\tx = _correctPos(view, win, x, \"x\");\n\t\t\ty = _correctPos(view, win, y, \"y\");\n\n\t\t\tthis._pull[id] = { x, y, type, data, config };\n\t\t\tthis.update(id, data, config, true);\n\t\t\t_showOne(view, win, this._pull[id]);\n\n\t\t\treturn id; \n\t\t},\n\t\tremove: function(id){\n\t\t\tconst old = this._pull[id];\n\t\t\twebix.$$(id).close();\n\t\t\tdelete this._pull[id];\n\n\t\t\tview.callEvent(\"onAction\", [\"add-view\", { row:id, newValue:null, value:old } ]);\n\t\t},\n\t\tget:function(id){\n\t\t\treturn webix.$$(id).getBody();\n\t\t},\n\t\tgetConfig:function(id){\n\t\t\treturn this._pull[id];\n\t\t},\n\t\tupdate:function(id, data, config, inner){\n\t\t\tconst old = inner ? null : webix.copy(this._pull[id]);\n\t\t\tconst conf = this._pull[id];\n\t\t\tconst actions = this._types[conf.type];\n\n\t\t\tdata = data || config.data || \"\";\n\t\t\tconfig = config || {};\n\n\t\t\tdelete config.data;\n\n\t\t\tif(conf.type == \"chart\"){\n\t\t\t\tconst type = config.type;\n\t\t\t\tif(type && !config.series){\n\t\t\t\t\tconst xAxis = config.xAxis && config.xAxis.range;\n\t\t\t\t\tconst legend = config.legend && config.legend.range;\n\n\t\t\t\t\tlet oldLeftColumn;\n\t\t\t\t\tif(old && old.config){\n\t\t\t\t\t\tif(_isPie(type)){\n\t\t\t\t\t\t\tif(old.config.legend && old.config.legend.fromData)\n\t\t\t\t\t\t\t\toldLeftColumn = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(old.config.xAxis && old.config.xAxis.fromData)\n\t\t\t\t\t\t\toldLeftColumn = 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tconfig.series = _getSeries(view, data, config.dataSeries, {xAxis, legend}, oldLeftColumn);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst win = webix.$$(id);\n\n\t\t\tconst height = config.height || 300;\n\t\t\tconst width = config.width || 500;\n\n\t\t\tif(win.$width != width && win.$height != height){\n\t\t\t\twin.define({width, height});\n\t\t\t\twin.resize();\n\t\t\t}\n\n\t\t\tconf.data = data;\n\t\t\tconf.config = config;\n\n\t\t\tlet node = this.get(id);\n\n\t\t\tdata = _fromRange(view, conf);\n\n\t\t\tif(actions.render){\n\t\t\t\tconst renderConfig = webix.copy(conf);\n\n\t\t\t\t//clear width and height for inner view resizing\n\t\t\t\trenderConfig.config.width = renderConfig.config.height = 0;\n\n\t\t\t\tnode = actions.render(node, renderConfig, data);\n\t\t\t\t_processTables(node);\n\t\t\t}\n\n\t\t\tif(actions.track)\n\t\t\t\t_trackOne(view, node, actions.track, conf);\n\n\t\t\tview.callEvent(\"onAction\", [\"add-view\", { row:id, newValue:webix.copy(this._pull[id]), value:old} ]);\n\t\t},\n\t\thighlight:function(id){\n\t\t\tconst win = webix.$$(id);\n\t\t\tconst css = \"webix_ssheet_ui_focused\";\n\n\t\t\tconst oldWin = webix.$$(this._activeWin);\n\t\t\tif(oldWin && !oldWin.$destructed)\n\t\t\t\twebix.html.removeCss(oldWin.$view, css);\n\n\t\t\tif(win){\n\t\t\t\tthis._activeWin = id;\n\t\t\t\twebix.html.addCss(win.$view, css);\n\t\t\t}\n\t\t\telse\n\t\t\t\tdelete this._activeWin;\n\t\t},\n\t\t_commands:{\n\t\t\t\"image\":\"add-image-top\",\n\t\t\t\"chart\":\"add-chart\"\n\t\t},\n\t\t_types:{},\n\t\t_pull:{}\n\t};\n\n\t// handle events\n\tview._table.attachEvent(\"onResize\", () => _showAll(view) );\n\tview._table.attachEvent(\"onScrollY\", () => _showAll(view) );\n\tview._table.attachEvent(\"onScrollX\", () => _showAll(view) );\n\n\tview.attachEvent(\"onReset\", () => _reset(view));\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tconst move = type === \"move-view\";\n\t\tif (move || type == \"resize-view\" || type === \"add-view\")\n\t\t\t_undoUI(view, move, row, value);\n\t});\n\tview.attachEvent(\"onAction\", (action, p) => {\n\t\tif(action == \"header-hide\")\n\t\t\t_showAll(view);\n\t\telse if(action == \"before-grid-change\")\n\t\t\t_updateData(view, p.name, p.inc, p.data, p.start);\n\t});\n\tview.attachEvent(\"onColumnOperation\", () =>  _showAll(view, true));\n\tview.attachEvent(\"onRowOperation\", () => _showAll(view, true));\n\tview.attachEvent(\"onDataParse\", (data) => _parse(view, data));\n\tview.attachEvent(\"onDataSerialize\", (data, config) => _serialize(view, data, config));\n\tview.attachEvent(\"onCellChange\", (r,c,v,p) => {\n\t\tif(p == view.getActiveSheet())\n\t\t\t_trackAll(view);\n\t});\n\tview.attachEvent(\"onMathRefresh\", () => _trackAll(view));\n\n\tview.attachEvent(\"onDestruct\", () => {\n\t\tfor(let i in view.views._pull) webix.$$(i).destructor();\n\t});\n\n\tlet editUIType;\n\twebix.attachEvent(\"onClick\", function(ev){\n\t\tlet focus = webix.$$(ev);\n\t\tif(focus && focus.config.externalUI)\n\t\t\tfocus = webix.$$(focus.config.externalUI);\n\n\t\tconst ui = focus && (focus.queryView(\"ssheet-ui\",\"self\") || focus.queryView(\"ssheet-ui\",\"parent\"));\n\n\t\tif(ui){\n\t\t\tview.views.highlight(ui);\n\t\t\tconst id = ui.config.id;\n\n\t\t\tif(editUIType){\n\t\t\t\tif(view.views.getConfig(id).type == editUIType)\n\t\t\t\t\tui.callEvent(\"onViewEdit\", []); //start editing if any editor is open\n\t\t\t\telse\n\t\t\t\t\tview.callEvent(\"onCommand\", [{ id:\"close-ui-editor\" }]);\n\t\t\t}\n\t\t}\n\t\telse if(!editUIType)\n\t\t\tview.views.highlight();\n\t});\n\n\tview.attachEvent(\"onUIEditStart\", function(id, type){\n\t\tview.views.highlight(id);\n\t\teditUIType = type;\n\t});\n\n\tview.attachEvent(\"onUIEditStop\", function(id, type){\n\t\tif(editUIType == type)\n\t\t\twebix.delay(()=>{ // after onClick handler (to save focus)\n\t\t\t\teditUIType = null;\n\t\t\t});\n\t});\n\n\t// set default views\n\tview.views.register(\"chart\", (node, conf, data) => {\n\t\tconst dataRange = _getNames(view, conf);\n\t\tconst config = _genChartConfig(conf, data, dataRange);\n\t\treturn webix.ui(config, node);\n\t}, (view, data) => {\n\t\tview.clearAll();\n\t\tview.parse(data);\n\t});\n\n\tview.views.register(\"image\", (node, conf, data) => {\n\t\tconst config = webix.extend({ css:\"webix_ssheet_bgimage\", template:`<img src=\"${data}\"/>` }, conf.config||{}, true );\n\t\treturn webix.ui(config, node);\n\t});\n}\n\nfunction _parse(view, data){\n\tconst views = data.views;\n\tif(views){\n\t\tignoreUndo(function(){\n\t\t\tviews.forEach(obj => view.views.add.apply(view.views, obj));\n\t\t}, view);\n\t}\n}\n\nfunction _serialize(view, data, config){\n\tdata.views = [];\n\tfor(let i in view.views._pull){\n\t\tconst conf = view.views._pull[i];\n\t\tconst one = [conf.x, conf.y, conf.type, conf.data, conf.config];\n\t\tif(config && config.viewIds)\n\t\t\tone.push(i);\n\t\tdata.views.push(one);\n\t}\n}\n\nlet thread;\nfunction _trackAll(view){\n\tclearTimeout(thread);\n\tthread = webix.delay(() => {\n\t\tconst ui = view.views;\n\t\tfor(let id in ui._pull){\n\t\t\tconst conf = ui._pull[id];\n\n\t\t\tconst viewMethods = ui._types[conf.type];\n\t\t\tconst render = viewMethods.render;\n\t\t\tconst track = viewMethods.track;\n\n\t\t\tif(track)\n\t\t\t\t_trackOne(view, ui.get(id), track, conf, render);\n\t\t}\n\t});\n}\n\nfunction _trackOne(view, node, track, conf, render){\n\tconst data = _fromRange(view, conf);\n\n\tif(conf.type == \"chart\"){\n\t\tif(render)\n\t\t\tnode = render(node, conf, data, true);\n\n\t\tconst config = conf.config;\n\t\tif(config && !_isPie(config.type))\n\t\t\t_removeLegend(data, conf, view);\n\t}\n\n\ttrack(node, data);\n}\n\nfunction _updateData(view, name, inc, data, start){\n\tconst views = data.views;\n\tfor(let i = 0; i < views.length; i++){\n\t\tif(_isRange(views[i][3])){\n\t\t\tconst series = views[i][4].series;\n\t\t\tif(series){\n\t\t\t\tseries.forEach(obj => {\n\t\t\t\t\tobj.range = changeRange(obj.range, name, inc, start);\n\t\t\t\t\tobj.active = changeRange(obj.active, name, inc, start);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst legend = views[i][4].legend && views[i][4].legend.range;\n\t\t\tif(legend)\n\t\t\t\tviews[i][4].legend.range = _getDataParts(legend).map(range => changeRange(range, name, inc, start)).join(\",\");\n\n\t\t\tconst xAxis = views[i][4].xAxis && views[i][4].xAxis.range;\n\t\t\tif(xAxis)\n\t\t\t\tviews[i][4].xAxis.range = changeRange(xAxis, name, inc, start);\n\n\t\t\tviews[i][3] = _getDataParts(views[i][3]).map(range => changeRange(range, name, inc, start)).join(\",\");\n\t\t}\n\t}\n}\n\nfunction _showAll(view, pos){\n\t//close possibly open menus of embedded ui\n\twebix.callEvent(\"onClick\", []);\n\n\tfor(let id in view.views._pull){\n\t\tconst win = webix.$$(id);\n\t\tconst conf = view.views._pull[id];\n\t\tif(pos){\n\t\t\tconf.x = _correctPos(view, win, conf.x, \"x\");\n\t\t\tconf.y = _correctPos(view, win, conf.y, \"y\");\n\t\t}\n\t\t_showOne(view, win, conf);\n\t}\n}\n\nfunction _showOne(view, win, conf){\n\tconst state = view._table.getScrollState();\n\n\twin.show({\n\t\tx:conf.x,\n\t\ty:conf.y-state.y\n\t});\n}\n\nfunction _correctPos(view, win, v, type){\n\tif(!v && v !==0 )\n\t\tv = view._table.getScrollState()[type]+50;\n\telse{\n\t\tconst size = type == \"x\" ? _getWidth(view)-win.$width : _getHeight(view)-win.$height;\n\t\tv = Math.min(Math.max(v, 0), size);\n\t}\t\n\treturn v;\n}\n\nfunction _reset(view){\n\tignoreUndo(function(){\n\t\tfor(let id in view.views._pull)\n\t\t\tview.views.remove(id);\n\t}, view);\n}\n\nfunction _undoUI(view, move, id, value){\n\tif(value){\n\t\tconst {x, y, type, data, config} = value;\n\t\tif(view.views._pull[id]){\n\t\t\tif(move)\n\t\t\t\tview.views.move(id, x, y);\n\t\t\telse\n\t\t\t\tview.views.update(id, data, config);\n\t\t}\n\t\telse\n\t\t\tview.views.add(x, y, type, data, config, id);\n\n\t\tconst editor = view.$$(\"chartEditor\");\n\t\tif(editor && editor.viewId == id)\n\t\t\teditor.queryView(\"form\").setValues(config);\n\t}\n\telse\n\t\tview.views.remove(id);\n}\n\nfunction _getWidth(view){\n\tlet width = 0;\n\tview._table.eachColumn(function(id){\n\t\tif(id !== \"rowId\")\n\t\t\twidth += this.getColumnConfig(id).width;\n\t});\n\treturn width;\n}\n\nfunction _getHeight(view){\n\tlet height = 0;\n\tview._table.data.each(function(obj){\n\t\theight += obj.$height || webix.skin.$active.rowHeight;\n\t});\n\treturn height;\n}\n\n//disable datatables not to interfere with ss table events\nfunction _processTables(node){\n\tconst query = function(view){\n\t\treturn view.name == \"datatable\" || view.name == \"treetable\";\n\t};\n\tlet tables = node.queryView(query, \"self\");\n\tif(tables) tables = [tables];\n\telse tables = node.queryView(query, \"all\");\n\ttables.forEach((dt) => dt.disable());\n}\n\n/* chart-specific helpers */\n\nfunction _prepareType(config){\n\tconst type = config.type;\n\tif(config.stacked && type.indexOf(\"stacked\") == -1)\n\t\tconfig.type = \"stacked\"+config.type.charAt(0).toUpperCase()+config.type.substr(1);\n\tif(config[\"3D\"] && type.indexOf(\"3D\") == -1)\n\t\tconfig.type += \"3D\";\n\tif(config.horizontal && type.indexOf(\"H\") == -1)\n\t\tconfig.type += \"H\";\n\n\treturn config.type;\n}\n\nfunction _genChartConfig(conf, data, dataRange){\n\tconst htmlFilter = /<[^>]*>/gi;\n\tlet config = webix.copy(conf.config);\n\n\tconfig = _normalizeConfig(config);\n\n\tconst scale = config.scale.lines;\n\tconst scaleColor = config.scale.color || undefined;\n\tconst type = (config.type = _prepareType(config));\n\tconst pie = _isPie(type);\n\n\tconst lines = config.series;\n\tconfig.series = [];\n\tconst xAxis = config.xAxis;\n\n\tconst legendConfig = config.legend;\n\tlet pieLegend;\n\tlet legendRange;\n\n\tconst legend = {\n\t\theight:24,\n\t\talign: legendConfig.align || \"center\",\n\t\tvalign: legendConfig.valign || \"bottom\",\n\t};\n\tlegend.layout = legend.valign == \"middle\" ? \"y\" : \"x\";\n\n\tif(pie){\n\t\tif(legendConfig.fromData)\n\t\t\tpieLegend = \"data0\";\n\t\telse if(legendConfig.range)\n\t\t\tpieLegend = dataRange[legendConfig.range];\n\n\t\tlegend.template = `#${pieLegend}#`;\n\t}\n\telse{\n\t\tlegend.values = [];\n\n\t\tlegendRange = !legendConfig.fromData && legendConfig.range;\n\t\tif(legendRange){\n\t\t\tconst switchDirection = config.dataSeries == \"rows\";\n\t\t\tlegendRange = _getParts(legendConfig.range, switchDirection, dataRange);\n\t\t}\n\n\t\tconfig.yAxis = config.yAxis||{};\n\t\tfor(let property in config.yAxis)\n\t\t\tif(config.yAxis[property] === \"\")\n\t\t\t\tdelete config.yAxis[property];\n\n\t\tconfig.yAxis = webix.extend(config.yAxis, {\n\t\t\tlineColor: scaleColor,\n\t\t\tcolor: scaleColor,\n\t\t\tlines: scale,\n\t\t\tlineShape: config.scale.circle ? \"arc\" : \"default\"\n\t\t});\n\n\t\tif(xAxis.fromData)\n\t\t\txAxis.range = legendRange ? Object.keys(data[0]).filter(line => legendRange.indexOf(line) == -1)[0] : \"data0\";\n\t\telse if(xAxis.range)\n\t\t\txAxis.range = dataRange[xAxis.range];\n\t}\t\n\n\tfor(let i = 0; i < lines.length; i++){\n\t\tconst color = lines[i].color;\n\t\tconst item = dataRange[lines[i].range];\n\n\t\tif(item != xAxis.range && !(pie && item == pieLegend /*(item == pieLegend || legendConfig.range == lines[i].active)*/)){\n\t\t\tconst s = {\n\t\t\t\tvalue:`#${item}#`,\n\t\t\t\ttooltip:{\n\t\t\t\t\ttemplate: lines[i].tooltip ? `#${item}#` : \"\"\n\t\t\t\t}\n\t\t\t};\n\n\t\t\ts[pie ? \"pieInnerText\" : \"label\"] = lines[i].label ? `#${item}#` : \"\";\n\n\t\t\tif(type == \"radar\" || type == \"line\" || type == \"spline\"){\n\t\t\t\ts.line = { color };\n\t\t\t\ts.item = { borderColor:color, type:lines[i].marker };\n\t\t\t}\n\t\t\telse if(!pie)\n\t\t\t\ts.color = color;\n\n\t\t\tif(type == \"area\" || type == \"splineArea\")\n\t\t\t\ts.alpha = 0.7;\n\n\t\t\tif(data[0] && !pie && (legendRange || legendConfig.fromData)){\n\t\t\t\tconst val = legendRange ? data[0][legendRange[i]] : data[0][item];\n\t\t\t\tconst text = (val || val === 0) ? (val+\"\").replace(htmlFilter, \"\") : \"\";\n\t\t\t\tlegend.values.push({text, color});\n\t\t\t}\n\n\t\t\tconfig.series.push(s);\n\t\t}\n\t}\n\n\tif(!pie){\n\t\tconfig.xAxis = {\n\t\t\ttitle: config.xAxis.title,\n\t\t\tlineColor: scaleColor,\n\t\t\tcolor: scaleColor,\n\t\t\tlines: scale\n\t\t};\n\n\t\tconfig[type == \"barH\" || type == \"stackedBarH\" ? \"yAxis\" : \"xAxis\"].template = obj => {\n\t\t\tconst val = obj[xAxis.range];\n\t\t\treturn (val || val === 0) ? (val+\"\").replace(htmlFilter, \"\") : \"\";\n\t\t};\n\t}\n\n\tif(pieLegend || (legend.values && legend.values.length))\n\t\tconfig.legend = legend;\n\telse\n\t\tdelete config.legend;\n\n\treturn webix.extend({\n\t\tview:\"chart\",\n\t\tpadding:{\n\t\t\tleft:80\n\t\t}\n\t}, config, true);\n}\n\nfunction _isRange(data){\n\treturn typeof data == \"string\" && data.indexOf(\"data:image\") === -1;\n}\n\nfunction _fromRange(view, conf){\n\tlet data = conf.data;\n\n\tif(/^(http|data:image|\\/)/i.test(data))\n\t\treturn data;\n\n\tconst arr = [];\n\tif(data){\n\t\tconst config = conf.config;\n\t\tconst switchDirection = config.dataSeries == \"rows\";\n\t\tlet lastIndex = 0;\n\n\t\tdata = _getDataParts(data);\n\t\tfor(let i = 0; i < data.length; i++){\n\t\t\tconst cells = _isRange(data[i]) ? range(data[i], view) : null;\n\t\t\tif(cells){\n\t\t\t\tconst page = cells[4] ? view._mData.getPage(cells[4]) : view._mPage;\n\t\t\t\tcells[5] = lastIndex;\n\n\t\t\t\tif(page){\n\t\t\t\t\tconst subdata = switchDirection ? getRangeRows.apply(page, cells) : getRangeCols.apply(page, cells);\n\t\t\t\t\tlastIndex += subdata[2];\n\t\t\t\t\tfor(let i = 0; i < subdata[0].length; i++){\n\t\t\t\t\t\tif(!arr[i])\n\t\t\t\t\t\t\tarr[i] = {};\n\t\t\t\t\t\twebix.extend(arr[i], subdata[0][i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn arr;\n}\n\nfunction _removeLegend(arr, conf, view){\n\tconst config = conf.config;\n\tif(typeof(config.legend) != \"object\")\n\t\tconfig.legend = {fromData: !!config.legend};\n\n\tconst legend = config.legend;\n\n\tif(legend.fromData)\n\t\tarr.shift();\n\telse if(legend.range){\n\t\tconst names = _getNames(view, conf);\n\t\tconst switchDirection = config.dataSeries == \"rows\";\n\t\tconst legendRange = _getParts(legend.range, switchDirection, names);\n\t\tfor (let i = 0; i < legendRange.length; i++){\n\t\t\tconst item = legendRange[i];\n\t\t\tdelete arr[0][item];\n\t\t}\n\t}\n}\n\nfunction _getNames(view, conf){\n\tlet data = conf.data;\n\n\tif(/^(http|data:image|\\/)/i.test(data))\n\t\treturn;\n\n\tlet names = {};\n\tif(data){\n\t\tconst config = conf.config;\n\t\tconst switchDirection = config.dataSeries == \"rows\";\n\t\tlet lastIndex = 0;\n\n\t\tdata = _getDataParts(data);\n\t\tfor(let i = 0; i < data.length; i++){\n\t\t\tconst cells = _isRange(data[i]) ? range(data[i], view) : null;\n\t\t\tif(cells){\n\t\t\t\tconst page = cells[4] ? view._mData.getPage(cells[4]) : view._mPage;\n\t\t\t\tcells[5] = lastIndex;\n\n\t\t\t\tif(page){\n\t\t\t\t\tconst subdata = switchDirection ? getRangeRows.apply(page, cells) : getRangeCols.apply(page, cells);\n\t\t\t\t\tlastIndex += subdata[2];\n\t\t\t\t\twebix.extend(names, subdata[1]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn names;\n}\n\nexport function _getDataParts(data){\n\treturn data.replace(/\\s/g, \"\").split(\",\");\n}\n\nexport function _isPie(type){\n\treturn /pie|donut/.test(type);\n}\n\nexport function _getSeries(view, data, dataSeries, active, oldLeftColumn){\n\tconst dir = dataSeries == \"rows\";\n\tlet vals = [];\n\n\tif(data){\n\t\tlet xAxis = [];\n\t\tlet legend = [];\n\t\tlet activeVals = [];\n\n\t\tif(active){\n\t\t\tif(active.legend)\n\t\t\t\tlegend = _getParts(active.legend, dir);\n\t\t\tif(active.xAxis)\n\t\t\t\txAxis = _getParts(active.xAxis, dir);\n\t\t\tif(active.series)\n\t\t\t\tactiveVals = active.series.filter(val => legend.indexOf(val.range) == -1 && xAxis.indexOf(val.range) == -1);\n\t\t}\n\n\t\tdata = _getDataParts(data);\n\t\tlet colorIndex = 0;\n\t\tlet firstRange = 1;\n\t\tdata.forEach(subdata => {\n\t\t\tconst series = isRange(subdata) ? range(subdata, view) : null;\n\t\t\tif(series){\n\t\t\t\tconst start = dir ? series[0] : series[1];\n\t\t\t\tconst end = dir ? series[2] : series[3];\n\n\t\t\t\tlet inActiveSeries;\n\t\t\t\tfor(let i = start; i <= end; i++){\n\t\t\t\t\tconst range = dir ? toRange(i, series[1], i, series[3], series[4]) : toRange(series[0], i, series[2], i, series[4]);\n\t\t\t\t\tconst seria = arr.find(activeVals, val => val.range == range && (!val.active || val.active == subdata));\n\n\t\t\t\t\tif(seria){\n\t\t\t\t\t\tif(!seria.active)\n\t\t\t\t\t\t\tseria.active = subdata;\n\t\t\t\t\t\tinActiveSeries = 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor(let i = start; i <= end; i++){\n\t\t\t\t\tconst range = dir ? toRange(i, series[1], i, series[3], series[4]) : toRange(series[0], i, series[2], i, series[4]);\n\t\t\t\t\tif(legend.indexOf(range) != -1 || xAxis.indexOf(range) != -1)\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tconst activeVal = activeVals.filter(val => val.range == range && val.active == subdata)[0];\n\n\t\t\t\t\tif(inActiveSeries && !activeVal && !(oldLeftColumn && firstRange && i == start))\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tvals.push(activeVal || {\n\t\t\t\t\t\tactive: subdata,\n\t\t\t\t\t\trange,\n\t\t\t\t\t\tmarker: \"square\",\n\t\t\t\t\t\ttooltip: 1,\n\t\t\t\t\t\tcolor: _getColor(colorIndex)\n\t\t\t\t\t});\n\n\t\t\t\t\tcolorIndex++;\n\t\t\t\t}\n\t\t\t\tfirstRange = 0;\n\t\t\t}\n\t\t});\n\t}\n\treturn vals;\n}\n\nexport function _getParts(ranges, dir, dataRange){\n\tconst parts = [];\n\n\tranges = _getDataParts(ranges);\n\tranges.forEach(subRange => {\n\t\tsubRange = isRange(subRange) ? range(subRange) : null;\n\t\tif(subRange){\n\t\t\tconst start = dir ? subRange[0] : subRange[1];\n\t\t\tconst end = dir ? subRange[2] : subRange[3];\n\n\t\t\tfor(let i = start; i <= end; i++){\n\t\t\t\tconst range = dir ?\n\t\t\t\t\ttoRange(i, subRange[1], i, subRange[3], subRange[4]):\n\t\t\t\t\ttoRange(subRange[0], i, subRange[2], i, subRange[4]);\n\n\t\t\t\tparts.push(dataRange ? dataRange[range] : range);\n\t\t\t}\n\t\t}\n\t});\n\n\treturn parts;\n}\n\nexport function _normalizeConfig(config){\n\tif(typeof(config.xAxis) != \"object\")\n\t\tconfig.xAxis = {fromData: !!config.xAxis};\n\n\tif(typeof(config.legend) != \"object\")\n\t\tconfig.legend = {fromData: !!config.legend};\n\n\tconfig.legend = webix.extend(config.legend, {\n\t\tlayout:\"x\",\n\t\talign:\"center\",\n\t\tvalign:\"bottom\"\n\t});\n\n\tif(!config.scale)\n\t\tconfig.scale = {\n\t\t\tlines:1\n\t\t};\n\n\treturn config;\n}\n\nfunction _getColor(index){\n\tconst colors = [\n\t\t\"#e06666\", \"#6aa84f\", \"#3c78d8\", \"#e69138\", \"#783f04\", \"#134f5c\", \"#674ea7\", \"#c27ba0\"\n\t];\n\treturn colors[index%colors.length];\n}\n\nfunction getRangeCols(r1,c1,r2,c2,sheetName,lastIndex){\n\tconst data = [];\n\tconst rangeToData = {};\n\tfor (let i = r1, rind = 0; i <= r2; i++, rind++){\n\t\tdata[rind] = {};\n\t\tfor (let j = c1, cind = lastIndex; j <= c2; j++, cind++){\n\t\t\tif(i == r2){\n\t\t\t\trangeToData[`${sheetName ? sheetName+\"!\" : \"\"}${encode[j]}${r1}:${encode[j]}${r2}`] = `data${cind}`;\n\t\t\t\tlastIndex++;\n\t\t\t}\n\t\t\tdata[rind][`data${cind}`] = this.getValue(i-1,j-1);\n\t\t}\n\t}\n\treturn [data, rangeToData, lastIndex];\n}\n\nfunction getRangeRows(r1,c1,r2,c2,sheetName,lastIndex){\n\tconst data = [];\n\tconst rangeToData = {};\n\tfor (let i = c1, cind = 0; i <= c2; i++, cind++){\n\t\tdata[cind] = {};\n\t\tfor (let j = r1, rind = lastIndex; j <= r2; j++, rind++){\n\t\t\tif(i == c2){\n\t\t\t\trangeToData[`${sheetName ? sheetName+\"!\" : \"\"}${encode[c1]}${j}:${encode[c2]}${j}`] = `data${rind}`;\n\t\t\t\tlastIndex++;\n\t\t\t}\n\t\t\tdata[cind][`data${rind}`] = this.getValue(j-1,i-1);\n\t\t}\n\t}\n\treturn [data, rangeToData, lastIndex];\n}","import {range, toRange} from \"./helpers/column_names\";\nimport {_getSeries, _isPie, _normalizeConfig, _getDataParts} from \"./operations/views\";\n\nconst labels = webix.i18n.spreadsheet.labels;\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\tconst activeSkin = webix.skin.$active;\n\tconst padding = activeSkin.dataPadding-2;\n\tconst margin = activeSkin.layoutMargin.form;\n\n\treturn {\n\t\twidth:440,\n\t\thidden: true,\n\t\tid:\"chartEditor\",\n\t\tcss:\"ssheet_chart\",\n\t\trows:[\n\t\t\t{\n\t\t\t\theight: activeSkin.barHeight,\n\t\t\t\tcss: \"ssheet_chart_wizard_head\",\n\t\t\t\tpadding: { left:4 },\n\t\t\t\tcols: [\n\t\t\t\t\t{ view:\"icon\", inputHeight:activeSkin.inputHeight, hotkey:\"esc\", icon:\"webix_ssheet_icon ssi-arrow-left\", click: () => closeEditor(view)  },\n\t\t\t\t\t{ type:\"header\", borderless:true, template: labels[\"chart-edit\"] }\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"form\",\n\t\t\t\tcomplexData:true,\n\t\t\t\tborderless: true,\n\t\t\t\tpadding:{\n\t\t\t\t\ttop: 0\n\t\t\t\t},\n\t\t\t\telementsConfig:{\n\t\t\t\t\tlabelWidth:184\n\t\t\t\t},\n\t\t\t\telements:[{\n\t\t\t\t\tview:\"tabview\",\n\t\t\t\t\tid:\"chartTabs\",\n\t\t\t\t\tcells:[\n\t\t\t\t\t\t{ id:\"common\", borderless:true, type:\"form\", paddingX:0, header:labels[\"chart-common\"], rows:[\n\t\t\t\t\t\t\t{view:\"scrollview\", body:{\n\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\taddRichselect(\"type\", \"chart-type\", getTypes()),\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"stacked-chart\"], name:\"stacked\", hidden:true},\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"horizontal-chart\"], name:\"horizontal\", hidden:true},\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-pie-3d\"], name:\"3D\", batch:\"pie\"},\n\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-range\"], name:\"range\"},\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-col-xAxis\"], name:\"xAxis.fromData\", batch:\"axis\"},\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-row-legend\"], name:\"legend.fromData\"},\n\t\t\t\t\t\t\t\t\t{ view:\"radio\", label:labels[\"chart-data-from\"], name:\"dataSeries\", vertical:true, options:[\n\t\t\t\t\t\t\t\t\t\t{id:\"columns\", value:labels[\"chart-columns\"]},\n\t\t\t\t\t\t\t\t\t\t{id:\"rows\", value:labels[\"chart-rows\"]}\n\t\t\t\t\t\t\t\t\t]},\n\t\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{ id:\"advanced\", borderless:true, type:\"form\", paddingX:0, padding:{bottom:0}, header:labels[\"chart-series\"], rows:[\n\t\t\t\t\t\t\t{ view: \"ssheet-series\", name:\"series\" },\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{ id:\"extras\", borderless:true, type:\"form\", paddingX:0, header:labels[\"chart-extras\"], rows:[\n\t\t\t\t\t\t\t{view:\"scrollview\", body:{\n\t\t\t\t\t\t\t\tview: \"accordion\",\n\t\t\t\t\t\t\t\tmargin: webix.skin.$active.layoutMargin.form,\n\t\t\t\t\t\t\t\tcss: \"webix_ssheet_accordion\",\n\t\t\t\t\t\t\t\tmulti: true,\n\t\t\t\t\t\t\t\ttype: \"clean\",\n\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t{ header:labels[\"chart-legend\"], body:{\n\t\t\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\t\t\tpadding,\n\t\t\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t\t\t{ view: \"text\", label:labels[\"chart-legend-range\"], name:\"legend.range\"},\n\t\t\t\t\t\t\t\t\t\t\taddRichselect(\"legend.align\", \"chart-legend-align\", getLegendAlign()),\n\t\t\t\t\t\t\t\t\t\t\taddRichselect(\"legend.valign\", \"chart-legend-valign\", getLegendValign())\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t\t\t{ header:labels[\"chart-scale\"], batch:\"axis\", id:\"scale\", body:{\n\t\t\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\t\t\tpadding,\n\t\t\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-lines\"], name:\"scale.lines\", batch:\"axis\"},\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-radar-circle\"], name:\"scale.circle\", hidden:true},\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"chart-scale-color\"], name:\"scale.color\", batch:\"axis\"}\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t\t\t{ header:labels[\"chart-x-axis\"], batch:\"axis\", body:{\n\t\t\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\t\t\tpadding,\n\t\t\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-xAxis-range\"], name:\"xAxis.range\", range:true, batch:\"axis\" },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-xAxis-title\"], name:\"xAxis.title\", batch:\"axisTitle\" },\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t\t\t{ header:labels[\"chart-y-axis\"], batch:\"axis\", body:{\n\t\t\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\t\t\tpadding,\n\t\t\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-title\"], name:\"yAxis.title\", batch:\"axisTitle\" },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-origin\"], name:\"origin\", batch:\"axis\", attributes:{ type:\"number\" } },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"label\", label:labels[\"chart-yAxis-note\"], css:\"ssheet_note\", height:20},\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-start\"], name:\"yAxis.start\", batch:\"axis\", attributes:{ type:\"number\" } },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-end\"], name:\"yAxis.end\", batch:\"axis\", attributes:{ type:\"number\" } },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-step\"], name:\"yAxis.step\", batch:\"axis\", attributes:{ type:\"number\" } }\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]\n\t\t\t\t}]\n\t\t\t}\n\t\t]\n\t};\n}\n\nfunction ready(view){\n\tconst chartEditor = view.$$(\"chartEditor\");\n\tconst form = chartEditor.queryView(\"form\");\n\tconst elements = form.elements;\n\n\tview.attachEvent(\"onCommand\", action => {\n\t\tif(action.id == \"add-chart\"){\n\t\t\tconst config = action.config;\n\t\t\tlet values = config && config.config || {};\n\n\t\t\tchartEditor.show();\n\n\t\t\tview.$handleSelection = function(st, end, a, b){\n\t\t\t\tconst focus = webix.UIManager.getFocus();\n\n\t\t\t\tif(chartEditor.queryView(view => view == focus)){\n\t\t\t\t\tif(focus == elements.range || focus == elements[\"legend.range\"]){\n\t\t\t\t\t\tlet val = focus.getValue();\n\t\t\t\t\t\tconst last = val.lastIndexOf(\",\");\n\n\t\t\t\t\t\tval = last == -1 ? \"\" : val.substring(0, last + 1);\n\t\t\t\t\t\tfocus.setValue(val + a+\":\"+b);\n\t\t\t\t\t}\n\t\t\t\t\telse if(focus.config.range)\n\t\t\t\t\t\tfocus.setValue(a+\":\"+b);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t};\n\n\t\t\tform.clear();\n\t\t\tview.$$(\"chartTabs\").setValue(\"common\");\n\n\t\t\tvalues = _normalizeConfig(values);\n\n\t\t\tvalues.range = config ? config.data : view.getSelectedRange();\n\t\t\tchartEditor.viewId = action.viewid ? action.viewid : view.views.add(null, null, \"chart\", values.range, values);\n\n\t\t\tview.callEvent(\"onUIEditStart\", [chartEditor.viewId, \"chart\"]);\n\n\t\t\tupdateValign(values.legend.align);\n\t\t\tupdateAlign(values.legend.valign);\n\n\t\t\tconst formValues = inValues(values);\n\t\t\tform.setValues(formValues);\n\t\t\tupdateType(formValues.type);\n\n\t\t\tif(!_isPie(formValues.type) && values.legend.fromData)\n\t\t\t\tupdateLegendRange(values.legend.fromData);\n\t\t\tif(values.xAxis.fromData)\n\t\t\t\tupdateXaxisRange(values.xAxis.fromData);\n\n\t\t\tupdateSeries();\n\n\t\t\tform.queryView(\"accordionitem\", \"all\").forEach(view => view.expand());\n\n\t\t\telements.range.focus();\n\t\t}\n\t});\n\n\tview.attachEvent(\"onUIEditStart\", (id, type)=>{\n\t\tif(chartEditor.isVisible() && type != \"chart\")\n\t\t\tcloseEditor(view);\n\t});\n\n\tview.attachEvent(\"onCommand\", obj =>{\n\t\tif(obj.id == \"close-ui-editor\" && chartEditor.isVisible())\n\t\t\tcloseEditor(view);\n\t});\n\n\tview.attachEvent(\"onAction\", (id, values) => {\n\t\tif(id == \"add-view\" && !values.newValue){\n\t\t\tif(chartEditor.isVisible() && chartEditor.viewId == values.row)\n\t\t\t\tcloseEditor(view);\n\t\t}\n\t});\n\n\tform.attachEvent(\"onChange\", function(val, oldVal){\n\t\tconst source = this.$eventSource;\n\n\t\t//upper case ranges\n\t\tif(source === elements.range || source === elements[\"xAxis.range\"] || source === elements[\"legend.range\"]){\n\t\t\tconst parts = val.split(\"!\");\n\t\t\tconst upper = parts.length == 2 ? parts[0]+\"!\"+parts[1].toUpperCase() : val.toUpperCase();\n\n\t\t\tif(val != upper){\n\t\t\t\tval = upper;\n\t\t\t\tsetSilentValue(source, upper);\n\t\t\t}\n\t\t}\n\n\t\tswitch (source){\n\t\t\tcase elements.type:\n\t\t\t\tupdateType(val);\n\t\t\t\tbreak;\n\t\t\tcase elements.horizontal:\n\t\t\t\tswitchRowsCols();\n\t\t\t\tbreak;\n\t\t\tcase elements.range:\n\t\t\tcase elements.dataSeries:\n\t\t\t\tif(this.$eventSource == elements.dataSeries)\n\t\t\t\t\tswitchRowsCols();\n\t\t\t\tif(elements[\"legend.fromData\"].getValue())\n\t\t\t\t\thandlePieLegend();\n\t\t\t\tif(elements[\"xAxis.fromData\"].getValue())\n\t\t\t\t\tsetSilentValue(elements[\"xAxis.range\"], getLeftColumn());\n\t\t\t\tupdateSeries();\n\t\t\t\tbreak;\n\t\t\tcase elements[\"xAxis.fromData\"]:\n\t\t\t\tupdateXaxisRange(val);\n\n\t\t\t\tupdateSeries(oldVal);\n\t\t\t\tbreak;\n\t\t\tcase elements[\"legend.fromData\"]:\n\t\t\t\tupdateLegendRange(val);\n\n\t\t\t\tupdateSeries(_isPie(elements.type.getValue()) ? oldVal : 0);\n\t\t\t\tbreak;\n\t\t\tcase elements[\"legend.align\"]:\n\t\t\t\tupdateValign(val);\n\t\t\t\tbreak;\n\t\t\tcase elements[\"legend.valign\"]:\n\t\t\t\tupdateAlign(val);\n\t\t\t\tbreak;\n\t\t\tcase elements[\"xAxis.range\"]:\n\t\t\t\tif(elements[\"xAxis.fromData\"].getValue())\n\t\t\t\t\tsetSilentValue(elements[\"xAxis.fromData\"]);\n\t\t\t\tupdateRange(val, oldVal);\n\t\t\t\tbreak;\n\t\t\tcase elements[\"legend.range\"]:\n\t\t\t\tif(elements[\"legend.fromData\"].getValue())\n\t\t\t\t\tsetSilentValue(elements[\"legend.fromData\"]);\n\t\t\t\tupdateRange(val, oldVal);\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst config = form.getValues();\n\t\tview.views.update(chartEditor.viewId, config.range, config);\n\t});\n\n\telements.series.attachEvent(\"onRangeChange\", updateRange);\n\n\tfunction handlePieLegend(){\n\t\tif(elements[\"legend.fromData\"].getValue()){\n\t\t\tconst handler = _isPie(elements.type.getValue()) ? getLeftColumn : getTopRow;\n\t\t\tsetSilentValue(elements[\"legend.range\"], handler());\n\t\t}\n\t}\n\n\tfunction updateLegendRange(val){\n\t\tif(val){\n\t\t\tconst legendRange = elements[\"legend.range\"].getValue();\n\t\t\tupdateRange(\"\", legendRange);\n\t\t}\n\n\t\tconst handler = _isPie(elements.type.getValue()) ? getLeftColumn : getTopRow;\n\t\tval = val ? handler() : \"\";\n\n\t\tsetSilentValue(elements[\"legend.range\"], val);\n\t}\n\n\tfunction updateXaxisRange(val){\n\t\tif(val){\n\t\t\tconst xAxisRange = elements[\"xAxis.range\"].getValue();\n\t\t\tupdateRange(\"\", xAxisRange);\n\t\t}\n\n\t\tval = val ? getLeftColumn() : \"\";\n\n\t\tsetSilentValue(elements[\"xAxis.range\"], val);\n\t}\n\n\tfunction setSilentValue(element, val){\n\t\telement.blockEvent();\n\t\telement.setValue(val);\n\t\telement.unblockEvent();\n\t}\n\n\tfunction getLeftColumn(){\n\t\tconst data = elements.range.getValue();\n\t\tconst dataSeries = elements.dataSeries.getValue();\n\t\tconst legendRange = elements[\"legend.range\"].getValue();\n\t\tlet leftColumn = \"\";\n\n\t\tconst series = _getSeries(view, data, dataSeries, {legend: legendRange || \"\"});\n\n\t\tif(series.length)\n\t\t\tleftColumn = series[0].range;\n\n\t\treturn leftColumn;\n\t}\n\n\tfunction getTopRow(){\n\t\tconst data = _getDataParts(elements.range.getValue());\n\t\tconst dir = elements.dataSeries.getValue() == \"rows\";\n\t\tconst xAxisRange = _getDataParts(elements[\"xAxis.range\"].getValue());\n\t\tlet topRow = [];\n\n\t\tdata.forEach(subdata => {\n\t\t\tif(xAxisRange.indexOf(subdata) == -1){\n\t\t\t\tconst part = range(subdata, view);\n\t\t\t\tif(part){\n\t\t\t\t\tconst range = dir ?\n\t\t\t\t\t\ttoRange(part[0], part[1], part[2], part[1], part[4]) :\n\t\t\t\t\t\ttoRange(part[0], part[1], part[0], part[3], part[4]);\n\n\t\t\t\t\tif(data.indexOf(range) == -1)\n\t\t\t\t\t\ttopRow.push(range);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn topRow.join(\",\");\n\t}\n\n\tfunction updateRange(val, oldVal){\n\t\tlet data = elements.range.getValue();\n\n\t\tconst legend = elements[\"legend.range\"].getValue();\n\t\tconst xAxis = elements[\"xAxis.range\"].getValue();\n\t\tconst dataSeries = elements.dataSeries.getValue();\n\n\t\tconst series = _getSeries(view, data, dataSeries, {legend, xAxis});\n\n\t\toldVal = _getDataParts(oldVal);\n\n\t\tdata = _getDataParts(data).filter(val => oldVal.indexOf(val) == -1);\n\n\t\tif(val){\n\t\t\tval = _getDataParts(val);\n\t\t\tval.forEach(range => {\n\t\t\t\tconst exist = series.filter(obj => obj.range == range);\n\t\t\t\tif(!exist.length)\n\t\t\t\t\tdata.push(range);\n\t\t\t});\n\t\t}\n\n\t\tsetSilentValue(elements.range, data.join(\",\"));\n\t}\n\n\tfunction updateAlign(val){\n\t\tconst align = elements[\"legend.align\"];\n\t\tconst list = align.getList();\n\n\t\tif(val == \"middle\"){\n\t\t\tif(list.exists(\"center\"))\n\t\t\t\tlist.remove(\"center\");\n\t\t}\n\t\telse if(!list.exists(\"center\"))\n\t\t\tlist.add({id:\"center\", value:labels[\"chart-legend-center\"]}, 1);\n\t}\n\n\tfunction updateValign(val){\n\t\tconst align = elements[\"legend.valign\"];\n\t\tconst list = align.getList();\n\n\t\tif(val == \"center\"){\n\t\t\tif(list.exists(\"middle\"))\n\t\t\t\tlist.remove(\"middle\");\n\t\t}\n\t\telse if(!list.exists(\"middle\"))\n\t\t\tlist.add({id:\"middle\", value:labels[\"chart-legend-middle\"]}, 1);\n\t}\n\n\tfunction updateType(val){\n\t\thandlePieLegend();\n\n\t\tconst isPie = _isPie(val);\n\t\tconst isBar = val == \"bar\";\n\t\tconst series = elements.series;\n\t\tconst markersVisible = val == \"radar\" || val == \"line\" || val == \"spline\";\n\n\t\tseries.hideSubviews(\"marker\", markersVisible);\n\t\tseries.hideSubviews(\"label\", markersVisible || isBar || isPie);\n\t\tseries.hideSubviews(\"color\", !isPie);\n\n\t\tif(val == \"area\" || isBar) elements.stacked.show();\n\t\telse hideField(elements.stacked);\n\n\t\tif(isBar) elements.horizontal.show();\n\t\telse hideField(elements.horizontal);\n\n\t\tif(val == \"radar\")\n\t\t\telements[\"scale.circle\"].show();\n\t\telse\n\t\t\thideField(elements[\"scale.circle\"]);\n\n\t\tif(isPie){\n\t\t\thideBatch(\"axis\");\n\t\t\thideBatch(\"pie\", true);\n\t\t}\n\t\telse{\n\t\t\thideBatch(\"axis\", true);\n\t\t\thideBatch(\"pie\");\n\t\t}\n\n\t\tif(isPie || val == \"radar\")\n\t\t\thideBatch(\"axisTitle\");\n\t\telse\n\t\t\thideBatch(\"axisTitle\", true);\n\n\t\tswitchRowsCols();\n\t}\n\n\tfunction updateSeries(oldXaxis){\n\t\tlet data = elements.range.getValue();\n\n\t\tlet series = elements.series.getValue();\n\t\tconst legend = elements[\"legend.range\"].getValue();\n\t\tconst xAxis = elements[\"xAxis.range\"].getValue();\n\t\tconst dataSeries = elements.dataSeries.getValue();\n\n\t\tseries = _getSeries(view, data, dataSeries, {series, legend, xAxis}, oldXaxis);\n\n\t\telements.series.setValue(series);\n\t}\n\n\tfunction switchRowsCols(){\n\t\tconst dir = elements.dataSeries.getValue() == \"rows\";\n\t\tconst horizontal = elements.horizontal.getValue();\n\t\tconst pie = _isPie(elements.type.getValue());\n\n\t\tif((!pie && dir) || (!dir && pie)){\n\t\t\telements[\"legend.fromData\"].define(\"label\", labels[\"chart-col-legend\"]);\n\t\t\telements[\"xAxis.fromData\"].define(\"label\", labels[\"chart-row-\" + (horizontal ? \"yAxis\" : \"xAxis\")]);\n\t\t}\n\t\telse{\n\t\t\telements[\"legend.fromData\"].define(\"label\", labels[\"chart-row-legend\"]);\n\t\t\telements[\"xAxis.fromData\"].define(\"label\", labels[\"chart-col-\" + (horizontal ? \"yAxis\" : \"xAxis\")]);\n\t\t}\n\t\telements[\"legend.fromData\"].refresh();\n\t\telements[\"xAxis.fromData\"].refresh();\n\t}\n\n\tfunction hideField(field){\n\t\tif(field.setValue)\n\t\t\tsetSilentValue(field);\n\t\tfield.hide();\n\t}\n\n\tfunction hideBatch(batch, visible){\n\t\tform.queryView({batch:batch}, \"all\").forEach(field => {\n\t\t\tif(visible)\n\t\t\t\tfield.show();\n\t\t\telse\n\t\t\t\thideField(field);\n\t\t});\n\t}\n\n\tfunction inValues(values){\n\t\t[\n\t\t\t{value:\"H\", name:\"horizontal\"},\n\t\t\t{value:\"stacked\"},\n\t\t\t{value:\"3D\"}\n\t\t].forEach(property => {\n\t\t\tif(values.type.indexOf(property.value) != -1){\n\t\t\t\tvalues[property.name || property.value] = 1;\n\t\t\t\tvalues.type = values.type.replace(property.value, \"\").toLowerCase();\n\t\t\t}\n\t\t});\n\n\t\treturn values;\n\t}\n}\n\nfunction closeEditor(view){\n\tconst chartEditor = view.$$(\"chartEditor\");\n\tview.callEvent(\"onUIEditStop\", [chartEditor.viewId, \"chart\"]);\n\tchartEditor.viewId = null;\n\tview.$handleSelection = null;\n\tchartEditor.hide();\n}\n\nfunction addRichselect(name, label, data){\n\treturn { view: \"richselect\", name:name, label:labels[label], suggest:{\n\t\tview: \"ssheet-form-suggest\",\n\t\tdata: data\n\t}};\n}\n\nexport function getTypes(){\n\treturn [\n\t\t{id:\"line\", value:labels[\"line-chart\"]},\n\t\t{id:\"spline\", value:labels[\"spline-chart\"]},\n\t\t{id:\"splineArea\", value:labels[\"splinearea-chart\"]},\n\t\t{id:\"area\", value:labels[\"area-chart\"]},\n\t\t{id:\"bar\", value:labels[\"bar-chart\"]},\n\t\t{id:\"radar\", value:labels[\"radar-chart\"]},\n\t\t{id:\"pie\", value:labels[\"pie-chart\"]},\n\t\t{id:\"donut\", value:labels[\"donut-chart\"]}\n\t];\n}\n\nfunction getLegendAlign(){\n\treturn [\n\t\t{id:\"left\", value:labels[\"chart-legend-left\"]},\n\t\t{id:\"center\", value:labels[\"chart-legend-center\"]},\n\t\t{id:\"right\", value:labels[\"chart-legend-right\"]}\n\t];\n}\n\nfunction getLegendValign(){\n\treturn [\n\t\t{id:\"top\", value:labels[\"chart-legend-top\"]},\n\t\t{id:\"middle\", value:labels[\"chart-legend-middle\"]},\n\t\t{id:\"bottom\", value:labels[\"chart-legend-bottom\"]}\n\t];\n}","import {Dialog} from \"./common\";\nimport {range} from \"../helpers/column_names\";\nimport {parseChart} from \"../mathematics/writer\";\nimport {getTypes} from \"../chart\";\n\nexport const action = \"add-sparkline\";\n\nconst labels = webix.i18n.spreadsheet.labels;\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tthis.cell = this.view.getSelectedId();\n\t\tif(!this.cell)\n\t\t\treturn false;\n\n\t\tconst els = form.elements;\n\t\tthis.view.$handleSelection = function(st, end, a, b){\n\t\t\tels.range.setValue(a+\":\"+b);\n\t\t\treturn false;\n\t\t};\n\n\t\tels.range.setValue(\"\");\n\n\t\t//sync state of dialog to data with  the selected cell\n\t\tlet value = this.view.getCellValue(this.cell.row, this.cell.column);\n\t\tlet data = parseChart(value);\n\t\tif (data){\n\t\t\tform.blockEvent();\n\t\t\tels.type.setValue(data.type);\n\t\t\tels.range.setValue(data.range);\n\t\t\tif (data.color){\n\t\t\t\tels.color_def.setValue(data.color);\n\t\t\t\tels.color_pos.setValue(data.color);\t\t\n\t\t\t}\n\t\t\tif (data.negativeColor)\n\t\t\t\tels.color_neg.setValue(data.negativeColor);\n\t\t\tif (data.horizontal)\n\t\t\t\tels.horizontal.setValue(1);\n\n\t\t\tform.unblockEvent();\n\t\t\tthis.renderPreview();\n\t\t}\t\n\n\t\tels.range.focus();\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead:labels[\"sparkline-title\"],\n\t\t\tmove: true,\n\t\t\tposition: \"center\",\n\t\t\tbody:{\n\t\t\t\tview:\"form\", visibleBatch:1, on:{ onChange : ()=> this.renderPreview() },  elements:[\n\t\t\t\t\t{view: \"richselect\", name:\"type\", label:labels[\"sparkline-type\"], value:\"line\", labelPosition:\"left\", suggest:{\n\t\t\t\t\t\tview:  \"ssheet-form-suggest\",\n\t\t\t\t\t\tdata:getTypes()\n\t\t\t\t\t}, on:{\n\t\t\t\t\t\tonChange: function(type){\n\t\t\t\t\t\t\tconst form = this.getFormView();\n\t\t\t\t\t\t\tswitch(type){\n\t\t\t\t\t\t\t\tcase \"pie\":\n\t\t\t\t\t\t\t\tcase \"donut\":\n\t\t\t\t\t\t\t\t\tform.showBatch(3);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase \"bar\":\n\t\t\t\t\t\t\t\t\tform.showBatch(2);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\tform.showBatch(1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}},\n\t\t\t\t\t{ view:\"text\", label:labels[\"sparkline-range\"], name:\"range\"},\n\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"sparkline-color\"], name:\"color_def\", id:\"add_sparkline_color\", value:\"#6666FF\", batch:\"1\"},\n\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"sparkline-positive\"], name:\"color_pos\", value:\"#6666FF\", batch:\"2\"},\n\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"sparkline-negative\"], name:\"color_neg\", value:\"#FF6666\", batch:\"2\"},\n\t\t\t\t\t{ view:\"checkbox\", label:labels[\"horizontal-chart\"], name:\"horizontal\", batch:\"2\"},\n\t\t\t\t\t{ view:\"formlate\", name:\"preview\", borderless:true, css:\"webix_ssheet_preview\", height:50 }\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\tcheckRange(text){\n\t\tif(text && range(text, this.view))\n\t\t\treturn true;\n\t\tthis.view.alert({text:labels[\"error-range\"]});\n\t}\n\tokClick(){\n\t\tconst form = this.$dialog.getBody();\n\t\tconst data = form.getValues();\n\t\tdata.range = data.range.toUpperCase();\n\n\t\tif (data.range && this.checkRange(data.range)){\n\t\t\tconst config = this.sparkConfig(data);\n\n\t\t\tthis.view.addSparkline(this.cell.row, this.cell.column, config);\n\t\t\tthis.close();\n\t\t}\n\t}\n\n\trenderPreview(){\n\t\tconst form = this.$dialog.getBody();\n\t\tconst data = form.getValues();\n\t\tdata.range = data.range.toUpperCase();\n\n\t\tif (data.range && this.checkRange(data.range)){\n\t\t\tconst pos = range(data.range, this.view);\n\t\t\tconst values = this.view._mPage.getRange(pos[0]-1, pos[1]-1, pos[2]-1, pos[3]-1);\n\t\t\tconst config = this.sparkConfig(data, true);\n\n\t\t\tfor(let i = 0; i < values.length; i++)\n\t\t\t\tvalues[i] = values[i]||0;\n\t\t\tform.elements.preview.setValue(webix.Sparklines.getTemplate(config)(values, { width:200, height: 40 }));\n\t\t}\n\t\telse\n\t\t\tform.elements.preview.setValue(\"\");\n\t}\n\n\tsparkConfig(config, preview){\n\t\tconfig = webix.copy(config);\n\t\tconst form = this.$dialog.getBody();\n\n\t\tif (config.type === \"bar\"){\n\t\t\tconfig.color = config.color_pos;\n\t\t\tconfig.negativeColor = config.color_neg;\n\t\t}\n\t\telse if(form.elements.color_def.isVisible())\n\t\t\tconfig.color = config.color_def;\n\t\telse if(config.type == \"donut\" && preview)\n\t\t\twebix.extend(config, {type:\"pie\", donut:1}, true);\n\n\t\treturn config;\n\t}\n}","import {Dialog} from \"./common\";\nimport {isRange, toSheetRange} from \"../helpers/column_names\";\nimport {getLastCharIndex} from \"../mathematics/parser\";\n\nexport const action = \"add-range\";\n\nexport class DialogBox extends Dialog{\n\t$show(box){\n\t\tconst form = box.$$(\"form\");\n\n\t\tform.clear();\n\t\tform.clearValidation();\n\n\t\tconst elements = form.elements;\n\n\t\telements.name.focus();\n\n\t\tlet selectedCell = this.view.getSelectedRange();\n\t\tif(selectedCell)\n\t\t\tselectedCell = this.view.getActiveSheet()+\"!\"+selectedCell;\n\n\t\tform.setValues({\n\t\t\trange: selectedCell,\n\t\t\tscope: \"$global\"\n\t\t});\n\n\t\tthis._updateData();\n\n\t\tthis.view._rangeDialog = true;\n\t\tthis.view.$handleSelection = (st, end, a, b)=>{\n\t\t\tform.elements.range.setValue(toSheetRange(a,b,this.view.getActiveSheet()));\n\t\t\treturn false;\n\t\t};\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t\tthis.view._rangeDialog = null;\n\t}\n\tsaveClick(){\n\t\tconst view = this.view;\n\t\tconst form = this.$dialog.$$(\"form\");\n\t\tconst data = form.getValues();\n\n\t\tif(data.range){\n\t\t\tconst rangeParts = data.range.split(\"!\");\n\n\t\t\tif(rangeParts.length == 1)\n\t\t\t\trangeParts.unshift( view.getActiveSheet() );\n\n\t\t\tdata.range = rangeParts[0]+\"!\"+rangeParts[1].toUpperCase();\n\t\t}\n\n\t\tdata.name = data.name.toUpperCase();\n\n\t\tform.setValues(data);\n\n\t\tif (form.validate()){\n\t\t\tconst table = this.$dialog.$$(\"table\");\n\n\t\t\tif(data.id){\n\t\t\t\tconst oldData = table.getItem(data.id);\n\n\t\t\t\tview.ranges.remove(oldData.name, this._getScope(oldData));\n\t\t\t\ttable.updateItem(data.id, data);\n\t\t\t}\n\t\t\telse\n\t\t\t\ttable.add(data);\n\n\t\t\tview.ranges.add(\n\t\t\t\tdata.name,\n\t\t\t\tdata.range,\n\t\t\t\tthis._getScope(data)\n\t\t\t);\n\n\t\t\tview.refresh();\n\n\t\t\ttable.unselect();\n\t\t\tform.setValues({scope: \"$global\"});\n\t\t}\n\t}\n\t_getScope(data){\n\t\treturn data.scope == \"$global\" ? true : data.scope;\n\t}\n\tremoveRange(id){\n\t\tconst view = this.view;\n\t\tview.confirm({\n\t\t\ttext: webix.i18n.spreadsheet.labels[\"range-remove-confirm\"]\n\t\t}).then(()=>{\n\t\t\tconst table = this.$dialog.$$(\"table\");\n\t\t\tconst item = table.getItem(id);\n\n\t\t\tview.ranges.remove(item.name, this._getScope(item));\n\n\t\t\tview.refresh();\n\t\t\ttable.remove(id);\n\t\t});\n\t}\n\teditRange(id){\n\t\tconst form = this.$dialog.$$(\"form\");\n\t\tconst table = this.$dialog.$$(\"table\");\n\n\t\tform.clearValidation();\n\t\tconst item = webix.copy(table.getItem(id));\n\n\t\tform.setValues(item);\n\t}\n\t$init(){\n\t\tthis.view.attachEvent(\"onSheetRename\", (name, newName)=> this._updateData(name, newName));\n\t\tthis.view.attachEvent(\"onSheetRemove\", (name)=> this._updateData(name));\n\t\tthis.view.attachEvent(\"onSheetAdd\", ()=> this._updateData());\n\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\tconst theform = {\n\t\t\tpadding:0,\n\t\t\ttype: \"clean\",\n\t\t\tcols:[\n\t\t\t\t{ view: \"ssheet-dialog-table\", id: \"table\", borderless:true, columns:[\n\t\t\t\t\t{ id:\"name\", header:locale[\"range-name\"], width: 120 },\n\t\t\t\t\t{ id:\"range\", header:locale[\"range-cells\"], width: 150 },\n\t\t\t\t\t{ id:\"scope\", header:locale[\"range-scope\"], width: 95, template: obj => {\n\t\t\t\t\t\treturn obj.scope == \"$global\" ? locale[\"range-global\"] : obj.scope;\n\t\t\t\t\t}},\n\t\t\t\t\t{ template:\"<span class='webix_icon ssheet_ranges_edit wxi-pencil'></span>\", width:44 },\n\t\t\t\t\t{ template:\"<span class='webix_icon ssheet_ranges_edit wxi-trash'></span>\", width:44 }\n\t\t\t\t],\n\t\t\t\tautowidth:true, height: 200, select:\"row\",\n\t\t\t\ton:{\n\t\t\t\t\tonBeforeSelect: id =>{\n\t\t\t\t\t\treturn id == this.$dialog.$$(\"form\").getValues().id;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonClick:{\n\t\t\t\t\t\"wxi-trash\":(ev, id) => this.removeRange(id),\n\t\t\t\t\t\"wxi-pencil\":(ev, id) => this.editRange(id)\n\t\t\t\t}},\n\t\t\t\t{ width: 270, view: \"form\", id:\"form\",\n\t\t\t\t\trules:{\n\t\t\t\t\t\tname: (_, obj)=> {\n\t\t\t\t\t\t\tconst notUnique = this.$dialog.$$(\"table\").find(item => {\n\t\t\t\t\t\t\t\treturn item.name == obj.name && item.scope == obj.scope && item.id != obj.id;\n\t\t\t\t\t\t\t}, true);\n\n\t\t\t\t\t\t\treturn !notUnique && !getLastCharIndex(obj.name);\n\t\t\t\t\t\t},\n\t\t\t\t\t\trange: isRange,\n\t\t\t\t\t\tscope: webix.rules.isNotEmpty\n\t\t\t\t\t},\n\t\t\t\t\telementsConfig:{\n\t\t\t\t\t\tlabelWidth: 95\n\t\t\t\t\t},\n\t\t\t\t\telements:[\n\t\t\t\t\t\t{ view: \"text\", name:\"name\", label: locale[\"range-name\"]},\n\t\t\t\t\t\t{ view: \"text\", name:\"range\", id:\"range\", label: locale[\"range-cells\"], on:{\n\t\t\t\t\t\t\tonFocus:()=>{\n\t\t\t\t\t\t\t\tconst value = this.$dialog.$$(\"range\").getValue();\n\t\t\t\t\t\t\t\tconst rangeParts = value.split(\"!\");\n\t\t\t\t\t\t\t\tif(rangeParts.length == 2 && this.view.getActiveSheet() != rangeParts[0])\n\t\t\t\t\t\t\t\t\tthis.view.showSheet(rangeParts[0]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}},\n\t\t\t\t\t\t{ view: \"richselect\", name:\"scope\", id:\"sheets\", label: locale[\"range-scope\"], suggest:{\n\t\t\t\t\t\t\tview: \"ssheet-form-suggest\",\n\t\t\t\t\t\t\tbody:{\n\t\t\t\t\t\t\t\tdata: []\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\tmove:true,\n\t\t\thead: webix.i18n.spreadsheet.labels[\"range-title\"],\n\t\t\tautoheight: true,\n\t\t\twidth: 800,\n\t\t\tposition: \"center\",\n\t\t\tbody: theform,\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.saveClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\t_updateData(name, newName){\n\t\tif(!this.$dialog.isVisible())\n\t\t\treturn;\n\n\t\tconst ranges = this.view._mData.getRanges();\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\tconst table = this.$dialog.$$(\"table\");\n\t\tconst form = this.$dialog.$$(\"form\");\n\n\t\tlet editRange = table.getItem( form.getValues().id );\n\t\tif(editRange){\n\t\t\tlet rangeName = editRange.name;\n\n\t\t\tif(name == editRange.scope)\n\t\t\t\trangeName = newName ? newName+\"!\"+rangeName : null;\n\t\t\telse\n\t\t\t\trangeName = editRange.scope+\"!\"+rangeName;\n\n\t\t\teditRange = rangeName ? ranges.get(rangeName) : null;\n\t\t}\n\n\t\ttable.clearAll();\n\n\t\tconst allRanges = ranges.serialize();\n\t\tconst data = [];\n\n\t\tlet selectedId;\n\t\tfor(let i = 0; i < allRanges.length; i++){\n\t\t\tconst id = i+1;\n\t\t\tlet [name, range] = allRanges[i];\n \n\t\t\tif(editRange && ranges.get(name) == editRange)\n\t\t\t\tselectedId = id;\n\n\t\t\tconst nameParts = name.split(\"!\");\n\n\t\t\tdata.push({\n\t\t\t\tscope: nameParts.length == 1 ? \"$global\" : nameParts[0],\n\t\t\t\tname: nameParts[1] || nameParts[0],\n\t\t\t\trange,\n\t\t\t\tid\n\t\t\t});\n\t\t}\n\n\t\ttable.parse(data);\n\n\t\tform.setValues({id:selectedId}, true);\n\t\tif(selectedId)\n\t\t\ttable.select(selectedId);\n\n\t\tconst select = this.$dialog.$$(\"sheets\");\n\t\tconst selectList = select.getList();\n\n\t\tselectList.clearAll();\n\n\t\tconst sheets = [{\n\t\t\tid: \"$global\", value: locale[\"range-global\"]\n\t\t}];\n\t\tthis.view._sheets.forEach(sheet => {\n\t\t\tsheets.push({id:sheet.name, value: sheet.name});\n\t\t});\n\t\tselectList.parse(sheets);\n\n\t\tif(name){\n\t\t\tconst range = this.$dialog.$$(\"range\");\n\t\t\tconst rangeVal = range.getValue();\n\n\t\t\t//remove sheet\n\t\t\tnewName = newName || this.view.getActiveSheet();\n\n\t\t\tif(rangeVal.indexOf(name+\"!\") == 0)\n\t\t\t\trange.setValue((newName)+\"!\"+rangeVal.split(\"!\")[1]);\n\n\t\t\tif(select.getValue() == name)\n\t\t\t\tselect.setValue(newName);\n\t\t}\n\t}\n}","import {Dialog} from \"./common\";\nimport {range} from \"../helpers/column_names\";\nimport group from \"../operations/undo_group\";\n\nexport const action = \"add-dropdown\";\n\nexport class DialogBox extends Dialog{\n\t$show(){\n\t\tlet form = this.$dialog.$$(\"form\");\n\t\tthis.cell = this.view.getSelectedId(true);\n\t\tif (!this.cell.length)\n\t\t\treturn false;\n\n\t\tform.clear();\n\n\t\t//restore previosly selected range\n\t\tlet value = this.view.getCellEditor(this.cell[0].row, this.cell[0].column);\n\t\tif (value && value.options)\n\t\t\tform.elements.range.setValue(value.options);\n\n\t\tthis.view.$handleSelection = function(st, end, a, b){\n\t\t\tform.elements.range.setValue(a+\":\"+b);\n\t\t\treturn false;\n\t\t};\n\n\t\tform.elements.range.focus();\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\tposition:\"center\",\n\t\t\thead:webix.i18n.spreadsheet.labels[\"dropdown-title\"],\n\t\t\tmove: true,\n\t\t\tbody:{\n\t\t\t\tpadding:0, view:\"form\", id:\"form\", rows:[\n\t\t\t\t\t{ view:\"text\", label:webix.i18n.spreadsheet.labels[\"dropdown-range\"], name:\"range\" }\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\tokClick(){\n\t\tconst values = this.$dialog.$$(\"form\").elements.range.getValue();\n\n\t\tif (values){\n\t\t\tif(!range(values, this.view))\n\t\t\t\tthis.view.alert({text:webix.i18n.spreadsheet.labels[\"error-range\"]});\n\t\t\telse{\n\t\t\t\tgroup.set(function(){\n\t\t\t\t\tfor (let i = 0; i < this.cell.length; i++)\n\t\t\t\t\t\tthis.view.setCellEditor(this.cell[i].row, this.cell[i].column, { editor:\"ss_richselect\", options:values});\n\t\t\t\t}, this);\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tthis.close();\n\t}\n}","import {range as getRangePos} from \"../helpers/column_names\";\nimport {cell_template} from \"../table\";\nimport * as arr from \"../helpers/array\";\nimport {serialize as getSpans} from \"../operations/spans\";\n\nclass Ranges{\n\tconstructor(view){\n\t\tthis._master = view;\n\t}\n\tclear(scope){\n\t\tconst sheet = typeof scope == \"string\" ? scope : this._master.getActiveSheet();\n\t\tconst ranges = this.serialize(sheet);\n\t\tranges.forEach(range => {\n\t\t\tif(scope === true){\n\t\t\t\tif(range[2])\n\t\t\t\t\tthis.remove(range[0], scope);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse\n\t\t\t\tthis.remove(range[0], scope);\n\t\t});\n\t}\n\t_normalizeName(name, scope){\n\t\tif(scope !== true)\n\t\t\tname = (scope || this._master.getActiveSheet())+\"!\"+name;\n\t\treturn name;\n\t}\n\t_normalizeRange(range, scope){\n\t\tconst rangeParts = range.split(\"!\");\n\t\tif(rangeParts.length == 1)\n\t\t\trange = (typeof scope == \"string\" ? scope : this._master.getActiveSheet()) + \"!\" + range;\n\t\treturn range;\n\t}\n\tadd(name, range, scope){\n\t\tconst view = this._master;\n\n\t\tview.callEvent(\"onAfterRangeSet\", [name, range, scope]);\n\n\t\tname = this._normalizeName(name, scope);\n\n\t\tview._mData.getRanges().add(name, this._normalizeRange(range, scope));\n\t\tview.callEvent(\"onMathRefresh\", []);\n\t}\n\tgetCode(name, scope){\n\t\tname = this._normalizeName(name, scope);\n\n\t\tconst range = this._master._mData.getRanges().get(name);\n\t\tif(range)\n\t\t\treturn range.source;\n\t}\n\tremove(name, scope){\n\t\tname = this._normalizeName(name, scope);\n\n\t\tthis._master._mData.getRanges().remove(name);\n\t\tthis._master.callEvent(\"onMathRefresh\", []);\n\t}\n\tparse(data, sheet){\n\t\tif(!data)\n\t\t\treturn;\n\t\tfor(let i = 0; i < data.length; i++){\n\t\t\tconst ranges = this._master._mData.getRanges();\n\t\t\tlet [name, range, globalRange] = data[i];\n\t\t\tname = this._normalizeName(name, globalRange||sheet);\n\n\t\t\tif(!ranges.get(name))\n\t\t\t\tranges.add(name, this._normalizeRange(range, sheet));\n\t\t}\n\t}\n\tserialize(sheet){\n\t\tsheet = sheet || this._master.getActiveSheet();\n\t\tconst allRanges = this._master._mData.getRanges().serialize();\n\t\tconst out = [];\n\n\t\tfor(let i = 0; i < allRanges.length; i++){\n\t\t\tconst arr = allRanges[i];\n\t\t\tconst nameParts = arr[0].split(\"!\");\n\t\t\tconst globalRange = nameParts.length == 1;\n\n\t\t\tif(globalRange || nameParts[0] == sheet)\n\t\t\t\tout.push([\n\t\t\t\t\tnameParts[ globalRange ? 0 : 1 ],\n\t\t\t\t\tarr[1],\n\t\t\t\t\tglobalRange\n\t\t\t\t]);\n\t\t}\n\n\t\treturn out;\n\t}\n\tgetRanges(sheet){\n\t\tconst data = this.serialize(sheet);\n\t\treturn data.map(arr => {\n\t\t\treturn {\n\t\t\t\tname: arr[0],\n\t\t\t\trange: arr[1],\n\t\t\t\tglobal: arr[2]\n\t\t\t};\n\t\t});\n\t}\n}\n\nexport function init(view) {\n\tview.ranges = new Ranges(view);\n\n\tview.attachEvent(\"onDataSerialize\", data => {\n\t\tdata.ranges = view.ranges.serialize();\n\t});\n}\n\nfunction nullFilter(){ \n\tconst locale = webix.i18n.spreadsheet.labels;\n\treturn { id:\"$empty\", value:\"\", $value:\"<span class='webix_ssheet_empty'>\"+locale[\"dropdown-empty\"]+\"</span>\" };\n}\n\nfunction getRange(view, r1, c1, r2, c2, spans){\n\tconst out = [];\n\tconst activeSheet = view._mPage === this;\n\n\tfor (let i = r1-1; i <= r2-1; i++) {\n\t\tfor (let j = c1-1; j <= c2-1; j++){\n\t\t\tlet inSpan;\n\t\t\tfor(let s = 0; s < spans.length; s++){\n\t\t\t\tconst span = spans[s];\n\t\t\t\tconst row = i + 1;\n\t\t\t\tconst col = j + 1;\n\t\t\t\tif(!(row == span[0] && col == span[1]) && row >= span[0] && row < span[0] + span[3] && col >= span[1] && col < span[1] + span[2]){\n\t\t\t\t\tinSpan = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(inSpan)\n\t\t\t\tcontinue;\n\t\t\tlet obj = this.getCell(i, j);\n\t\t\tlet cell;\n\n\t\t\tif(!obj)\n\t\t\t\tcell = {\n\t\t\t\t\tvalue: \"\"\n\t\t\t\t};\n\t\t\telse\n\t\t\t\tcell = webix.copy(obj);\n\n\t\t\tif(activeSheet)\n\t\t\t\tcell.$value = cell_template(view, {id: i+1}, null, null, {id:j+1}, true);\n\t\t\telse\n\t\t\t\tdelete cell.format;\n\n\t\t\tcell.id = cell.value;\n\t\t\tout.push(cell);\n\t\t}\n\t}\n\n\treturn out;\n}\n\nexport function rangeOptions(view, text, extra){\n\tlet values = [];\n\tif (typeof text == \"string\"){\n\t\tconst pos = getRangePos(text, view);\n\t\tif (pos){\n\t\t\tlet page = view._mPage;\n\t\t\tif(pos[4])\n\t\t\t\tpage = view._mData.getPage(pos[4]);\n\t\n\t\t\tif(page){\n\t\t\t\tconst spans = (\n\t\t\t\t\tpage == view._mPage ?\n\t\t\t\t\t\tgetSpans(view, {}) :\n\t\t\t\t\t\tarr.find(view._sheets, sheet => sheet.name == pos[4]).content\n\t\t\t\t).spans;\n\t\t\t\tvalues = getRange.apply(page, [view, pos[0], pos[1], pos[2], pos[3], spans]);\n\t\t\t}\n\t\t}\n\t}\n\telse if (webix.isArray(text))\n\t\tfor (let i=0; i<text.length; i++){\n\t\t\tlet v = (text[i] || text[i] === 0) ? text[i] : \"\";\n\t\t\tv = (typeof v === \"object\") ? webix.copy(v) : { id:v, value:v };\n\t\t\tvalues.push(v);\n\t\t}\n\n\tconst test = {};\n\tfor (let i=values.length-1; i>=0; i--){\n\t\tconst boolean = typeof values[i].value === \"boolean\";\n\t\tif(boolean)\n\t\t\tvalues[i].value *= 1;\n\t\tif(boolean || values[i].id === 0)\n\t\t\tvalues[i].id = String(values[i].value);\n\n\t\tif(extra && extra.unique){\n\t\t\tif (test[values[i].id])\n\t\t\t\tvalues.splice(i, 1);\n\t\t\telse\n\t\t\t\ttest[values[i].id] = true;\n\t\t}\n\t}\n\n\tif (extra){\n\t\tlet empty = false;\n\t\tfor (let i=values.length-1; i>=0; i--){\n\t\t\tlet value = values[i].value;\n\t\t\tif (!value && value !== 0){\n\t\t\t\tvalues.splice(i, 1);\n\t\t\t\tempty = true;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tvalues[i].value = String(value);\n\t\t}\n\n\t\tif (extra.order)\n\t\t\tvalues.sort(function(objA, objB){\n\t\t\t\tconst sorters = view.$$(\"cells\").data.sorting.as;\n\t\t\t\tconst a = objA.value;\n\t\t\t\tconst b = objB.value;\n\n\t\t\t\treturn webix.rules.isNumber(a) && webix.rules.isNumber(b) ? sorters.int(a, b) : sorters.string(a, b);\n\t\t\t});\n\n\t\tif (empty && extra.filter)\n\t\t\tvalues.unshift( nullFilter() );\n\n\t\tif (extra.empty)\n\t\t\tvalues.unshift({ id:\"$empty\", $empty:true, value:\"\" });\n\t}\n\treturn values;\n}","import group from \"./undo_group\";\nimport {getType} from \"./types\";\nimport {setSpanCss} from \"./spans\";\nimport {rangeOptions} from \"../mathematics/ranges\";\nimport {changeRange, eachRange, toRange} from \"../helpers/column_names\";\nimport {conditions} from \"../helpers/conditional\";\n\nexport function init(view){\n\tconst table = view._table;\n\n\tview.attachEvent(\"onReset\", () => reset(view));\n\treset(view);\n\n\ttable.on_click.ssheet_filter_sign = (e, id) => {\n\t\tconst filter = table._ssFilters[id.row][id.column];\n\t\tconst mode = filter.mode || getFilterMode(view, id.row, id.column);\n\n\t\tlet options = [];\n\t\tif (filter.options){\n\t\t\tif (typeof filter.options == \"string\")\n\t\t\t\toptions = rangeOptions(view, filter.options, { unique:true, order:true, filter:true });\n\t\t\telse if (webix.isArray(filter.options))\n\t\t\t\toptions = rangeOptions(view, filter.options, { filter:true });\n\t\t}\n\t\tview.callEvent(\"onCommand\", [{id:\"start-filter\", cell:id, mode, options, filter}]);\n\t};\n\ttable.on_dblclick.ssheet_filter_sign = () => false;\n\n\tview.attachEvent(\"onCommand\", (cm) => {\n\t\tif (cm.id === \"create-filter\")\n\t\t\ttoggleFilters(view);\n\t});\n\n\tlet refilter = false;\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tif (type == \"filter\"){\n\t\t\tvalue = (typeof value == \"object\") ? value : null;\n\t\t\tview.setCellFilter(row, column, value);\n\t\t\trefilter = true;\n\t\t}\n\t\telse if (type == \"apply-filter\"){\n\t\t\tconst filter = view.getCellFilter(row, column);\n\n\t\t\tfilter.value = value;\n\t\t\tdelete filter.handler;\n\t\t\tif (value && value.condition){\n\t\t\t\tconst mode = filter.mode || getFilterMode(view, row, column);\n\t\t\t\tfilter.handler = getFilterFunction(mode, filter.value);\n\t\t\t}\n\t\t\trefilter = true;\n\n\t\t\t// update css\n\t\t\tconst add = value && isValueActive(value);\n\t\t\ttable[add?\"addCellCss\":\"removeCellCss\"](row, column, \"ss_filter_active\");\n\t\t\tsetSpanCss(view, row, column, \"ss_filter_active\", add);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAfterUndo\", () => {\n\t\tif (refilter){\n\t\t\tview.filterSpreadSheet();\n\t\t\trefilter = false;\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p) => {\n\t\tif (action == \"filter\"){\n\t\t\tsetSpanCss(view, p.row, p.column, \"ss_filter\", p.newValue);\n\t\t\tsetSpanCss(view, p.row, p.column, \"ss_filter_active\", (p.newValue && p.newValue.value && isValueActive(p.newValue.value)));\n\t\t\tmarkBarFilter(view);\n\t\t}\n\t\telse if (action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n}\n\nfunction reset(view){\n\tview._table._ssFilters = {};\n\tmarkBarFilter(view);\n}\n\nexport function getFilters(table){\n\tconst filters = table._ssFilters;\n\tconst all = [];\n\tfor (let row in filters)\n\t\tfor (let column in filters[row])\n\t\t\tall.push(filters[row][column]);\n\treturn all;\n}\n\nexport function serialize(view,data){\n\tconst filters = getFilters(view._table);\n\tconst result = data.filters = [];\n\n\tfor (let i = 0; i<filters.length; i++){\n\t\tlet {row, column, options, mode, value, lastRow} = filters[i];\n\t\tvalue = value && webix.copy(value);\n\t\tresult.push([row, column, {value, options, mode, lastRow}]);\n\t}\n}\n\nexport function load(view,data){\n\tconst filters = data.filters;\n\n\tif (filters){\n\t\tfor (let i = 0; i < filters.length; i++){\n\t\t\tview.setCellFilter(filters[i][0], filters[i][1], (filters[i][2] || {options:\"\"}));\n\t\t}\n\t\tview.filterSpreadSheet();\n\t}\n}\n\nexport function clearFilters(view, range){\n\tlet refilter = false;\n\teachRange(range, view, function(view, cell){\n\t\tlet filter = view._table._ssFilters[cell.row];\n\t\tif (filter){\n\t\t\tif (filter[cell.column]){\n\t\t\t\trefilter = true;\n\t\t\t\tdelete filter[cell.column];\n\n\t\t\t\tview._table.removeCellCss(cell.row, cell.column, \"ss_filter\");\n\t\t\t\tview._table.removeCellCss(cell.row, cell.column, \"ss_filter_active\");\n\n\t\t\t\tsetSpanCss(view, cell.row, cell.column, \"ss_filter\", false);\n\t\t\t\tsetSpanCss(view, cell.row, cell.column, \"ss_filter_active\", false);\n\t\t\t}\n\t\t}\n\t});\n\n\tif (refilter)\n\t\tview.filterSpreadSheet();\n}\n\nexport function isFilter(view, row, column){\n\tconst filters = view._table._ssFilters;\n\treturn filters[row] && !!filters[row][column];\n}\n\nexport function calibrateRange(view, row, column, range, lastRow){\n\tif(!range)\n\t\trange = {end:{row:row}};\n\n\tif (range.end){\n\t\tvar endRow = range.end.row;\n\t\trange = getFilterRange(view, row, column, endRow, lastRow);\n\t}\n\treturn range;\n}\n\nexport function isValueActive(value){\n\treturn !!(value.includes || (value.condition && value.condition.filter));\n}\n\nfunction isFilterExists(view){\n\tconst filters = view._table._ssFilters;\n\tfor (let row in filters)\n\t\tfor (let column in filters[row])\n\t\t\tif (filters[row][column]) return true;\n\treturn false;\n}\n\nfunction markBarFilter(view){\n\tconst value = isFilterExists(view);\n\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"create-filter\", value}]);\n}\n\n\nfunction getFilterRange(view, row, column, endRow, lastRow){\n\tconst span = view._table.getSpan(row, column);\n\tif (row === endRow || (span && row == endRow - span[3] + 1)){\n\t\tfor (endRow = row; endRow < view.config.rowCount; endRow++){\n\t\t\tconst r = endRow+1;\n\n\t\t\tconst span = view._table.getSpan(r, column);\n\t\t\tif(span && span[0] != r)\n\t\t\t\tcontinue;\n\n\t\t\tconst value = view.getCellValue(r, column);\n\t\t\tif(!value && value !== 0)\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tif(lastRow)\n\t\treturn endRow;\n\n\treturn toRange(row+1, column, endRow, column);\n}\n\nexport function getFilterMode(view, row, column){\n\tfor (let i=row+1; i<view.config.rowCount; i++){\n\t\tconst value = view.getCellValue(i, column);\n\n\t\tif (value || value === 0){\n\t\t\tconst type = getType(view, i, column);\n\t\t\treturn (type == \"number\" || type == \"date\") ? type : \"text\";\n\t\t}\n\t\telse if (value !== \"\")\n\t\t\tbreak;\n\t}\n\treturn \"text\";\n}\n\nfunction toggleFilters(view){\n\tconst range = view._table.getSelectArea();\n\n\tif (isFilterExists(view)){\n\t\tgroup.set(()=> view.removeFilters());\n\t\tif (range)\n\t\t\tview._table.addSelectArea(range.start, range.end);\n\t}\n\telse if (range)\n\t\tgroup.set(()=>{\n\t\t\tlet row = range.start.row;\n\t\t\tfor (let i = range.start.column; i <= range.end.column; i++)\n\t\t\t\tview.setCellFilter(row, i, { options:range, lastRow: calibrateRange(view, row, i, range, true) });\n\t\t});\n\tmarkBarFilter(view);\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tconst filters = data.filters;\n\tif (inc){\n\t\tfor(let i=filters.length-1; i>=0; i--){\n\t\t\tlet [row,column,filter] = filters[i];\n\t\t\tif (name == \"row\" && row >= start.row || name == \"column\" && column >= start.column){\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc){\t//delete filter mark if row was deleted\n\t\t\t\t\t\tfilters.splice(i,1);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else\t\t\t\t\t\t//update mark position if upper row was deleted\n\t\t\t\t\t\tfilters[i][0] = row*1 + inc;\n\t\t\t\t\tif(filter.lastRow)\n\t\t\t\t\t\tfilter.lastRow += inc;\n\t\t\t\t}\n\t\t\t\telse if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\tfilters.splice(i, 1);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else \n\t\t\t\t\t\tfilters[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t\tfilter.options = changeRange(filter.options, name, inc, start);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function pasteFilter(view, extra, row, col, cutted, translate){\n\tconst filter = extra.filter;\n\n\tfilter.options = changeRange(filter.options, \"row\", translate.row, {column:extra.col, row:extra.row});\n\tfilter.options = changeRange(filter.options, \"column\", translate.column, {column:extra.col, row:extra.row});\n\n\tdelete filter.value; delete filter.handler;\n\tview.setCellFilter(row, col, filter);\n}\n\nexport function getSingleOption(mode, type){\n\tconst c = conditions[mode];\n\tfor (let i=0; i<c.length; i++)\n\t\tif (c[i].id == type) return c[i];\n}\n\nexport function getConditions(name){\n\treturn webix.copy( conditions[name] );\n}\n\nexport function getFilterFunction(mode, value){\n\tconst { includes, condition } = value;\n\tconst opt = getSingleOption(mode, condition.type);\n\tconst handler = opt ? opt.handler : function(){ return true; };\n\n\tif (includes){\n\t\tfor (let i=0; i<includes.length; i++)\n\t\t\tincludes[i] = String(includes[i]);\n\t}\n\n\treturn function(value){\n\t\tif (includes){\n\t\t\treturn includes.indexOf(value) !== -1;\n\t\t} else {\n\t\t\treturn condition.filter === \"\" || handler(value, condition.filter);\n\t\t}\n\t};\n}","import {Dialog} from \"./common\";\nimport * as flt from \"../operations/filter\";\n\nexport const action = \"start-filter\";\n\nexport class DialogBox extends Dialog{\n\topen(action){\n\t\tthis.cell = action.cell;\n\t\tthis.$mode = action.mode;\n\t\tthis.$filter = action.filter;\n\n\t\t// cell not provided\n\t\tif (!this.cell || \n\t\t\t// cell is locked\n\t\t\t(this.view.isCellLocked(this.cell.row, this.cell.column))){\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.$dialog){\n\t\t\tthis.$dialog = webix.ui(this.$init());\n\t\t\tthis.view._destroy_with_me.push(this.$dialog);\n\t\t\tthis.$dialog.attachEvent(\"onHide\", () => this.$hide());\n\n\t\t\tconst table = this.view.$$(\"cells\");\n\t\t\ttable.attachEvent(\"onScrollY\", () => this.syncScroll());\n\t\t\ttable.attachEvent(\"onScrollX\", () => this.syncScroll());\n\t\t}\n\n\t\tif (this.$show(this.$filter.value, action.options) === false)\n\t\t\treturn this.close();\n\t\tthis.$dialog.show( this._getTargetNode() );\n\t}\n\t_getTargetNode(){\n\t\tconst table = this.view.$$(\"cells\");\n\t\tconst span = table.getSpan(this.cell.row, this.cell.column);\n\t\treturn span ? table.getSpanNode(this.cell) : table.getItemNode(this.cell);\n\t}\n\t$show(value, options){\n\t\tconst list = this.getList();\n\t\tconst filter = this.getFilter();\n\n\t\tif (filter.config.mode !== this.$mode){\n\t\t\tfilter.define(\"conditions\", this.getConditions(this.$mode));\n\t\t\tfilter.define(\"mode\", this.$mode);\n\t\t}\n\n\t\t// if the filter mode for the current column has been changed - reset the value\n\t\tconst type = value && value.conditions && value.conditions.type;\n\t\tif (type && !flt.getSingleOption(this.$mode, type))\n\t\t\tvalue = \"\";\n\n\t\tlist.clearAll();\n\t\tlist.data.importData(options);\n\n\t\t// filter data has been changed - reset value\n\t\tfilter.config.value = \"\";\n\t\tfilter.setValue( webix.copy(value||{}) );\n\t}\n\t$init(){\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\treturn {\n\t\t\tview:\"popup\",\n\t\t\tcss:\"ssheet_filter\",\n\t\t\tpadding:7,\n\t\t\trelative:\"right\",\n\t\t\tbody:{\n\t\t\t\tmargin:4,\n\t\t\t\trows:[\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"filter\",\n\t\t\t\t\t\tfield:\"value\",\n\t\t\t\t\t\tmode:\"text\",\n\t\t\t\t\t\tconditions:this.getConditions(\"text\"),\n\t\t\t\t\t\tinputs:[\n\t\t\t\t\t\t\t\"text\",\n\t\t\t\t\t\t\t{ view:\"ssheet-datepicker\", timepicker:true, batch:\"datepicker\", on:{\n\t\t\t\t\t\t\t\tonChange:() => this.getFilter().applyFilter()\n\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t{ view:\"ssheet-daterangepicker\", timepicker:true, batch:\"daterangepicker\", on:{\n\t\t\t\t\t\t\t\tonChange:() => this.getFilter().applyFilter()\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t],\n\t\t\t\t\t\ttemplate:function(obj){\n\t\t\t\t\t\t\treturn obj.$value || obj.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{ cols:[\n\t\t\t\t\t\t{ },\n\t\t\t\t\t\t{ view:\"button\", label:locale[\"cancel\"], autowidth:true, css:\"webix_transparent\", on:{\n\t\t\t\t\t\t\t\"onItemClick\": () => this.close()\n\t\t\t\t\t\t}},\n\t\t\t\t\t\t{ view:\"button\", label:locale[\"apply\"], autowidth:true, css:\"webix_secondary\", on:{\n\t\t\t\t\t\t\t\"onItemClick\": () => this.applyFilter()\n\t\t\t\t\t\t}},\n\t\t\t\t\t]}\n\t\t\t\t]\n\t\t\t}\n\t\t};\n\t}\n\tapplyFilter(){\n\t\tconst filter = this.getFilter();\n\t\tconst oldValue = this.$filter.value;\n\t\tconst value = this.$filter.value = filter.getValue();\n\t\tthis.$filter.handler = flt.getFilterFunction(this.$mode, value);\n\n\t\tthis.view.filterSpreadSheet();\n\t\tthis.view.callEvent(\"onAction\", [\"apply-filter\", { row:this.cell.row, column:this.cell.column, value:oldValue, newValue:value }]);\n\t\tthis.setCellStyle(this.cell.row, this.cell.column, \"ss_filter_active\", flt.isValueActive(value));\n\n\t\tthis.close();\n\t}\n\tsetCellStyle(row, column, css, add){\n\t\tconst table = this.view.$$(\"cells\");\n\t\tconst span = this.getSpan(table, row, column);\n\n\t\tif (span){\n\t\t\tif (add){\n\t\t\t\tif (span[3].indexOf(css) == -1)\n\t\t\t\t\tspan[3] += \" \" + css;\n\t\t\t} else {\n\t\t\t\tspan[3] = span[3].replace(\" \" + css, \"\");\n\t\t\t}\n\t\t}\n\t\ttable[add?\"addCellCss\":\"removeCellCss\"](row, column, css);\n\t}\n\tgetSpan(table, row, column){\n\t\tlet item = table.getSpan()[row];\n\t\tif (item)\n\t\t\treturn item[column];\n\t}\n\tgetList(){\n\t\treturn this.getFilter().getChildViews()[2];\n\t}\n\tgetFilter(){\n\t\treturn this.$dialog.getBody().getChildViews()[0];\n\t}\n\tsyncScroll(){\n\t\tif (this.$dialog.isVisible()){\n\t\t\tconst node = this._getTargetNode();\n\t\t\tconst table = this.view.$$(\"cells\");\n\n\t\t\tlet isHidden = false;\n\t\t\tif (node){\n\t\t\t\tconst nodeOffset = webix.html.offset( node );\n\t\t\t\tconst tableOffset = webix.html.offset( table.$view.getElementsByClassName(\"webix_ss_body\")[0] );\n\t\t\t\tconst ydiff = nodeOffset.y - tableOffset.y;\n\t\t\t\tconst xdiff = nodeOffset.x - tableOffset.x + nodeOffset.width;\n\n\t\t\t\tisHidden = (ydiff < 0 || ydiff+nodeOffset.height > tableOffset.height || \n\t\t\t\t\txdiff < 0 || xdiff-nodeOffset.width > tableOffset.width - webix.env.scrollSize);\n\t\t\t}\n\t\t\tif (!node || isHidden)\n\t\t\t\tthis.$dialog.show({x:-9999, y:-9999});\n\t\t\telse \n\t\t\t\tthis.$dialog.show(node);\n\t\t}\n\t}\n\tgetConditions(name){\n\t\tconst locale = webix.i18n.filter;\n\t\tconst conditions = flt.getConditions(name);\n\n\t\tfor (let i=0; i<conditions.length; i++)\n\t\t\tif (conditions[i].id)\n\t\t\t\tconditions[i].value = locale[conditions[i].id];\n\n\t\treturn conditions;\n\t}\n}","import {Dialog} from \"./common\";\nimport {getFormat} from \"../operations/styles\";\nimport * as fmt from \"../operations/formats\";\nimport group from \"../operations/undo_group\";\n\nexport const action = \"custom\";\n\nexport class DialogBox extends Dialog{\n\t$show(){\n\t\tthis.form = this.$dialog.$$(\"form\");\n\t\tthis.list = this.$dialog.$$(\"list\");\n\t\tthis.preview = this.$dialog.$$(\"preview\");\n\n\t\tthis.cell = this.view.getSelectedId(true);\n\t\tif (!this.cell.length)\n\t\t\treturn false;\n\n\t\tthis.fillForm(this.view);\n\n\t\tthis.view.$handleSelection = function(){\n\t\t\treturn false;\n\t\t};\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\t$init(){\n\t\tconst i18n = webix.i18n.spreadsheet;\n\t\tconst labelsLocale = i18n.labels;\n\t\tconst formatsLocale = i18n.formats;\n\n\t\tconst docsLink = \"https://webix-guides.gitbook.io/spreadsheet-user-guide/formatting_numbers#custom-number-format\";\n\t\tconst delimiters = fmt.getDelimiters(\"int\");\n\n\t\tconst commonConfig = [\n\t\t\t{\n\t\t\t\tname:\"zeros\",\n\t\t\t\tview:\"counter\",\n\t\t\t\tcss:\"webix_ssheet_counter\",\n\t\t\t\tlabel:labelsLocale[\"decimal-places\"],\n\t\t\t\tvalue:0,\n\t\t\t\tbatch:\"common\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"separator\",\n\t\t\t\tview:\"checkbox\",\n\t\t\t\tlabel:labelsLocale[\"separator\"],\n\t\t\t\tbatch:\"common\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"richselect\",\n\t\t\t\tname:\"symbol\",\n\t\t\t\tlabel:labelsLocale[\"currency-symbol\"],\n\t\t\t\toptions:fmt.currencies,\n\t\t\t\tbatch:\"common\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"formlist\",\n\t\t\t\tlabel:labelsLocale[\"negative\"],\n\t\t\t\theight: 160,\n\t\t\t\tname:\"negative\",\n\t\t\t\tbatch:\"common\",\n\t\t\t\tcss:\"webix_ssheet_format_negative\",\n\t\t\t\ttemplate: obj => {\n\t\t\t\t\tif(this.list){\n\t\t\t\t\t\tlet format = this.getFormat(obj.id);\n\t\t\t\t\t\tformat = fmt.format2code(format.fmt, format.delimiters);\n\t\t\t\t\t\tconst style = {css:\"\"};\n\t\t\t\t\t\tconst value = format(-1234.56789, style);\n\n\t\t\t\t\t\treturn \"<span class='\"+style.css+\"'>\"+value+\"</span>\";\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdata:[{id:1}, {id:2}, {id:3}, {id:4}]\n\t\t\t}\n\t\t];\n\n\t\tconst customConfig = [\n\t\t\t{\n\t\t\t\tview:\"text\",\n\t\t\t\tlabel: labelsLocale[\"format-pattern\"],\n\t\t\t\tname:\"format\",\n\t\t\t\tlabelPosition:\"top\",\n\t\t\t\tbatch:\"custom\",\n\t\t\t\tplaceholder:\"[>100]0\"+delimiters.groupSign+\"000\"+delimiters.decimalSign+\"00;[>0]None\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"docs\",\n\t\t\t\ttemplate: \"<a href='\"+docsLink+\"' target='_blank' class = 'docs'>\"+labelsLocale[\"format-docs\"]+\"</a>\",\n\t\t\t\tborderless:true,\n\t\t\t\tbatch:\"custom\"\n\t\t\t}\n\t\t];\n\n\t\tconst dateConfig = [\n\t\t\t{\n\t\t\t\tname:\"date\",\n\t\t\t\tbatch:\"date\",\n\t\t\t\tview:\"formlist\",\n\t\t\t\tlabelWidth: 90,\n\t\t\t\theight: 160,\n\t\t\t\tlabel:labelsLocale[\"date-format\"],\n\t\t\t\tcss:\"webix_ssheet_format_date\",\n\t\t\t\ttemplate: obj => fmt.format2code(obj.value, delimiters)(45000),\n\t\t\t\tdata:[\n\t\t\t\t\tformatsLocale.dateFormat,\n\t\t\t\t\tformatsLocale.timeFormat,\n\t\t\t\t\tformatsLocale.fullDateFormat,\n\t\t\t\t\tformatsLocale.longDateFormat\n\t\t\t\t]\n\t\t\t}\n\t\t];\n\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\tposition:\"center\",\n\t\t\twidth:460,\n\t\t\thead: labelsLocale[\"format-title\"],\n\t\t\tmove: true,\n\t\t\tbody:{\n\t\t\t\tpadding:0,\n\t\t\t\tcols:[\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"list\",\n\t\t\t\t\t\tid:\"list\",\n\t\t\t\t\t\tcss:\"webix_ssheet_format_type\",\n\t\t\t\t\t\twidth:120,\n\t\t\t\t\t\tscroll:false,\n\t\t\t\t\t\tdata:this.getFormats(),\n\t\t\t\t\t\tselect:true,\n\t\t\t\t\t\ton:{\n\t\t\t\t\t\t\tonSelectChange: (id)=>{\n\t\t\t\t\t\t\t\tthis.updateForm();\n\t\t\t\t\t\t\t\tswitch(id[0]){\n\t\t\t\t\t\t\t\t\tcase \"custom\":\n\t\t\t\t\t\t\t\t\tcase \"date\":\n\t\t\t\t\t\t\t\t\t\tthis.form.showBatch(id[0]);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tdefault:{\n\t\t\t\t\t\t\t\t\t\tconst elements = this.form.elements;\n\t\t\t\t\t\t\t\t\t\tthis.form.showBatch(\"common\");\n\n\t\t\t\t\t\t\t\t\t\telements.separator[ id[0] == \"percent\" ? \"hide\" : \"show\" ]();\n\t\t\t\t\t\t\t\t\t\telements.symbol[ id[0] == \"price\" ? \"show\" : \"hide\" ]();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"form\",\n\t\t\t\t\t\tid:\"form\",\n\t\t\t\t\t\theight:340,\n\t\t\t\t\t\tpaddingY:0,\n\t\t\t\t\t\tpaddingX:20,\n\t\t\t\t\t\telements:[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: \"preview\",\n\t\t\t\t\t\t\t\ttemplate: function(obj){\n\t\t\t\t\t\t\t\t\tif(obj.value == i18n.table[\"format-error\"])\n\t\t\t\t\t\t\t\t\t\treturn obj.value;\n\t\t\t\t\t\t\t\t\treturn \"<span class ='\"+obj.css+\"'>\"+obj.value+\"</span>\";\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcss: \"webix_ssheet_format_preview\",\n\t\t\t\t\t\t\t\tautoheight: true,\n\t\t\t\t\t\t\t\tborderless:true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t].concat(commonConfig, customConfig, dateConfig),\n\t\t\t\t\t\telementsConfig: {\n\t\t\t\t\t\t\tlabelWidth: 140\n\t\t\t\t\t\t},\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonChange: () => this.updateForm()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.closeWin()\n\t\t\t}\n\t\t};\n\t}\n\tokClick(){\n\t\tlet type = this.list.getSelectedId();\n\t\tlet values = (type == \"custom\")?{format:this.form.getValues().format}:this.form.getValues();\n\t\tvalues.type = type;\n\n\t\tgroup.set(()=>{\n\t\t\tfor (let i = 0; i < this.cell.length; i++)\n\t\t\t\tfmt.addFormat(this.view, this.cell[i].row, this.cell[i].column, values.format, values);\n\t\t});\n\n\t\tthis.view.$$(\"cells\").refresh();\n\t\tthis.closeWin();\n\t}\n\tcloseWin(){\n\t\tconst format = getFormat(this.view, this.cell[0].row, this.cell[0].column);\n\t\tconst name = format || \"common\";\n\n\t\t//default format\n\t\tif(!fmt.isCustom(name))\n\t\t\tthis.view.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"format\", value:name}]);\n\t\tthis.close();\n\t}\n\tgetFormat(negative){\n\t\tconst type = this.list.getSelectedId();\n\t\tlet values = this.form.getValues();\n\n\t\tvalues.negative = negative || values.negative;\n\t\tif(type != \"custom\"){\n\t\t\tif(type != \"date\")\n\t\t\t\tvalues.date = \"\";\n\n\t\t\tvalues = fmt.formToValues(type, values);\n\t\t\treturn {\n\t\t\t\tfmt: fmt.serializeFormat(values),\n\t\t\t\tdelimiters:fmt.getDelimiters(type)\n\t\t\t};\n\t\t}\n\t\telse\n\t\t\treturn {\n\t\t\t\tfmt: values.format,\n\t\t\t\tdelimiters: fmt.getDelimiters(type)\n\t\t\t};\n\t}\n\tfillForm(view){\n\t\tconst locale = webix.i18n.spreadsheet;\n\t\tconst format = getFormat(view, this.cell[0].row, this.cell[0].column);\n\t\tlet values = { zeros:0, separator: 0, negative: 1, date: locale.formats.dateFormat, symbol:fmt.currencies[0].value, format: \"\"};\n\t\tlet type;\n\n\t\tlet name = format || \"\";\n\n\t\tvalues.format = fmt.getFormatSource(name || \"price\");\n\n\t\tif(!name)\n\t\t\ttype = name = \"price\";\n\t\telse if(name == \"string\")\n\t\t\ttype = name = \"custom\";\n\t\telse\n\t\t\ttype = fmt.formatHelpers[name].values.type;\n\n\t\tif(type != \"custom\")\n\t\t\twebix.extend(values, fmt.formatHelpers[name].values, true);\n\n\t\tconst item = this.view.$$(\"cells\").getItem(this.cell[0].row);\n\t\tconst col = this.cell[0].column;\n\n\t\tthis.value = webix.isUndefined(item[col]) ? \"\" : item[col];\n\n\t\tthis.form.setValues(values);\n\t\tthis.list.select(type);\n\t\tthis.updateForm();\n\t}\n\tupdateForm(){\n\t\tconst form = this.form.elements;\n\t\tconst format = this.getFormat();\n\t\tlet value = this.value;\n\n\t\tconst isText = value === \"\" || isNaN(value);\n\n\t\tif(fmt.checkFormat(format, \"date\") && (isText || fmt.isDateInvalid(value)))\n\t\t\tvalue = 45000;\n\t\telse if(isText && !fmt.checkFormat(format, \"string\"))\n\t\t\tvalue = 1234.56789;\n\n\t\tlet style = {css:\"\"};\n\t\tvalue = fmt.format2code(format.fmt, format.delimiters)(value, style);\n\n\t\t//preview values\n\t\tthis.preview.parse({value:value, css:style.css});\n\t\tform.negative.refresh();\n\t\tform.date.refresh();\n\n\t\t//set new format string\n\t\tform.format.setValue(format.fmt);\n\t}\n\tgetFormats(){\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\treturn [\n\t\t\t{id: \"price\", value: locale.currency},\n\t\t\t{id: \"int\", value: locale.number},\n\t\t\t{id: \"percent\", value: locale.percent},\n\t\t\t{id: \"date\", value: locale.date},\n\t\t\t{id: \"custom\", value: locale[\"custom-format\"]}\n\t\t];\n\t}\n}","import {Dialog} from \"./common\";\nimport {getJsDateFromExcel, getExcelDateFromJs} from \"../mathematics/methods\";\nimport {isDateInvalid} from \"../operations/formats\";\nimport {getDateEditFormat} from \"../operations/formats\";\nimport {getType} from \"../operations/types\";\nimport {find} from \"../helpers/array\";\n\nexport const action = \"conditional-format\";\n\nfunction getConditionStyle(data){\n\treturn data.map(item => {\n\t\titem.id = item.css;\n\t\treturn item;\n\t});\n}\n\nexport class DialogBox extends Dialog{\n\t_rulesToArr(){\n\t\tconst conditions = this.view.conditions.handlers;\n\t\treturn [\n\t\t\t{\n\t\t\t\tvalue: webix.i18n.spreadsheet.labels[\"common\"],\n\t\t\t\tdisabled:true,\n\t\t\t\t$css:\"webix_ssheet_cformats_type\"\n\t\t\t},\n\t\t\t...conditions.date, //number rules equal to date\n\t\t\t{\n\t\t\t\tvalue: webix.i18n.spreadsheet.labels[\"text\"],\n\t\t\t\tdisabled:true,\n\t\t\t\t$css:\"webix_ssheet_cformats_type\"\n\t\t\t},\n\t\t\t...conditions.text\n\t\t].map(rule => {\n\t\t\tif(!rule.value)\n\t\t\t\trule.value = webix.i18n.filter[ rule.id ];\n\t\t\treturn rule;\n\t\t});\n\t}\n\n\t_getCondition() {\n\t\tconst view = this.view;\n\t\tconst values = this._getDatalayout().getValue();\n\n\t\tconst data = [];\n\t\tvalues.forEach(v => {\n\t\t\tconst item = [v.condition];\n\t\t\tif (v.condition != \"between\" && v.condition != \"notBetween\")\n\t\t\t\titem.push(this._normalizeValue(v.value, v.condition));\n\t\t\telse\n\t\t\t\titem.push([\n\t\t\t\t\tthis._normalizeValue(v.value, v.condition),\n\t\t\t\t\tthis._normalizeValue(v.value2, v.condition)\n\t\t\t\t]);\n\n\t\t\titem.push(v.style);\n\t\t\tfor (let i=0; i<item.length; i++){\n\t\t\t\tif (item[i] === \"\" || (webix.isArray(item[i]) && item[i].indexOf(\"\") != -1))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\tdata.push(item);\n\t\t});\n\n\t\tview.callEvent(\"onConditionSet\", [data]);\n\t}\n\n\t_safeInt(a){\n\t\tconst num = parseFloat(a);\n\t\tif (num == a) return num;\n\t\treturn a;\n\t}\n\n\t_setCondition() {\n\t\tconst view = this.view;\n\t\tconst collection = view.conditions.get(this.cell.row, this.cell.column);\n\n\t\tconst data = [];\n\t\tif (collection) {\n\t\t\tcollection.forEach(item => {\n\t\t\t\tconst values = {};\n\t\t\t\tvalues.condition = item[0];\n\t\t\t\tif (webix.isArray(item[1])) {\n\t\t\t\t\tvalues.value = this._formatValue(item[1][0], values.condition);\n\t\t\t\t\tvalues.value2 = this._formatValue(item[1][1], values.condition);\n\t\t\t\t} else\n\t\t\t\t\tvalues.value = this._formatValue(item[1], values.condition);\n\n\t\t\t\tvalues.style = item[2];\n\t\t\t\tdata.push(values);\n\t\t\t});\n\t\t}\n\n\t\twhile (data.length < 3)\n\t\t\tdata.push({ });\n\n\t\tthis._getDatalayout().setValue(data);\n\t}\n\n\t_getDatalayout(){\n\t\treturn this.$dialog.getBody().getChildViews()[0].getChildViews()[1].getBody();\n\t}\n\n\t_formatValue(value, condition){\n\t\tif(!(condition && this._isNotDateRule(condition))){\n\t\t\tif(this.editFormat && value !== \"\" && value[0] != \"=\"){\n\t\t\t\tvalue = getJsDateFromExcel(value);\n\t\t\t\treturn this.editFormat(value);\n\t\t\t}\n\t\t}\n\t\treturn value.toString();\n\t}\n\n\t_normalizeValue(value, condition){\n\t\tif(!this._isNotDateRule(condition)){\n\t\t\tif(this.editFormat){\n\t\t\t\tif(isNaN(value)){\n\t\t\t\t\tif(value[0] != \"=\"){\n\t\t\t\t\t\tconst parser = webix.Date.strToDate( webix.i18n.spreadsheet.formats.parseDateTime );\n\t\t\t\t\t\tvalue = parser(value);\n\t\t\t\t\t\tvalue = isNaN(value) ? \"\" : getExcelDateFromJs(value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tvalue = isDateInvalid(value) ? \"\" : value;\n\t\t\t}\n\t\t\telse\n\t\t\t\tvalue = this._safeInt(value, 10);\n\t\t}\n\t\treturn value;\n\t}\n\n\t_isNotDateRule(condition){\n\t\tif(condition == \"equal\" || condition == \"notEqual\")\n\t\t\treturn false;\n\t\treturn find(this.view.conditions.handlers.text, obj => obj.id == condition);\n\t}\n\n\tokClick(){\n\t\tthis._getCondition();\n\t\tthis.close();\n\t}\n\n\t$show(){\n\t\tthis.cell = this.view.getSelectedId();\n\t\tif(!this.cell)\n\t\t\treturn false;\n\n\t\tconst type = getType(this.view, this.cell.row, this.cell.column);\n\n\t\tif(type == \"date\")\n\t\t\tthis.editFormat = getDateEditFormat(this.view, this.cell.row, this.cell.column);\n\n\t\tthis.$dialog.queryView(\"text\", \"all\").forEach(view => {\n\t\t\tview.define({placeholder: type == \"date\" ? this._formatValue(45000) : \"\"});\n\t\t\tview.refresh();\n\t\t});\n\n\t\tthis.view.$handleSelection = (st, end, a, b)=>{\n\t\t\tif (this.activeValue && a == b){\n\t\t\t\tthis.activeValue.setValue(\"=\"+a);\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t\tthis._setCondition();\n\t}\n\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t\tdelete this.editFormat;\n\t\tthis._getDatalayout().clearAll();\n\t}\n\n\tgetRows(data){\n\t\tconst dialog = this;\n\t\treturn {\n\t\t\tview: \"form\",\n\t\t\tpadding: 0,\n\t\t\tborderless: true,\n\t\t\tcss:\"webix_ssheet_cformats\",\n\t\t\telements: [{\n\t\t\t\tmargin: 10,\n\t\t\t\tpadding: { right: 4 },\n\t\t\t\tcols: [\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"richselect\",\n\t\t\t\t\t\tname: \"style\",\n\t\t\t\t\t\twidth:120,\n\t\t\t\t\t\tplaceholder: webix.i18n.spreadsheet.labels[\"conditional-style\"],\n\t\t\t\t\t\tcss: \"webix_ssheet_cformat_select\",\n\t\t\t\t\t\tsuggest: {\n\t\t\t\t\t\t\tpadding:0,\n\t\t\t\t\t\t\tborderless: true,\n\t\t\t\t\t\t\tcss: \"webix_ssheet_cformat_list\",\n\t\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\t\ttemplate(obj) {\n\t\t\t\t\t\t\t\t\tconst css = \"webix_ssheet_cformat \"+obj.css;\n\t\t\t\t\t\t\t\t\treturn `<div class=\"${css}\">${obj.name}</div>`;\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tdata: data\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"richselect\",\n\t\t\t\t\t\twidth: 150,\n\t\t\t\t\t\tname: \"condition\",\n\t\t\t\t\t\tplaceholder: webix.i18n.spreadsheet.labels[\"conditional-operator\"],\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonChange: function(newv) {\n\t\t\t\t\t\t\t\tconst elements = this.getFormView().elements;\n\n\t\t\t\t\t\t\t\tif (dialog.editFormat){\n\t\t\t\t\t\t\t\t\tif (dialog._isNotDateRule(newv))\n\t\t\t\t\t\t\t\t\t\telements.value.define({placeholder: \"\"});\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\tconst value = dialog._normalizeValue(elements.value.getValue(), newv);\n\t\t\t\t\t\t\t\t\t\telements.value.setValue(dialog._formatValue(value, newv));\n\t\t\t\t\t\t\t\t\t\telements.value.define({placeholder: dialog._formatValue(45000)});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telements.value.refresh();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (newv == \"between\" || newv == \"notBetween\")\n\t\t\t\t\t\t\t\t\telements.value2.show();\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\telements.value2.hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuggest:{\n\t\t\t\t\t\t\tview: \"ssheet-form-suggest\",\n\t\t\t\t\t\t\tbody:{\n\t\t\t\t\t\t\t\tdata: this._rulesToArr()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tcols: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: \"text\",\n\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\tonFocus: (current_view)=>{\n\t\t\t\t\t\t\t\t\t\tthis.activeValue = current_view;\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tonBlur: (current_view)=>{\n\t\t\t\t\t\t\t\t\t\tlet value = current_view.getValue();\n\t\t\t\t\t\t\t\t\t\tif(value !== \"\"){\n\t\t\t\t\t\t\t\t\t\t\tconst elements = current_view.getFormView().elements;\n\t\t\t\t\t\t\t\t\t\t\tconst condition = elements.condition.getValue();\n\t\t\t\t\t\t\t\t\t\t\tvalue = this._normalizeValue(value, condition);\n\t\t\t\t\t\t\t\t\t\t\tcurrent_view.setValue(this._formatValue(value, condition));\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tname: \"value\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: \"text\",\n\t\t\t\t\t\t\t\tname: \"value2\",\n\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\tonFocus: (current_view)=>{\n\t\t\t\t\t\t\t\t\t\tthis.activeValue = current_view;\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tonBlur: (current_view)=>{\n\t\t\t\t\t\t\t\t\t\tlet value = current_view.getValue();\n\t\t\t\t\t\t\t\t\t\tif(value !== \"\"){\n\t\t\t\t\t\t\t\t\t\t\tconst elements = current_view.getFormView().elements;\n\t\t\t\t\t\t\t\t\t\t\tconst condition = elements.condition.getValue();\n\t\t\t\t\t\t\t\t\t\t\tvalue = this._normalizeValue(value, condition);\n\t\t\t\t\t\t\t\t\t\t\tcurrent_view.setValue(this._formatValue(value, condition));\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\thidden: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{ view:\"icon\", css:\"webix_ssheet_cformat_icon\", icon:\"wxi-trash\", click: vid => {\n\t\t\t\t\t\tconst form = webix.$$(vid).getFormView();\n\t\t\t\t\t\tconst dlayout = this._getDatalayout();\n\t\t\t\t\t\tdlayout.getValue();\t\t\t// save local changes before rendering\n\n\t\t\t\t\t\tconst index = dlayout.getChildViews().indexOf(form);\n\t\t\t\t\t\tdlayout.remove(dlayout.getIdByIndex(index));\n\n\t\t\t\t\t\tif (dlayout.count() < 3) dlayout.add({ });\n\t\t\t\t\t}}\n\t\t\t\t]}\n\t\t\t]};\n\t}\n\n\t$init(){\n\t\tconst margin = webix.skin.$active.layoutMargin.form;\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: webix.i18n.spreadsheet.labels[\"conditional-format\"],\n\t\t\tposition: \"center\",\n\t\t\twidth: 770,\n\t\t\tmove: true,\n\t\t\tmargin,\n\t\t\tbody: { margin:0, rows:[\n\t\t\t\t{\n\t\t\t\t\theight: 36,\n\t\t\t\t\tpadding: { left: 12 },\n\t\t\t\t\tcols: [\n\t\t\t\t\t\t{ view:\"label\", width: 131, label: webix.i18n.spreadsheet.labels.display },\n\t\t\t\t\t\t{ view:\"label\", width: 161, label: webix.i18n.spreadsheet.labels.condition },\n\t\t\t\t\t\t{ view:\"label\", label: webix.i18n.spreadsheet.labels.value },\n\t\t\t\t\t\t{ view:\"icon\", css:\"webix_ssheet_cformat_icon\", icon:\"wxi-plus-circle\",\n\t\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\t\tconst dlayout = this._getDatalayout();\n\t\t\t\t\t\t\t\tdlayout.getValue();\t\t\t// save local changes before rendering\n\t\t\t\t\t\t\t\tdlayout.add({ });\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ width: 4 + webix.env.scrollSize }\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"scrollview\",\n\t\t\t\t\tmaxHeight: webix.skin.$active.inputHeight * 3 + 4,\n\t\t\t\t\tborderless: true,\n\t\t\t\t\tscroll: \"y\",\n\t\t\t\t\tbody: {\n\t\t\t\t\t\tview: \"datalayout\",\n\t\t\t\t\t\tpadding: 0,\n\t\t\t\t\t\tborderless: true,\n\t\t\t\t\t\trows: [ this.getRows(getConditionStyle(this.view.config.conditionStyle)) ]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]},\n\t\t\ton: {\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n}","import {Dialog} from \"./common\";\n\nexport const action = \"excel-export\";\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tthis.view.$handleSelection = function(){\n\t\t\treturn false;\n\t\t};\n\n\t\tform.elements.sheets.setValue(this.getSheets());\n\t\tform.elements.filename.setValue(\"Data\");\n\t\tform.elements.filename.getInputNode().select();\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: webix.i18n.spreadsheet.labels[\"export-title\"],\n\t\t\tmove: true,\n\t\t\tposition: \"center\",\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\telements:[\n\t\t\t\t\t{ view:\"text\", name:\"filename\",  placeholder:webix.i18n.spreadsheet.labels[\"export-name\"] },\n\t\t\t\t\t{ view:\"multicheckbox\", name:\"sheets\", css:\"webix_ssheet_multicheckbox\" }\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\tgetSheets(){\n\t\tconst view = this.view;\n\t\tconst sheets = view._sheets;\n\t\tlet value = [];\n\n\t\tfor(let i = 0; i < sheets.length; i++){\n\t\t\tconst state = sheets[i].state;\n\t\t\tif(state == \"veryHidden\")\n\t\t\t\tcontinue;\n\n\t\t\tvalue.push({\n\t\t\t\tname: sheets[i].name,\n\t\t\t\thidden: state == \"hidden\",\n\t\t\t\tactive: view._activeSheet === sheets[i].name ? 1 : 0\n\t\t\t});\n\t\t}\n\n\t\treturn value;\n\t}\n\tokClick(){\n\t\tconst values = this.$dialog.getBody().getValues();\n\t\twebix.toExcel(this.view, values);\n\t\tthis.close();\n\t}\n}","import {Dialog} from \"./common\";\n\nexport const action = \"add-link\";\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tconst cell = this.view.getSelectedId();\n\t\tif(!cell)\n\t\t\treturn false;\n\t\tif (!this.restoreValue(form))\n\t\t\tform.clear();\n\t\tform.elements.name.focus();\n\n\t\tthis.view.$handleSelection = (st, end, a)=>{\n\t\t\tform.elements.url.setValue(\"#\"+a);\n\t\t\treturn false;\n\t\t};\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\trestoreValue(form){\n\t\tconst cell = this.view.getSelectedId();\n\t\tif (cell){\n\t\t\tconst value = this.view.getCellValue(cell.row, cell.column);\n\t\t\tif (value && typeof value == \"string\" && value.indexOf(\"=HYPERLINK\") === 0){\n\t\t\t\tconst parts = value.split(\"\\\"\");\n\t\t\t\tform.setValues({\n\t\t\t\t\tname: (parts[3] || \"\"),\n\t\t\t\t\turl: (parts[1] || \"\")\n\t\t\t\t});\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: webix.i18n.spreadsheet.labels[\"link-title\"],\n\t\t\tmove: true,\n\t\t\tposition: \"center\",\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\telements:[\n\t\t\t\t\t{ view:\"text\", name:\"name\",  placeholder:webix.i18n.spreadsheet.labels[\"link-name\"]},\n\t\t\t\t\t{ view:\"text\", name:\"url\",  placeholder:webix.i18n.spreadsheet.labels[\"link-url\"]}\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\tokClick(){\n\t\tconst cell = this.view.getSelectedId();\n\t\tconst data = this.$dialog.getBody().getValues();\n\n\t\tlet text = \"\";\n\t\tif (data.url){\n\t\t\tdata.name = data.name || data.url;\n\t\t\tif (!/^(#|(https?:\\/\\/))/i.test(data.url))\n\t\t\t\tdata.url = \"http://\" + data.url;\n\t\t\ttext = `=HYPERLINK(\"${data.url}\",\"${data.name}\")`;\n\t\t}\n\n\t\tthis.view.setCellValue(cell.row, cell.column, text);\n\t\tthis.view.refresh();\n\t\tthis.close();\n\t}\n}","import {isVisible} from \"../sheets\";\n\nexport function print(view, options, htmlOnly){\n\tconst views = [];\n\tconst order = {};\n\tconst active = view._activeSheet;\n\n\tconst html = _buildHtml(view, options, active, views, order);\n\tview.showSheet(active);\n\n\tconst promise = webix.promise.defer();\n\twebix.promise.all(views).then(res =>{\n\t\tconst keys = Object.keys(order).sort( view.$$(\"cells\").data.sorting.as.int );\n\t\tfor (let i = keys.length - 1; i >= 0; i--) {\n\t\t\tconst index = keys[i];\n\t\t\thtml.insertBefore(res[index], html.childNodes[ order[index] ]);\n\t\t}\n\n\t\tif(htmlOnly)\n\t\t\treturn promise.resolve(html);\n\n\t\twebix.html.insertBefore(html, options.docFooter, document.body);\n\t\twindow.print();\n\t\t_cleanHtml(view, html);\n\n\t\tpromise.resolve();\n\t});\n\treturn promise;\n}\n\nexport function init(view){\n\tview.$customPrint = function(options, htmlOnly){\n\t\treturn print(view, options, htmlOnly);\n\t};\n\n\tview._printBorders = {\n\t\tpaper:\"A4\",\n\t\tfit:\"page\",\n\t\tmode:\"landscape\",\n\t\tmargin:1,\n\t\tsheetnames:1\n\t};\n\n\tview.attachEvent(\"onUndo\", (action, row, column, value) => {\n\t\tif (action == \"print-borders\")\n\t\t\tview.showPrintBorders(value);\n\t});\n\n\tview.attachEvent(\"onAfterSheetShow\", ()=> showBorders(view, true));\n\tview.attachEvent(\"onChange\", ()=> showBorders(view, true));\n}\n\nfunction _cleanHtml(view, html){\n\twebix.html.remove(html);\n\n\tview._sheets.forEach((sheet, i) => {\n\t\twebix.html.removeStyle(\".wss_\"+view.$index+\"_\"+i);\n\t});\n}\nfunction _buildHtml(view, options, active, views, order){\n\tlet doc = webix.html.create(\"div\", { \"class\":\"webix_ssheet_print\"});\n\n\toptions.xCorrection = 1;\n\toptions.header = options.header || false;\n\toptions.trim = webix.isUndefined(options.trim) ? true : options.trim;\n\toptions.sheetnames = webix.isUndefined(options.sheetnames) ? true : options.sheetnames;\n\tconst baseIndex = view.$index;\n\tconst pageSize = getPageSize(options);\n\n\tlet sheets = options.sheets;\n\t\n\t// backward compatibility, options.data can be only \"selection\"\n\t// \"current\" and \"all\" are deprecated\n\tconst data = options.data;\n\n\tif(!sheets || data == \"current\" || data == \"selection\"){\n\t\tsheets = [active];\n\t}\n\telse if(typeof sheets == \"string\")\n\t\tsheets = [sheets];\n\telse if(sheets === true || data == \"all\")\n\t\tsheets = view._sheets.map(sheet => sheet.name);\n\n\tsheets = sheets.filter(sheet => isVisible(view, sheet));\n\n\tsheets.forEach((name, i) => {\n\t\tview.$index = baseIndex+\"_\"+i;\n\t\tconst grid = view.$$(\"cells\");\n\n\t\tview.showSheet(name);\n\t\tlet prefix = \"wss_\"+view.$index;\n\n\t\tview._print = true;\n\t\tlet table = grid.$customPrint(options, true);\n\t\tdelete view._print;\n\n\t\tconst tbl = table.firstChild;\n\t\tconst [header, body] = tbl.children;\n\n\t\tconst topSplit = header.childElementCount;\n\t\tconst sheetName = options.sheetnames ? 20 : 0;\n\t\tlet splitHeight = sheetName;\n\n\t\tfor (let s = 1; s <= topSplit; s++)\n\t\t\tsplitHeight += grid.getItem(s).$height || grid.config.rowHeight;\n\n\t\tif(splitHeight > pageSize.height / 4)\n\t\t\tfor (let i = topSplit - 1; i >= 0; i--){\n\t\t\t\tif(body.firstChild)\n\t\t\t\t\twebix.html.insertBefore(header.children[i], body.firstChild);\n\t\t\t\telse\n\t\t\t\t\tbody.appendChild(header.children[i]);\n\t\t\t}\n\n\t\tif(sheetName){\n\t\t\tconst sheetNode = webix.html.create(\"tr\", {class:\"webix_ssheet_sheetname\"}, `<td>${name}:</td>`);\n\n\t\t\tif(header.firstChild)\n\t\t\t\twebix.html.insertBefore(sheetNode, header.firstChild);\n\t\t\telse\n\t\t\t\theader.appendChild(sheetNode);\n\t\t}\n\n\t\t//for empty sheet we don't have any HTML\n\t\tconst node = table.firstChild;\n\t\tif (node && name != active){\n\t\t\twebix.html.removeCss(node, \"wss_\"+baseIndex);\n\t\t\twebix.html.addCss(node, prefix);\n\t\t}\n\n\t\tdoc.appendChild(table);\n\n\t\tif(options.external)\n\t\t\tfor(let id in view.views._pull){\n\t\t\t\tconst innerView = view.views._pull[id];\n\t\t\t\tif(innerView.type == \"image\"){\n\t\t\t\t\tconst img = webix.html.create(\"IMG\", {\n\t\t\t\t\t\tsrc: innerView.data,\n\t\t\t\t\t\twidth: (innerView.config.width || 500)+\"px\",\n\t\t\t\t\t\theight: (innerView.config.height || 300)+\"px\"\n\t\t\t\t\t});\n\n\t\t\t\t\tconst promise = webix.promise.defer();\n\t\t\t\t\tviews.push(promise);\n\t\t\t\t\timg.onload = ()=> promise.resolve();\n\n\t\t\t\t\tdoc.appendChild(img);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tconst externalUI = webix.$$(id).getBody();\n\t\t\t\t\tif(externalUI.$customPrint){\n\t\t\t\t\t\tconst customPrint = externalUI.$customPrint({size: options.size}, true);\n\t\t\t\t\t\tif(customPrint.then){\n\t\t\t\t\t\t\torder[views.length] = doc.childElementCount;\n\t\t\t\t\t\t\tviews.push(customPrint);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tdoc.appendChild( customPrint );\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tdoc.appendChild( printInnerView(webix.$$(id).getBody()) );\n\t\t\t\t}\n\t\t\t}\n\n\t\tif(i+1 < view._sheets.length){\n\t\t\tconst br = webix.html.create(\"DIV\", {\"class\":\"webix_print_pagebreak\"});\n\t\t\tdoc.appendChild(br);\n\t\t}\n\t});\n\n\tview.$index = baseIndex;\n\treturn doc;\n}\n\nfunction printInnerView(view){\n\tconst body = view.$view.cloneNode(true);\n\n\t//copy data from all canvases\n\tconst canvases = view.$view.getElementsByTagName(\"canvas\");\n\tif(canvases.length)\n\t\tfor(let i = canvases.length-1; i >=0; i--){\n\t\t\tconst destCtx = body.getElementsByTagName(\"canvas\")[i].getContext(\"2d\");\n\t\t\tdestCtx.drawImage(canvases[i], 0, 0);\n\t\t}\n\n\tconst container = webix.html.create(\"div\", {class:\"webix_ssheet_ui\"});\n\tcontainer.appendChild(body);\n\n\treturn container;\n}\n\nfunction getPageSize(options){\n\tconst sizes = {\n\t\t\"A3\": { width: 11.7, height: 16.5 },\n\t\t\"A4\": { width: 8.27, height:11.7 },\n\t\t\"letter\": { width: 8.5, height:11 }\n\t};\n\n\tconst size = sizes[options.paper];\n\tconst landscape = options.mode == \"landscape\";\n\n\tconst margin = options.margin ? 2 * webix.env.printMargin : 0;\n\n\treturn {\n\t\twidth: size[landscape ? \"height\" : \"width\"] * webix.env.printPPI - margin,\n\t\theight: size[landscape ? \"width\" : \"height\"] * webix.env.printPPI - margin\n\t};\n}\n\nexport function showBorders(view, redraw){\n\tif(redraw && !view._printBorders.$render)\n\t\treturn;\n\n\tconst borders = {rows:{}, cols:{}};\n\tconst grid = view.$$(\"cells\");\n\tconst options = view._printBorders;\n\n\tconst pageSize = getPageSize(options);\n\n\tconst sheetName = options.sheetnames ? 20 : 0;\n\tlet topSplit = grid.config.topSplit;\n\tlet splitHeight = sheetName;\n\n\tfor (let s = 1; s <= topSplit; s++)\n\t\tsplitHeight += grid.getItem(s).$height || grid.config.rowHeight;\n\n\tif(splitHeight > pageSize.height / 4){\n\t\ttopSplit = 0;\n\t\tsplitHeight = sheetName;\n\t}\n\n\tlet rowsHeight = splitHeight;\n\tfor (let r = topSplit + 1; r <= view.config.rowCount; r++) {\n\t\tconst height = grid.getItem(r).$height || grid.config.rowHeight;\n\n\t\tif(rowsHeight + height > pageSize.height){\n\t\t\trowsHeight = splitHeight;\n\t\t\tborders.rows[r == 1 ? r : r-1] = 1;\n\t\t}\n\n\t\trowsHeight += height;\n\t}\n\n\tif(options.fit != \"page\"){\n\t\tlet colsWidth = 0;\n\t\tfor (let c = 1; c <= view.config.columnCount; c++) {\n\t\t\tconst width = grid.getColumnConfig(c).width || grid.config.columnWidth;\n\n\t\t\tif(colsWidth + width > pageSize.width){\n\t\t\t\tcolsWidth = 0;\n\t\t\t\tborders.cols[c == 1 ? c : c-1] = 1;\n\t\t\t}\n\n\t\t\tcolsWidth += width;\n\t\t}\n\t}\n\n\tview._printBorders.$render = borders;\n\tview.refresh();\n}","import {Dialog} from \"./common\";\nimport {isVisible} from \"../sheets\";\nimport {showBorders} from \"../operations/print\";\n\nexport const action = \"print\";\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tconst list = form.elements.sheets.getList();\n\t\tlist.clearAll();\n\t\tlist.parse( this.getSheets(this.view) );\n\n\t\tform.setValues({\n\t\t\tdata:\"full\",\n\t\t\tsheets: this.view.getActiveSheet(),\n\t\t}, true);\n\t}\n\t$init(){\n\t\tconst labels = webix.i18n.spreadsheet.labels;\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: labels[\"print-title\"],\n\t\t\tmove: true,\n\t\t\tmodal:true,\n\t\t\twidth:580,\n\t\t\tposition: \"center\",\n\t\t\tbuttons:false,\n\t\t\ton:{\n\t\t\t\tonHide: ()=> {\n\t\t\t\t\twebix.extend(this.view._printBorders, this.getValues(), true);\n\t\t\t\t\tshowBorders(this.view, true);\n\t\t\t\t}\n\t\t\t},\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\telementsConfig:{\n\t\t\t\t\tlabelWidth: 0\n\t\t\t\t},\n\t\t\t\telements:[\n\t\t\t\t\t{ type:\"section\", template: labels[\"print-settings\"]},\n\t\t\t\t\t{ cols:[\n\t\t\t\t\t\t{ view:\"radio\", name:\"data\", vertical:true, options:[\n\t\t\t\t\t\t\t{ id:\"full\", value: labels[\"sheets\"]},\n\t\t\t\t\t\t\t{ id:\"selection\", value: labels[\"selection\"]}\n\t\t\t\t\t\t], on:{\n\t\t\t\t\t\t\tonChange:function(newv){\n\t\t\t\t\t\t\t\tconst elements = this.getFormView().elements;\n\t\t\t\t\t\t\t\tconst sheets = elements.sheets;\n\n\t\t\t\t\t\t\t\tif(newv == \"full\"){\n\t\t\t\t\t\t\t\t\telements.sheetnames.setValue(1);\n\t\t\t\t\t\t\t\t\tsheets.enable();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tsheets.disable();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpadding:{\n\t\t\t\t\t\t\t\tright:30\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"sheets\",\n\t\t\t\t\t\t\t\t\tview: \"multiselect\",\n\t\t\t\t\t\t\t\t\twidth: 160,\n\t\t\t\t\t\t\t\t\tstringResult:false,\n\t\t\t\t\t\t\t\t\tsuggest: {\n\t\t\t\t\t\t\t\t\t\tselectAll: true,\n\t\t\t\t\t\t\t\t\t\tbody:{\n\t\t\t\t\t\t\t\t\t\t\tdata:[]\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ rows:[\n\t\t\t\t\t\t\t{view:\"checkbox\", name:\"sheetnames\", value:1, labelRight:labels[\"sheet-names\"]},\n\t\t\t\t\t\t\t{view:\"checkbox\", name:\"borderless\", labelRight:labels[\"borderless\"]},\n\t\t\t\t\t\t\t{view:\"checkbox\", name:\"skiprows\", labelRight:labels[\"skip-rows\"]},\n\t\t\t\t\t\t\t{view:\"checkbox\", name:\"margin\", labelRight:labels[\"margin\"]},\n\t\t\t\t\t\t\t{view:\"checkbox\", name:\"external\", labelRight:labels[\"external-ui\"]},\n\t\t\t\t\t\t]}\n\t\t\t\t\t]},\n\t\t\t\t\t{ type:\"section\", template: labels[\"print-paper\"]},\n\t\t\t\t\t{ view:\"radio\", name:\"paper\", value:\"A4\", options:[\n\t\t\t\t\t\t{ id:\"letter\", value:labels[\"page-letter\"]},\n\t\t\t\t\t\t{ id:\"A4\", value:labels[\"page-a4\"]},\n\t\t\t\t\t\t{ id:\"A3\", value:labels[\"page-a3\"]}\n\t\t\t\t\t]},\n\t\t\t\t\t{ type:\"section\", template: labels[\"print-layout\"]},\n\t\t\t\t\t{ rows:[\n\t\t\t\t\t\t{view:\"radio\", name:\"fit\", value:\"page\", options:[\n\t\t\t\t\t\t\t{ id:\"page\", value:labels[\"page-width\"]},\n\t\t\t\t\t\t\t{ id:\"data\", value:labels[\"page-actual\"]}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{ view:\"radio\", name:\"mode\", value:\"landscape\", options:[\n\t\t\t\t\t\t\t{ id:\"portrait\", value:labels[\"page-portrait\"]},\n\t\t\t\t\t\t\t{ id:\"landscape\", value:labels[\"page-landscape\"]}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]},\n\t\t\t\t\t{\n\t\t\t\t\t\tcols:[\n\t\t\t\t\t\t\t{ },\n\t\t\t\t\t\t\t{ view: \"button\", css:\"ssheet_cancel_button\", hotkey:\"esc\",\n\t\t\t\t\t\t\t\tvalue: labels.cancel, autowidth:true,\n\t\t\t\t\t\t\t\tclick: () => this.close()\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ view: \"button\", value: labels[\"print-borders\"], autowidth:true,\n\t\t\t\t\t\t\t\tclick: () => this.printPreview()\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ view: \"button\", value: labels.print, hotkey:\"enter\", autowidth:true,\n\t\t\t\t\t\t\t\tclick: () => this.okClick()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t};\n\t}\n\tgetValues(){\n\t\tconst data = this.$dialog.getBody().getValues({disabled:false});\n\t\tdata.margin = data.margin?0:{};\n\t\treturn data;\n\t}\n\tprintPreview(){\n\t\tthis.close();\n\t\tthis.view.showPrintBorders(true);\n\t}\n\tgetSheets(view){\n\t\treturn view._sheets\n\t\t\t.map(sheet => ({value: sheet.name, id: sheet.name}))\n\t\t\t.filter(sheet => isVisible(view, sheet.id));\n\t}\n\tokClick(){\n\t\tconst data = this.$dialog.getBody().getValues({disabled:false});\n\t\tdata.margin = data.margin?0:{};\n\t\tthis.close();\n\t\twebix.print(this.view, data);\n\t}\n}\n","import {Dialog} from \"./common\";\n\nexport const action = \"add-comment\";\n\nexport class DialogBox extends Dialog{\n\topen(action){\n\t\t//we get cell only on hover commented cell\n\t\tthis.cell = action.cell ? action.cell : this.view.getSelectedId();\n\n\t\t// cell not provided\n\t\tif (!this.cell || \n\t\t\t// cell is locked and in the edit mode\n\t\t\t(this.view.isCellLocked(this.cell.row, this.cell.column) && !action.viewonly) ||\n\t\t\t// action blocked by user's code\n\t\t\t!(this.view.callEvent(\"onBeforeCommentShow\", [this.cell.row, this.cell.column, !action.viewonly]))){\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.view.comments._activeComment = {editStatus: !action.viewonly, cell: this.cell};\n\n\t\tif(!this.$dialog){\n\t\t\tthis.$dialog = webix.ui(this.$init());\n\t\t\tthis.view._destroy_with_me.push(this.$dialog);\n\t\t\tthis.view.comments.commentsView = this.$dialog;\n\t\t\tthis.$dialog.attachEvent(\"onHide\", ()=>this.$hide());\n\t\t\tthis.view.attachEvent(\"onCommentHide\", ()=>this.$dialog.hide());\n\t\t}\n\n\t\tconst form = this.$dialog.getBody();\n\n\t\tconst span = this.view.$$(\"cells\").getSpan(this.cell.row, this.cell.column);\n\t\tconst item = span ? {row: this.cell.row, column:(span[1]*1+span[2]-1)} : this.cell;\n\n\t\twebix.delay(()=>{\n\t\t\tthis.$dialog.show(this.view.$$(\"cells\").getItemNode(item));\n\t\t\tthis._setComment();\n\t\t});\n\t\tif (this.$show(this.$dialog, form) === false)\n\t\t\tthis.close();\n\t}\n\t$show(){\n\t\tthis.textarea = this.$dialog.queryView({view:\"textarea\"});\n\t\tthis.template = this.$dialog.queryView({view:\"template\"});\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"popup\",\n\t\t\tcss:\"ssheet_comments\",\n\t\t\tminWidth:250,\n\t\t\tminHeight:150,\n\t\t\trelative:\"right\",\n\t\t\tresize:true,\n\t\t\ton:{\n\t\t\t\tonViewResize:()=>{\n\t\t\t\t\tthis.$dialog.hide();\n\t\t\t\t\tthis.$dialog.show();\n\t\t\t\t\tif(this.textarea.isVisible())\n\t\t\t\t\t\tthis.textarea.focus();\n\t\t\t\t}\n\t\t\t},\n\t\t\tbody:{\n\t\t\t\tanimate:false,\n\t\t\t\tcells:[\n\t\t\t\t\t{\n\t\t\t\t\t\tview: \"template\",\n\t\t\t\t\t\tcss:\"ssheet_comment_view\",\n\t\t\t\t\t\tborderless: true,\n\t\t\t\t\t\tscroll:\"auto\",\n\t\t\t\t\t\tonClick:{\n\t\t\t\t\t\t\t\"ssheet_comment_view\":() => {\n\t\t\t\t\t\t\t\tif(!(this.view.config.readonly || this.view.isCellLocked(this.cell.row, this.cell.column)))\n\t\t\t\t\t\t\t\t\tthis.showInput(this.view.comments.get(this.cell.row, this.cell.column));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview: \"textarea\",\n\t\t\t\t\t\ton:{\n\t\t\t\t\t\t\tonChange:()=>{\n\t\t\t\t\t\t\t\tthis.addComment();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonFocus:()=>{\n\t\t\t\t\t\t\t\tthis.view.comments._activeComment = {editStatus: true, cell: this.cell};\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonBlur:()=>{\n\t\t\t\t\t\t\t\tthis.view.comments._activeComment = {};\n\t\t\t\t\t\t\t\tthis.$dialog.hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t};\n\t}\n\t_setComment(){\n\t\tconst comment = this.view.comments.get(this.cell.row, this.cell.column);\n\t\tif(this.view.comments._activeComment.editStatus)\n\t\t\tthis.showInput(comment);\n\t\telse\n\t\t\tthis.showTemplate(comment);\n\t}\n\tshowTemplate(text){\n\t\tthis.template.show();\n\t\tthis.template.setHTML(text);\n\t}\n\tshowInput(text){\n\t\tthis.view.$$(\"cells\").select(this.cell.row, this.cell.column);\n\t\twebix.delay(()=>{\n\t\t\tthis.changeTextarea(text);\n\t\t\tthis.textarea.show();\n\t\t\tthis.textarea.focus();\n\t\t});\n\t}\n\taddComment(){\n\t\tthis.view.comments.add(this.cell.row, this.cell.column, this.textarea.getValue());\n\t}\n\tchangeTextarea(text){\n\t\tthis.textarea.blockEvent();\n\t\tthis.textarea.setValue(text||\"\");\n\t\tthis.textarea.unblockEvent();\n\t}\n}","import {Dialog} from \"./common\";\nexport const action = \"resize\";\n\nexport class DialogBox extends Dialog{\n\topen(action){\n\t\tthis.group = action.group;\n\t\tthis.header = action.value;\n\t\tDialog.prototype.open.apply(this, arguments);\n\t}\n\t$show(){\n\t\tconst sel = this.view.getSelectedId();\n\t\tif(!sel)\n\t\t\treturn false;\n\t\tthis.view.$handleSelection = ()=>{\n\t\t\treturn false;\n\t\t};\n\n\t\tconst elements = this.$dialog.getBody().elements;\n\t\tthis.type = elements[\"type\"];\n\t\tthis.size = elements[\"size\"];\n\n\t\tthis.$dialog.getHead().getChildViews()[0].setHTML(this.header);\n\t\tconst grid = this.view.$$(\"cells\");\n\n\t\tlet value;\n\t\tif(this.group == \"row\")\n\t\t\tvalue = grid.getItem(sel.row).$height || grid.config.rowHeight;\n\t\telse\n\t\t\tvalue = grid.getColumnConfig(sel.column).width || grid.config.columnWidth;\n\n\t\tthis.type.getOption(1).value = webix.i18n.spreadsheet.labels[this.group == \"row\" ? \"height\" : \"width\"];\n\t\tthis.type.setValue(1);\n\t\tthis.type.refresh();\n\n\t\tthis.size.setValue(value);\n\t\tthis.size.focus();\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\tokClick(){\n\t\tconst type = this.type.getValue();\n\n\t\tlet size = \"auto\";\n\t\tif(type == 1)\n\t\t\tsize = this.size.getValue()*1;\n\t\telse if(type == 3)\n\t\t\tsize = this.view.$$(\"cells\").config[this.group == \"row\" ? \"rowHeight\" : \"columnWidth\"];\n\n\t\tif(this.group == \"row\")\n\t\t\tthis.view.setRowHeight(null, size);\n\t\telse\n\t\t\tthis.view.setColumnWidth(null, size);\n\n\t\tthis.close();\n\t}\n\t$init(){\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\tposition:\"center\",\n\t\t\twidth: 300,\n\t\t\tmove: true,\n\t\t\tbody:{\n\t\t\t\tpadding:0,\n\t\t\t\tcols:[\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"radio\", name:\"type\", vertical:true, optionHeight:40,\n\t\t\t\t\t\ton:{\n\t\t\t\t\t\t\tonChange: id => {\n\t\t\t\t\t\t\t\tif(id == 1)\n\t\t\t\t\t\t\t\t\tthis.size.enable();\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tthis.size.disable();\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\toptions:[\n\t\t\t\t\t\t\t{id:1, value: \"\"},\n\t\t\t\t\t\t\t{id:2, value: locale[\"fit-content\"]},\n\t\t\t\t\t\t\t{id:3, value: locale[\"default-size\"]},\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{rows: [\n\t\t\t\t\t\t{view:\"text\", name: \"size\", width:120},\n\t\t\t\t\t]}\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n}","import * as imc from \"./imagecell\";\nimport * as imt from \"./imagetop\";\nimport * as asw from \"./sparkline\";\nimport * as rgs from \"./ranges\";\nimport * as dpd from \"./dropdown\";\nimport * as flt from \"./filter\";\nimport * as fmt from \"./format\";\nimport * as cnd from \"./conditional\";\nimport * as exp from \"./export\";\nimport * as lnk from \"./link\";\nimport * as pnt from \"./print\";\nimport * as cmt from \"./comments\";\nimport * as siz from \"./sizing\";\n\nconst bases = [ imt, imc, asw, rgs, dpd, flt, fmt, cnd, exp, lnk, pnt, cmt, siz ];\n\nexport function init(view){\n\tconst dialogs = {};\n\tconst viewBases = view.config.readonly ? [cmt, exp, pnt] : bases;\n\n\tfor (let i = 0; i < viewBases.length; i++)\n\t\tdialogs[viewBases[i].action] = new viewBases[i].DialogBox(view);\n\n\tview.attachEvent(\"onCommand\", function(action){\n\t\tconst box = dialogs[action.id];\n\t\tif (box) box.open(action);\n\t});\n\n\tview.attachEvent(\"onAction\", function(id, values){\n\t\t//hide win when the external ui is removed\n\t\tif(id == \"add-view\" && !values.newValue){\n\t\t\tconst box = dialogs[\"add-image-top\"];\n\t\t\tif(box && box.viewid == values.row){\n\t\t\t\tbox.close();\n\t\t\t}\n\t\t}\n\t});\n}","import {ignoreReset, ignoreUndo}  from \"../operations/undo\";\nimport group  from \"../operations/undo_group\";\nimport {adjustSpan}  from \"../operations/spans\";\nimport {updateMaxColumn} from \"../helpers/column_names\";\nimport {find} from \"../helpers/array\";\n\nexport function init(view){\n\tview.attachEvent(\"onCommand\", (action, start, end) => {\n\t\tif (action.id == \"add\" || action.id == \"del\"){\n\t\t\tvar area = view._table.getSelectArea();\n\t\t\tif(area && !(start && end)){\n\t\t\t\tstart = area.start;\n\t\t\t\tend = area.end;\n\t\t\t}\n\n\t\t\tif (start && end){\n\t\t\t\tif(action.group == \"column\" && action.id == \"add\")\n\t\t\t\t\tupdateMaxColumn(view.config.columnCount + (end.column - start.column) + 1);\n\n\t\t\t\tgroup.set(function(){\n\t\t\t\t\tprocess(action, start, end, view);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\tview.attachEvent(\"onUndo\", (action, row, column, value, dir, extra) => {\n\t\tif (action == \"grid-change\"){\n\t\t\tconst state = view._table.getScrollState();\n\n\t\t\t//if we added rows/cols - regine can update cell references on other pages on undo\n\t\t\tif(extra){\n\t\t\t\tif(!dir)\n\t\t\t\t\tview._mPage[row ? \"removeRow\" : \"removeColumn\"]((row || column)-1, extra.count);\n\t\t\t\telse\n\t\t\t\t\tview._mPage[row ? \"addRow\" : \"addColumn\"]((row || column)-1, extra.count);\n\t\t\t}\n\t\t\t//if removed - can't, so parse full data and show sheet\n\t\t\telse\n\t\t\t\tstate.sheet = view.getActiveSheet();\n\n\t\t\tloadChangedData(view, value, state);\n\t\t}\n\t});\n}\n\nfunction process(action, start, end, view) {\n\tlet select = view._table.getSelectArea();\n\tconst state = view._table.getScrollState();\n\n\tconst del = action.id == \"del\";\n\tconst oldData = view.serialize({sheets: del, viewIds:true});\n\tconst newData = webix.copy(oldData);\n\tconst data = {value:oldData, newValue:newData};\n\n\tif(!del)\n\t\twebix.extend(data, {\n\t\t\t[action.group]: start[action.group],\n\t\t\textra: {\n\t\t\t\tcount: end.row - start.row + 1\n\t\t\t}\n\t\t});\n\n\tconst obj = del ? find(newData, sheet => sheet.name == view.getActiveSheet()).content : newData;\n\n\tconst spanData = [];\n\tconst spans = obj.spans;\n\tfor (let i in spans){\n\t\tconst span = adjustSpan(spans[i], action, start, end, view, obj.data, spanData);\n\t\tif (span[2] <= 0 || span[3] <= 0)\n\t\t\tspans.splice(i, 1);\n\t}\n\n\tconst values = getUpdateValues(action, start, end);\n\tignoreUndo(function(){\n\t\tview.callEvent(\"onAction\", [\"before-grid-change\", {\n\t\t\tname: values.name,\n\t\t\tinc: values.inc,\n\t\t\tdata: obj,\n\t\t\tstart: start\n\t\t}]);\n\t},view);\n\n\tif (action.group == \"column\"){\n\t\tif (del)\n\t\t\t_delColumn(action, start, end, view);\n\t\telse\n\t\t\t_addColumn(action, start, end, view);\n\t}\n\telse if (action.group == \"row\") {\n\t\tif (del)\n\t\t\t_delRow(action, start, end, view);\n\t\telse\n\t\t\t_addRow(action, start, end, view);\n\t}\n\n\t// muon updates data and ranges\n\tconst updatedData = view.serialize();\n\tobj.data = updatedData.data;\n\tobj.ranges = updatedData.ranges;\n\n\tspanData.forEach(item => {\n\t\tobj.data.push(item);\n\t});\n\n\tview.callEvent(\"onAction\", [\"grid-change\", data]);\n\n\tignoreUndo(function() {\n\t\tloadChangedData(view, obj, state);\n\t},view);\n\n\tif (select){\n\t\tselect = fixSelectArea(select, view);\n\t\tif (select)\n\t\t\tview.$$(\"cells\").addSelectArea(select.start, select.end);\n\t}\n}\n\nfunction fixSelectArea(select, view){\n\tconst config = view.config;\n\n\tconst rows = config.rowCount;\n\tconst cols = config.columnCount;\n\n\tif (select.start.row*1 > rows) select.start.row = rows;\n\tif (select.end.row*1 > rows) select.end.row = rows;\n\tif (select.start.column*1 > cols) select.start.column = cols;\n\tif (select.end.column*1 > cols) select.end.column = cols;\n\n\tif (\n\t\tview.isRowVisible(select.start.row) &&\n\t\tview.isRowVisible(select.end.row) &&\n\t\tview.isColumnVisible(select.start.column) &&\n\t\tview.isColumnVisible(select.end.column)\n\t)\n\t\treturn select;\n}\n\nfunction loadChangedData(view, data, state){\n\t// data loading resets undo history, and\n\t// we need to preserve it\n\tignoreReset(function(){\n\t\tview.$handleSelection = null;\n\t\tview.parse(data);\n\n\t\tif(state){\n\t\t\tif(state.sheet)\n\t\t\t\tview.showSheet(state.sheet);\n\t\t\tview._table.scrollTo(state.x, state.y);\n\t\t}\n\t});\n}\n\nfunction getUpdateValues( action, start, end){\n\tvar name = action.group,\n\t\tinc = action.id==\"add\"?1:(action.id==\"del\"?-1:0);\n\n\tif(inc) {\n\t\t// span support\n\t\tif (name == \"row\")\n\t\t\tinc += inc * (end.row - start.row);\n\t\tif (name == \"column\")\n\t\t\tinc += inc * (end.column - start.column);\n\t}\n\treturn {name: name, inc: inc};\n}\n\nfunction _addColumn(action, start, end, view) {\n\tlet count = end.column - start.column + 1;\n\n\tview._mPage.addColumn(start.column-1, count);\n\tview.config.columnCount += count;\n\n\tview.callEvent(\"onColumnOperation\", [action.id, start.column, end.column]);\n}\n\nfunction _delColumn(action, start, end, view) {\n\tlet count = end.column - start.column + 1;\n\n\tif (view.config.columnCount === count){\n\t\tif (start.column == end.column)\n\t\t\treturn; //deleting last column, ignoring\n\t\t//prevent deleting all columns\n\t\tend.column--;\n\t\tcount--;\n\t}\n\n\tview._mPage.removeColumn(start.column-1, count);\n\tview.config.columnCount -= count;\n\n\tview.callEvent(\"onColumnOperation\", [action.id, start.column, end.column]);\n}\n\nfunction _addRow(action, start, end, view) {\n\tconst count = end.row - start.row + 1;\n\n\tview._mPage.addRow(start.row-1, count);\n\tview.config.rowCount += count;\n\n\tview.callEvent(\"onRowOperation\", [action.id, start.row, end.row]);\n}\n\nfunction _delRow(action, start, end, view) {\n\tlet count = end.row - start.row + 1;\n\n\tif (view.config.rowCount === count){\n\t\tif (start.row == end.row)\n\t\t\treturn; //deleting last column, ignoring\n\t\t//prevent deleting all columns\n\t\tend.row--;\n\t\tcount--;\n\t}\n\n\tview._mPage.removeRow(start.row-1, count);\n\tview.config.rowCount -= count;\n\n\tview.callEvent(\"onRowOperation\", [action.id, start.row, end.row]);\n}","import group from \"./undo_group\";\nimport {setSpanCss} from \"./spans\";\nimport {rangeOptions} from \"../mathematics/ranges\";\nimport * as fmt from \"../operations/formats\";\nimport {changeRange, eachRange} from \"../helpers/column_names\";\n\nexport function init(view){\n\tconst table = view._table;\n\n\tview.attachEvent(\"onReset\", () => reset(view));\n\treset(view);\n\n\ttable.attachEvent(\"onBeforeEditStart\", function(id){\n\t\tlet col = this.getColumnConfig(id.column);\n\t\tif (this._ssEditors[id.row]){\n\t\t\tlet ed = this._ssEditors[id.row][id.column];\n\t\t\tif (ed){\n\t\t\t\twebix.extend(col, ed, true);\n\t\t\t\twebix.extend(col, {row: view.getRow(id.row)}, true);\n\t\t\t\tif (ed.options){\n\t\t\t\t\tif (typeof ed.options == \"string\")\n\t\t\t\t\t\tcol.options = rangeOptions(view, ed.options, { unique:true, order:true, empty:true });\n\t\t\t\t\telse if (webix.isArray(ed.options))\n\t\t\t\t\t\tcol.options = rangeOptions(view, ed.options, { empty:true });\n\n\t\t\t\t\tif(col.collection){\n\t\t\t\t\t\tcol.collection.clearAll();\n\t\t\t\t\t\tcol.collection.parse(col.options);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\t// update format if editor supports this feature\n\ttable.attachEvent(\"onBeforeEditStop\", function(state, editor, ignore){\n\t\tif (!ignore && editor.getFormat){\n\t\t\tconst value = editor.getValue();\n\t\t\tlet format = editor.getFormat(value);\n\n\t\t\tgroup.set(function(){\n\t\t\t\tview.setCellValue(editor.row, editor.column, value);\n\t\t\t\tif (format){\n\t\t\t\t\tfmt.addFormat(view, editor.row, editor.column, fmt.getFormatSource(format));\n\t\t\t\t} else\n\t\t\t\t\tfmt.removeFormat(view, editor.row, editor.column);\n\t\t\t});\n\n\t\t\tconst cell = view.getSelectedId();\n\t\t\tif (cell && cell.row == editor.row && cell.column == editor.column){\n\t\t\t\tformat = format || \"common\";\n\t\t\t\tformat = fmt.isCustom(format) ? \"custom\" : format;\n\t\t\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"format\", value:format}]);\n\t\t\t}\n\t\t}\n\t});\n\n\ttable.attachEvent(\"onAfterEditStop\", function(state, editor){\n\t\tconst col = this.getColumnConfig(editor.column);\n\n\t\tcol.editor = \"text\";\n\t\tdelete col.popup; delete col.$popup; delete col.row;\n\t});\n\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tif (type == \"dropdown\")\n\t\t\tview.setCellEditor(row, column, value);\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p) => {\n\t\tif (action == \"dropdown\"){\n\t\t\tsetSpanCss(view, p.row, p.column, \"ss_editor\", p.newValue);\n\t\t}\n\t\telse if (action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n}\n\nfunction reset(view){\n\tview._table._ssEditors = {};\n}\n\nexport function serialize(view,data){\n\tvar row, column,\n\t\ttblEditors = view._table._ssEditors,\n\t\teditors = [];\n\n\tfor (row in tblEditors){\n\t\tfor (column in tblEditors[row])\n\t\t\teditors.push([row, column, tblEditors[row][column]]);\n\t}\n\tdata.editors = editors;\n}\n\nexport function load(view,data){\n\tconst editors = data.editors;\n\n\tif (editors)\n\t\tfor (let i=0; i<editors.length; i++)\n\t\t\tview.setCellEditor.apply(view, editors[i]);\n}\n\nexport function clearEditors(view, range){\n\tview._table.editStop();\n\teachRange(range, view, function(view, cell){\n\t\tlet editor = view._table._ssEditors[cell.row];\n\t\tif (editor){\n\t\t\tif (editor[cell.column]){\n\t\t\t\tdelete editor[cell.column];\n\t\t\t\tview._table.removeCellCss(cell.row, cell.column, \"ss_editor\");\n\t\t\t\tsetSpanCss(view, cell.row, cell.column, \"ss_editor\", false);\n\t\t\t}\n\t\t}\n\t});\n}\n\nexport function isEditor(view, row, column){\n\tconst editor = view._table._ssEditors;\n\treturn editor[row] && !!editor[row][column];\n}\n\n// called on column/row add, delete, hide,show\nfunction updatePosition(view, name, inc, data, start){\n\tconst editors = data.editors;\n\n\tif (inc){\n\t\t// create new editors\n\t\tfor(let i=editors.length-1; i>=0; i--){\n\t\t\tlet [row,column,editor] = editors[i];\n\t\t\tif (name == \"row\" && row >= start.row || name == \"column\" && column >= start.column){\n\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc){\t//delete editor mark if row was deleted\n\t\t\t\t\t\teditors.splice(i,1);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else\t\t\t\t\t\t//update mark position if upper row was deleted\n\t\t\t\t\t\teditors[i][0] = row*1 + inc;\n\t\t\t\t}\n\t\t\t\telse if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\teditors.splice(i, 1);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else \n\t\t\t\t\t\teditors[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t\teditor.options = changeRange(editor.options, name, inc, start);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function pasteDropdown(view, extra, row, col, cutted){\n\tconst editor = extra.dropdown;\n\n\tview.setCellEditor(row, col, editor);\n\tif (cutted === 1)\n\t\tview.setCellEditor(extra.row, extra.col, {});\n}","import group from \"./undo_group\";\nimport {pasteCondition} from \"../operations/conditional_formats\";\nimport {pasteDropdown} from \"../operations/dropdown\";\nimport {pasteFilter} from \"../operations/filter\";\nimport {pasteSpan} from \"../operations/spans\";\n\nlet styledata, clipdata, origin, cutted, updateFilters, specialPaste;\n\nexport function init(view){\n\tconst clipboard = view.config.clipboard;\n\tconst browserClipboard = navigator.clipboard;\n\n\tif(clipboard === false)\n\t\treturn;\n\n\twebix.clipbuffer.init();\n\tconst buffer = document.querySelector(\".webix_clipbuffer\");\n\n\tconst keyC = 67; //keyboard 'c' code\n\tconst keyX = 88; //keyboard 'x' code\n\tconst grid = view.$$(\"cells\");\n\n\tgrid.attachEvent(\"onAfterAreaAdd\", () => _sel_to_clip(view, buffer));\n\n\tgrid.attachEvent(\"onKeyPress\", (code, e) => {\n\t\tif((code === keyC || code === keyX) && (e.ctrlKey || e.metaKey) && grid.getSelectedId()){\n\t\t\tcutted = (code === keyX)*1;\n\t\t\tsetClipboard(view, buffer);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onCommand\", action => {\n\t\tif(action.id.indexOf(\"paste\") != -1){\n\t\t\tspecialPaste = action.id.split(\"-\")[1];\n\n\t\t\tif(browserClipboard && browserClipboard.readText){\n\t\t\t\tbrowserClipboard.readText()\n\t\t\t\t\t.then(text => {\n\t\t\t\t\t\twebix.clipbuffer.set(text);\n\t\t\t\t\t\t_clip_to_sel(view, grid, buffer.value);\n\t\t\t\t\t})\n\t\t\t\t\t.catch(()=> {\n\t\t\t\t\t\t_clip_to_sel(view, grid, clipdata);\n\t\t\t\t\t})\n\t\t\t\t\t.finally(()=> {\n\t\t\t\t\t\tspecialPaste = null;\n\t\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\t_clip_to_sel(view, grid, clipdata);\n\t\t\t\tspecialPaste = null;\n\t\t\t}\n\t\t}\n\t\telse if(action.id == \"copy\" || action.id == \"cut\"){\n\t\t\tcutted = (action.id == \"cut\")*1;\n\t\t\tsetClipboard(view, buffer, browserClipboard, true);\n\t\t}\n\t});\n\n\tif (!view.config.readonly) {\n\t\tgrid.attachEvent(\"onPaste\", text => {\n\t\t\t_clip_to_sel(view, grid, text);\n\t\t});\n\t}\n}\n\nfunction setClipboard(view, buffer, browserClipboard, menu){\n\tconst grid = view.$$(\"cells\");\n\tstyledata = _get_sel_style(view, grid);\n\n\tif(menu && browserClipboard && browserClipboard.writeText)\n\t\tbrowserClipboard.writeText(buffer.value);\n\n\tclipdata = buffer.value;\n\torigin = grid.getSelectArea();\n\n\tif(cutted && Object.keys(grid._ssFilters).length !== 0)\n\t\tupdateFilters = allFiltersInZone(grid._ssFilters, origin, view.config.columnCount);\n}\n\nfunction _sel_to_clip(view, buffer){\n\tconst grid = view.$$(\"cells\");\n\tif(grid.getSelectedId())\n\t\twebix.delay(()=>{\n\t\t\tconst data = [];\n\t\t\tgrid.mapSelection(function(value, row, col, row_ind) {\n\t\t\t\tvalue = _updateDelimiter(view._mPage.getValue(row-1, col-1), view.config);\n\t\t\t\tif (!data[row_ind]) data[row_ind] = [];\n\t\t\t\tdata[row_ind].push(value);\n\t\t\t});\n\t\t\tconst clipdata = webix.csv.stringify(data, grid.config.delimiter);\n\n\t\t\tif (grid.getEditor()){\n\t\t\t\tbuffer.value = clipdata;\n\t\t\t} else {\n\t\t\t\tbuffer.focus();\n\t\t\t\twebix.clipbuffer.set(clipdata);\n\t\t\t}\n\t\t\twebix.UIManager.setFocus(grid);\n\t\t});\n}\n\nfunction _updateDelimiter(value, config) {\n\tconst format = getClipboardNumberFormat(config);\n\n\tif(webix.rules.isNumber(value) && format)\n\t\tvalue = webix.Number.numToStr(format)(value);\n\n\treturn value;\n}\n\nfunction _clip_to_sel(view, grid, text){\n\tif(!text)\n\t\ttext = \"\";\n\n\tvar leftTop = grid.getSelectArea();\n\tif (!leftTop) return;\n\tvar start = leftTop.start;\n\tvar fromSheet = text === clipdata;\n\n\tvar data = fromSheet ? styledata : webix.csv.parse(text, grid.config.delimiter);\n\tif(!fromSheet)\n\t\tdata = _changeDelimiter(data, view.config);\n\n\tvar translate = { id:\"move\", column:0, row: 0, cut:cutted };\n\tif (fromSheet){\n\t\ttranslate.column = start.column - origin.start.column;\n\t\ttranslate.row = start.row - origin.start.row;\n\t}\n\n\tif(specialPaste || !fromSheet){\n\t\tcutted = 0;\n\t\tupdateFilters = 0;\n\t}\n\n\tgroup.set(function(){\n\t\tif (updateFilters)\n\t\t\tview.removeFilters();\n\n\t\t_add_row_col(view, start, data);\n\n\t\tif (cutted === 1) {\n\t\t\tfor (let row = origin.start.row; row <= origin.end.row; row++) {\n\t\t\t\tfor (let column = origin.start.column; column <= origin.end.column; column++) {\n\t\t\t\t\tview.setCellValue(row, column, null);\n\t\t\t\t\tview.setStyle(row, column, null);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst colCount = leftTop.end.column - start.column + 1;\n\t\tconst rowCount = leftTop.end.row - start.row + 1;\n\n\t\tconst dataRowCount = data.length;\n\t\tconst dataColCount = data[0].length;\n\n\t\tif (!updateFilters && (rowCount > dataRowCount || colCount > dataColCount)) {\n\t\t\tfor(let r = 0, ri = 0; r < Math.max(rowCount, dataRowCount); r++, ri++){\n\t\t\t\tif(ri == data.length) ri = 0;\n\t\t\t\tfor (let c = 0, ci = 0; c < Math.max(colCount, dataColCount); c++, ci++){\n\t\t\t\t\tif(ci == data[0].length) ci = 0;\n\n\t\t\t\t\tconst subtrans = {\n\t\t\t\t\t\tid: \"move\",\n\t\t\t\t\t\tcolumn: translate.column + Math.floor(c/dataColCount) * dataColCount,\n\t\t\t\t\t\trow: translate.row + Math.floor(r/dataRowCount) * dataRowCount,\n\t\t\t\t\t\tcut: cutted\n\t\t\t\t\t};\n\n\t\t\t\t\t_clipboardToTable(view, start.row + r, start.column + c, data[ri][ci], fromSheet, subtrans);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tgrid.mapCells(\n\t\t\t\tstart.row,\n\t\t\t\tstart.column,\n\t\t\t\tdataRowCount,\n\t\t\t\tnull,\n\t\t\t\tfunction(value, row, col, row_ind, col_ind) {\n\t\t\t\t\tif (data[row_ind] && data[row_ind].length > col_ind) {\n\t\t\t\t\t\tvar cdata = data[row_ind][col_ind];\n\t\t\t\t\t\t_clipboardToTable(view, row, col, cdata, fromSheet, translate);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ttrue\n\t\t\t);\n\t\t}\n\n\t\tif (cutted === 1){\n\t\t\t//cut and cleared\n\t\t\tcutted = 2;\n\t\t\tupdateFilters = false;\n\t\t}\n\t});\n\t\n\tview.refresh();\n}\n\nfunction _clipboardToTable(view, row, col, cdata, fromSheet, translate){\n\tlet newValue = cdata;\n\tconst setValue = !specialPaste || specialPaste == \"values\" || specialPaste == \"formulas\";\n\n\tif (typeof cdata === \"object\"){\n\t\tif(setValue){\n\t\t\tif (cdata.math && specialPaste != \"values\"){\n\t\t\t\tif(translate.cut)\n\t\t\t\t\tnewValue = cdata.math;\n\t\t\t\telse\n\t\t\t\t\tnewValue = view._mData.getStore().transposeMath(cdata.math, translate.row, translate.column);\n\t\t\t}\n\t\t\telse\n\t\t\t\tnewValue = cdata.text;\n\t\t}\n\n\t\tif(cdata.style && cdata.style.props && (!specialPaste || specialPaste == \"styles\")){\n\t\t\tconst style = view.addStyle(cdata.style.props);\n\t\t\tview.setStyle(row, col, style);\n\t\t}\n\n\t\tconst extra = cdata.extra;\n\t\tif(extra){\n\t\t\tif(extra.condition && (!specialPaste || specialPaste == \"conditions\"))\n\t\t\t\tpasteCondition(view, extra, row, col, cutted);\n\t\t\tif(extra.dropdown && !specialPaste)\n\t\t\t\tpasteDropdown(view, extra, row, col, cutted, translate);\n\t\t\tif(extra.filter && updateFilters)\n\t\t\t\tpasteFilter(view, extra, row, col, cutted, translate);\n\t\t}\n\n\t\tif(!specialPaste)\n\t\t\tpasteSpan(view, extra, row, col, cutted, translate);\n\t}\n\n\tif(setValue)\n\t\tview.setCellValue(row, col, newValue);\n}\n\nfunction _get_sel_style(view, grid){\n\tvar data = [];\n\tvar row, last;\n\n\tgrid.mapSelection(function(value, id, col) {\n\t\tif (id != last){\n\t\t\trow = []; data.push(row);\n\t\t\tlast = id;\n\t\t}\n\n\t\tvar math =  view._mPage.getValue(id-1, col-1, true);\n\t\tmath = math && math[0] == \"=\" ? math : null;\n\t\tvalue = view._mPage.getValue(id-1, col-1);\n\t\tvar obj = { text:value, math, style:view.getStyle(id, col) };\n\n\t\tvar condition = view.conditions.get(id,col);\n\t\tvar editor = view.getCellEditor(id, col);\n\t\tvar filter = view.getCellFilter(id, col);\n\t\tvar span = view._table.getSpan(id, col);\n\n\t\tif (editor || filter || condition || span){\n\t\t\tvar extra = { row:id, col:col };\n\t\t\tif (condition) extra.condition = condition;\n\t\t\tif (editor) extra.dropdown = editor;\n\t\t\tif (filter) extra.filter = filter;\n\t\t\tif (span) extra.span = span;\n\t\t\tobj.extra = extra;\n\t\t}\n\n\t\trow.push(obj);\n\t\treturn value;\n\t});\n\n\treturn data;\n}\n\nfunction allFiltersInZone(extra, origin, columnCount){\n\tvar filters = Object.keys(extra);\n\tvar startRow = Math.min.apply(null, filters);\n\tvar endRow = Math.max.apply(null, filters);\n\tvar startCol = columnCount;\n\tvar endCol = 1;\n\n\tfor (var i = startRow; i <= endRow; i++){\n\t\tif(extra[i]){\n\t\t\tvar columns = Object.keys(extra[i]);\n\t\t\tstartCol = Math.min(startCol, Math.min.apply(null, columns));\n\t\t\tendCol = Math.max(endCol, Math.max.apply(null, columns));\n\t\t}\n\t}\n\n\tif(origin.start.row <= startRow && origin.end.row >= endRow && origin.start.column <= startCol && origin.end.column >= endCol)\n\t\treturn true;\n\telse\n\t\treturn false;\n}\n//dynamically increase rows and columns according to pasted data size\nfunction _add_row_col(view, start, data){\n\tvar maxRow = start.row + data.length - 1;\n\tvar maxCol = start.column + data[0].length - 1;\n\n\tif(maxRow > view.config.rowCount || maxCol > view.config.columnCount){\n\t\tvar action = { id:\"add\" };\n\t\tif (maxRow > view.config.rowCount) {\n\t\t\taction.group = \"row\";\n\t\t\tview.callEvent(\"onCommand\", [\n\t\t\t\taction, \n\t\t\t\t{ row: view.config.rowCount + 1 }, \n\t\t\t\t{ row: maxRow }\n\t\t\t]);\n\t\t}\n\t\tif (maxCol > view.config.columnCount) {\n\t\t\taction.group = \"column\";\n\t\t\tview.callEvent(\"onCommand\", [\n\t\t\t\taction, \n\t\t\t\t{ column: view.config.columnCount + 1 },\n\t\t\t\t{ column: maxCol }\n\t\t\t]);\n\t\t}\n\t}\n}\n\nfunction _changeDelimiter(data, config){\n\tconst format = getClipboardNumberFormat(config);\n\n\tif(format)\n\t\tfor(let i = 0; i < data.length; i++)\n\t\t\tfor(let k = 0; k < data[i].length; k++){\n\t\t\t\tconst record = webix.Number.parse(data[i][k], format);\n\t\t\t\tif(webix.rules.isNumber(record))\n\t\t\t\t\tdata[i][k] = record;\n\t\t\t}\n\n\treturn data;\n}\n\nfunction getClipboardNumberFormat(config){\n\tlet format = config.clipboardNumberFormat;\n\n\tif(!format && config.clipboardDecimalDelimiter) // backward compatibility\n\t\tformat = {\n\t\t\tdecimalDelimiter: config.clipboardDecimalDelimiter,\n\t\t\tdecimalOptional: true\n\t\t};\n\n\treturn format;\n}","import group from \"./undo_group\";\n\nexport function init(view) {\n\tview.attachEvent(\"onCommand\", (action) => {\n\t\tif (action.id == \"show\" || action.id == \"hide\"){\n\t\t\tconst sel = view._table.getSelectArea();\n\t\t\tif (sel)\n\t\t\t\tprocess(action, webix.copy(sel.start), webix.copy(sel.end), view);\n\t\t}\n\t});\n\treset(view);\n\n\tview.attachEvent(\"onUndo\", (action, row, column, value, direction) => {\n\t\tif ((action.id == \"hide\" || action.id == \"show\") && (action.group == \"column\" || action.group == \"row\")){\n\t\t\tlet type = action.id;\n\t\t\tif (!direction)\n\t\t\t\ttype = type == \"hide\" ? \"show\" : \"hide\";\n\t\t\tconst obj = (row || column);\n\t\t\tprocess({ id: type, group: action.group, neighbors: action.neighbors }, obj.start, obj.end, view, true);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onHardReset\", () => reset(view));\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\t_updatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n}\n\nexport function reset(view, mode) {\n\tif(mode) view[\"_hidden_\"+mode+\"_hash\"] = {};\n\telse{\n\t\tview._hidden_cols_hash = {};\n\t\tview._hidden_rows_hash = {};\n\t\tview.filterSpreadSheet();\n\t}\n}\n\nfunction getIds(id){\n\treturn webix.isArray(id) ? id : [id, id];\n}\n\nexport function isColumnVisible(view, column){\n\treturn !view._hidden_cols_hash[column];\n}\n\nexport function setState(view, indexes, state, type){\n\t// hide\n\tif(!indexes){\n\t\tconst sel = view.getSelectedId(true);\n\t\tconst action = {\n\t\t\tid: state === false ? \"show\" : \"hide\",\n\t\t\tgroup: type\n\t\t};\n\n\t\tif(sel.length)\n\t\t\tview.callEvent(\"onCommand\", [action, sel[0], sel[sel.length-1]]);\n\t}\n\telse {\n\t\tconst ids = getIds(indexes);\n\t\tconst hidden = type == \"row\" ? view._hidden_rows_hash : view._hidden_cols_hash;\n\n\t\tif (!hidden[ids[0]] && (webix.isUndefined(state) || state)){\n\t\t\t(type == \"row\" ? _hideRow : _hideColumn)({id: \"hide\", group: type}, {[type]: ids[0]}, {[type]: ids[1]}, view);\n\t\t}\n\t\t// show\n\t\telse if (hidden[ids[0]] && (webix.isUndefined(state) || !state)) {\n\t\t\t(type == \"row\" ? _showRow : _showColumn)({id: \"hide\", group: type}, {[type]: ids[0]}, {[type]: ids[1]}, view);\n\t\t}\n\t}\n}\n\nexport function isRowVisible(view, row){\n\treturn !view._hidden_rows_hash[row];\n}\n\nexport function serialize(view, data){\n\tlet hrows  = []; let hcols = [];\n\tfor(let r in view._hidden_rows_hash) hrows.push(r);\n\tfor(let c in view._hidden_cols_hash) hcols.push(c);\n\n\tif(hrows.length || hcols.length)\t\n\t\tdata.table.hidden = {};\n\tif(hrows.length)\n\t\tdata.table.hidden.row = hrows;\n\tif(hcols.length)\n\t\tdata.table.hidden.column = hcols;\n}\n\nexport function load(view, data){\n\treset(view);\n\t\n\tif(!webix.isUndefined(data.table) && !webix.isUndefined(data.table.hidden)){\n\t\tconst hidden = data.table.hidden;\n\n\t\tif(hidden.row && hidden.row.length){\n\t\t\tfor(let r = 0; r < hidden.row.length; r++)\n\t\t\t\t_hideRow({id:\"hide\", group:\"row\"}, {row:hidden.row[r]}, {row:hidden.row[r]}, view, true);\n\t\t}\n\n\t\tif(hidden.column && hidden.column.length){\n\t\t\tfor(let c = 0; c < hidden.column.length; c++)\n\t\t\t\t_hideColumn({id:\"hide\", group:\"column\"}, {column:hidden.column[c]}, {column:hidden.column[c]}, view, true);\n\t\t}\n\t}\n}\n\nfunction process(action) {\n\tif (action.group == \"column\"){\n\t\tif (action.id == \"show\")\n\t\t\t_showColumn.apply(this, arguments);\n\t\telse if (action.id == \"hide\")\n\t\t\t_hideColumn.apply(this, arguments);\n\t} else if (action.group == \"row\") {\n\t\tif (action.id == \"show\")\n\t\t\t_showRow.apply(this, arguments);\n\t\telse if (action.id == \"hide\")\n\t\t\t_hideRow.apply(this, arguments);\n\t}\n}\n\nfunction _showColumn(action, start, end, view, silent) {\n\tconst grid = view.$$(\"cells\");\n\tconst sel = grid.getSelectArea();\n\n\tconst hash = view._hidden_cols_hash;\n\n\tif(action.neighbors){\n\t\tif(hash[ start.column-1 ])\n\t\t\twhile(hash[ start.column-1 ])\n\t\t\t\tstart.column--;\n\t\telse\n\t\t\twhile(hash[ end.column+1 ])\n\t\t\t\tend.column++;\n\t}\n\n\tgroup.set(()=>{\n\t\tfor (let i = start.column; i <= end.column; i++) {\n\t\t\tif(hash[i]){\n\t\t\t\tdelete hash[i];\n\t\t\t\tconst cell = grid.getColumnConfig(i - 1 || \"rowId\").header[0];\n\t\t\t\tcell.css = cell.css.replace(\"webix_ssheet_hide_column\", \"\");\n\t\t\t\tgrid.showColumn(i);\n\t\t\t\tif (!silent)\n\t\t\t\t\tview.callEvent(\"onColumnOperation\", [action.id, i, i]);\n\t\t\t}\n\t\t}\n\n\t\tconst split = view._frozenColumns;\n\t\tif(split && split >= start.column){\n\t\t\tview.freezeColumns(0); // remove freeze (split is equal with current frozen col)\n\t\t\tview.freezeColumns(split); // if col was freezed on hidden column - move it\n\t\t}\n\n\t\tif (sel)\n\t\t\tgrid.addSelectArea(sel.start, sel.end);\n\t}, view);\n}\n\nfunction _showRow(action, start, end, view, silent) {\n\tconst grid = view.$$(\"cells\");\n\tconst sel = grid.getSelectArea();\n\n\tconst hash = view._hidden_rows_hash;\n\n\tif(action.neighbors){\n\t\tif(hash[ start.row-1 ])\n\t\t\twhile(hash[ start.row-1 ])\n\t\t\t\tstart.row--;\n\t\telse\n\t\t\twhile(hash[ end.row+1 ])\n\t\t\t\tend.row++;\n\t}\n\n\tgroup.set(()=>{\n\t\tconst split = view._frozenRows;\n\t\tif(split){\n\t\t\t//Frozen rows ignore filtering applied to the datatable\n\t\t\tview.freezeRows(0);\n\t\t}\t\t\n\n\t\tfor (let i = start.row; i <= end.row; i++) {\n\t\t\tif(hash[i]){\n\t\t\t\tdelete hash[i];\n\n\t\t\t\tif (i - 1 === 0) {\n\t\t\t\t\tconst cell = grid.getColumnConfig(\"rowId\").header[0];\n\t\t\t\t\tcell.css = cell.css.replace(\"webix_ssheet_hide_row\", \"\");\n\t\t\t\t\tgrid.refreshColumns();\n\t\t\t\t} else\n\t\t\t\t\tgrid.removeCellCss(i - 1, \"rowId\", \"webix_ssheet_hide_row\");\n\n\t\t\t\tif (!silent)\n\t\t\t\t\tview.callEvent(\"onRowOperation\", [action.id, i, i]);\n\t\t\t}\n\t\t}\n\n\t\tview.filterSpreadSheet();\n\n\t\tif(split)\n\t\t\tview.freezeRows(split);\n\n\t\tif (sel)\n\t\t\tgrid.addSelectArea(sel.start, sel.end);\n\t}, view);\n}\n\nfunction _hideColumn(action, start, end, view, silent) {\n\tconst grid = view.$$(\"cells\");\n\tlet i = end.column;\n\tview.$handleSelection = null;\n\tgrid.unselect();\n\n\tif (end.column<1 || start.column<1){\n\t\tdelete view._hidden_cols_hash[start.column];\n\t\treturn;\n\t}\n\twhile (i >= start.column) {\n\t\tif(grid.getColumnIndex(i) != -1){\n\t\t\tview._hidden_cols_hash[i] = i;\n\n\t\t\tlet cell = grid.getColumnConfig(i - 1 || \"rowId\").header[0];\n\t\t\tcell.css = (cell.css || \"\") + \" webix_ssheet_hide_column\";\n\n\t\t\tgrid.hideColumn(i);\n\t\t}\n\t\ti--;\n\t}\n\n\tif (!silent)\n\t\tview.callEvent(\"onColumnOperation\", [action.id, start.column, end.column]);\n}\n\nfunction _hideRow(action, start, end, view, silent) {\n\tif (end.row<1 || start.row<1){\n\t\tdelete view._hidden_rows_hash[start.row];\n\t\treturn;\n\t}\n\n\tconst split = view._frozenRows;\n\tif(split){\n\t\t//Frozen rows ignore filtering applied to the datatable\n\t\tview.freezeRows(0);\n\t}\n\n\tconst grid = view.$$(\"cells\");\n\tlet i = end.row;\n\n\twhile (i >= start.row) {\n\t\tview._hidden_rows_hash[i] = i;\n\n\t\tif (i - 1 === 0) {\n\t\t\tlet cell = grid.getColumnConfig(\"rowId\").header[0];\n\t\t\tcell.css = (cell.css || \"\") + \" webix_ssheet_hide_row\";\n\t\t\tgrid.refreshColumns();\n\t\t}\n\t\telse\n\t\t\tgrid.addCellCss(i - 1, \"rowId\", \"webix_ssheet_hide_row\");\n\n\t\ti--;\n\t}\n\n\tview.filterSpreadSheet();\n\n\tif(split)\n\t\tview.freezeRows(split);\n\n\tif (!silent)\n\t\tview.callEvent(\"onRowOperation\", [action.id, start.row, end.row]);\n}\n\nfunction _updatePosition(view, name, inc, data, start){\n\tif(data.table && data.table.hidden && data.table.hidden[name] && data.table.hidden[name].length){\n\t\treset(view, name == \"column\" ? \"cols\" : \"rows\");\n\n\t\tconst s = start[name];\n\t\tconst hidden = data.table.hidden[name];\n\n\t\tfor (let i = hidden.length - 1; i >= 0; i--) {\n\t\t\tconst hiddenIndex = hidden[i]*1;\n\t\t\tif(inc > 0 && hiddenIndex >= s)\n\t\t\t\thidden[i] = inc + hiddenIndex;\n\t\t\telse if(inc < 0 && hiddenIndex >= s) {\n\t\t\t\tif(hiddenIndex < s - inc)\n\t\t\t\t\thidden.splice(i, 1);\n\t\t\t\telse\n\t\t\t\t\thidden[i] = inc + hiddenIndex;\n\t\t\t}\n\t\t}\n\t}\n}","import {getStyle, getTextSize} from \"./styles\";\nimport {save} from \"./save\";\nimport * as arr from \"../helpers/array\";\n\nexport function init(view){\n\n\tif (view.config.resizeCell){\n\t\tvar grid = view.$$(\"cells\");\n\t\tgrid.define(\"resizeRow\", { headerOnly: true, size: 10 });\n\t\tgrid.define(\"resizeColumn\", { headerOnly: true, size: 10 });\n\t\tgrid.define(\"fixedRowHeight\", false);\n\n\t\tgrid.attachEvent(\"onRowResize\", (id) => {\n\t\t\tview.$$(\"cells\").refreshSelectArea();\n\t\t\tsave(view, \"sizes\", { row: id, column: 0, size: view.$$(\"cells\").getItem(id).$height });\n\t\t});\n\t\tgrid.attachEvent(\"onColumnResize\", (id) => {\n\t\t\tview.$$(\"cells\").refreshSelectArea();\n\t\t\tsave(view, \"sizes\", { row: 0, column: id, size: view.getColumn(id).width });\n\t\t});\n\n\t\t// undo\n\t\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\t\tif(type == \"c-resize\" || type == \"r-resize\")\n\t\t\t\t_undoResize(view, row, column, value);\n\t\t});\n\t}\n\n\tview.attachEvent(\"onDataParse\", (data) => {\n\t\tload(view,data);\n\t});\n\n\t\n\tview.attachEvent(\"onDataSerialize\", (data) => {\n\t\tserialize(view,data);\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n\n\tview.attachEvent(\"onBeforeStyleChange\", function(row, column, n, o){\n\t\tif (o && o.props.wrap === \"wrap\" && (!n || n.props.wrap != o.props.wrap)){\n\t\t\tdelete view._table.getItem(row).$height;\n\t\t}\n\t});\n\tview.attachEvent(\"onStyleChange\", (r,c) => _adjustRowHeight(view,r,c));\n\tview.attachEvent(\"onCellChange\", (r,c,v,p)=> {\n\t\tif(p == view.getActiveSheet())\n\t\t\t_adjustRowHeight(view,r,c);\n\t});\n}\n\nfunction serialize(view,data){\n\tvar sizes = [];\n\tvar grid = view.$$(\"cells\");\n\tvar columns = grid.getState().order;\n\tvar order = grid.data.order;\n\n\tvar defWidth = grid.config.columnWidth;\n\tvar defHeight = grid.config.rowHeight;\n\n\tfor (let i = 1; i < columns.length; i++){\n\t\tvar width = grid.getColumnConfig(columns[i]).width;\n\t\tif (width && width != defWidth)\n\t\t\tsizes.push([0, i, width]);\n\t}\n\n\tfor (let i = 0; i < order.length; i++){\n\t\tvar height = grid.getItem(order[i]).$height;\n\t\tif (height && height != defHeight)\n\t\t\tsizes.push([order[i]*1, 0, height]);\n\t}\n\t\n\tdata.sizes = sizes;\n}\n\nfunction load(view,data){\n\tif (data.sizes){\n\t\tfor (let i=0; i<data.sizes.length; i++){\n\t\t\tconst size = data.sizes[i];\n\t\t\tif (size[0]*1 !== 0){\n\t\t\t\tconst row = view.$$(\"cells\").getItem(size[0]);\n\t\t\t\tif(row) row.$height = size[2]*1;\n\t\t\t} else {\n\t\t\t\tconst col = view.getColumn(size[1]);\n\t\t\t\tif(col) col.width = size[2]*1;\n\t\t\t}\n\t\t}\n\t\tif (data.sizes.length)\n\t\t\tview.refresh(true);\n\t}\n}\n\nfunction _undoResize(view, row, column, value){\n\tif(row){\n\t\tview.$$(\"cells\").getItem(row).$height = value;\n\t\tsave(view, \"sizes\", { row:row, column: 0, size: value });\n\t}\n\telse{\n\t\tview._table.setColumnWidth(column, value);\n\t}\n\t// update area selection\n\tview._table.refreshSelectArea();\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet i,\n\t\tsizes = data.sizes,\n\t\tnsizes = [];\n\n\tif(inc){\n\t\tfor(i = sizes.length - 1; i >= 0; i--){\n\t\t\tlet [row, column, size] = sizes[i];\n\n\t\t\tif(row && name == \"row\" && row >= start.row){\n\t\t\t\tif(inc < 0 && row < start.row - inc)\n\t\t\t\t\tcontinue;\n\t\t\t\tnsizes.push([row*1 + inc, column, size]);\n\t\t\t}\n\t\t\telse if(column && name == \"column\" && column >= start.column){\n\t\t\t\tif(inc < 0 && column < start.column - inc)\n\t\t\t\t\tcontinue;\n\t\t\t\tnsizes.push([row, column*1 + inc, size]);\n\t\t\t}\n\t\t\telse\n\t\t\t\tnsizes.push(sizes[i]);\n\t\t}\n\n\t\tif(inc > 0){\n\t\t\t//col/row add: set sizes according to the selected area\n\t\t\tif(name == \"column\"){\n\t\t\t\tfor(let i = 0; i < inc; i++){\n\t\t\t\t\tconst size = arr.find(sizes, arr => arr[1] == start.column + i);\n\t\t\t\t\tif(size)\n\t\t\t\t\t\tnsizes.push([0, start.column + i, size[2]]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\tfor(let i = 0; i < inc; i++){\n\t\t\t\t\tconst size = arr.find(sizes, arr => arr[0] == start.row + i);\n\t\t\t\t\tif(size)\n\t\t\t\t\t\tnsizes.push([start.row + i, 0, size[2]]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdata.sizes = nsizes;\n\t}\n}\n\nfunction _adjustRowHeight(view, row, column){\n\tif(view._loading_data)\n\t\treturn;\n\n\tconst style = getStyle(view, {row:row, column:column});\n\n\t//changing styles or content of wrapped cell -> resize the related row\n\tif (style && style.props.wrap){\n\t\tconst grid = view._table;\n\t\tconst item = grid.getItem(row);\n\t\tlet height = item.$height || grid.config.rowHeight;\n\n\t\tgrid.eachColumn(function(col, config){\n\t\t\tconst style = getStyle(view, {row:row, column:col});\n\t\t\t//include only cells with active wrap into calculation \n\t\t\tif(style && style.props && style.props.wrap === \"wrap\"){\n\t\t\t\tlet text = this.getText(row, col);\n\t\t\t\tlet baseWidth = config.width;\n\n\t\t\t\tconst span = grid.getSpan(row, col);\n\t\t\t\tlet spanHeight;\n\n\t\t\t\tif(span){\n\t\t\t\t\tconst node = grid.getSpanNode({row:span[0], column:span[1]});\n\t\t\t\t\tbaseWidth = node.offsetWidth;\n\t\t\t\t\tspanHeight = node.offsetHeight;\n\t\t\t\t}\n\n\t\t\t\tif(view.getCellEditor(row, col) || view.getCellFilter(row, col))\n\t\t\t\t\tbaseWidth += 20;\n\n\t\t\t\tlet textHeight = getTextSize(view, text, style.id, baseWidth).height;\n\n\t\t\t\tif(spanHeight)\n\t\t\t\t\ttextHeight = spanHeight >= textHeight ? 0 : textHeight - spanHeight + height;\n\n\t\t\t\theight = Math.max(height, textHeight);\n\t\t\t}\n\t\t});\n\n\t\titem.$height  = height;\n\t}\n}\n","import {encode} from \"../helpers/column_names\";\n\nexport function init(view){\n\tvar table = view._table;\n\n\tvar bs = 0;\n\ttable.attachEvent(\"onAreaDrag\", () => bs = new Date());\n\ttable.attachEvent(\"onBeforeAreaRemove\", function(){\n\t\t//[FIXME] currently we don't have enough info to know\n\t\t//is user selects new area, and removing need to be blocked\n\t\t//or is it some API which attempts to remove the area\n\t\tif (view.$handleSelection && (new Date() - bs)<500) return false;\n\t});\n\n\ttable.attachEvent(\"onBeforeAreaAdd\", (area) => {\n\t\t//[FIXME] \n\t\t//block selection of row-id column\n\t\t//temporary fix, we need to fire onBeforeBlockSelect when selection moves\n\t\t//so the common onBeforeBlockSelect handler will block rowId selection\n\t\tif (area.start.column == \"rowId\") return false;\n\n\t\t//if we have an active editor, we need to close it on block selection\n\t\t//ignore, when selecting the editor's cell\n\t\tvar editor = table.getEditor();\n\t\tif (editor && (\n\t\t\teditor.row != area.start.row || editor.column != area.start.column ||\n\t\t\teditor.row != area.start.row || editor.column != area.start.column ))\n\t\t\ttable.editStop();\n\n\t\tif (!view.$handleSelection) return true;\n\t\t\n\n\t\tlet blockStart = encode[area.start.column] + area.start.row;\n\t\tlet blockEnd = encode[area.end.column] + area.end.row;\n\n\t\tvar res = view.$handleSelection(area.start, area.end, blockStart, blockEnd);\n\n\t\tif (res !== false){\n\t\t\tview.$handleSelection = null;\n\t\t\ttable.removeSelectArea();\n\t\t}\n\n\t\treturn res;\n\t});\n\n\twebix.event(table.$view, \"mousedown\", function(e){\n\t\tif (view.$handleSelection)\n\t\t\treturn webix.html.preventEvent(e);\n\t});\n}\n","export function expandSelection(r, view){\n\tlet maxY = view.config.rowCount;\n\tlet maxX = view.config.columnCount;\n\tlet table = view._table;\n\n\tlet nr1 = r.start.row, nr2 = r.end.row, nc1 = r.start.column, nc2 = r.end.column;\n\n\tfor (let i=nr1-1; i>0; i--){\n\t\tif (getValue(i, r.start.column, table))\n\t\t\tnr1 = i;\n\t\telse\n\t\t\tbreak;\n\t}\n\n\tfor (let i=nr2+1; i<maxY; i++){\n\t\tif (getValue(i, r.end.column, table))\n\t\t\tnr2 = i;\n\t\telse\n\t\t\tbreak;\n\t}\n\n\tfor (let i=nc1-1; i>0; i--){\n\t\tif (getValue(r.start.row, i, table))\n\t\t\tnc1 = i;\n\t\telse\n\t\t\tbreak;\n\t}\n\n\tfor (let i=nc2+1; i<maxX; i++){\n\t\tif (getValue(r.end.row, i, table))\n\t\t\tnc2 = i;\n\t\telse\n\t\t\tbreak;\n\t}\n\n\tlet newrange = { start:{ row:nr1, column:nc1 } , end:{ row: nr2, column: nc2 }};\n\tif (nr1 != r.start.row || nr2 != r.end.row || nc1 != r.start.column || nc2 != r.end.column){\n\t\tview._table.addSelectArea(newrange.start, newrange.end);\n\t}\n\n\treturn newrange;\n}\n\nfunction getValue(r,c, table){\n\tvar value = table.getItem(r)[c];\n\tif(value === undefined || value === \"\"){\n\t\treturn false;\n\t} else {\n\t\treturn true;\n\t}\n}","import {expandSelection} from \"../helpers/expand_selection\";\nimport {rangeObj} from \"../helpers/column_names\";\nimport group from \"./undo_group\";\nimport {_changeCondition} from \"./conditional_formats\";\n\nexport function init(view){\n\tview.attachEvent(\"onCommand\", (cm) => {\n\t\tif (cm.id === \"sort-asc\" || cm.id === \"sort-desc\")\n\t\t\tsortRange(view, null, cm.id.replace(\"sort-\",\"\"));\n\t});\n}\n\nconst sorters = {\n\t\"int\":function(dir, key){\n\t\treturn (a,b) => {\n\t\t\tif (!b[key]) return -1;\n\t\t\tif (!a[key]) return 1;\n\n\t\t\tlet c = parseFloat(a[key]) || dir*Infinity;\n\t\t\tlet d = parseFloat(b[key]) || dir*Infinity;\n\t\t\treturn (c > d ? 1 : (c == d ? 0 : -1))*dir;\n\t\t};\n\t},\n\t\"str\":function(dir, key){\n\t\treturn (a,b) => {\n\t\t\tif (!b[key]) return -1;\n\t\t\tif (!a[key]) return 1;\n\n\t\t\tlet c = a[key].toString().toLowerCase();\n\t\t\tlet d = b[key].toString().toLowerCase();\n\t\t\treturn (c > d ? 1 : (c == d ? 0 : -1))*dir;  \n\t\t};\n\t}\n};\n\nexport function sortRange(view, range, dir){\n\trange = range || view._table.getSelectArea();\n\n\tif (range){\n\t\trange = rangeObj(range, view);\n\t\tlet fullrange = range;\n\t\tif (range.start.row === range.end.row)\n\t\t\tfullrange = expandSelection(range, view);\n\n\t\tconst key = view.getCellValue(range.start.row, range.start.column, false);\n\t\tconst type = isNaN(parseFloat(key)) ? \"str\" : \"int\";\n\n\t\tdir = (!dir || dir === \"asc\") ? 1 : -1;\n\t\tgroup.set(()=>\n\t\t\tsort(fullrange, range.start.column, type, dir, view)\n\t\t);\n\t}\n}\n\nfunction sort(range, by, type, dir, view){\n\tfor (let column = range.start.column; column <= range.end.column; column++){\n\t\t//get all selected column values\n\t\tconst values = [];\n\t\tfor (let row = range.start.row; row <= range.end.row; row++) {\n\t\t\tif(view.isRowVisible(row)){\n\t\t\t\tconst value = view.getCellValue(row, column, false);\n\t\t\t\tconst style = view.getStyle(row, column);\n\n\t\t\t\tlet math = view.getCellValue(row, column);\n\t\t\t\tmath = math && math[0] == \"=\" ? math : null;\n\n\t\t\t\tconst conditions = view.conditions.get(row,column);\n\t\t\t\tif(conditions)\n\t\t\t\t\t_changeCondition(\"remove\", row, column, conditions, null, view);\n\n\t\t\t\tvalues.push({\n\t\t\t\t\tvalue,\n\t\t\t\t\tstyle,\n\t\t\t\t\tmath,\n\t\t\t\t\trow,\n\t\t\t\t\tconditions\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t//sort them\n\t\tvalues.sort(sorters[type](dir, \"value\"));\n\n\t\t//set new values to original column\n\t\tfor (let row = range.start.row; row <= range.end.row; row++) {\n\t\t\tif(view.isRowVisible(row)){\n\t\t\t\tconst element = values.shift();\n\n\t\t\t\tview.setStyle(row, column, (element.style || null));\n\t\t\t\tif(element.conditions)\n\t\t\t\t\t_changeCondition(\"update\", row, column, null, element.conditions, view);\n\n\t\t\t\tif (!element.math) view.setCellValue(row, column, element.value);\n\t\t\t\telse {\n\t\t\t\t\tconst newMath = view._mData.getStore().transposeMath(element.math, row - element.row, 0);\n\t\t\t\t\tview.setCellValue(row, column, newMath);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tview.refresh();\n}","import {split} from \"./parser\";\n\nfunction updateSheetNames(view, formula, oldName, newName){\n\tif(formula.indexOf(\"!\") == -1)\n\t\treturn formula;\n\n\tconst stack = split(formula, view, true);\n\tfor(let i = 0; i < stack.length; i++){\n\t\tif(webix.isArray(stack[i])){\n\t\t\tconst thisSheet = stack[i][0] === oldName;\n\t\t\tlet sheet = thisSheet ? newName : stack[i][0];\n\t\t\tif(sheet.indexOf(\" \") != -1)\n\t\t\t\tsheet = `'${sheet}'`;\n\t\t\tstack[i] = `${sheet}!${stack[i][1]}`;\n\t\t}\n\t}\n\treturn stack.join(\"\");\n}\n\nfunction isFormula(val){\n\treturn typeof val == \"string\" && val[0] == \"=\";\n}\n\nexport function init(view){\n\tview.attachEvent(\"onSheetRename\", (name, newName) => {\n\t\tview._sheets.forEach(sheet => {\n\t\t\tconst activeSheet = sheet.name == view.getActiveSheet();\n\t\t\tif(activeSheet)\n\t\t\t\tsheet.content = view.serialize(); //actual data\n\n\t\t\tif(sheet.content.editors){\n\t\t\t\tsheet.content.editors.forEach(value => {\n\t\t\t\t\tconst options = value[2].options;\n\t\t\t\t\tif(options){\n\t\t\t\t\t\tif(typeof options == \"string\")\n\t\t\t\t\t\t\tvalue[2].options = updateSheetNames(view, options, name, newName);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tfor (let i = 0; i < options.length; i++){\n\t\t\t\t\t\t\t\tconst option = options[i];\n\t\t\t\t\t\t\t\tif(typeof option == \"string\"){\n\t\t\t\t\t\t\t\t\tif(isFormula(option))\n\t\t\t\t\t\t\t\t\t\toptions[i] = updateSheetNames(view, option, name, newName);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if(isFormula(option.id))\n\t\t\t\t\t\t\t\t\toption.id = updateSheetNames(view, option.id, name, newName);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(sheet.content.conditions){\n\t\t\t\tsheet.content.conditions.forEach(value => {\n\t\t\t\t\tif(isFormula(value[3]))\n\t\t\t\t\t\tvalue[3] = updateSheetNames(view, value[3], name, newName);\n\t\t\t\t});\n\t\t\t\tif(activeSheet){\n\t\t\t\t\tview.conditions.clear();\n\t\t\t\t\tview.conditions.parse( sheet.content.conditions );\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}","export function init(view) {\n\tview.attachEvent(\"onUndo\", (action, row, column, value) => {\n\t\tif (action == \"gridlines-hide\"){\n\t\t\thideGridlines(view, value);\n\t\t}\n\t});\n}\n\nexport function hideGridlines(view, state = true){\n\tvar grid = view.$$(\"cells\");\n\tvar borderless = grid.$view.className.indexOf(\"webix_borderless\") !=-1;\n\tif (state === \"toggle\")\n\t\tstate = !borderless;\n\n\tif(!borderless && state){\n\t\twebix.html.addCss( grid.$view, \"webix_borderless\", true);\n\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"hide-gridlines\", value:true}]);\n\t\tview.callEvent(\"onAction\", [\"gridlines-hide\", {newValue:true, value: false}]);\n\t}\n\telse if(borderless && !state){\n\t\twebix.html.removeCss( grid.$view, \"webix_borderless\");\n\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"hide-gridlines\", value:false}]);\n\t\tview.callEvent(\"onAction\", [\"gridlines-hide\", {newValue:false, value: true}]);\n\t}\n}\n\nexport function serialize(view, data){\n\tdata.table.gridlines = view.$$(\"cells\").$view.className.indexOf(\"webix_borderless\") !=-1?0:1;\n}\n\nexport function load(view, data){\n\tvar mode = false;\n\tif(!webix.isUndefined(data.table) && !webix.isUndefined(data.table.gridlines))\n\t\tmode = !data.table.gridlines;\n\thideGridlines(view, mode);\n}","export function init(view) {\n\tview.attachEvent(\"onUndo\", (action, row, column, value) => {\n\t\tif (action == \"header-hide\"){\n\t\t\thideHeaders(view, value);\n\t\t}\n\t});\n}\n\nexport function hideHeaders(view, state){\n\tconst grid = view.$$(\"cells\");\n\tconst old = !grid.config.header;\n\n\tif (state == \"toggle\")\n\t\tstate = grid.config.header;\n\n\tif(state != old){\n\t\tgrid.config.header = !state;\n\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"hide-headers\", value:state}]);\n\t\tview.callEvent(\"onAction\", [\"header-hide\", {newValue:state, value:old}]);\n\t}\n\n\tconst firstVisible = grid.isColumnVisible(\"rowId\");\n\tif((firstVisible && state) || (!firstVisible && !state))\n\t\tgrid.hideColumn(\"rowId\", {}, true, state);\n\n\tgrid.refreshColumns();\n}\n\nexport function serialize(view, data){\n\tdata.table.headers = view.$$(\"cells\").config.header ? 1 : 0;\n}\n\nexport function load(view, data){\n\tlet mode;\n\tif(data.table && !webix.isUndefined(data.table.headers))\n\t\tmode = !data.table.headers;\n\thideHeaders(view, mode);\n}","import group from \"./undo_group\";\nimport {eachRange} from \"../helpers/column_names\";\n\nexport function init(view){\n\tview.comments = {\n\t\tget: function(row, column){\n\t\t\treturn getComment(view, row, column);\n\t\t},\n\t\tadd: function(row, column, comment){\n\t\t\tcommentCell(view, row, column, comment);\n\t\t},\n\t\tremove: function(row, column){\n\t\t\tremoveComment(view, row, column);\n\t\t},\n\t\t_activeComment: {},\n\t\t_pull:{}\n\t};\n\n\tview.attachEvent(\"onReset\", () => reset(view));\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tif (type === \"comment\")\n\t\t\t_undoComment(view, row, column, value);\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name,p.inc,p.data, p.start);\n\t});\n}\n\nfunction _undoComment(view, row, column, value){\n\tif(getComment(view, row, column))\n\t\tremoveComment(view, row, column, true);\n\tif(value)\n\t\tcommentCell(view, row, column, value, true);\n}\n\nfunction reset(view){\n\tview.comments._pull = {};\n}\n\nfunction removeComment(view, row, column, silent){\n\tif(getComment(view, row, column)){\n\t\tif (!silent)\n\t\t\tview.callEvent(\"onAction\", [\"comment\", {row, column, newValue: null, value: view.comments._pull[row][column]}]);\n\t\tdelete view.comments._pull[row][column];\n\t}\n\tview.$$(\"cells\").updateItem(row,column);\n}\n\nexport function removeCommentsRange(view, range){\n\tgroup.set(function(){\n\t\teachRange(range, view, function(view, cell){\n\t\t\tif(getComment(view, cell.row, cell.column))\n\t\t\t\tremoveComment(view, cell.row, cell.column);\n\t\t});\n\t\tview.$$(\"cells\").refresh();\n\t});\n}\n\nfunction commentCell(view, row, column, comment, silent){\n\tvar oldValue = getComment(view, row, column) ? view.comments._pull[row][column] : null;\n\tvar table = view.$$(\"cells\");\n\n\tif(typeof comment == \"string\")\n\t\tcomment = comment.trim() ? comment : \"\";\n\tview.comments._pull[row] = view.comments._pull[row] ? view.comments._pull[row] : {};\n\tview.comments._pull[row][column] = comment;\n\n\ttable.addCellCss(row, column, \"ssheet_commented_cell\");\n\n\tif (!silent)\n\t\tview.callEvent(\"onAction\", [\"comment\", {row, column, newValue:comment, value:oldValue}]);\n}\n\nexport function serialize(view,data){\n\tvar row, column,\n\t\tcomments = [];\n\tfor(row in view.comments._pull){\n\t\tfor(column in view.comments._pull[row])\n\t\t\tif(view.comments._pull[row][column])\n\t\t\t\tcomments.push([row, column, view.comments._pull[row][column]]);\n\t}\n\tdata.comments = comments;\n}\n\nexport function load(view,data){\n\tvar i,\n\t\tcomments = data.comments;\n\n\tif(comments)\n\t\tfor(i = 0; i < comments.length; i++)\n\t\t\tcommentCell(view, comments[i][0], comments[i][1], comments[i][2], true);\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet comments = data.comments,\n\t\ti = comments.length;\n\n\tif(inc){\n\t\twhile(i--){\n\t\t\tlet [row,column] = comments[i];\n\t\t\tif(row && name == \"row\" && row>= start.row || column && name == \"column\" && column >= start.column){\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc)\t//delete comment if row was deleted\n\t\t\t\t\t\tcomments.splice(i,1);\n\t\t\t\t\telse\t\t\t\t\t\t//update mark position if upper row was deleted\n\t\t\t\t\t\tcomments[i][0] = row*1 + inc;\n\t\t\t\t} else if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\tcomments.splice(i, 1);\n\t\t\t\t\t} else \n\t\t\t\t\t\tcomments[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction getComment(view, row, column){\n\treturn view.comments._pull[row] && view.comments._pull[row][column] ? view.comments._pull[row][column] : \"\";\n}","export function init(view) {\n\tview.attachEvent(\"onUndo\", (action, row, column, value) => {\n\t\tif (action == \"show-formulas\"){\n\t\t\tshowFormulas(view, value);\n\t\t}\n\t});\n}\n\nexport function showFormulas(view, value){\n\tconst grid = view.$$(\"cells\");\n\tconst old = grid.config.showFormulas;\n\n\tif(value == \"toggle\")\n\t\tvalue = !old;\n\n\tif(value != old){\n\t\tgrid.config.showFormulas = value;\n\n\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"show-formulas\", value}]);\n\t\tview.callEvent(\"onAction\", [\"show-formulas\", {newValue: value, value: old}]);\n\n\t\tgrid.refresh();\n\t}\n}\n\nexport function serialize(view, data){\n\tdata.table.showFormulas = view.$$(\"cells\").config.showFormulas ? 1 : 0;\n}\n\nexport function load(view, data){\n\tlet mode = false;\n\tif(data.table && data.table.showFormulas)\n\t\tmode = data.table.showFormulas;\n\tshowFormulas(view, mode);\n}","import * as m1  from \"./hide_gridlines\";\nimport * as m2  from \"./hide_headers\";\nimport * as m3  from \"./lock_cell\";\nimport * as m4  from \"./dropdown\";\nimport * as m5  from \"./filter\";\nimport * as m6  from \"./hide_row_col\";\nimport * as m7  from \"./comments\";\nimport * as m8  from \"./show_formulas\";\n\nexport function init(view){\n\tvar modules = [m1,m2,m3,m4,m5,m6,m7,m8];\n\tview.attachEvent(\"onDataSerialize\", function(data){\n\t\tfor (var i = 0; i < modules.length; i++){\n\t\t\tif(modules[i].serialize)\n\t\t\t\tmodules[i].serialize(view,data);\n\t\t}\n\n\t});\n\tview.attachEvent(\"onDataParse\", function(data){\n\t\tfor (var i = 0; i < modules.length; i++){\n\t\t\tif(modules[i].load)\n\t\t\t\tmodules[i].load(view,data);\n\t\t}\n\t});\n}","const types = [\".xls\",\".xlt\",\".xla\",\".xlsx\",\".xlsm\",\".xltx\",\".xltm\",\".xlam\",\".xlsb\"];\n\nexport function init(view){\n\tlet uploader;\n\tif (window.XMLHttpRequest && (new XMLHttpRequest()).upload){\n\t\tuploader = webix.ui({\n\t\t\tview:\"uploader\",\n\t\t\tapiOnly:true,\n\t\t\taccept: types.join()\n\t\t});\n\n\t\tuploader.attachEvent(\"onBeforeFileAdd\",webix.bind(function(upload){\n\t\t\tif(types.indexOf(\".\"+upload.type.toLowerCase())>-1){\n\t\t\t\tview.reset();\n\n\t\t\t\tif(!upload.file.options)\n\t\t\t\t\tupload.file.options = {};\n\t\t\t\twebix.extend(upload.file.options, {cellDates: false});\n\n\t\t\t\tview.parse(upload.file, \"excel\");\n\t\t\t}\n\t\t\treturn false;\n\t\t},this));\n\n\t\tview._destroy_with_me.push(uploader);\n\t}\n\n\tview.attachEvent(\"onCommand\", (obj) => {\n\t\tif (obj.id === \"excel-import\")\n\t\t\tstartImport(view, uploader);\n\t});\n}\n\nfunction startImport(view, uploader){\n\tif (!uploader)\n\t\tview.alert(webix.i18n.spreadsheet.labels[\"import-not-support\"]);\n\telse\n\t\twebix.delay(() => uploader.fileDialog());\n}","import { style_names } from \"../operations/styles\";\nimport { getType } from \"../operations/types\";\nimport { defaultStyles} from \"../toolbar/defaults\";\nimport { getFormatSource } from \"../operations/formats\";\nimport { getDimension } from \"../helpers/array\";\nimport { getConditionCss } from \"../operations/conditional_formats\";\nimport { getRenderedValue } from \"../table\";\nimport {getSheet, isVisible} from \"../sheets\";\n\nexport function init(view){\n\tconst table = view._table;\n\tview.$exportView = function(options){\n\t\tconst pdf = options.export_mode == \"pdf\";\n\t\tconst excel = options.export_mode == \"excel\";\n\t\tconst defaultOptions = {\n\t\t\tstubCells: true,\n\t\t\theader: false,\n\t\t\tfooter:false,\n\t\t\theights:true,\n\t\t\trawValues: !pdf,\n\t\t\tfilterHTML:true,\n\t\t\tspans: true,\n\t\t\tstyles:true,\n\t\t\tmath: !pdf,\n\t\t\thidden: excel,\n\t\t\txCorrection: table.config.header || options.hidden ? 1 : 0,\n\t\t\tignore:{rowId:true},\n\t\t\tconditions:true\n\t\t};\n\n\t\twebix.extend(options, defaultOptions);\n\n\t\tif(excel || pdf)\n\t\t\treturn _exportView(view, options);\n\t\telse\n\t\t\treturn table;\n\t};\n\n\ttable.$getExportValue = function(row, column, options){\n\t\tlet value = view.getCellValue(row, column, options.math);\n\t\tconst mode = options.export_mode;\n\t\tconst math = options.math && value[0] == \"=\" && value.length > 1;\n\n\t\tif((mode == \"pdf\" || mode == \"csv\") && !math && !options.rawValues)\n\t\t\tvalue = getRenderedValue(view, row, column);\n\t\telse if(mode == \"excel\" && math){\n\t\t\tif(/^=(image|sparkline)\\(/i.test(value))\n\t\t\t\tvalue = \"\";\n\t\t\telse\n\t\t\t\tvalue = {\n\t\t\t\t\tvalue: /^=hyperlink\\(/i.test(value) ? value.split(\"\\\"\")[3] : view.getCellValue(row, column, false),\n\t\t\t\t\tformula: value\n\t\t\t\t};\n\t\t}\n\n\t\treturn value;\n\t};\n}\n\nfunction _exportView(view, options){\n\tconst excel = options.export_mode == \"excel\";\n\n\tif(options.sheets === true) \n\t\toptions.sheets = view._sheets.map(function(s){ return s.name;});\n\telse if(!options.sheets || !options.sheets.length)\n\t\toptions.sheets = [view._activeSheet];\n\telse if(typeof options.sheets == \"string\")\n\t\toptions.sheets = [options.sheets];\n\n\tif(!excel)\n\t\toptions.sheets = options.sheets.filter(sheet => isVisible(view, sheet));\n\telse if(view._sheets.length != options.sheets.length){\n\t\tfor(let i = 0; i < view._sheets.length; i++){\n\t\t\t//add veryHidden sheets in any case\n\t\t\tconst sheet = view._sheets[i];\n\t\t\tif(sheet.state == \"veryHidden\" && options.sheets.indexOf(sheet.name) == -1)\n\t\t\t\toptions.sheets.push(sheet.name);\n\t\t}\n\t}\n\n\toptions.dataOnly = true;\n\n\tlet data = [];\n\tlet active = view._activeSheet;\n\n\tfor(let i = 0; i<options.sheets.length; i++){\n\t\tconst sheet = options.sheets[i];\n\t\tconst id = sheet.id || sheet;\n\n\t\tview.showSheet(id);\n\n\t\tif(options.hidden)\n\t\t\toptions.xCorrection = 1;\n\n\t\tconst sheetOptions = sheet.options ? webix.extend(sheet.options, options) : webix.copy(options);\n\t\tif(id != active)\n\t\t\tsheetOptions._hidden = true;\n\t\tif(!sheetOptions.name)\n\t\t\tsheetOptions.name = id;\n\n\t\tconst pdfTable = !excel && sheetOptions.display != \"image\";\n\n\t\tconst serialized = view.serialize();\n\t\tconst [rows, cols] = getDimension(serialized.data, serialized.spans, 0, 0);\n\n\t\tif(!excel){\n\t\t\tif(webix.isUndefined(sheetOptions.textBefore))\n\t\t\t\tsheetOptions.textBefore = sheetOptions.name;\n\t\t\tif(pdfTable){\n\t\t\t\tsheetOptions.ignore = sheetOptions.ignore || {};\n\t\t\t\tfor(let i = cols+1; i <= view.config.columnCount; i++){\n\t\t\t\t\tsheetOptions.ignore[i] = true;\n\t\t\t\t}\n\n\t\t\t\tconst filter = sheetOptions.filter || (()=>true);\n\t\t\t\tsheetOptions.filter = obj =>{\n\t\t\t\t\treturn obj.id <= rows && filter.apply(this, arguments);\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tconst sheetData = webix[excel ? \"toExcel\" : \"toPDF\"](view._table, sheetOptions);\n\n\t\tif(excel)\n\t\t\tsheetData[0].state = getSheet(view, id).state || \"visible\";\n\n\t\tif(pdfTable && sheetData[0].scheme.length == 0)\n\t\t\tcontinue;\n\n\t\tif((excel || pdfTable) && sheetOptions.styles){\n\t\t\tconst styles = sheetData[0].styles = _getStyles(view, sheetOptions, excel, rows, cols);\n\n\t\t\tif(pdfTable)\n\t\t\t\t_updatePdfData(styles, sheetData, sheetOptions, view, serialized);\n\t\t}\n\n\t\tdata = data.concat(sheetData);\n\n\t\tif(excel){\n\t\t\tdata[i].ranges = [];\n\n\t\t\tview.ranges.serialize(id).forEach(range => {\n\t\t\t\tconst ref = range[1].split(\"!\");\n\t\t\t\tdata[i].ranges.push({\n\t\t\t\t\tSheet: range[2] ? null : i,\n\t\t\t\t\tName: range[0],\n\t\t\t\t\tRef: ref[0]+\"!\"+ref[1].replace(/[0-9]+|[A-Z]+/gi, (match)=>`$${match}`)\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\telse{\n\t\t\tif(options.autowidth)\n\t\t\t\tgetAutowidth(sheetOptions, options);\n\t\t}\n\t}\n\n\tview.showSheet(active);\n\tdelete options.dataOnly;\n\treturn data;\n}\n\nfunction _updatePdfData(styles, sheetData, sheetOptions, view, serialized){\n\tconst header = sheetOptions.header ? 1 : 0;\n\n\tif (sheetOptions.spans) {\n\t\tconst spans = serialized.spans.sort((a,b) => a[1]<b[1]?1:(a[1]>b[1]?-1:0));\n\t\tfor (let i = 0; i < spans.length; i++) {\n\t\t\tif (spans[i][2] > 1) {\n\t\t\t\tlet row = spans[i][0] - 1 + header, // zero-based row position\n\t\t\t\t\tcol = spans[i][1] - 1, // zero-based col position\n\t\t\t\t\tcols = spans[i][2];\n\t\t\t\tif (styles[row] && styles[row][col]) {\n\t\t\t\t\tstyles[row][col].colspan = cols;\n\t\t\t\t\t// if colspan, then remove merged cells (else PDFJS will shift columns)\n\t\t\t\t\tconst rowData = sheetData[0].exportData[row - header];\n\t\t\t\t\tif (rowData){\n\t\t\t\t\t\t// remove merged cell values\n\t\t\t\t\t\trowData.splice(col + 1, cols - 1);\n\t\t\t\t\t}\n\t\t\t\t\tlet style = Object.values(styles[row]);\n\t\t\t\t\tstyle.splice(col + 1, cols - 1); // remove merged cell styles\n\t\t\t\t\tstyles[row] = style;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tconst data = sheetData[0].exportData;\n\tfor(let r = 0; r < data.length; r++){\n\t\tfor (let c = 0; c < data[r].length; c++) {\n\t\t\tlet height = view.$$(\"cells\").config.rowHeight;\n\n\t\t\tif(sheetOptions.heights && serialized.sizes.length){\n\t\t\t\tfor(let s = 0; s < serialized.sizes.length; s++){\n\t\t\t\t\tconst rowSize = serialized.sizes[s][0];\n\t\t\t\t\tif(rowSize && rowSize == r+1){\n\t\t\t\t\t\theight = serialized.sizes[s][2];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst cellStyle = styles[r + header][c];\n\t\t\tconst align = cellStyle.vertAlign;\n\t\t\tconst pad = height*0.75 - cellStyle.fontSize; // available px for padding in top & bottom\n\t\t\tcellStyle.paddingTop = (align == \"top\" ? 0 : (align == \"bottom\" ? pad : pad / 2));\n\t\t\tcellStyle.paddingBottom = (align == \"bottom\" ? 0 : (align == \"top\" ? pad : pad / 2));\n\t\t}\n\t}\n}\n\nfunction getAutowidth(view, options){\n\tconst prop = options.orientation && options.orientation == \"landscape\" ? \"height\" : \"width\";\n\tlet width;\n\n\tif(view.$width)\n\t\twidth = view.$width;\n\telse //'view' can be local settings and we need to compare them with common ones\n\t\twidth = view[prop];\n\n\toptions[prop] = Math.max(options[prop] || 0, width || 0);\n}\n\nfunction _safeColor(str){\n\tstr = str.substring(1);\n\tif(str.length === 3) str = str+str;\n\treturn str;\n}\n\nfunction _getDefaults(options){\n\tlet d = defaultStyles;\n\tif(options.export_mode == \"excel\")\n\t\treturn {\n\t\t\tfont:{\n\t\t\t\tsz:d[\"font-size\"]*0.75,\n\t\t\t\tname:d[\"font-family\"].replace(/'|,.*$/g, \"\"),\n\t\t\t\t//we do not export default color, but it is the right place to do it\n\t\t\t},\n\t\t\talignment:{\n\t\t\t\thorizontal:d[\"text-align\"],\n\t\t\t\tvertical:d[\"vertical-align\"]==\"middle\"?\"center\":d[\"vertical-align\"],\n\t\t\t\twrapText:d[\"white-space\"]!=\"nowrap\"\n\t\t\t}\n\t\t};\n\telse\n\t\treturn {\n\t\t\tfontSize: d[\"font-size\"]*0.75,\n\t\t\t//we do not export default color, but it is the right place to do it\n\t\t\ttextAlign: d[\"text-align\"],\n\t\t\twhiteSpace: (d[\"white-space\"]!=\"nowrap\")\n\t\t};\n}\n\nfunction _getStyles(view, options, excel, rows, cols){\n\tview.compactStyles();\n\n\tlet result = [];\n\tconst cached = {};\n\tconst cachedConditions = {};\n\tconst defaults = _getDefaults(options);\n\n\tif(excel && options.docHeader) result  = result.concat([{0:_getDocStyle(options.docHeader.css, defaults)}, {}]);\n\tif(options.header) result.push({});\n\n\tconst delta = result.length;\n\n\tconst grid = view.$$(\"cells\");\n\n\tlet rIndex = delta;\n\tgrid.eachRow(row =>{\n\t\tif(row > rows)\n\t\t\treturn;\n\n\t\tlet cIndex = 0;\n\t\tgrid.eachColumn(col => {\n\t\t\tif(cIndex > cols)\n\t\t\t\treturn;\n\n\t\t\tif(cIndex >= options.xCorrection){\n\t\t\t\tconst css = view.getStyle(row, col);\n\t\t\t\tconst index = cIndex - options.xCorrection;\n\n\t\t\t\tresult[rIndex] = result[rIndex] || {};\n\n\t\t\t\tlet styles;\n\t\t\t\tif(css){\n\t\t\t\t\tif(cached[css.id])\n\t\t\t\t\t\tstyles = webix.copy(cached[css.id]);\n\t\t\t\t\telse{\n\t\t\t\t\t\tstyles = _getCellStyle(css.text, excel, options);\n\n\t\t\t\t\t\tfor(let name in defaults){\n\t\t\t\t\t\t\tif(excel)\n\t\t\t\t\t\t\t\twebix.extend(styles[name], defaults[name]);\n\t\t\t\t\t\t\telse if (!styles[name])\n\t\t\t\t\t\t\t\tstyles[name] = defaults[name];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcached[css.id] = webix.copy(styles);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tstyles = webix.copy(defaults);\n\n\t\t\t\tif(options.conditions){\n\t\t\t\t\t//not real excel condition, save only bg and color (sheetJS doesn't support)\n\t\t\t\t\tconst condition = _getCellConditions(view, row, col, cachedConditions);\n\t\t\t\t\tif(condition)\n\t\t\t\t\t\t_updateStyleCondition(styles, condition, excel);\n\t\t\t\t}\n\n\t\t\t\tresult[rIndex][index] = styles;\n\n\t\t\t\tlet type;\n\t\t\t\tif(options.math){\n\t\t\t\t\tconst math = view.getCellValue(row, col);\n\t\t\t\t\tif(typeof math == \"string\" && math[0] == \"=\" && math.length > 1){\n\t\t\t\t\t\tconst value = view.getCellValue(row, col, false);\n\t\t\t\t\t\tif(isNaN(value))\n\t\t\t\t\t\t\ttype = \"string\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tresult[rIndex][index].type = type || getType(view, row, col);\n\t\t\t}\n\t\t\tcIndex++;\n\t\t}, options.hidden);\n\t\trIndex++;\n\t}, options.hidden);\n\n\tif(excel && options.docFooter) result  = result.concat([{},{0:_getDocStyle(options.docFooter.css, defaults)}]);\n\n\treturn result;\n}\n\nfunction _getCellStyle(styles, excel, options){\n\tlet str = styles.split(\";\");\n\tlet stl = {};\n\tif(excel)\n\t\tstl = { font:{}, alignment:{}, border:{}};\n\n\tfor(let s = 0; s<str.length; s++){\n\t\tif(str[s]){\n\t\t\tif(excel)\n\t\t\t\t_getExcelCellStyle(stl, str, s);\n\t\t\telse\n\t\t\t\t_getPdfCellStyle(stl, str, s, options.table);\n\t\t}\n\t}\n\n\treturn stl;\n}\n\nfunction _getCellConditions(view, r, c, cached){\n\tconst rendered = getRenderedValue(view, r, c);\n\tconst css = getConditionCss(view, r, c, rendered);\n\tif(css){\n\t\tif(cached[css])\n\t\t\treturn cached[css];\n\t\tconst el = webix.html.create(\"div\", {\"class\":css});\n\t\tdocument.body.appendChild(el);\n\n\t\tconst computed = window.getComputedStyle(el);\n\t\tconst bg = computed.backgroundColor;\n\t\tconst color = computed.color;\n\n\t\tdocument.body.removeChild(el);\n\n\t\tcached[css] = [bg, color];\n\t\treturn cached[css];\n\t}\n}\n\nfunction _updateStyleCondition(stl, condition, excel){\n\tlet [bg, color] = condition.map(val => webix.color.rgbToHex(val));\n\tif(excel){\n\t\tstl.fill = {fgColor:{rgb:bg}};\n\t\tstl.font.color = {rgb:color};\n\t}\n\telse{\n\t\tstl.backgroundColor = bg;\n\t\tstl.color = color;\n\t}\n}\n\nfunction _getExcelCellStyle(stl, str, s){\n\tswitch (style_names[s]){\n\t\tcase \"color\":\n\t\t\tstl.font.color = {rgb:_safeColor(str[s])};\n\t\t\tbreak;\n\t\tcase \"background\":{\n\t\t\tconst fill = _safeColor(str[s]);\n\t\t\tif(fill && fill.toLowerCase() !== \"ffffff\")\n\t\t\t\tstl.fill = { fgColor:{ rgb:fill}};\n\t\t\tbreak;\n\t\t}\t\n\t\tcase \"text-align\":\n\t\t\tstl.alignment.horizontal = str[s];\n\t\t\tbreak;\n\t\tcase \"font-family\":\n\t\t\tstl.font.name = str[s].replace(/'|,.*$/g, \"\"); // cut off fallback font\n\t\t\tbreak;\n\t\tcase \"font-size\":\n\t\t\tstl.font.sz = str[s].replace(\"px\", \"\")*0.75; //px to pt conversion\n\t\t\tbreak;\n\t\tcase \"font-style\":\n\t\t\tstl.font.italic = str[s] == \"italic\";\n\t\t\tbreak;\n\t\tcase \"underline\":\n\t\t\tstl.font.underline = str[s] == \"underline\";\n\t\t\tbreak;\n\t\tcase \"strike\":\n\t\t\tstl.font.strike = str[s] == \"strike\";\n\t\t\tbreak;\n\t\tcase \"font-weight\":\n\t\t\tstl.font.bold = str[s] == \"bold\";\n\t\t\tbreak;\n\t\tcase \"vertical-align\":\n\t\t\tstl.alignment.vertical = str[s] == \"middle\"?\"center\":str[s];\n\t\t\tbreak;\n\t\tcase \"wrap\":\n\t\t\tstl.alignment.wrapText = str[s] == \"wrap\";\n\t\t\tbreak;\n\t\tcase \"borders\":\n\t\t\tbreak;\n\t\tcase \"format\":\n\t\t\tstl.format = getFormatSource(str[s], true) || \"\";\n\t\t\tbreak;\n\t\tcase \"border-right\":\n\t\tcase \"border-bottom\":\n\t\tcase \"border-left\":\n\t\tcase \"border-top\":\n\t\t\tstl.border[ style_names[s].split(\"-\")[1] ] = getBorderStyles(str[s], true);\n\t\t\tbreak;\n\t\tcase \"indent\":\n\t\t\tstl.alignment.indent = str[s];\n\t\t\tbreak;\n\t}\n}\n\nfunction _getPdfCellStyle(stl, str, s, table){\n\tswitch (style_names[s]) {\n\t\tcase \"color\":\n\t\t\tstl.color = _safeColor(str[s]);\n\t\t\tbreak;\n\t\tcase \"background\":\n\t\t\tstl.backgroundColor = _safeColor(str[s]);\n\t\t\tbreak;\n\t\tcase \"text-align\":\n\t\t\tstl.textAlign = str[s];\n\t\t\tbreak;\n\t\tcase \"font-family\":\n\t\t\tbreak;\n\t\tcase \"font-size\":\n\t\t\tstl.fontSize = str[s].replace(\"px\", \"\")*0.75;\n\t\t\tbreak;\n\t\tcase \"font-style\":\n\t\t\tstl.italic = str[s] == \"italic\";\n\t\t\tbreak;\n\t\tcase \"underline\":\n\t\t\tstl.underline = str[s] == \"underline\";\n\t\t\tbreak;\n\t\tcase \"strike\":\n\t\t\tstl.strikethrough = str[s] == \"strike\";\n\t\t\tbreak;\n\t\tcase \"font-weight\":\n\t\t\tstl.bold = str[s] == \"bold\";\n\t\t\tbreak;\n\t\tcase \"vertical-align\":\n\t\t\tstl.vertAlign = str[s]; // not supported in PDFJS, so simulate with lineHeight and paddingTop\n\t\t\tbreak;\n\t\tcase \"wrap\":\n\t\t\tstl.whiteSpace = (str[s] != \"nowrap\");\n\t\t\tbreak;\n\t\tcase \"borders\":\n\t\t\tbreak;\n\t\tcase \"format\":\n\t\t\tbreak;\n\t\tcase \"border-right\":\n\t\tcase \"border-bottom\":\n\t\tcase \"border-left\":\n\t\tcase \"border-top\":{\n\t\t\tconst pos = style_names[s].split(\"-\")[1];\n\t\t\tstl[`border${pos[0].toUpperCase() + pos.substring(1)}Color`] = getBorderStyles(str[s]);\n\t\t\tbreak;\n\t\t}\n\t\tcase \"indent\":\n\t\t\tif(str[s]){\n\t\t\t\tconst name = `padding${ str[2] == \"right\" ? \"Right\" : \"Left\" }`;\n\t\t\t\tconst padding = table && table[name] ? table[name] : 10; // 10 - default padding value\n\t\t\t\tstl[name] = padding + str[s] * 6;\n\t\t\t}\n\t\t\tbreak;\n\t}\n}\n\nfunction getBorderStyles(val, excel){\n\tconst [color, type] = val.split(\",\");\n\n\tif(excel)\n\t\treturn { color:{ rgb:_safeColor(color)}, style:type};\n\telse\n\t\treturn _safeColor(color);\n}\n\nfunction _getDocStyle(css){\n\tif(!css) return {};\n\tconst str = [];\n\tfor(let i =0; i<style_names.length; i++)\n\t\tstr.push(css[style_names[i]]||\"\");\n\treturn _getCellStyle(str.join(\";\"), true);\n}","import { style_names } from \"../operations/styles\";\nimport { fontFamily} from \"../toolbar/buttons\";\nimport { defaultStyles} from \"../toolbar/defaults\";\nimport { formatCache, formatsCount } from \"../operations/formats\";\n\nexport function init(view){\n\tview._parseExcel = function(obj, driver){\n\t\tvar options = obj.options || {};\n\t\toptions.math = view.config.math;\n\n\t\tvar full = { sheets:[]};\n\t\tfor(let i  = 0; i< obj.names.length; i++){\n\t\t\toptions.name = obj.names[i];\n\t\t\tfull.sheets.push({\n\t\t\t\tname:options.name,\n\t\t\t\tstate:obj.states[i],\n\t\t\t\tcontent:_excel_to_data(driver.getSheet(obj, options), obj.ranges, i)\n\t\t\t});\n\t\t}\n\t\treturn full;\n\t};\n\tview._parseCsv = function(obj, driver){\n\t\tobj = driver.getRecords(obj);\n\n\t\tvar dataObj = webix.copy(obj);\n\t\tvar data = [];\n\n\t\tfor(let i = 0; i<dataObj.length; i++){\n\t\t\tlet item = dataObj[i].split(driver.cell);\n\t\t\tfor(let c  = 0; c<item.length; c++){\n\t\t\t\tvar row = i+1, column = c+1;\n\t\t\t\tdata.push([row, column, item[c]]);\n\t\t\t}\n\t\t}\n\t\treturn { data };\n\t};\n}\n\n\nfunction _excel_to_data(obj, ranges, index){\n\tvar dataObj = webix.copy(obj.data);\n\tvar data =  [];\n\n\tfor (let i = 0; i < dataObj.length; i++){\n\t\tfor(let c = 0; c<dataObj[0].length; c++){\n\t\t\tvar row = i+1, column = c+1;\n\t\t\tdata.push([row, column, dataObj[i][c]]);\n\t\t}\n\t}\n\tobj.data = data;\n\n\t//merged cells\n\tif(obj.spans){\n\t\tfor(let i = 0; i<obj.spans.length; i++){\n\t\t\tobj.spans[i][0]++;\n\t\t\tobj.spans[i][1]++;\n\t\t}\n\t}\n\n\t//named ranges\n\tif(ranges){\n\t\tfor(let r = 0; r < ranges.length; r++){\n\t\t\tconst sheetIndex = ranges[r].Sheet;\n\t\t\tconst book = webix.isUndefined(sheetIndex);\n\t\t\tif(book || sheetIndex === index){\n\t\t\t\tobj.ranges = obj.ranges || [];\n\t\t\t\tobj.ranges.push([ranges[r].Name.toUpperCase(), ranges[r].Ref.substring(ranges[r].Ref.indexOf(\"!\")+1).replace(/\\$/g, \"\"), book]);\n\t\t\t}\n\t\t}\n\t}\n\n\t//cell styles\n\tif(obj.styles)\n\t\t_getStyles(obj);\n\n\tif(obj.types)\n\t\t_getTypes(obj);\n\n\tif(obj.hidden){\n\t\t_getHidden(obj);\n\t}\n\n\t//column width and row height\n\tif(obj.sizes){\n\t\tfor(let i = 0; i<obj.sizes.length; i++){\n\t\t\tif(obj.sizes[i][0] == \"column\")\n\t\t\t\tobj.sizes[i] = [0, obj.sizes[i][1]+1, obj.sizes[i][2]];\n\t\t\telse\n\t\t\t\tobj.sizes[i] = [obj.sizes[i][1]+1, 0, obj.sizes[i][2]];\n\t\t}\n\t}\n\n\treturn obj; \n}\n\n//ARGB conversion\nfunction _safeColor(str){\n\tstr = str || \"000000\";\n\tif(str.length === 8) str = str.substring(2);\n\treturn \"#\"+str;\n}\n\n//only fonts that we support can be imported\nfunction _safeFont(str){\n\tlet safe = defaultStyles[\"font-family\"];\n\tfor(let i = 0; i<fontFamily.length; i++){\n\t\tif(fontFamily[i].value == str) { safe = fontFamily[i].id; break; }\n\t}\n\treturn safe;\n}\n\nfunction _getTypes(obj){\n\tobj.types.forEach(type => {\n\t\tfor(let i = 0; i < obj.data.length; i++){\n\t\t\tif(obj.data[i][0] === type[0]+1 && obj.data[i][1] === type[1]+1){\n\t\t\t\tobj.data[i][4] = type[2];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction _getHidden(obj){\n\tconst hidden = {\n\t\trow:[],\n\t\tcolumn:[]\n\t};\n\n\tfor(let i = 0; i < obj.hidden.length; i++){\n\t\tconst item = obj.hidden[i];\n\t\tif(item[0] == \"column\")\n\t\t\thidden.column.push(item[1]+1);\n\t\telse\n\t\t\thidden.row.push(item[1]+1);\n\t}\n\n\tobj.table = {hidden};\n}\n\nfunction _getBorderStyles(pos, stl){\n\tpos = pos.replace(\"border-\", \"\");\n\tif(stl.border && stl.border[pos]){\n\t\tconst border = stl.border[pos];\n\t\tconst color = _safeColor(border.color.rgb) || \"\";\n\t\tconst type = border.style || \"\";\n\t\treturn `${color},${type}`;\n\t}\n\treturn \"\";\n}\n\nfunction _getStyles(obj){\n\tlet stylescount = 1, fCount = formatsCount;\n\tconst styleshash = {}, styles = [], fCache = {}, formats = [];\n\n\tfor(let i = 0; i<obj.styles.length; i++){\n\t\tlet str = [], stl = obj.styles[i][2], css;\n\n\t\tfor(let s  = 0; s<style_names.length; s++){\n\t\t\tswitch (style_names[s]){\n\t\t\t\tcase \"color\": \n\t\t\t\t\tstr[s] = stl.font && stl.font.color?(_safeColor(stl.font.color.rgb)||\"\"):\"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"background\":\n\t\t\t\t\tstr[s] = stl.fill && stl.fill.fgColor?(_safeColor(stl.fill.fgColor.rgb) ||\"\"):\"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"text-align\":\n\t\t\t\t\tstr[s] = (stl.alignment ?stl.alignment.horizontal:\"\") || defaultStyles[\"text-align\"];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"font-family\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.name?_safeFont(stl.font.name):\"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"font-size\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.sz?((stl.font.sz/0.75)+\"px\" ||\"\"):\"\"; //pt to px conversion\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"font-style\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.italic?\"italic\":\"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"underline\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.underline?\"underline\":\"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"strike\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.strike?\"strike\":\"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"font-weight\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.bold?\"bold\":\"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"vertical-align\":\n\t\t\t\t\tvar va = stl.alignment ? (stl.alignment.vertical || \"\"):\"\";\n\t\t\t\t\tstr[s] = (va ==\"center\"?\"middle\":va) || defaultStyles[\"vertical-align\"];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"wrap\":\n\t\t\t\t\tstr[s] = stl.alignment && stl.alignment.wrapText?\"wrap\":\"nowrap\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"borders\":\n\t\t\t\t\tstr[s] = \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"format\":{\n\t\t\t\t\tconst format = stl.numFmt;\n\t\t\t\t\tlet name = \"\";\n\t\t\t\t\tif(format && format != \"General\"){\n\t\t\t\t\t\tif(formatCache[format])\n\t\t\t\t\t\t\tname = formatCache[format];\n\t\t\t\t\t\telse if(fCache[format])\n\t\t\t\t\t\t\tname = fCache[format];\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tname = fCache[format] = \"fmt\"+(fCount++);\n\t\t\t\t\t\t\tformats.push([name, format]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tstr[s] = name;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"border-right\":\n\t\t\t\tcase \"border-bottom\":\n\t\t\t\tcase \"border-left\":\n\t\t\t\tcase \"border-top\":\n\t\t\t\t\tstr[s] = _getBorderStyles(style_names[s], stl);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"indent\":\n\t\t\t\t\tstr[s] = stl.alignment && stl.alignment.indent ? stl.alignment.indent : \"\";\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tstr = str.join(\";\");\n\t\tcss = styleshash[str] || \"wss\"+stylescount;\n\n\t\tfor(let d = 0; d<obj.data.length; d++){\n\t\t\tif(obj.data[d][0] === obj.styles[i][0]+1 && obj.data[d][1] === obj.styles[i][1]+1){\n\t\t\t\tobj.data[d][3] = css;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif(!styleshash[str]){\n\t\t\tstyles.push([css, str]);\n\t\t\tstyleshash[str] = css;\n\t\t\tstylescount++;\n\t\t}\n\t}\n\n\tobj.formats = formats;\n\tobj.styles = styles;\n}","import group from \"../operations/undo_group\";\n\nexport function init(view){\n\tview.attachEvent(\"onCommand\", (action) => {\n\t\tswitch (action.id) {\n\t\t\tcase \"clear-value\":\n\t\t\t\tview.clearRange(null,{values: true});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-style\":\n\t\t\t\tview.clearRange(null,{styles: true});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-conditional-formats\":\n\t\t\t\tview.clearRange(null,{conditions: true});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-dropdown-editors\":\n\t\t\t\tview.clearRange(null,{editors: true});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-all\":\n\t\t\t\tgroup.set(function(){\n\t\t\t\t\tview.clearRange(null,null);\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-comments\":\n\t\t\t\tview.clearRange(null,{comments: true});\n\t\t\t\tbreak;\n\t\t}\n\t});\n}","import group from \"../operations/undo_group\";\nimport {adjustRow, adjustColumn} from \"../operations/column_operations\";\n\n/* row operations */\n\nexport function insertRow(row){\n\tcallCommand(this, \"add\", \"row\", row);\n}\n\nexport function deleteRow(row){\n\tcallCommand(this, \"del\", \"row\", row);\n}\n\nexport function setRowHeight(row, height){\n\tsetSize(this, \"row\", row, height);\n}\n\n/* col operations */\n\nexport function insertColumn(column){\n\tcallCommand(this, \"add\", \"column\", column);\n}\n\nexport function deleteColumn(column){\n\tcallCommand(this, \"del\", \"column\", column);\n}\n\nexport function setColumnWidth(column, width){\n\tsetSize(this, \"column\", column, width);\n}\n\n/* helpers */\n\nfunction getCells(view, id, group){\n\tif(!id){\n\t\tlet area = view.$$(\"cells\").getSelectArea();\n\t\tif(area)\n\t\t\tid = [area.start[group],area.end[group]];\n\t}\n\telse if(!webix.isArray(id)){\n\t\tid =  [id,id];\n\t}\n\treturn id;\n}\n\nfunction callCommand(view, name, group, id){\n\tlet start = {}, end = {};\n\tid = getCells(view, id, group);\n\tif(!id)\n\t\treturn;\n\tstart[group] = id[0];\n\tend[group] = id[1];\n\tview.callEvent(\"onCommand\", [{id:name,  group:group}, start, end]);\n}\n\nfunction setSize(view, type, id, size){\n\tid = getCells(view, id, type);\n\tif(!id)\n\t\treturn;\n\tgroup.set(()=>{\n\t\tfor (let i = id[0]; i <= id[1]; i++){\n\t\t\tif(size != \"auto\")\n\t\t\t\tview.$$(\"cells\")[type == \"row\" ? \"setRowHeight\" : \"setColumnWidth\"](i, size);\n\t\t\telse\n\t\t\t\t(type == \"row\" ? adjustRow : adjustColumn)(i, view);\n\t\t}\n\t});\n}","import * as lock from \"../operations/lock_cell\";\n\nexport function lockCell(row, column, state){\n\tlock.lockCell(this, row, column, state);\n}\n\nexport function isCellLocked(row, column){\n\treturn lock.isCellLocked(this, row, column);\n}","import group from \"../operations/undo_group\";\n\nexport function freezeColumns(column){\n\tconst grid = this.$$(\"cells\");\n\n\tif( webix.isUndefined(column) ){\n\t\tconst sel = grid.getSelectArea();\n\t\tcolumn = sel ? sel.end.column : 0;\n\t}\n\n\tconst base = grid.config.columns[0].id == \"rowId\" ? 1 : 0;\n\tlet index = base;\n\tif (column && column != this._frozenColumns){\n\t\tfor (let i = column; i > 0; i--) {\n\t\t\tindex = grid.getColumnIndex(i)+1;\n\t\t\tif(index)\n\t\t\t\tbreak;\n\t\t}\n\t\tif (!index) index = base;\n\t}\n\n\tgroup.set(function(){\n\t\tcheckSpans(this, \"column\", column);\n\t\tgrid.unselect();\n\t\tgrid.define(\"leftSplit\", index);\n\t\tgrid.refreshColumns();\n\n\t\tthis.callEvent(\"onAction\", [ \"freeze-column\", { value: (this._frozenColumns || 0), newValue: column}]);\n\t\tthis._frozenColumns = index - base;\n\t},this);\n}\n\nexport function freezeRows(row){\n\tconst grid = this.$$(\"cells\");\n\n\tif( webix.isUndefined(row) ){\n\t\tconst sel = grid.getSelectArea();\n\t\trow = sel ? sel.end.row : 0;\n\t}\n\n\tlet index = 0;\n\tif (row && row != this._frozenRows){\n\t\tfor (let i = row; i > 0; i--) {\n\t\t\tindex = grid.getIndexById(i)+1;\n\t\t\tif(index)\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tgroup.set(function(){\n\t\tcheckSpans(this, \"row\", row);\n\t\tgrid.unselect();\n\t\tgrid.define(\"topSplit\", index);\n\t\tgrid.refreshColumns();\n\n\t\tthis.callEvent(\"onAction\", [ \"freeze-row\", { value: this._frozenRows, newValue: row}]);\n\t\tthis._frozenRows = index;\n\t},this);\n}\n\nfunction checkSpans(view, type, num){\n\tconst grid = view.$$(\"cells\");\n\tconst spans = grid.getSpan();\n\tlet changed;\n\n\tfor(let row in spans){\n\t\tif(type == \"row\" && row > num)\n\t\t\tcontinue;\n\n\t\tfor (let col in spans[row]){\n\t\t\tif(type == \"column\" && col > num)\n\t\t\t\tcontinue;\n\n\t\t\tconst span = spans[row][col];\n\t\t\tconst spanSize = type == \"row\" ? (row*1) + span[1] - 1 : (col*1) + span[0] - 1;\n\n\t\t\tif(spanSize > num){\n\t\t\t\tchanged = true;\n\t\t\t\tchangeSpan(\n\t\t\t\t\tview,\n\t\t\t\t\t[row, col],\n\t\t\t\t\ttype == \"row\" ? span[0] : span[0] - (spanSize - num),\n\t\t\t\t\ttype == \"row\" ? span[1] - (spanSize - num) : span[1]\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif(changed)\n\t\tview.refresh();\n}\n\nfunction changeSpan(view, span, x, y){\n\tview.splitCell(span[0], span[1], true);\n\tview.combineCells(\n\t\t{\n\t\t\tcell:{\n\t\t\t\trow:span[0],\n\t\t\t\tcolumn:span[1]\n\t\t\t},\n\t\t\tx,\n\t\t\ty,\n\t\t},\n\t\ttrue\n\t);\n}","import * as gridlines from \"../operations/hide_gridlines\";\n\nexport function hideGridlines(state){\n\tgridlines.hideGridlines(this,state);\n}","import * as headers from \"../operations/hide_headers\";\n\nexport function hideHeaders(state){\n\theaders.hideHeaders(this,state);\n}","import * as hrows from \"../operations/hide_row_col\";\n\nexport function hideColumn(column,state){\n\throws.setState(this, column, state, \"column\");\n}\nexport function isColumnVisible(column){\n\treturn hrows.isColumnVisible(this, column);\n}\nexport function hideRow(row,state){\n\throws.setState(this, row, state, \"row\");\n}\nexport function isRowVisible(row){\n\treturn hrows.isRowVisible(this, row);\n}","import {image, chart} from \"../mathematics/writer\";\nimport {addMath} from \"../mathematics/methods\";\n\nexport function addImage(row, column, url){\n\tthis.setCellValue(row, column, image(url));\n\tthis.refresh();\n}\n\nexport function addSparkline(row, column, config){\n\tlet value = chart(config);\n\tthis.setCellValue(row, column, value);\n\tthis.refresh();\n}\n\n// getSheetData is deprecated, use ss.getCellValue(row, col, math, page), ss.getRangeValue(range, page) instead\nexport function getSheetData(name){\n\tif(this._mData.getPage(name))\n\t\treturn {\n\t\t\tgetValue: (r, c, math)=> this.getCellValue(r, c, math, name),\n\t\t\tgetRangeValue: (range)=> this.getRangeValue(range, name)\n\t\t};\n}\n\nexport function registerMathMethod(name, handler){\n\taddMath(this, name, handler, true);\n}\n\nexport function recalculate(){\n\tthis._mData.getStore().recalculate();\n\tthis.callEvent(\"onMathRefresh\",[]);\n\tthis.refresh();\n}\n\nexport function setPlaceholder(name, value){\n\tif(typeof name == \"object\"){\n\t\tvalue = name;\n\t\tname = \"*\";\n\t}\n\n\tthis._mData.getStore().setPlaceholder(name, value);\n\n\tthis.refresh();\n\tthis.callEvent(\"onMathRefresh\",[]);\n}","import * as sheets from \"../sheets\";\nimport * as spn from \"../operations/spans\";\nimport * as und from \"../operations/undo\";\nimport group from \"../operations/undo_group\";\nimport * as stl from \"../operations/styles\";\nimport * as srt from \"../operations/sorting\";\nimport {removeCommentsRange} from \"../operations/comments\";\nimport {clearConditionalFormats} from \"../operations/conditional_formats\";\nimport {clearEditors} from \"../operations/dropdown\";\nimport {clearFilters} from \"../operations/filter\";\nimport {showCells} from \"../operations/show_cells\";\n\n//spans\nexport function combineCells(range, silent){\n\tif(!range){\n\t\tvar sel = this.getSelectedId(true);\n\t\tif (sel.length>1){\n\t\t\trange = spn.getRange(sel);\n\t\t}\n\t}\n\tgroup.set(()=> {\n\t\tif (range)\n\t\t\tspn.addSpan(this, range.cell, range.x, range.y);\n\t});\n\n\tif(!silent)\n\t\tthis.refresh();\n}\n\nexport function splitCell(row, column, silent){\n\tif (row && column) {\n\t\tspn.removeSpan(this, {row: row, column: column});\n\t}\n\telse{\n\t\tgroup.set(function(){\n\t\t\tthis.eachSelectedCell(function(cell){\n\t\t\t\tspn.removeSpan(this, cell);\n\t\t\t});\n\t\t},this);\n\n\t}\n\n\tif(!silent)\n\t\tthis.refresh();\n}\n\n//styles\nexport function addStyle(prop, origin){\n\treturn stl.addStyle(this, prop, origin);\n}\n\nexport function getStyle(row, column){\n\treturn stl.getStyle(this, {row:row, column:column});\n}\n\nexport function setStyle(row, column, style){\n\treturn stl.setStyle(this, {row: row, column: column}, style);\n}\n\nexport function setRangeStyle(rangeStr, style){\n\tgroup.set(function() {\n\t\tstl.setRangeStyle(this, rangeStr, style);\n\t},this);\n}\n\nexport function clearRange(rangeStr, type) {\n\tif (!rangeStr){\n\t\trangeStr = this._table.getSelectArea();\n\t\tif (!rangeStr) return;\n\t}\n\n\tif (!type) type = {styles: true, values: true, editors:true, conditions:true, comments:true };\n\t\n\tif (type.styles)\n\t\tstl.clearRangeStyle(this,rangeStr);\n\n\tif (type.conditions)\n\t\tclearConditionalFormats(this,rangeStr);\n\t\n\tif (type.values)\n\t\tthis.setRangeValue(rangeStr, null);\n\n\tif (type.editors){\n\t\tclearEditors(this, rangeStr);\n\t\tclearFilters(this, rangeStr);\n\t}\n\n\tif (type.comments)\n\t\tremoveCommentsRange(this, rangeStr);\n\n\tthis.refresh();\n}\n\nexport function compactStyles(){\n\treturn stl.compactStyles(this);\n}\n\n//serialize\nexport function serialize(config){\n\tconst obj = {};\n\tthis.callEvent(\"onDataSerialize\",[obj, config]);\n\n\tif(config){\n\t\tif(config.compactStyles)\n\t\t\tobj.styles = stl.removeUnusedStyles(obj);\n\t\tif(config.sheets)\n\t\t\treturn sheets.serialize(this, obj, config);\n\t}\n\n\treturn obj;\n}\n\n//sheets\nexport function showSheet(name){\n\tsheets.show(this,name);\n}\nexport function setSheetState(name,state){\n\tsheets.setState(this,name,state);\n}\nexport function getSheetState(name){\n\treturn sheets.getSheet(this,name).state || \"visible\";\n}\nexport function getActiveSheet(){\n\treturn this._activeSheet;\n}\nexport function addSheet(content){\n\tsheets.add(this, content);\n}\nexport function clearSheet(){\n\tthis.reset();\n}\nexport function renameSheet(name,newName){\n\tsheets.rename(this,name,newName);\n}\nexport function editSheet(name){\n\tsheets.edit(this,name);\n}\nexport function removeSheet(name){\n\tsheets.remove(this,name);\n}\n\n//undo\nexport function undo(){\n\tund.undo(this);\n}\nexport function redo(){\n\tund.redo(this);\n}\n\n//sort\nexport function sortRange(range, dir){\n\tsrt.sortRange(this, range, dir);\n}\n\n//cells\nexport function showCell(ref, silent){\n\tshowCells(this, ref, silent);\n}","import {toRange,rangeObj,range as getRange} from \"../helpers/column_names\";\nimport * as tbl from \"../table\";\nimport group from \"../operations/undo_group\";\nimport {newSheet, prepareCell} from \"../sheets\";\nimport {getType, loadCell} from \"../operations/types\";\nimport {getExcelDateFromJs} from \"../mathematics/methods\";\nimport {checkFormat, getFormatFromData} from \"../operations/formats\";\nimport * as arr from \"../helpers/array\";\n\nexport function refresh(all){\n\tif (all)\n\t\tthis._table.refreshColumns();\n\telse\n\t\tthis._table.refresh();\n}\nexport function eachSelectedCell(cb){\n\tvar cells = this.getSelectedId(true);\n\tfor (var i=0; i<cells.length; i++)\n\t\tcb.call(this, cells[i]);\n}\nexport function getSelectedRange(sheet){\n\tvar area = this._table.getSelectArea();\n\tif (area){\n\t\tif (sheet)\n\t\t\tsheet = this.getActiveSheet();\n\t\treturn toRange(area.start.row,area.start.column,area.end.row,area.end.column,sheet);\n\t}\n\treturn \"\";\n}\nexport function getSelectedId(all){\n\tvar area = this._table.getSelectArea();\n\tif(!all)\n\t\treturn area && area.start.row ? area.start : null;\n\n\tvar selection = [];\n\tif(area){\n\t\tvar c0 = area.start;\n\t\tvar c1 = area.end;\n\n\t\tfor(var i = c0.row; i<= c1.row; i++){\n\t\t\tfor(var j = c0.column; j <= c1.column; j++){\n\t\t\t\tselection.push({row: i,column:j});\n\t\t\t}\n\t\t}\n\t}\n\n\treturn selection;\n\t//return this._table.getSelectedId(all)\n}\nexport function getCellValue(row, column, math, page){\n\tpage = page ? this._mData.getPage(page) : this._mPage;\n\n\tif(!page)\n\t\treturn;\n\n\tconst value = page.getValue(row-1, column-1, math !== false);\n\n\treturn correctVal(value);\n}\nexport function setCellValue(row, column, value, page){\n\tif(!page)\n\t\tpage = this.getActiveSheet();\n\n\tconst muonPage = this._mData.getPage(page);\n\tif(!muonPage)\n\t\treturn;\n\n\tvalue = correctVal(value);\n\tconst old = this.getCellValue(row, column, page);\n\tconst oldType = getType(this, row, column, page);\n\n\tlet sameValue;\n\tif(oldType == \"date\"){\n\t\tconst parser = webix.Date.strToDate( webix.i18n.spreadsheet.formats.parseDateTime );\n\t\tconst dateValue = isNaN(value) ? getExcelDateFromJs(parser(value)) : value;\n\t\tsameValue = old == dateValue;\n\t}\n\telse if(oldType != \"string\" && value !== \"\" && !isNaN(value) && old == value){\n\t\tsameValue = true;\n\t\tvalue = value*1;\n\t}\n\n\tif (!sameValue && old !== value){\n\t\tgroup.set(()=>{\n\t\t\tif (this.callEvent(\"onBeforeValueChange\",[row, column, value, old, page])){\n\t\t\t\tif(page != this.getActiveSheet()){\n\t\t\t\t\tconst sheet = arr.find(this._sheets, sheet => sheet.name == page).content;\n\t\t\t\t\tlet cell = arr.find(sheet.data, cell => cell[0] == row && cell[1] == column);\n\n\t\t\t\t\tif(!cell){\n\t\t\t\t\t\tcell = [row, column];\n\t\t\t\t\t\tsheet.data.push(cell);\n\t\t\t\t\t}\n\t\t\t\t\tcell[2] = value;\n\n\t\t\t\t\tthis._page_value_set = true;\n\t\t\t\t\tconst item = loadCell(this, sheet, cell);\n\t\t\t\t\tdelete this._page_value_set;\n\n\t\t\t\t\tconst muonItem = muonPage.getCell(row-1, column-1, true);\n\t\t\t\t\tmuonItem.$format = checkFormat({ fmt: getFormatFromData(sheet, cell) }, \"string\") ? 1 : 0;\n\t\t\t\t\tmuonPage.setValue(row-1, column-1, item.value);\n\n\t\t\t\t\tcell[2] = item.value;\n\t\t\t\t\tcell[4] = muonItem.type = item.type;\n\n\t\t\t\t\t//prepareCell can change style (1/1/2001 --loadCell--> 36892 + date type --prepareCell--> date format)\n\t\t\t\t\tprepareCell(cell, sheet, true);\n\t\t\t\t\tmuonItem.style = cell[3];\n\n\t\t\t\t\tthis.callEvent(\"onCellChange\", [row, column, item.value, page]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis._mPage.setValue(row-1, column-1, value);\n\n\t\t\t\t\t//onCellChange can change item (via types module)\n\t\t\t\t\tthis.callEvent(\"onCellChange\", [row, column, value, page]);\n\t\t\t\t\tconst updatedType = getType(this, row, column);\n\n\t\t\t\t\t//recalculate if we refer to a cell, where type is string and value is something like 005 or 5e5\n\t\t\t\t\tif(oldType != updatedType && updatedType == \"string\" && value[0] == \"=\" && value.length > 1)\n\t\t\t\t\t\tthis._mPage.setValue(row-1, column-1, value);\n\n\t\t\t\t\tif(/^=hyperlink\\(/i.test(value)){\n\t\t\t\t\t\tconst baseStyle = this.getStyle(row, column);\n\t\t\t\t\t\tconst urlStyle = this.addStyle({ color: \"#0000ff\", underline: \"underline\" }, baseStyle);\n\t\t\t\t\t\tthis.setStyle(row, column, urlStyle);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.saveCell(row, column, page);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction correctVal(val){\n\tif(typeof val === \"boolean\")\n\t\tval *= 1;\n\treturn val || val === 0 ? val : \"\";\n}\n\nexport function setRangeValue(range, value, page){\n\tgroup.set(function(){\n\t\tconst pos = rangeObj(range, this);\n\t\tlet i = 0;\n\t\tfor (let row = pos.start.row; row <= pos.end.row; row++) {\n\t\t\tfor (let column = pos.start.column; column <=  pos.end.column; column++, i++) {\n\t\t\t\tthis.setCellValue(row, column, webix.isArray(value) ? value[i] : value, page);\n\t\t\t}\n\t\t}\n\t},this);\n}\n\nexport function getRangeValue(range, page){\n\tif(!page)\n\t\tpage = this.getActiveSheet();\n\n\tconst pos = getRange(range, this, page);\n\tconst muonPage = this._mData.getPage(pos[4]);\n\n\tif (!pos || !muonPage) return [];\n\n\treturn muonPage.getRange(pos[0]-1, pos[1]-1, pos[2]-1, pos[3]-1).map(correctVal);\n}\n\nexport function getRow(id){\n\tconst row = webix.copy(this._table.getItem(id));\n\n\tfor(let i = 1; i <= this.config.columnCount; i++){\n\t\tconst cell = this._mPage.getCell(id-1, i-1);\n\n\t\tif(cell){\n\t\t\trow[i] = cell.value;\n\n\t\t\t[[\"style\", \"$cellCss\"], [\"type\", \"$cellType\"], [\"format\", \"$cellFormat\"]].forEach(param => {\n\t\t\t\tconst val = cell[param[0]];\n\t\t\t\tif(val){\n\t\t\t\t\tif(!row[param[1]])\n\t\t\t\t\t\trow[param[1]] = {};\n\t\t\t\t\trow[param[1]][i] = val;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tconst math =  this.getCellValue(id, i, true);\n\t\t\tif(math && math[0] == \"=\")\n\t\t\t\trow[\"$\"+i] = math;\n\t\t}\n\t}\n\n\treturn row;\n}\nexport function getColumn(id){\n\treturn this._table.getColumnConfig(id);\n}\nexport function reset(mode){\n\tvar obj = { data:[] };\n\tif (mode && mode.sheets){\n\t\tobj = newSheet(obj);\n\t}\n\t\n\tthis.parse(obj);\n}\n\nexport function _resetTable(){\n\ttbl.reset(this);\n}\n","import {save} from \"../operations/save\";\n\nexport function saveCell(row, column, page){\n\tvar style = this.getStyle(row, column);\n\n\tsave(this, \"data\", {\n\t\trow,\n\t\tcolumn,\n\t\tvalue: this.getCellValue(row, column, null, page),\n\t\tpage: page || this.getActiveSheet(),\n\t\tstyle: (style ? style.id : \"\")\n\t});\n}","export function setCellEditor(row, column, editor) {\n\tconst line = this._table._ssEditors[row] = this._table._ssEditors[row] || {};\n\tconst value = line[column] || null;\n\tline[column] = editor;\n\n\tif (editor && editor.editor){\n\t\tthis._table.addCellCss(row,column, \"ss_editor\");\n\t} else {\n\t\tdelete this._table._ssEditors[row][column];\n\t\tthis._table.removeCellCss(row,column, \"ss_editor\");\n\t}\n\tthis.callEvent(\"onAction\", [\"dropdown\", { row, column, value, newValue:editor }]);\n}\n\nexport function getCellEditor(row, column){\n\tlet line = this._table._ssEditors[row] || {};\n\treturn line[column] || null;\n}","import * as flt from \"../operations/filter\";\n\nexport function setCellFilter(row, column, filter){\n\tconst line = this._table._ssFilters[row] = this._table._ssFilters[row] || {};\n\tconst value = line[column] || null;\n\n\tif (filter && (webix.isArray(filter) || typeof filter == \"string\"))\n\t\tfilter = { options:filter };\n\tline[column] = filter;\n\n\tif (filter && typeof filter == \"object\"){\n\t\tthis._table.addCellCss(row,column, \"ss_filter\");\n\t\tif (filter.value && flt.isValueActive(filter.value))\n\t\t\tthis._table.addCellCss(row,column, \"ss_filter_active\");\n\n\t\twebix.extend(filter, {row, column}, true);\n\t\tfilter.options = flt.calibrateRange(this, row, column, filter.options);\n\n\t\tif (!filter.handler && filter.value && filter.value.condition){\n\t\t\tconst mode = filter.mode || flt.getFilterMode(this, row, column);\n\t\t\tfilter.handler = flt.getFilterFunction(mode, filter.value);\n\t\t}\n\t} else {\n\t\tdelete this._table._ssFilters[row][column];\n\t\tthis._table.removeCellCss(row,column, \"ss_filter\");\n\t\tthis._table.removeCellCss(row,column, \"ss_filter_active\");\n\t}\n\tthis.callEvent(\"onAction\", [\"filter\", { row, column, value, newValue:filter }]);\n}\n\nexport function getCellFilter(row, column){\n\tlet line = this._table._ssFilters[row] || {};\n\treturn line[column] || null;\n}\n\nexport function removeFilters(){\n\tconst filters = flt.getFilters(this._table);\n\n\tfor\t(let i=0; i<filters.length; i++){\n\t\tconst {row, column} = filters[i];\n\t\tthis.setCellFilter(row, column, null);\n\t}\n\n\tthis._table._ssFilters = {};\n\tthis._table.data.filter((obj) => {\n\t\treturn this.isRowVisible(obj.id);\n\t});\n}\n\n\nexport function filterSpreadSheet(){\n\tconst grid = this._table;\n\tgrid.data.silent(()=>{\n\t\t// hidden rows\n\t\tgrid.data.filter(obj => this.isRowVisible(obj.id));\n\n\t\tconst filters = flt.getFilters(grid);\n\t\tfor (let i = 0; i < filters.length; i++){\n\t\t\tconst {row, column, handler, lastRow} = filters[i];\n\n\t\t\tlet finished = false;\n\t\t\tgrid.data.filter(obj => {\n\t\t\t\tlet r = obj.id;\n\t\t\t\tif(r <= row || typeof handler != \"function\")\n\t\t\t\t\treturn true;\n\n\t\t\t\tconst span = grid.getSpan(r, column);\n\t\t\t\tif(span){\n\t\t\t\t\tif(span[0] == row && span[1] == column)\n\t\t\t\t\t\treturn true;\n\t\t\t\t\telse\n\t\t\t\t\t\tr = span[0];\n\t\t\t\t}\n\n\t\t\t\tconst value = String(this.getCellValue(r, column, false));\n\n\t\t\t\tif(lastRow){\n\t\t\t\t\tif(r > lastRow)\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\telse if(finished || !value)\n\t\t\t\t\treturn finished = true;\n\n\t\t\t\treturn handler(value);\n\t\t\t}, 1, true);\n\t\t}\n\t});\n\n\tgrid.callEvent(\"onAfterFilter\", []);\n\tgrid.refresh();\n}\n","export function confirm(config){\n\treturn webix.confirm({\n\t\tcontainer: this.$view,\n\t\tcss:\"webix_ssheet_confirm\",\n\t\ttext:config.text,\n\t\tok: webix.i18n.spreadsheet.labels.ok,\n\t\tcancel: webix.i18n.spreadsheet.labels.cancel\n\t});\n}\n\nexport function alert(config){\n\treturn webix.alert({\n\t\tcontainer: this.$view,\n\t\tcss: \"webix_ssheet_alert\",\n\t\ttext:config.text,\n\t\ttype:config.type,\n\t\tok: webix.i18n.spreadsheet.labels.ok\n\t});\n}","import * as undo from \"../operations/undo\";\nimport group from \"../operations/undo_group\";\n\nexport function resetUndo(){\n\tundo.reset(this);\n}\n\nexport function groupUndo(func){\n\tgroup.set(func, this);\n}\n\nexport function ignoreUndo(func){\n\tundo.ignoreUndo(func, this);\n}","import * as fmt from \"../operations/formats\";\n\nexport function setFormat(row, column, format){\n\tfmt.addFormat(this, row, column, format);\n}\n\nexport function changeDecimals(row, column, inc){\n\t//row and column may be obj\n\tfmt.changeAreaDecimals(this, inc, row, column);\n}","import * as formulas from \"../operations/show_formulas\";\n\nexport function showFormulas(state){\n\tformulas.showFormulas(this, state);\n}","import {showBorders} from \"../operations/print\";\n\nexport function showPrintBorders(value){\n\tconst old = !!this._printBorders.$render;\n\n\tif(value == \"toggle\")\n\t\tvalue = !old;\n\n\tif(value != old){\n\t\tif(value)\n\t\t\tshowBorders(this);\n\t\telse{\n\t\t\tdelete this._printBorders.$render;\n\t\t\tthis.refresh();\n\t\t}\n\n\t\tthis.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"print-borders\", value}]);\n\t\tthis.callEvent(\"onAction\", [\"print-borders\", {newValue: value, value: old}]);\n\t}\n}","const defaultMenu = [\n\t{ id:\"file\", submenu:[\n\t\t{id: \"sheet\", submenu: [\n\t\t\t{id: \"new-sheet\"},\n\t\t\t{id: \"copy-sheet\"},\n\t\t\t{id: \"remove-sheet\"},\n\t\t\t{id: \"hide-sheet\"}\n\t\t]},\n\t\t{id: \"excel-import\"},\n\t\t{id: \"excel-export\"},\n\t\t{id: \"print\"},\n\t\t{id: \"print-borders\"}\n\t]},\n\t{ id:\"edit\", submenu:[\n\t\t{id: \"add-range\"},\n\t\t{id: \"add-dropdown\"},\n\t\t{id: \"add-link\"},\n\t\t{id: \"lock-cell\"},\n\t\t{id: \"conditional-format\"},\n\t\t{id: \"clear\", submenu:[\n\t\t\t{id: \"clear-value\"},\n\t\t\t{id: \"clear-style\"},\n\t\t\t{id: \"clear-conditional-formats\"},\n\t\t\t{id: \"clear-dropdown-editors\"},\n\t\t\t{id: \"clear-comments\"},\n\t\t\t{ $template:\"Separator\" },\n\t\t\t{id: \"clear-all\"}\n\t\t]}\n\t]},\n\t{ id:\"insert\", submenu:[\n\t\t{id: \"image\", submenu:[\n\t\t\t{ id: \"add-image-cell\"},\n\t\t\t{ id: \"add-image-top\"}\n\t\t]},\n\t\t{id: \"graph\", submenu:[\n\t\t\t{ id: \"add-sparkline\"},\n\t\t\t{ id: \"add-chart\"}\n\t\t]},\n\t\t{id: \"add-comment\"}\n\t]},\n\t{ id:\"data\", submenu:[\n\t\t{id: \"sort\", submenu: [\n\t\t\t{id: \"sort-asc\"},\n\t\t\t{id: \"sort-desc\"}\n\t\t]},\n\t\t{id: \"create-filter\"}\n\t]},\n\t{ id: \"view\", submenu:[\n\t\t{id: \"columns\", submenu: [\n\t\t\t{id: \"insert-column\"},\n\t\t\t{id: \"delete-column\"},\n\t\t\t{id: \"show-column\"},\n\t\t\t{id: \"hide-column\"},\n\t\t\t{id: \"resize-column\"}\n\t\t]},\n\t\t{id: \"rows\", submenu: [\n\t\t\t{id: \"insert-row\"},\n\t\t\t{id: \"delete-row\"},\n\t\t\t{id: \"show-row\"},\n\t\t\t{id: \"hide-row\"},\n\t\t\t{id: \"resize-row\"}\n\t\t]},\n\t\t{ $template:\"Separator\" },\n\t\t{id: \"freeze-columns\"},\n\t\t{id: \"freeze-rows\"},\n\t\t{id: \"hide-gridlines\"},\n\t\t{id: \"hide-headers\"},\n\t\t{id: \"show-formulas\"}\n\t]}\n];\n\nconst readonlyMenu = [\n\t{ id:\"file\", submenu:[\n\t\t{id: \"excel-export\"},\n\t\t{id: \"print\"},\n\t\t{id: \"print-borders\"}\n\t]}\n];\n\nconst ui = {\n\tgetMenuData: function(menu, config){\n\t\tvar i;\n\t\tfor(i=0; i < menu.length; i++){\n\t\t\tif(typeof menu[i] == \"string\")\n\t\t\t\tmenu[i] = {id: menu[i]};\n\t\t\tif((menu[i].id == \"resize-column\" || menu[i].id == \"resize-row\") && !config.resizeCell){\n\t\t\t\tmenu.splice(i,1);\n\t\t\t\ti--;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(!menu[i].value)\n\t\t\t\tmenu[i].value = webix.i18n.spreadsheet.menus[menu[i].id];\n\t\t\tif(menu[i].submenu)\n\t\t\t\tmenu[i].submenu = this.getMenuData(menu[i].submenu, config);\n\t\t}\n\n\t\treturn menu;\n\t}\n};\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\tconst config = view.config;\n\tconst menu = {\n\t\tview: \"menu\",\n\t\tborderless: true,\n\t\tcss: \"webix_ssheet_menu\",\n\t\tid: \"menu\",\n\t\tautowidth: true,\n\t\ttype:{\n\t\t\theight: 40\n\t\t},\n\t\tdata: ui.getMenuData(\n\t\t\twebix.isArray(config.menu) ? config.menu : webix.copy(config.readonly ? readonlyMenu : defaultMenu),\n\t\t\tconfig\n\t\t)\n\t};\n\n\tview.callEvent(\"onViewInit\", [\"menu\", menu]);\n\treturn menu;\n}\n\n\nfunction ready(view){\n\tif(view.$$(\"menu\"))\n\t\tview.$$(\"menu\").attachEvent(\"onMenuItemClick\",(id) => callAction(view,id));\n}\n\nconst actionMap = {\n\t\"undo\": view => view.undo(),\n\t\"redo\": view => view.redo(),\n\t\"insert-column\": view => view.insertColumn(),\n\t\"delete-column\": view => view.deleteColumn(),\n\t\"show-column\": view => view.callEvent(\"onCommand\",[{id: \"show\", group: \"column\", neighbors:true}]),\n\t\"hide-column\": view => view.hideColumn(null,true),\n\t\"resize-column\": view => view.callEvent(\"onCommand\",[{\n\t\tid: \"resize\", group: \"column\", value: webix.i18n.spreadsheet.menus[\"resize-column\"]\n\t}]),\n\t\"insert-row\": view => view.insertRow(),\n\t\"delete-row\": view => view.deleteRow(),\n\t\"show-row\": view => view.callEvent(\"onCommand\",[{id: \"show\", group: \"row\", neighbors:true}]),\n\t\"hide-row\": view => view.hideRow(null,true),\n\t\"resize-row\": view => view.callEvent(\"onCommand\",[{id: \"resize\", group: \"row\", value: webix.i18n.spreadsheet.menus[\"resize-row\"]}]),\n\t\"freeze-columns\": view => view.freezeColumns(),\n\t\"freeze-rows\": view => view.freezeRows(),\n\t\"hide-gridlines\": view => view.hideGridlines(\"toggle\"),\n\t\"hide-headers\": view => view.hideHeaders(\"toggle\"),\n\t\"show-formulas\": view => view.showFormulas(\"toggle\"),\n\t\"print-borders\": view => view.showPrintBorders(\"toggle\")\n};\n\nfunction callAction(view,id){\n\tif(view.callEvent(\"onMenuItemClick\",[id])){\n\t\tif(actionMap[id])\n\t\t\tactionMap[id](view);\n\t\telse\n\t\t\tview.callEvent(\"onCommand\",[{id: id}]);\n\t}\n}","//global definitions\nimport \"./locale\";\nimport \"./views/index\";\n\n//special content for non-production builds\nimport \"./init\";\n\nimport \"./editors/index\";\n\n//modules\nimport * as bar from \"./toolbar\";\nimport * as tbl from \"./table\";\nimport * as key from \"./hotkeys\";\nimport * as editor from \"./editor\";\nimport * as sheets from \"./sheets\";\nimport * as dialogs from \"./dialogs/index\";\nimport * as context from \"./context\";\nimport * as chart from \"./chart\";\n\nimport {setDefaultFormats} from \"./operations/formats\";\nimport {operations} from \"./operations/index\";\nimport {api} from \"./api/index\";\n\n//styling\nimport * as menu from \"./menu\";\nimport {getDefaultStyles} from \"./helpers/conditional\";\nimport {setSkinDefaults} from \"./toolbar/defaults\";\n\nvar component = {\n\tname:\"spreadsheet\",\n\t_base_index:{ count:1 },\n\tdefaults:{\n\t\tspans: true,\n\t\tliveEditor: true,\n\t\trowCount:50,\n\t\tmath:true,\n\t\tcolumnCount:20,\n\t\tresizeCell: true,\n\t\tsheetTabWidth: 90,\n\t\tconditionStyle: getDefaultStyles()\n\t},\n\t$init:function(){\n\t\tthis.$index = (this._base_index.count++);\n\t\tthis.$view.className += \" webix_ssheet\";\n\n\t\tthis.$ready.unshift(this._sub_init);\n\t\tthis.$ready.unshift(setDefaultFormats);\n\t\tthis.$ready.push(this._set_handlers);\n\n\t\tthis._destroy_with_me = [];\n\t\tthis.attachEvent(\"onDestruct\", () => {\n\t\t\tthis._destroy_with_me.forEach(view => view.destructor());\n\t\t});\n\t},\n\t$skin:function(){\n\t\tsetSkinDefaults();\n\t},\n\t_sub_init:function(){\n\t\tconst obj = this.config;\n\t\tconst readonly = obj.readonly;\n\t\tconst rows = [];\n\n\t\t//toolbars\n\t\tif(obj.menu)\n\t\t\trows.push(menu.init(this));\n\t\tif((readonly && (obj.toolbar || obj.buttons)) || (!readonly && obj.toolbar !== false))\n\t\t\trows.push(bar.init(this));\n\t\tif (obj.subbar)\n\t\t\trows.push(obj.subbar);\n\t\tif(!readonly && obj.liveEditor)\n\t\t\trows.push(editor.init(this));\n\n\t\t//data part\n\t\tconst tblObj = {\n\t\t\teditable : !readonly,\n\t\t\tliveEditor: obj.liveEditor\n\t\t};\n\t\tif(obj.rowHeight)\n\t\t\ttblObj.rowHeight = obj.rowHeight;\n\t\tif(obj.columnWidth)\n\t\t\ttblObj.columnWidth = obj.columnWidth;\n\n\t\tif(readonly)\n\t\t\trows.push(tbl.init(this, tblObj));\n\t\telse\n\t\t\trows.push({cols:[tbl.init(this, tblObj), chart.init(this)]});\n\n\t\tconst bottom = obj.bottombar === true ? sheets.defaultBottom(this) : obj.bottombar;\n\t\tif (bottom)\n\t\t\trows.push(bottom);\n\n\t\tsheets.init(this);\n\n\t\tif(!readonly)\n\t\t\tcontext.init(this);\n\n\t\tdialogs.init(this);\n\n\t\tthis.rows_setter(rows);\n\t},\n\t_set_handlers:function(){\n\t\t//prevent double init\n\t\tif (this._table) return;\n\t\tthis._table = this.$$(\"cells\");\n\n\t\t//init all sub modules\n\t\toperations(this);\n\n\t\t//set sizes for the table\n\t\ttbl.reset(this, this.config.columnCount, this.config.rowCount);\n\t\tkey.init(this); //keyboard shortcuts\n\t\t\n\t\tthis._table.attachEvent(\"onAfterAreaAdd\", () =>\n\t\t\tthis.callEvent(\"onAfterSelect\", [ this.getSelectedId(true) ]));\n\n\t\tthis.callEvent(\"onComponentInit\", []);\n\t},\n\t$onLoad:function(obj, driver){\n\t\t//when loading data by data:, we can get $onLoad before _set_handlers call\n\t\tthis._set_handlers();\n\n\t\tconst excel = obj.excel;\n\n\t\tif (excel)\n\t\t\tobj = this._parseExcel(obj, driver);\n\t\telse if(!obj.data && typeof obj == \"string\" && (driver.cell || driver.row))\n\t\t\tobj = this._parseCsv(obj, driver);\n\n\t\tsheets.load(this, obj, excel);\n\t}\n};\napi(component);\nwebix.protoUI(component, webix.AtomDataLoader, webix.IdSpace, webix.ui.layout);\n","import {isCellSelected, isColSelected,isRowSelected,selectRow,selectColumn} from \"./operations/column_operations\";\nimport {getColumnOperation, getRowOperation, getClearOperation} from \"./toolbar/buttons\";\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => view.$$(\"context\").attachTo(view._table.$view));\n\n\tconst locale = webix.i18n.spreadsheet.menus;\n\n\tlet clipboard = [];\n\tif(view.config.clipboard !== false)\n\t\tclipboard = [\n\t\t\t{ id:\"cut\", value: locale.cut},\n\t\t\t{ id:\"copy\", value: locale.copy},\n\t\t\t{ id:\"paste\", value: locale.paste},\n\t\t\t{ id:\"special-paste\", value: locale[\"special-paste\"], submenu:[\n\t\t\t\t{id: \"paste-values\", value: locale[\"paste-values\"]},\n\t\t\t\t{id: \"paste-formulas\", value: locale[\"paste-formulas\"]},\n\t\t\t\t{id: \"paste-styles\", value: locale[\"paste-styles\"]},\n\t\t\t\t{id: \"paste-conditions\", value: locale[\"paste-conditions\"]},\n\t\t\t]}\n\t\t];\n\n\tconst lists = {\n\t\tdata: clipboard.concat([\n\t\t\t{ id:\"clear\",\t\tvalue: locale[\"clear\"], submenu: getClearOperation()},\n\t\t\t{ id:\"lock-cell\",\t\tvalue: locale[\"lock-cell\"]},\n\t\t\t{ $template: \"Separator\"},\n\t\t\t{ id:\"sort\",\tvalue: locale.sort, submenu:[\n\t\t\t\t{id: \"sort-asc\", value: locale[\"sort-asc\"]},\n\t\t\t\t{id: \"sort-desc\", value: locale[\"sort-desc\"]}\n\t\t\t]},\n\t\t\t{id:\"create-filter\",\t\tvalue: locale[\"create-filter\"]},\n\t\t\t{ $template: \"Separator\"},\n\t\t\t{ id:\"add-range\",\t\tvalue: locale[\"add-range\"]},\n\t\t\t{ id:\"add-link\",\t\tvalue: locale[\"add-link\"]},\n\t\t\t{ id:\"add-comment\",\t\tvalue: locale[\"add-comment\"]}\n\t\t]),\n\t\tcolumn: getColumnOperation(view),\n\t\trow: getRowOperation(view)\n\t};\n\n\n\tvar context = {\n\t\tview: \"contextmenu\",\n\t\tid: \"context\",\n\t\tpadding:0,\n\t\tsubmenuConfig:{\n\t\t\tpadding:0,\n\t\t\ton:{\n\t\t\t\tonBeforeShow:function(){\n\t\t\t\t\tthis.sizeToContent();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdata:[],\n\t\ton:{\n\t\t\tonMenuItemClick(id) {\n\t\t\t\tview.callEvent(\"onCommand\", [this.getMenuItem(id)]);\n\t\t\t},\n\t\t\tonBeforeShow(pos) {\n\t\t\t\twebix.callEvent(\"onClick\", []);\n\t\t\t\tvar mode, trg;\n\n\t\t\t\ttrg = view._table.locate(pos);\n\t\t\t\tif (!trg) return false;\n\n\t\t\t\tmode = \"\";\n\t\t\t\tif (trg.header && trg.column !== \"rowId\"){\n\t\t\t\t\tif (!isColSelected(trg.column, view))\n\t\t\t\t\t\tselectColumn(trg.column, view);\n\t\t\t\t\tmode = \"column\";\n\t\t\t\t} else if (trg.row){\n\t\t\t\t\tif (trg.column === \"rowId\"){\n\t\t\t\t\t\tif (!isRowSelected(trg.row, view))\n\t\t\t\t\t\t\tselectRow(trg.row, view);\n\t\t\t\t\t\tmode = \"row\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!isCellSelected(trg.row, trg.column, view))\n\t\t\t\t\t\t\tview._table.addSelectArea(trg, trg);\n\t\t\t\t\t\tmode = \"data\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (mode){\n\t\t\t\t\tvar data = getMenuData(view, mode, lists[mode]);\n\t\t\t\t\tif (data){\n\t\t\t\t\t\tthis.clearAll();\n\t\t\t\t\t\tthis.parse(data);\n\t\t\t\t\t\tthis.sizeToContent();\n\t\t\t\t\t\twebix.html.preventEvent(pos);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n\n\tview.callEvent(\"onViewInit\", [\"context\", context]);\n\tconst contextMenu = view.ui(context);\n\n\tview._destroy_with_me.push(contextMenu);\n}\n\nexport function getMenuData(view, name, data){\n\tvar ev = { area:name, data:data };\n\tif (view.callEvent(\"onContextMenuConfig\", [ev]))\n\t\treturn ev && ev.data;\n\treturn null;\n}","import * as m1  from \"./add_row_col\";\nimport * as m6  from \"./clipboard\";\nimport * as m12 from \"./column_operations\";\nimport * as m2  from \"./conditional_formats\";\nimport * as m4 from \"./types\";\nimport * as m8 from \"./formats\";\nimport * as m17 from \"./data\";\nimport * as m18 from \"./dropdown\";\nimport * as m7  from \"./formats\";\nimport * as m13 from \"./hide_row_col\";\nimport * as m14 from \"./lock_cell\";\nimport * as m3  from \"./resize\";\nimport * as m9  from \"./selection\";\nimport * as m10 from \"./sorting\";\nimport * as m16 from \"./spans\";\nimport * as m16a from \"../mathematics/methods\";\nimport * as m16b from \"../mathematics/ranges\";\nimport * as m16c from \"../mathematics/sheets\";\nimport * as m19 from \"./states\";\nimport * as m5  from \"./styles\";\nimport * as m11 from \"./undo\";\nimport * as m20 from \"./import\";\nimport * as m21 from \"./filter\";\nimport * as m22 from \"./print\";\nimport * as m23 from \"./export\";\nimport * as m24 from \"./load\";\nimport * as m25 from \"./clear_styles\";\nimport * as m26 from \"./comments\";\nimport * as m27 from \"./save\";\nimport * as m28 from \"./hide_headers\";\nimport * as m29 from \"./hide_gridlines\";\nimport * as m30 from \"./views\";\nimport * as m31 from \"./show_formulas\";\n\nexport function operations(view){\n\t//order in some cases does matter\n\t//resize must be applied after math, to size data by the result of math calculation\n\t//types must be applied after state and data \n\tvar all = [m1,m2,m5,m6,m7,m9,m10,m11,m12,m13,m14,m16,m3,m8,m17,m16a,m16b,m16c,m18,m19,m4,m20,m21,m22,m23,m24,m25,m26,m27,m28,m29,m30,m31];\n\tfor (var i = 0; i < all.length; i++){\n\t\tif (all[i].init)\n\t\t\tall[i].init(view);\n\t}\n}","import * as rco from \"./row_col_operations\";\nimport * as lcl from \"./lock_cell\";\nimport * as fcl from \"./freeze\";\nimport * as hbr from \"./hide_gridlines\";\nimport * as hhd from \"./hide_headers\";\nimport * as hrc from \"./hide_rows\";\nimport * as mat from \"./math\";\nimport * as ops from \"./operations\";\nimport * as cor from \"./core\";\nimport * as sav from \"./save\";\nimport * as dpd from \"./dropdown\";\nimport * as flt from \"./filter\";\nimport * as cfm from \"./confirm\";\nimport * as und from \"./undo\";\nimport * as fmt from \"./number_formats\";\nimport * as fml from \"./show_formulas\";\nimport * as prt from \"./print\";\n\nexport function api(view){\n\tvar all = [rco, lcl, fcl, hbr, hhd, hrc, mat, ops, cor, sav, dpd, flt, cfm, und, fmt, fml, prt];\n\tfor (var i = 0; i < all.length; i++)\n\t\twebix.extend(view, all[i]);\n}"],"names":["webix","i18n","spreadsheet","labels","tooltips","menus","table","liveEditor","formats","protoUI","name","$cssName","$init","config","options","view","body","tooltip","template","xCount","yCount","data","ui","richselect","defaults","width","skin","$name","margin","cols","scroll","select","obj","id","on","onAfterSelect","this","getParentView","updateMasterValue","value","rows","css","title","onChange","suggest","fitMaster","hide","getValue","$$","master","setValue","getList","getColorView","getTypeView","getSelectedId","getBody","getChildViews","getItemText","$ready","push","bind","getPopup","isArray","old","callEvent","join","height","palette","attachEvent","setMasterValue","colorboard","icon","borderless","$view","className","$renderInput","divStart","color","renderColor","call","replace","match","p1","p2","p3","colorpicker","prototype","$setValue","getColorNode","style","backgroundColor","firstChild","childNodes","$renderIcon","text","apply","arguments","Object","defineProperty","exports","t","r","1","2","3","e","assign","n","length","o","hasOwnProperty","i","a","u","f","s","h","c","p","v","code","g","source","l","d","b","M","pageName","substr","indexOf","toUpperCase","String","fromCharCode","charCodeAt","y","m","_","L","P","w","E","z","I","C","T","page","D","N","A","S","O","x","R","F","U","exec","broken","triggers","Function","Date","getFullYear","valueOf","getTimezoneOffset","Math","floor","round","getTime","isNaN","concat","k","toString","padStart","H","ceil","Y","B","j","G","q","$","W","K","Q","pow","J","Z","tt","rt","et","sqrt","nt","ot","it","CM","CD","XC","XL","X","IX","V","IV","at","ut","ft","st","ht","ct","pt","vt","gt","lt","abs","exp","dt","bt","Mt","yt","substring","Number","mt","_t","cos","cosh","sin","sinh","wt","Et","It","Ct","Tt","Dt","sort","Array","Nt","At","St","Ot","filter","reduce","xt","Rt","ABS","ACOS","acos","ACOSH","acosh","ACOT","atan","ACOTH","log","ADD","ARABIC","test","ASIN","asin","ASINH","asinh","ATAN","ATAN2","atan2","ATANH","AVEDEV","AVERAGE","AVERAGEA","BASE","max","BINOMDIST","BINOM.INV","BINOM.DIST.RANGE","BINOM.DIST","BITAND","BITLSHIFT","BITOR","BITRSHIFT","BITXOR","CEILING","COMBIN","COMBINA","COMPLEX","CORREL","COS","COSH","COT","tan","COTH","COUNT","COUNTA","COUNTBLANK","COVAR","COVARIANCE.P","COVARIANCE.S","CSC","CSCH","DEC2BIN","DEC2HEX","DEC2OCT","DECIMAL","parseInt","DEGREES","PI","DELTA","DEVSQ","forEach","DIVIDE","EQ","ERF","ERFC","EVEN","sign","EXP","FACT","FACTDOUBLE","FISHER","FISHERINV","FLOOR","GAMMA","isInteger","GCD","GEOMEAN","some","isFinite","GESTEP","GT","GTE","HARMEAN","HEX2BIN","HEX2DEC","HEX2OCT","IMABS","IMAGINARY","IMCONJUGATE","IMCOS","IMCOSH","IMCOT","IMCSC","IMCSCH","IMDIV","IMEXP","IMLN","IMPOWER","IMPRODUCT","slice","IMREAL","IMSEC","IMSECH","IMSIN","IMSINH","IMSQRT","IMSUB","IMSUM","IMTAN","INT","LARGE","LN","LOG","LOG10","LT","LTE","MAX","MEDIAN","MIN","MINUS","MOD","MROUND","MULTINOMIAL","MULTIPLY","NE","OCT2BIN","OCT2DEC","OCT2HEX","ODD","PERCENTILE","PERCENTILE.INC","PERCENTILE.EXC","PERMUT","POW","POWER","PRODUCT","QUARTILE","QUARTILE.INC","QUARTILE.EXC","QUOTIENT","RADIANS","RAND","random","RANDBETWEEN","ROMAN","split","pop","ROUND","parseFloat","toFixed","ROUNDDOWN","ROUNDUP","SEC","SECH","SIGN","SIN","SINH","SMALL","SQRT","SQRTPI","STDEV","STDEV.S","STDEV.P","STDEVA","STDEVP","STDEVPA","STEYX","SUBTOTAL","SUM","SUMPRODUCT","SUMSQ","SUMX2MY2","find","SUMX2PY2","SUMXMY2","TAN","TANH","tanh","TRUNC","VAR","VAR.S","VAR.P","VARA","VARP","VARPA","WEIBULL","WEIBULL.DIST","Lt","Pt","freeze","__proto__","CONCATENATE","LEFT","MID","RIGHT","LOWER","toLowerCase","UPPER","PROPER","addMath","handler","addMethod","sid","list","exists","add","getJsDateFromExcel","excelDate","date","getExcelDateFromJs","jsDate","init","math","IMAGE","url","escape","HYPERLINK","attrs","SPARKLINE","arr","type","color1","color2","negativeColor","paddingX","paddingY","extend","donut","horizontal","tableConfig","isCircle","columnWidth","rowHeight","Sparklines","getTemplate","keys","key","getJsDate","getExcelDate","datepicker","$prepareValue","copy","start","end","daterangepicker","buttons","close","getBodyConfig","content","elements","getFormElements","padding","$active","layoutPadding","form","label","cancel","autowidth","click","getTopParentView","save","hotkey","body_setter","_typeof","isUndefined","window","move","head","autofocus","IdSpace","headerRowHeight","datatable","getItem","setHTML","dataview","contextmenu","group","set","method","uid","all","serialize","sheets","proxy","$parse","$proxy","ajax","headers","post","thread","events","newName","_loading_data","params","activeSheet","getActiveSheet","clearTimeout","delay","decode","encode","alpha","indexToHeader","index","chars","quotient","updateMaxColumn","maxColumn","str","adress","size","col","range","nind","sheet","parts","ranges","getCode","rangeParts","d1","d2","escapeSheet","toRange","x2","y2","rangeObj","row","column","eachRange","callback","isRange","cells","isCell","cellTest","changeRange","inc","updated","r1","c1","r2","c2","toolbarSizes","sectorPadding","sectorMargin","defaultStyles","fonts","material","mini","flat","compact","contrast","willow","dark","style_names","_style_map","format","left","center","right","top","middle","bottom","wrap","getBorderCss","underline","strike","indent","count","pos","innerCss","border","sizeEl","border_checks","cell","area","mode","_style_handlers","getSelectArea","lineStyle","modes","_updateStyle","reset","_styles","_styles_cache","_styles_max","prefix","$index","html","removeStyle","getStyle","_mPage","getCell","span","getSpan","spanStyles","spanStyle","getFormat","addStyle","props","origin","styleFromText","map","styleToText","cache","_addStyle","_parse","styles","styleObj","update_style_data","nstyle","setStyle","_setStyle","setRangeStyle","getTextSize","baseWidth","innerHTML","_table","appendChild","offsetWidth","offsetHeight","removeChild","toolbar","oldFormat","formatChanged","saveCell","sel","silent","_buildCssString","outCss","clearRangeStyle","compactStyles","serialized","removeUnusedStyles","used","newStyles","_applyStyles","eachSelectedCell","_applyCellStyles","ostyle","oldVal","refresh","_serialize","_undoStyle","create","func","findIndex","result","getDimension","spans","line","spanEndRow","spanEndCol","formatsCount","formatCache","formatSources","formatHelpers","currencies","defaultFormats","common","setDefaultFormats","formatsLocale","price","getCurrencySymbol","trim","extra","minusSign","priceFormat","values","zeros","priceSettings","decimalSize","symbol","separator","negative","getDelimiters","numberFormat","percent","format2code","dateFormat","string","serializeFormat","formToValues","groupSign","groupDelimiter","decimalSign","decimalDelimiter","getFormatSource","toexcel","parseFormat","createFormatName","formatToForm","dates","timeFormat","fullDateFormat","longDateFormat","red","first","second","priceBrackets","currency","isPrice","delimiters","integer","decimal","addFormat","nev","removeFormat","splitFormat","conditional","errorMessage","separated","separateFmt","genCode","condition","fmt","err","check","ind","isAbs","genFormatCode","isQuote","comma","numberPlaceholder","textPlaceholder","symbolPos","multiply","lastDateType","val","betweenPlaceholders","placeholder","datePart","excelDateToWebix","undefined","getParts","reverse","lzeros","lfills","rzeros","rfills","rmax","dateTypes","timeTypes","dateOrder","timeOrder","typesOrder","order","types","changeAreaDecimals","getCells","rules","isNumber","changeCellDecimals","getFormatName","isCustom","updateDecimals","parsed","decimals","placeholders","withoutText","withoutPlaceholders","formValues","symbolId","toExcel","leftPlaceholders","fmtParts","sepFmtParts","getFmtPartValues","leftText","rightText","fmtPart","firstPlaceholder","Infinity","checkFormat","checkTime","quot","item","isDateInvalid","getDateEditFormat","formatName","locale","isTime","dateToStr","getFormatFromData","array","styleName","fmtName","load","isChar","char","getLastCharIndex","includeNumbers","lastChar","getWord","formula","quotes","operand","position","word","sum","flags","crosssheet","fromSheet","lines","ph","escaped","next","pushLine","loadCell","setType","dateToExcel","_page_value_set","setCellValue","getFormatType","formatType","getType","_mData","getPage","parseToStore","_setType","mathFormat","isFormula","parseDate","getMathFormat","blockLevel","level","methods","part","expectType","getExpectType","strToDate","parseDateTime","parser","ignoreUndo","checkType","$format","updateCell","isString","cellEditor","getCellEditor","setFormat","setCellEditor","editor","cursor","getInputNode","selectionStart","charAt","search","nextSymbol","node","tagName","_this","sizes","offset","textWidth","popup","show","setValueHere","$enterKey","isVisible","getCellValue","action","newValue","getPopupConfig","onItemClick","button","suggestData","highlight","_highlightedCells","_update_range","_last_value_set","activeCell","showActiveSheet","updateCellValue","blur","preventEvent","$handleSelection","UIManager","setFocus","eventRemove","keydownEv","event","_this2","endEdit","escapeText","changeCellCss","_activeMath","colorIndex","crossheet","cellSheet","prepareSheet","activeMath","cellText","rangeName","repeatedColor","nextCell","nextCellText","setColor","document","activeElement","paintValue","enter","grid","define","showSheet","moveSelection","remove","which","keyCode","shiftKey","getItemNode","newv","$setValueHere","str1","str2","setSelectionRange","expectOperator","setRange","len","lastPos","prepareArea","min","row1","col1","row2","col2","coloredArea","texthighlight","layout","drag","dragscroll","EditAbility","toggle","offValue","onValue","inp","awidth","aheight","$allowsClear","blockEvent","unblockEvent","arrowCss","arrow","iconCss","inputSpacing","elementsConfig","labelWidth","_initOnChange","$eventSource","_getCheckboxes","$hiddenSheet","$all","_count","base","hidden","labelRight","active","baseHeight","inputHeight","checkboxes","output","cfg","scrollview","queryView","onSelectChange","focus","resize","toFront","minWidth","minHeight","escHide","autofit","setAttribute","addHotKey","_removeView","getMenu","_clickEv","_menu","destructor","move_setter","DragControl","addDrag","$dragPos","$dragCreate","object","trg","target","getAttribute","elOffset","elPos","pOffset","parentNode","state","getScrollState","toNode","$dragDestroy","submenu","readonly","submenuConfig","externalUI","onMenuItemClick","_menuActions","onBeforeShow","_toggleExcel","dots","toPDF","display","toPNG","header","pull","showMenuItem","hideMenuItem","layoutMargin","multi","getSectionConfig","onAfterScroll","addSection","trashIcon","dataPadding","upper","marker","onClick","removeView","childs","getLayout","lastIndex","layoutId","addView","setValues","setSubValue","sub","hideSubviews","child","getValues","$getSize","bodySize","env","scrollSize","$setSize","oldScroll","editors","excel_date","createPopup","icons","timepicker","_last_input_target","onEnter","render","showPopup","input","updateCalendar","calendar","afterRender","ss_richselect","popupInit","$value","actions","isMerged","c0","splitCell","confirm","then","combineCells","undo","redo","hideGridlines","hideHeaders","freezeColumns","freezeRows","showFormulas","showPrintBorders","fontFamily","getColumnOperation","colOperations","neighbors","resizeCell","getRowOperation","rowOperations","getClearOperation","getLocaleClear","$template","borders","styleFormats","colorButton","toggleButton","iconButton","btn","segmented","popupWidth","popupTemplate","popupEvents","titleHeight","align","condFormat","buttonsMap","getCellFormats","example","number","getText","getAllElements","calcButtons","groups","$button","insert","ready","selected","updateValue","element","allElements","elm","bottombar","toolbarButtons","structure","checkButtons","getButtons","columns","block","blockColumns","bar","$customScroll","maxSize","limited","viewId","innerId","barStyles","getBarStyles","dropdowns","getCellStyles","cellStyle","property","splice","selectRow","endRow","last","_selectRange","selectAll","firstColumn","selectColumn","endColumn","isColSelected","selectedArea","isCellSelected","isRowSelected","selectColumns","addSelectArea","adjustColumn","getColumnConfig","eachRow","getCellFilter","setColumnWidth","adjustRow","eachColumn","getSpanNode","setRowHeight","highlightColRow","sr","er","sc","ec","removeCellCss","addCellCss","getHeaderNode","removeCss","addCss","lockCss","lockCell","_mapCellsCalls","_locks","isCellLocked","cm","lock","updatePosition","locked","rid","cid","addSpan","extraCss","getExtraCss","setSpanValue","isEmpty","removeSpan","getRange","lx","ly","rx","ry","cx","cy","setSpanCss","borderChecks","adjustSpan","spanData","checkSpan","selection","isFirstCell","pasteSpan","cutted","translate","mapCells","parse","isUndo","undoSpan","checkSpanBorders","isDate","conditions","batch","lastIndexOf","getStore","getContext","getConditionCss","rendered","_empty","collection","get","currentValue","rule","handlers","checkOrder","compare","addEmptyCollection","oldConditions","_pull","clear","rowId","columnId","clearConditionalFormats","_changeCondition","pasteCondition","oldCondition","newCondition","_normalizeValue","createRules","rId","cId","cond","update","newData","_setCondition","type_action","_undoCondition","getSheetData","tconfig","frozenColumns","frozenRows","_frozenColumns","_frozenRows","getState","ids","_undoValue","actionMap","_remove","_activeSheet","edit","setState","prepare","selectSheet","showItem","command","changePagerVisability","changePagerStatus","once","context","dataOrder","num","_sheets","rename","defaultBottom","tabWidth","sheetTabWidth","getSheetsPopup","maxHeight","autoheight","onShow","clearAll","maxWidth","editable","editaction","editValue","webix_ssheet_sheet_arrow","initSheetMenu","$sheetMenu","menuInit","menu","_destroy_with_me","callAction","getMark","oneSheet","disabled","scrollSheets","direction","scrollTo","scrollPos","disable","enable","$width","showBatch","tab","getSheet","visibleSheets","getVisible","showPrevious","_filterTabs","tabs","newIndex","getNewTitle","addPage","prepareData","prevIndex","removePage","changeId","renamePage","invalidValue","linkRegex","prepareCell","link","styleProperties","newSheet","DataStore","strict","sheetName","rowCount","columnCount","_resetTable","error","alert","showCells","ref","cellRef","rangePos","replaceAll","showCell","dragStartColumn","dragEndColumn","showCommentHandler","pointerType","comments","_activeComment","editStatus","locate","visible","commentsView","viewonly","contains","editMath","highlightHeaders","cop","ed","$anyKey","ev","getEditor","finalStep","resizeColumn","cind","dx","posRelative","selectColumnHandler","lastHeaderClick","headerClick","dblClick","lastClickedRow","editStop","getFocus","need_focus","setDefaultCss","leftSplit","areaselect","minColumnWidth","minRowHeight","navigation","cell_template","_v","valueOnly","formulasMode","invalidDate","helper","_print","el","nms","cssFormat","getRenderedValue","_printBorders","$render","refreshColumns","isMac","dialog","f2","del","styleHotKey","ctrlU","attr","elementOn","methodsName","nav","updateEditor","fillEditor","startEdit","symbols","disableEditor","_rangeDialog","en","pasteRange","updateRange","colon","isEnabled","clearEditor","setNavRange","getSelectedRange","isActiveCell","Dialog","$dialog","$hide","$show","unescape","DialogBox","box","preview","parseImage","server","images","image","showPreview","upload","onBeforeFileAdd","file","reader","FileReader","onload","getFormView","readAsDataURL","onFileUpload","response","imageURL","onSaveClick","okClick","onCancelClick","fillUrl","addImage","viewid","open","views","ignoreUndoReset","restoreHistory","_ssUndoHistory","_ssUndoCursor","addToHistory","$skipHistory","ignoreReset","step","prevData","undoHandlers","nvalue","ovalue","_trackAll","conf","viewMethods","_types","track","_trackOne","_fromRange","_isPie","_removeLegend","legend","fromData","shift","names","_getNames","switchDirection","dataSeries","legendRange","_getParts","_showAll","win","_correctPos","_showOne","_getWidth","_getHeight","each","$height","_isRange","_getDataParts","subdata","getRangeRows","getRangeCols","_getSeries","oldLeftColumn","dir","vals","xAxis","activeVals","series","firstRange","inActiveSeries","seria","activeVal","_getColor","colors","dataRange","subRange","_normalizeConfig","valign","scale","rangeToData","rind","editUIType","querySelector","register","container","_commands","getConfig","inner","renderConfig","_processTables","query","tables","oldWin","_activeWin","$destructed","_reset","_undoUI","_updateData","one","viewIds","_genChartConfig","htmlFilter","scaleColor","_prepareType","stacked","pie","pieLegend","legendConfig","yAxis","lineColor","lineShape","circle","borderColor","chartEditor","handlePieLegend","getLeftColumn","getTopRow","setSilentValue","updateLegendRange","updateXaxisRange","xAxisRange","leftColumn","topRow","exist","updateAlign","updateValign","updateType","isPie","isBar","markersVisible","hideField","hideBatch","switchRowsCols","updateSeries","oldXaxis","field","inValues","expand","closeEditor","activeSkin","barHeight","complexData","addRichselect","getTypes","vertical","getLegendAlign","getLegendValign","attributes","els","parseChart","color_def","color_pos","color_neg","renderPreview","visibleBatch","labelPosition","checkRange","sparkConfig","addSparkline","clearValidation","selectedCell","scope","toSheetRange","unshift","validate","oldData","_getScope","updateItem","unselect","_this3","theform","onBeforeSelect","removeRange","editRange","isNotEmpty","onFocus","saveClick","getRanges","selectedId","allRanges","nameParts","selectList","rangeVal","Ranges","_master","_normalizeName","_normalizeRange","globalRange","out","global","rangeOptions","getRangePos","getSpans","inSpan","boolean","unique","empty","objA","objB","sorters","sorting","as","int","nullFilter","$empty","_ssFilters","markBarFilter","getFilters","filters","clearFilters","refilter","filterSpreadSheet","calibrateRange","lastRow","getFilterRange","isValueActive","includes","isFilterExists","getFilterMode","pasteFilter","setCellFilter","getSingleOption","getConditions","getFilterFunction","opt","on_click","ssheet_filter_sign","on_dblclick","toggleFilters","removeFilters","isFilter","$mode","$filter","syncScroll","_getTargetNode","getFilter","flt","importData","relative","inputs","applyFilter","oldValue","setCellStyle","isHidden","nodeOffset","tableOffset","getElementsByClassName","ydiff","xdiff","fillForm","labelsLocale","commonConfig","customConfig","dateConfig","getFormats","updateForm","closeWin","isText","$css","_getDatalayout","value2","_formatValue","_isNotDateRule","editFormat","_safeInt","_getCondition","activeValue","_rulesToArr","current_view","_this4","onBlur","vid","dlayout","getIdByIndex","_this5","getRows","getConditionStyle","conditionStyle","getSheets","filename","restoreValue","print","htmlOnly","_buildHtml","doc","xCorrection","sheetnames","baseIndex","pageSize","getPageSize","$customPrint","children","topSplit","childElementCount","splitHeight","insertBefore","sheetNode","class","external","innerView","img","src","promise","defer","resolve","customPrint","printInnerView","br","res","docFooter","_cleanHtml","cloneNode","canvases","getElementsByTagName","drawImage","paper","landscape","printMargin","printPPI","showBorders","redraw","rowsHeight","fit","colsWidth","modal","onHide","stringResult","printPreview","_setComment","textarea","onViewResize","animate","showInput","addComment","comment","showTemplate","changeTextarea","getHead","getOption","optionHeight","bases","imt","imc","asw","rgs","dpd","cnd","lnk","pnt","cmt","loadChangedData","process","getUpdateValues","_delColumn","removeColumn","_addColumn","addColumn","_delRow","removeRow","_addRow","addRow","updatedData","fixSelectArea","isRowVisible","isColumnVisible","_ssEditors","clearEditors","pasteDropdown","dropdown","styledata","clipdata","updateFilters","specialPaste","getRow","ignore","$popup","tblEditors","isEditor","setClipboard","buffer","browserClipboard","_get_sel_style","mapSelection","writeText","allFiltersInZone","startRow","startCol","endCol","_clip_to_sel","leftTop","csv","delimiter","_changeDelimiter","getClipboardNumberFormat","record","cut","_add_row_col","maxRow","maxCol","colCount","dataRowCount","dataColCount","ri","ci","subtrans","_clipboardToTable","row_ind","col_ind","cdata","transposeMath","clipboardNumberFormat","clipboardDecimalDelimiter","decimalOptional","clipboard","navigator","clipbuffer","_sel_to_clip","_updateDelimiter","numToStr","stringify","ctrlKey","metaKey","readText","catch","finally","_hidden_cols_hash","_hidden_rows_hash","indexes","getIds","_showRow","_showColumn","_hideRow","_hideColumn","hash","showColumn","getColumnIndex","hideColumn","_updatePosition","hiddenIndex","hrows","hcols","_adjustRowHeight","spanHeight","textHeight","headerOnly","refreshSelectArea","getColumn","_undoResize","defWidth","defHeight","nsizes","bs","blockStart","blockEnd","removeSelectArea","sortRange","fullrange","expandSelection","maxY","maxX","nr1","nr2","nc1","nc2","newrange","by","newMath","updateSheetNames","oldName","stack","option","gridlines","firstVisible","removeComment","getComment","removeCommentsRange","commentCell","_undoComment","modules","m1","m2","m3","m4","m5","m6","m7","m8","uploader","XMLHttpRequest","apiOnly","accept","cellDates","startImport","fileDialog","_safeColor","_getCellStyle","excel","stl","font","alignment","_getExcelCellStyle","_getPdfCellStyle","rgb","fill","fgColor","sz","italic","bold","wrapText","getBorderStyles","textAlign","fontSize","strikethrough","vertAlign","whiteSpace","_getDocStyle","$exportView","pdf","export_mode","defaultOptions","stubCells","footer","heights","rawValues","filterHTML","_exportView","dataOnly","sheetOptions","_hidden","pdfTable","textBefore","sheetData","scheme","_getStyles","cached","cachedConditions","_getDefaults","docHeader","delta","rIndex","cIndex","_getCellConditions","computed","getComputedStyle","bg","_updateStyleCondition","rgbToHex","_updatePdfData","colspan","rowData","exportData","rowSize","pad","paddingTop","paddingBottom","Sheet","Name","Ref","getAutowidth","prop","orientation","$getExportValue","_excel_to_data","dataObj","sheetIndex","book","stylescount","fCount","styleshash","fCache","_safeFont","va","numFmt","_getBorderStyles","_getTypes","_getHidden","safe","_parseExcel","driver","full","states","_parseCsv","getRecords","clearRange","callCommand","setSize","insertRow","deleteRow","insertColumn","deleteColumn","checkSpans","changed","spanSize","changeSpan","getIndexById","hideRow","chart","getRangeValue","registerMathMethod","recalculate","setPlaceholder","spn","rangeStr","setRangeValue","setSheetState","getSheetState","addSheet","clearSheet","renameSheet","editSheet","removeSheet","und","srt","correctVal","cb","muonPage","sameValue","oldType","dateValue","muonItem","updatedType","baseStyle","urlStyle","param","tbl","finished","ok","resetUndo","groupUndo","changeDecimals","formulas","defaultMenu","readonlyMenu","getMenuData","component","_base_index","getDefaultStyles","_sub_init","_set_handlers","$skin","setSkinDefaults","background","subbar","tblObj","attachTo","paste","lists","sizeToContent","getMenuItem","contextMenu","dialogs","viewBases","rows_setter","operations","m9","m10","m11","m12","m13","m14","m16","m17","m16a","m16b","m16c","m18","m19","m20","m21","m22","m23","m24","m25","m26","m27","m28","m29","m30","m31","$onLoad","api","rco","lcl","fcl","hbr","hhd","hrc","mat","ops","cor","sav","cfm","fml","prt","AtomDataLoader"],"mappings":";;;;;;;;uJACAA,MAAMC,KAAKC,YCDI,CACdC,OAAO,QAEI,kBACE,kBACF,iBACC,eACH,cACE,uBACO,0BACA,2BACL,2BACD,oCACO,yBACJ,4BACA,qCAED,iBACL,YACA,YACA,aACC,eACC,gBACA,iBACC,aACL,WACG,eAEC,cACF,aAEC,6BAEa,+BACT,gCACQ,+BACG,iCACF,kCACE,kBAEf,sBACM,4BACD,qBACC,sBACA,uBACC,kBAEJ,mBACG,2BACC,qCACH,wCAEM,iCACD,yBACC,0BACA,6BACG,gCACA,0BAEN,8BACE,kCAEA,+BACA,gCACA,WAEZ,oBAEU,8BACM,6DACN,uBACD,wCACK,iCAEN,uBACD,kBACD,YAEH,yBACQ,8BACD,wBAEP,wBACO,0BACJ,0BAEA,gBACF,+BAEc,gFACA,8EACH,6EACN,uCACD,+BAEN,sBACM,sCACG,iCACH,4BACC,gBACN,oBACG,4BACC,+BACC,+BACF,yBACH,6BACK,mBACJ,2BACA,8BACG,2BACC,8BACE,4BACC,0BACH,8BACG,6BAEP,gBAEF,eACC,uBACM,gCACA,+BAEH,qBACE,sBACD,4BAEE,wBACA,wBACA,uBAED,6BACI,iCACA,gCACE,0BAEP,oBACA,mBACD,oBACE,oBACF,oBACE,uBACC,4BACI,4BAEL,uBACC,wBACA,uBACD,4BACM,kCACA,4BACA,0BACF,6CACA,6CACA,yCACA,2CACE,6BACC,6BACD,0BACF,yBACC,0BACA,sEAEJ,4BACI,2CACA,iDACE,oCACA,4BACD;qBACC,8BACC,+BACA,oCACH,4BACG,+BACA,sBAET,uBACG,6BACG,2BACL,6BACO,mBACV,wBACE,uBACG,yBACF,2BAEI,mCACF,uBACH,uBAEG,iCACO,kCACE,mCACD,gCACF,uBAEP,0BAEM,iBAEtBC,SAAU,OACA,wBACK,iCACC,0BACF,yBACC,oCACI,yBACP,uBACG,+BACE,4BACD,6BACE,gCACC,8BACH,8BACE,qCACK,yCACL,4BACH,4BACE,6BACD,0BACF,2BACG,8BACA,oBACR,aACA,iBACA,YACA,cACE,oCACU,8CACA,wCACL,oBACD,mBACD,mBACH,0BACQ,qCACF,oCACC,qCACA,0CACA,yCACE,sCACN,8CACE,qCACF,wBACA,yBACJ,mBACG,eACL,cACG,gBACD,oBACI,wBACI,sBACF,4BACK,oCACD,+BACL,cAEfC,MAAM,gBACW,8BACA,4BACF,kBACN,aACD,kBACM,2BACG,mCACA,wBACP,sBACK,yBACN,YACA,YACA,eACG,0BACM,gCACA,8BACF,4BACA,8BACE,qBACT,oBACM,0BACA,wBACF,sBACA,wBACE,oBACJ,8BACY,4BACZ,cACF,aACC,sBACK,uBACA,qCACc,+CACH,yCACR,uBACL,YACH,yBACQ,8BACD,wBACP,wBACO,0BACJ,uBACJ,kBACI,uBACC,oBACL,kBACI,0BACC,mBACL,wBACU,wCACH,wCACG,qCACF,oCACC,qCACA,uCACD,2BACH,yBACJ,wBACQ,wCACH,cACP,WACC,aACC,wBACQ,+BACD,0BACE,0BACF,4BACI,uBAErBC,MAAM,cACQ,2BACI,uBACF,oBAEhBC,WAAW,MACH,SAERC,QAAQ;WACO,wBACA,6BACI,8BACA,uCACD,8BACJ,sBACC,CACb,UACA,SACA,WACA,gBCzVHR,MAAMS,QAAQ,CACbC,KAAM,eACNC,SAAS,aACTC,MAAO,SAASC,GACfA,EAAOC,QAAW,CACjBC,KAAK,cACLC,KAAK,CACJD,KAAM,eACNE,QAAS,CACRC,SAAS,aAEVC,OAAO,EAAGC,OAAO,GAElBC,KAAMR,EAAOQ,QAGdrB,MAAMsB,GAAGC,YChBXvB,MAAMS,QAAQ,CACbC,KAAM,yBACNc,SAAS,CACRC,MAAO,KAERb,MAAO,SAASC,OACTa,EAAO1B,MAAM0B,KAAKC,MACxBd,EAAOG,KAAO,CACbY,OAAQ,EACRC,KAAK,CACJ,CAAEd,KAAM,eAAgBe,QAAQ,EAAOC,QAAQ,EAC9CZ,OAAQ,EACRC,OAAQ,EACRH,QAAS,CACRC,SAAU,SAASc,UACXhC,MAAMC,KAAKC,YAAYE,SAAS,WAAW4B,EAAIC,MAGxDC,GAAG,CACFC,cAAe,WACAC,KAAKC,gBAAgBA,gBAC3BC,mBAA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"}